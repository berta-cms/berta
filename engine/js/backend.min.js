!function(){this.MooTools={version:"1.4.5",build:"ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0"};var t,a=this.typeOf=function(t){if(null==t)return"null";if(null!=t.$family)return t.$family();if(t.nodeName){if(1==t.nodeType)return"element";if(3==t.nodeType)return/\S/.test(t.nodeValue)?"textnode":"whitespace"}else if("number"==typeof t.length){if(t.callee)return"arguments";if("item"in t)return"collection"}return typeof t},e=this.instanceOf=function(t,e){if(null==t)return!1;for(var n=t.$constructor||t.constructor;n;){if(n===e)return!0;n=n.parent}return!!t.hasOwnProperty&&t instanceof e},n=this.Function,o=!0;for(t in{toString:1})o=null;o=o&&["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"],n.prototype.overloadSetter=function(r){var s=this;return function(t,e){if(null!=t)if(r||"string"!=typeof t){for(var n in t)s.call(this,n,t[n]);if(o)for(var i=o.length;i--;)n=o[i],t.hasOwnProperty(n)&&s.call(this,n,t[n])}else s.call(this,t,e);return this}},n.prototype.overloadGetter=function(r){var s=this;return function(t){var e;if("string"!=typeof t?e=t:1<arguments.length?e=arguments:r&&(e=[t]),e)for(var n={},i=0;i<e.length;i++)n[e[i]]=s.call(this,e[i]);else n=s.call(this,t);return n}},n.prototype.extend=function(t,e){this[t]=e}.overloadSetter(),n.prototype.implement=function(t,e){this.prototype[t]=e}.overloadSetter();function i(t){switch(a(t)){case"array":return t.clone();case"object":return Object.clone(t);default:return t}}function u(t,e,n){switch(a(n)){case"object":"object"==a(t[e])?Object.merge(t[e],n):t[e]=Object.clone(n);break;case"array":t[e]=n.clone();break;default:t[e]=n}return t}var c=Array.prototype.slice,h=(n.from=function(t){return"function"==a(t)?t:function(){return t}},Array.from=function(t){return null==t?[]:h.isEnumerable(t)&&"string"!=typeof t?"array"==a(t)?t:c.call(t):[t]},Number.from=function(t){t=parseFloat(t);return isFinite(t)?t:null},String.from=function(t){return t+""},n.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}}),this.Type=function(t,e){var n;return t&&(n=t.toLowerCase(),h["is"+t]=t=function(t){return a(t)==n},null!=e)&&(e.prototype.$family=function(){return n}.hide(),e.type=t),null==e?null:(e.extend(this),e.$constructor=h,e.prototype.$constructor=e)}),r=Object.prototype.toString,s=(h.isEnumerable=function(t){return null!=t&&"number"==typeof t.length&&"[object Function]"!=r.call(t)},{}),l=function(t){t=a(t.prototype);return s[t]||(s[t]=[])},f=function(t,e){if(!e||!e.$hidden){for(var n=l(this),i=0;i<n.length;i++){var r=n[i];"type"==a(r)?f.call(r,t,e):r.call(this,t,e)}var s=this.prototype[t];null!=s&&s.$protected||(this.prototype[t]=e),null==this[t]&&"function"==a(e)&&p.call(this,t,function(t){return e.apply(t,c.call(arguments,1))})}},p=function(t,e){var n;e&&e.$hidden||null!=(n=this[t])&&n.$protected||(this[t]=e)},d=(h.implement({implement:f.overloadSetter(),extend:p.overloadSetter(),alias:function(t,e){f.call(this,t,this.prototype[e])}.overloadSetter(),mirror:function(t){return l(this).push(t),this}}),new h("Type",h),function(t,e,r){var n=e!=Object,s=e.prototype;n&&(e=new h(t,e));for(var o,i=0,a=r.length;i<a;i++){var u=r[i],c=e[u],l=s[u];c&&c.protect(),n&&l&&e.implement(u,l.protect())}return n&&(o=s.propertyIsEnumerable(r[0]),e.forEachMethod=function(t){if(!o)for(var e=0,n=r.length;e<n;e++)t.call(s,s[r[e]],r[e]);for(var i in s)t.call(s,s[i],i)}),d}),m=(d("String",String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",n,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=p.overloadSetter(),Date.extend("now",function(){return+new Date}),new h("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}),Object.prototype.hasOwnProperty),g=(Object.extend("forEach",function(t,e,n){for(var i in t)m.call(t,i)&&e.call(n,t[i],i,t)}),Object.each=Object.forEach,Array.implement({forEach:function(t,e){for(var n=0,i=this.length;n<i;n++)n in this&&t.call(e,this[n],n,this)},each:function(t,e){return Array.forEach(this,t,e),this}}),Array.implement("clone",function(){for(var t=this.length,e=new Array(t);t--;)e[t]=i(this[t]);return e}),Object.extend({merge:function(t,e,n){if("string"==a(e))return u(t,e,n);for(var i=1,r=arguments.length;i<r;i++){var s,o=arguments[i];for(s in o)u(t,s,o[s])}return t},clone:function(t){var e,n={};for(e in t)n[e]=i(t[e]);return n},append:function(t){for(var e=1,n=arguments.length;e<n;e++){var i,r=arguments[e]||{};for(i in r)t[i]=r[i]}return t}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(t){new h(t)}),Date.now()),v=(String.extend("uniqueID",function(){return(g++).toString(36)}),this.Hash=new h("Hash",function(t){for(var e in t="hash"==a(t)?Object.clone(t.getClean()):t)this[e]=t[e];return this})),y=(v.implement({forEach:function(t,e){Object.forEach(this,t,e)},getClean:function(){var t,e={};for(t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},getLength:function(){var t,e=0;for(t in this)this.hasOwnProperty(t)&&e++;return e}}),v.alias("each","forEach"),Object.type=h.isObject,this.Native=function(t){return new h(t.name,t.initialize)}),b=(y.type=h.type,y.implement=function(t,e){for(var n=0;n<t.length;n++)t[n].implement(e);return y},Array.type);Array.type=function(t){return e(t,Array)||b(t)},this.$A=function(t){return Array.from(t).slice()},this.$arguments=function(t){return function(){return arguments[t]}},this.$chk=function(t){return!(!t&&0!==t)},this.$clear=function(t){return clearTimeout(t),clearInterval(t),null},this.$defined=function(t){return null!=t},this.$each=function(t,e,n){var i=a(t);("arguments"==i||"collection"==i||"array"==i||"elements"==i?Array:Object).each(t,e,n)},this.$empty=function(){},this.$extend=function(t,e){return Object.append(t,e)},this.$H=function(t){return new v(t)},this.$merge=function(){var t=Array.slice(arguments);return t.unshift({}),Object.merge.apply(null,t)},this.$lambda=n.from,this.$mixin=Object.merge,this.$random=Number.random,this.$splat=Array.from,this.$time=Date.now,this.$type=function(t){t=a(t);return"elements"==t?"array":"null"!=t&&t},this.$unlink=function(t){switch(a(t)){case"object":return Object.clone(t);case"array":return Array.clone(t);case"hash":return new v(t);default:return t}}}(),Array.implement({every:function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0},filter:function(t,e){for(var n,i=[],r=0,s=this.length>>>0;r<s;r++)r in this&&(n=this[r],t.call(e,n,r,this))&&i.push(n);return i},indexOf:function(t,e){for(var n=this.length>>>0,i=e<0?Math.max(0,n+e):e||0;i<n;i++)if(this[i]===t)return i;return-1},map:function(t,e){for(var n=this.length>>>0,i=Array(n),r=0;r<n;r++)r in this&&(i[r]=t.call(e,this[r],r,this));return i},some:function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1},clean:function(){return this.filter(function(t){return null!=t})},invoke:function(e){var n=Array.slice(arguments,1);return this.map(function(t){return t[e].apply(t,n)})},associate:function(t){for(var e={},n=Math.min(this.length,t.length),i=0;i<n;i++)e[t[i]]=this[i];return e},link:function(t){for(var e={},n=0,i=this.length;n<i;n++)for(var r in t)if(t[r](this[n])){e[r]=this[n],delete t[r];break}return e},contains:function(t,e){return-1!=this.indexOf(t,e)},append:function(t){return this.push.apply(this,t),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(t){return this.contains(t)||this.push(t),this},combine:function(t){for(var e=0,n=t.length;e<n;e++)this.include(t[e]);return this},erase:function(t){for(var e=this.length;e--;)this[e]===t&&this.splice(e,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var t=[],e=0,n=this.length;e<n;e++){var i=typeOf(this[e]);"null"!=i&&(t=t.concat("array"==i||"collection"==i||"arguments"==i||instanceOf(this[e],Array)?Array.flatten(this[e]):this[e]))}return t},pick:function(){for(var t=0,e=this.length;t<e;t++)if(null!=this[t])return this[t];return null},hexToRgb:function(t){var e;return 3!=this.length?null:(e=this.map(function(t){return 1==t.length&&(t+=t),t.toInt(16)}),t?e:"rgb("+e+")")},rgbToHex:function(t){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!t)return"transparent";for(var e=[],n=0;n<3;n++){var i=(+this[n]).toString(16);e.push(1==i.length?"0"+i:i)}return t?e:"#"+e.join("")}}),Array.alias("extend","append");var $pick=function(){return Array.from(arguments).pick()},$try=(String.implement({test:function(t,e){return("regexp"==typeOf(t)?t:new RegExp(""+t,e)).test(this)},contains:function(t,e){return e?-1<(e+this+e).indexOf(e+t+e):-1<String(this).indexOf(t)},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(t){return"-"+t.charAt(0).toLowerCase()})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(t){return parseInt(this,t||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(t){var e=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return e?e.slice(1).hexToRgb(t):null},rgbToHex:function(t){var e=String(this).match(/\d{1,3}/g);return e?e.rgbToHex(t):null},substitute:function(n,t){return String(this).replace(t||/\\?\{([^{}]+)\}/g,function(t,e){return"\\"==t.charAt(0)?t.slice(1):null!=n[e]?n[e]:""})}}),Number.implement({limit:function(t,e){return Math.min(e,Math.max(t,this))},round:function(t){return t=Math.pow(10,t||0).toFixed(t<0?-t:0),Math.round(this*t)/t},times:function(t,e){for(var n=0;n<this;n++)t.call(e,n,this)},toFloat:function(){return parseFloat(this)},toInt:function(t){return parseInt(this,t||10)}}),Number.alias("each","times"),(()=>{var e={};["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"].each(function(t){Number[t]||(e[t]=function(){return Math[t].apply(null,[this].concat(Array.from(arguments)))})}),Number.implement(e)})(),Function.extend({attempt:function(){for(var t=0,e=arguments.length;t<e;t++)try{return arguments[t]()}catch(t){}return null}}),Function.implement({attempt:function(t,e){try{return this.apply(e,Array.from(t))}catch(t){}return null},bind:function(n){var i=this,r=1<arguments.length?Array.slice(arguments,1):null,s=function(){},o=function(){var t=n,e=arguments.length,e=(this instanceof o&&(s.prototype=i.prototype,t=new s),r||e?i.apply(t,r&&e?r.concat(Array.slice(arguments)):r||arguments):i.call(t));return t==n?e:t};return o},pass:function(t,e){var n=this;return null!=t&&(t=Array.from(t)),function(){return n.apply(e,t||arguments)}},delay:function(t,e,n){return setTimeout(this.pass(null==n?[]:n,e),t)},periodical:function(t,e,n){return setInterval(this.pass(null==n?[]:n,e),t)}}),delete Function.prototype.bind,Function.implement({create:function(i){var r=this;return i=i||{},function(t){function e(){return r.apply(i.bind||null,n)}var n=null!=(n=i.arguments)?Array.from(n):Array.slice(arguments,i.event?1:0);i.event&&(n=[t||window.event].extend(n));return i.delay?setTimeout(e,i.delay):i.periodical?setInterval(e,i.periodical):i.attempt?Function.attempt(e):e()}},bind:function(t,e){var n=this;return null!=e&&(e=Array.from(e)),function(){return n.apply(t,e||arguments)}},bindWithEvent:function(e,n){var i=this;return null!=n&&(n=Array.from(n)),function(t){return i.apply(e,null==n?arguments:[t].concat(n))}},run:function(t,e){return this.apply(e,Array.from(t))}}),Object.create==Function.prototype.create&&(Object.create=null),Function.attempt),Event=((()=>{var o=Object.prototype.hasOwnProperty;Object.extend({subset:function(t,e){for(var n={},i=0,r=e.length;i<r;i++){var s=e[i];s in t&&(n[s]=t[s])}return n},map:function(t,e,n){var i,r={};for(i in t)o.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},filter:function(t,e,n){var i,r={};for(i in t){var s=t[i];o.call(t,i)&&e.call(n,s,i,t)&&(r[i]=s)}return r},every:function(t,e,n){for(var i in t)if(o.call(t,i)&&!e.call(n,t[i],i))return!1;return!0},some:function(t,e,n){for(var i in t)if(o.call(t,i)&&e.call(n,t[i],i))return!0;return!1},keys:function(t){var e,n=[];for(e in t)o.call(t,e)&&n.push(e);return n},values:function(t){var e,n=[];for(e in t)o.call(t,e)&&n.push(t[e]);return n},getLength:function(t){return Object.keys(t).length},keyOf:function(t,e){for(var n in t)if(o.call(t,n)&&t[n]===e)return n;return null},contains:function(t,e){return null!=Object.keyOf(t,e)},toQueryString:function(t,r){var s=[];return Object.each(t,function(t,e){var n;switch(r&&(e=r+"["+e+"]"),typeOf(t)){case"object":n=Object.toQueryString(t,e);break;case"array":var i={};t.each(function(t,e){i[e]=t}),n=Object.toQueryString(i,e);break;default:n=e+"="+encodeURIComponent(t)}null!=t&&s.push(n)}),s.join("&")}})})(),Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(t){return Object.keyOf(this,t)},hasValue:function(t){return Object.contains(this,t)},extend:function(t){return Hash.each(t||{},function(t,e){Hash.set(this,e,t)},this),this},combine:function(t){return Hash.each(t||{},function(t,e){Hash.include(this,e,t)},this),this},erase:function(t){return this.hasOwnProperty(t)&&delete this[t],this},get:function(t){return this.hasOwnProperty(t)?this[t]:null},set:function(t,e){return this[t]&&!this.hasOwnProperty(t)||(this[t]=e),this},empty:function(){return Hash.each(this,function(t,e){delete this[e]},this),this},include:function(t,e){return null==this[t]&&(this[t]=e),this},map:function(t,e){return new Hash(Object.map(this,t,e))},filter:function(t,e){return new Hash(Object.filter(this,t,e))},every:function(t,e){return Object.every(this,t,e)},some:function(t,e){return Object.some(this,t,e)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(t){return Object.toQueryString(this,t)}}),Hash.extend=Object.append,Hash.alias({indexOf:"keyOf",contains:"hasValue"}),!function(){var n=this.document,i=n.window=this,t=navigator.userAgent.toLowerCase(),e=navigator.platform.toLowerCase(),r=t.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],s="ie"==r[1]&&n.documentMode,o=this.Browser={extend:Function.prototype.extend,name:"version"==r[1]?r[3]:r[1],version:s||parseFloat("opera"==r[1]&&r[4]?r[4]:r[2]),Platform:{name:t.match(/ip(?:ad|od|hone)/)?"ios":(t.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!n.evaluate,air:!!i.runtime,query:!!n.querySelector,json:!!i.JSON},Plugins:{}};function a(){return new XMLHttpRequest}function u(){return new ActiveXObject("MSXML2.XMLHTTP")}function c(){return new ActiveXObject("Microsoft.XMLHTTP")}o[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.Platform[o.Platform.name]=!0,o.Request=Function.attempt(function(){return a(),a},function(){return u(),u},function(){return c(),c}),o.Features.xhr=!!o.Request;var l,s=(Function.attempt(function(){return navigator.plugins["Shockwave Flash"].description},function(){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")})||"0 r0").match(/\d+/g);if(o.Plugins.Flash={version:Number(s[0]||"0."+s[1])||0,build:Number(s[2])||0},o.exec=function(t){var e;return t&&(i.execScript?i.execScript(t):((e=n.createElement("script")).setAttribute("type","text/javascript"),e.text=t,n.head.appendChild(e),n.head.removeChild(e))),t},String.implement("stripScripts",function(t){var n="",e=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(t,e){return n+=e+"\n",""});return!0===t?o.exec(n):"function"==typeOf(t)&&t(n,e),e}),o.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event}),this.Window=this.$constructor=new Type("Window",function(){}),this.$family=Function.from("window").hide(),Window.mirror(function(t,e){i[t]=e}),this.Document=n.$constructor=new Type("Document",function(){}),n.$family=Function.from("document").hide(),Document.mirror(function(t,e){n[t]=e}),n.html=n.documentElement,n.head||(n.head=n.getElementsByTagName("head")[0]),n.execCommand)try{n.execCommand("BackgroundImageCache",!1,!0)}catch(t){}this.attachEvent&&!this.addEventListener&&(l=function(){this.detachEvent("onunload",l),n.head=n.html=n.window=null},this.attachEvent("onunload",l));var h=Array.from;try{h(n.html.childNodes)}catch(t){Array.from=function(t){if("string"!=typeof t&&Type.isEnumerable(t)&&"array"!=typeOf(t)){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}return h(t)};var f=Array.prototype,p=f.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(t){var e=f[t];Array[t]=function(t){return e.apply(Array.from(t),p.call(arguments,1))}})}o.Platform.ios&&(o.Platform.ipod=!0),o.Engine={};function d(t,e){o.Engine.name=t,o.Engine[t+e]=!0,o.Engine.version=e}if(o.ie)switch(o.Engine.trident=!0,o.version){case 6:d("trident",4);break;case 7:d("trident",5);break;case 8:d("trident",6)}if(o.firefox&&(o.Engine.gecko=!0,3<=o.version?d("gecko",19):d("gecko",18)),o.safari||o.chrome)switch(o.Engine.webkit=!0,o.version){case 2:d("webkit",419);break;case 3:d("webkit",420);break;case 4:d("webkit",525)}if(o.opera&&(o.Engine.presto=!0,9.6<=o.version?d("presto",960):9.5<=o.version?d("presto",950):d("presto",925)),"unknown"==o.name)switch((t.match(/(?:webkit|khtml|gecko)/)||[])[0]){case"webkit":case"khtml":o.Engine.webkit=!0;break;case"gecko":o.Engine.gecko=!0}this.$exec=o.exec}(),!function(){var o={},t=this.DOMEvent=new Type("DOMEvent",function(t,e){if(e=e||window,(t=t||e.event).$extended)return t;this.event=t,this.$extended=!0,this.shift=t.shiftKey,this.control=t.ctrlKey,this.alt=t.altKey,this.meta=t.metaKey;for(var n=this.type=t.type,i=t.target||t.srcElement;i&&3==i.nodeType;)i=i.parentNode;if(this.target=document.id(i),0==n.indexOf("key")){var r=this.code=t.which||t.keyCode;this.key=o[r]||Object.keyOf(Event.Keys,r),"keydown"==n&&(111<r&&r<124?this.key="f"+(r-111):95<r&&r<106&&(this.key=r-96)),null==this.key&&(this.key=String.fromCharCode(r).toLowerCase())}else if("click"==n||"dblclick"==n||"contextmenu"==n||"DOMMouseScroll"==n||0==n.indexOf("mouse")){var r=(r=e.document).compatMode&&"CSS1Compat"!=r.compatMode?r.body:r.html;if(this.page={x:null!=t.pageX?t.pageX:t.clientX+r.scrollLeft,y:null!=t.pageY?t.pageY:t.clientY+r.scrollTop},this.client={x:null!=t.pageX?t.pageX-e.pageXOffset:t.clientX,y:null!=t.pageY?t.pageY-e.pageYOffset:t.clientY},"DOMMouseScroll"!=n&&"mousewheel"!=n||(this.wheel=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),this.rightClick=3==t.which||2==t.button,"mouseover"==n||"mouseout"==n){for(var s=t.relatedTarget||t[("mouseover"==n?"from":"to")+"Element"];s&&3==s.nodeType;)s=s.parentNode;this.relatedTarget=document.id(s)}}else 0!=n.indexOf("touch")&&0!=n.indexOf("gesture")||(this.rotation=t.rotation,this.scale=t.scale,this.targetTouches=t.targetTouches,this.changedTouches=t.changedTouches,(r=this.touches=t.touches)&&r[0]&&(e=r[0],this.page={x:e.pageX,y:e.pageY},this.client={x:e.clientX,y:e.clientY}));this.client||(this.client={}),this.page||(this.page={})});t.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),t.defineKey=function(t,e){return o[t]=e,this},t.defineKeys=t.defineKey.overloadSetter(!0),t.defineKeys({38:"up",40:"down",37:"left",39:"right",27:"esc",32:"space",8:"backspace",9:"tab",46:"delete",13:"enter"})}(),DOMEvent),Element=(Event.Keys={},Event.Keys=new Hash(Event.Keys),!function(){function i(t,e,n){if(!r.Mutators.hasOwnProperty(t)||null!=(e=r.Mutators[t].call(this,e)))if("function"==typeOf(e)){if(e.$hidden)return this;this.prototype[t]=n?e:o(this,t,e)}else Object.merge(this.prototype,t,e);return this}var r=this.Class=new Type("Class",function(t){instanceOf(t,Function)&&(t={initialize:t});var e=function(){if(s(this),e.$prototyping)return this;this.$caller=null;var t=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,t}.extend(this).implement(t);return e.$constructor=r,(e.prototype.$constructor=e).prototype.parent=n,e}),n=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var t=this.$caller.$name,e=this.$caller.$owner.parent,e=e?e.prototype[t]:null;if(e)return e.apply(this,arguments);throw new Error('The method "'+t+'" has no parent.')},s=function(t){for(var e in t){var n=t[e];switch(typeOf(n)){case"object":var i=function(){};i.prototype=n,t[e]=s(new i);break;case"array":t[e]=n.clone()}}return t},o=function(t,i,r){r.$origin&&(r=r.$origin);var s=function(){if(r.$protected&&null==this.$caller)throw new Error('The method "'+i+'" cannot be called.');var t=this.caller,e=this.$caller,n=(this.caller=e,this.$caller=s,r.apply(this,arguments));return this.$caller=e,this.caller=t,n}.extend({$owner:t,$origin:r,$name:i});return s};r.implement("implement",i.overloadSetter()),r.Mutators={Extends:function(t){var e;this.parent=t,this.prototype=((t=t).$prototyping=!0,e=new t,delete t.$prototyping,e)},Implements:function(t){Array.from(t).each(function(t){var e,n=new t;for(e in n)i.call(this,e,n[e],!0)},this)}}}(),!function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return!!this.$chain.length&&this.$chain.shift().apply(this,arguments)},clearChain:function(){return this.$chain.empty(),this}});function r(t){return t.replace(/^on([A-Z])/,function(t,e){return e.toLowerCase()})}this.Events=new Class({$events:{},addEvent:function(t,e,n){return t=r(t),e!=$empty&&(this.$events[t]=(this.$events[t]||[]).include(e),n)&&(e.internal=!0),this},addEvents:function(t){for(var e in t)this.addEvent(e,t[e]);return this},fireEvent:function(t,e,n){t=r(t);t=this.$events[t];return t&&(e=Array.from(e),t.each(function(t){n?t.delay(n,this,e):t.apply(this,e)},this)),this},removeEvent:function(t,e){t=r(t);t=this.$events[t];return t&&!e.internal&&-1!=(e=t.indexOf(e))&&delete t[e],this},removeEvents:function(t){if("object"==typeOf(t))for(var e in t)this.removeEvent(e,t[e]);else for(e in t=t&&r(t),this.$events)if(!t||t==e)for(var n=this.$events[e],i=n.length;i--;)i in n&&this.removeEvent(e,n[i]);return this}}),this.Options=new Class({setOptions:function(){var t=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var e in t)"function"==typeOf(t[e])&&/^on[A-Z]/.test(e)&&(this.addEvent(e,t[e]),delete t[e]);return this}})}(),!function(){var y,b,E,S,n={},i={},x=/\\/g,r=function(t,e){if(null==t)return null;if(!0===t.Slick)return t;t=(""+t).replace(/^\s+|\s+$/g,"");e=(S=!!e)?i:n;if(e[t])return e[t];for(y={Slick:!0,expressions:[],raw:t,reverse:function(){return r(this.raw,!0)}},b=-1;t!=(t=t.replace(o,a)););return y.length=y.expressions.length,e[y.raw]=S?s(y):y},w=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},s=function(t){for(var e=t.expressions,n=0;n<e.length;n++){for(var i=e[n],r={parts:[],tag:"*",combinator:w(i[0].combinator)},s=0;s<i.length;s++){var o=i[s];o.reverseCombinator||(o.reverseCombinator=" "),o.combinator=o.reverseCombinator,delete o.reverseCombinator}i.reverse().push(r)}return t},k=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})},o=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+k(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function a(t,e,n,i,r,s,o,a,u,c,l,h,f,p,d,m){if(!e&&-1!==b||(y.expressions[++b]=[],E=-1,!e)){(n||i||-1===E)&&(n=n||" ",e=y.expressions[b],S&&e[E]&&(e[E].reverseCombinator=w(n)),e[++E]={combinator:n,tag:"*"});var g,v,i=y.expressions[b][E];if(r)i.tag=r.replace(x,"");else if(s)i.id=s.replace(x,"");else if(o)o=o.replace(x,""),i.classList||(i.classList=[]),i.classes||(i.classes=[]),i.classList.push(o),i.classes.push({value:o,regexp:new RegExp("(^|\\s)"+k(o)+"(\\s|$)")});else if(f)m=(m=m||d)?m.replace(x,""):null,i.pseudos||(i.pseudos=[]),i.pseudos.push({key:f.replace(x,""),value:m,type:1==h.length?"class":"element"});else if(a){switch(a=a.replace(x,""),l=(l||"").replace(x,""),u){case"^=":v=new RegExp("^"+k(l));break;case"$=":v=new RegExp(k(l)+"$");break;case"~=":v=new RegExp("(^|\\s)"+k(l)+"(\\s|$)");break;case"|=":v=new RegExp("^"+k(l)+"(-|$)");break;case"=":g=function(t){return l==t};break;case"*=":g=function(t){return t&&-1<t.indexOf(l)};break;case"!=":g=function(t){return l!=t};break;default:g=function(t){return!!t}}g=(g=""==l&&/^[*$^]=$/.test(u)?function(){return!1}:g)||function(t){return t&&v.test(t)},i.attributes||(i.attributes=[]),i.attributes.push({key:a,operator:u,value:l,test:g})}}return""}var t=this.Slick||{};t.parse=function(t){return r(t)},t.escapeRegExp=k,this.Slick||(this.Slick=t)}.apply("undefined"!=typeof exports?exports:this),!function(){var t,i={},p={},e=Object.prototype.toString,P=(i.isNativeCode=function(t){return/\{\s*\[native code\]\s*\}/.test(""+t)},i.isXML=function(t){return!!t.xmlVersion||!!t.xml||"[object XMLDocument]"==e.call(t)||9==t.nodeType&&"HTML"!=t.documentElement.nodeName},i.setDocument=function(n){var t=n.nodeType;if(9!=t)if(t)n=n.ownerDocument;else{if(!n.navigator)return;n=n.document}if(this.document!==n){var e,i,r,s,t=(this.document=n).documentElement,o=this.getUIDXML(t),a=p[o];if(a)for(e in a)this[e]=a[e];else{(a=p[o]={}).root=t,a.isXMLDocument=this.isXML(n),a.brokenStarGEBTN=a.starSelectsClosedQSA=a.idGetsName=a.brokenMixedCaseQSA=a.brokenGEBCN=a.brokenCheckedQSA=a.brokenEmptyAttributeQSA=a.isHTMLDocument=a.nativeMatchesSelector=!1;var u,o="slick_uniqueid",c=n.createElement("div"),l=n.body||n.getElementsByTagName("body")[0]||t;l.appendChild(c);try{c.innerHTML='<a id="'+o+'"></a>',a.isHTMLDocument=!!n.getElementById(o)}catch(t){}if(a.isHTMLDocument){c.style.display="none",c.appendChild(n.createComment("")),h=1<c.getElementsByTagName("*").length;try{c.innerHTML="foo</foo>",f=(u=c.getElementsByTagName("*"))&&!!u.length&&"/"==u[0].nodeName.charAt(0)}catch(t){}a.brokenStarGEBTN=h||f;try{c.innerHTML='<a name="'+o+'"></a><b id="'+o+'"></b>',a.idGetsName=n.getElementById(o)===c.firstChild}catch(t){}if(c.getElementsByClassName){try{c.innerHTML='<a class="f"></a><a class="b"></a>',c.getElementsByClassName("b").length,c.firstChild.className="b",r=2!=c.getElementsByClassName("b").length}catch(t){}try{c.innerHTML='<a class="a"></a><a class="f b a"></a>',i=2!=c.getElementsByClassName("a").length}catch(t){}a.brokenGEBCN=r||i}if(c.querySelectorAll){try{c.innerHTML="foo</foo>",u=c.querySelectorAll("*"),a.starSelectsClosedQSA=u&&!!u.length&&"/"==u[0].nodeName.charAt(0)}catch(t){}try{c.innerHTML='<a class="MiX"></a>',a.brokenMixedCaseQSA=!c.querySelectorAll(".MiX").length}catch(t){}try{c.innerHTML='<select><option selected="selected">a</option></select>',a.brokenCheckedQSA=0==c.querySelectorAll(":checked").length}catch(t){}try{c.innerHTML='<a class=""></a>',a.brokenEmptyAttributeQSA=0!=c.querySelectorAll('[class*=""]').length}catch(t){}}try{c.innerHTML='<form action="s"><input id="action"/></form>',s="s"!=c.firstChild.getAttribute("action")}catch(t){}if(a.nativeMatchesSelector=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector,a.nativeMatchesSelector)try{a.nativeMatchesSelector.call(t,":slick"),a.nativeMatchesSelector=null}catch(t){}}try{t.slick_expando=1,delete t.slick_expando,a.getUID=this.getUIDHTML}catch(t){a.getUID=this.getUIDXML}l.removeChild(c),c=u=l=null,a.getAttribute=a.isHTMLDocument&&s?function(t,e){var n=this.attributeGetters[e];return n?n.call(t):(n=t.getAttributeNode(e))?n.nodeValue:null}:function(t,e){var n=this.attributeGetters[e];return n?n.call(t):t.getAttribute(e)},a.hasAttribute=t&&this.isNativeCode(t.hasAttribute)?function(t,e){return t.hasAttribute(e)}:function(t,e){return!(!(t=t.getAttributeNode(e))||!t.specified&&!t.nodeValue)};var h=t&&this.isNativeCode(t.contains),f=n&&this.isNativeCode(n.contains);for(e in a.contains=h&&f?function(t,e){return t.contains(e)}:h&&!f?function(t,e){return t===e||(t===n?n.documentElement:t).contains(e)}:t&&t.compareDocumentPosition?function(t,e){return t===e||!!(16&t.compareDocumentPosition(e))}:function(t,e){if(e)do{if(e===t)return!0}while(e=e.parentNode);return!1},a.documentSorter=t.compareDocumentPosition?function(t,e){return t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:t===e?0:1:0}:"sourceIndex"in t?function(t,e){return t.sourceIndex&&e.sourceIndex?t.sourceIndex-e.sourceIndex:0}:n.createRange?function(t,e){var n,i;return t.ownerDocument&&e.ownerDocument?(n=t.ownerDocument.createRange(),i=e.ownerDocument.createRange(),n.setStart(t,0),n.setEnd(t,0),i.setStart(e,0),i.setEnd(e,0),n.compareBoundaryPoints(Range.START_TO_END,i)):0}:null,t=null,a)this[e]=a[e]}}},/^([#.]?)((?:[\w-]+|\*))$/),D=/\[.+[*$^]=(?:""|'')?\]/,F={},n=(i.search=function(t,e,n,i){var r=this.found=i?null:n||[];if(!t)return r;if(t.navigator)t=t.document;else if(!t.nodeType)return r;var s,o,a,u,c,l,h,f,p,d,m,g=this.uniques={},v=!(!n||!n.length),y=9==t.nodeType;if(this.document!==(y?t:t.ownerDocument)&&this.setDocument(t),v)for(O=r.length;O--;)g[this.getUID(r[O])]=!0;if("string"==typeof e){var b=e.match(P);t:if(b){var E,S=b[1],x=b[2];if(S){if("#"==S){if(!this.isHTMLDocument||!y)break t;if(!(E=t.getElementById(x)))return r;if(this.idGetsName&&E.getAttributeNode("id").nodeValue!=x)break t;if(i)return E||null;v&&g[this.getUID(E)]||r.push(E)}else if("."==S){if(!this.isHTMLDocument||(!t.getElementsByClassName||this.brokenGEBCN)&&t.querySelectorAll)break t;if(t.getElementsByClassName&&!this.brokenGEBCN){if(k=t.getElementsByClassName(x),i)return k[0]||null;for(O=0;E=k[O++];)v&&g[this.getUID(E)]||r.push(E)}else for(var w=new RegExp("(^|\\s)"+H.escapeRegExp(x)+"(\\s|$)"),k=t.getElementsByTagName("*"),O=0;E=k[O++];)if((className=E.className)&&w.test(className)){if(i)return E;v&&g[this.getUID(E)]||r.push(E)}}}else{if("*"==x&&this.brokenStarGEBTN)break t;if(k=t.getElementsByTagName(x),i)return k[0]||null;for(O=0;E=k[O++];)v&&g[this.getUID(E)]||r.push(E)}return v&&this.sort(r),i?null:r}t:if(t.querySelectorAll&&!(!this.isHTMLDocument||F[e]||this.brokenMixedCaseQSA||this.brokenCheckedQSA&&-1<e.indexOf(":checked")||this.brokenEmptyAttributeQSA&&D.test(e)||!y&&-1<e.indexOf(",")||H.disableQSA)){var C,T,N=e,A=t;y||(C=A.getAttribute("id"),A.setAttribute("id",T="slickid__"),N="#"+T+" "+N,t=A.parentNode);try{if(i)return t.querySelector(N)||null;k=t.querySelectorAll(N)}catch(t){F[e]=1;break t}finally{y||(C?A.setAttribute("id",C):A.removeAttribute("id"),t=A)}if(this.starSelectsClosedQSA)for(O=0;E=k[O++];)!("@"<E.nodeName)||v&&g[this.getUID(E)]||r.push(E);else for(O=0;E=k[O++];)v&&g[this.getUID(E)]||r.push(E);return v&&this.sort(r),r}if(!(s=this.Slick.parse(e)).length)return r}else{if(null==e)return r;if(!e.Slick)return this.contains(t.documentElement||t,e)&&(r?r.push(e):r=e),r;s=e}this.posNTH={},this.posNTHLast={},this.posNTHType={},this.posNTHTypeLast={},this.push=!v&&(i||1==s.length&&1==s.expressions[0].length)?this.pushArray:this.pushUID,null==r&&(r=[]);var M,$,j,L=s.expressions;t:for(O=0;$=L[O];O++)for(o=0;j=$[o];o++){if(!this[c="combinator:"+j.combinator])continue t;if(l=this.isXMLDocument?j.tag:j.tag.toUpperCase(),h=j.id,f=j.classList,p=j.classes,d=j.attributes,m=j.pseudos,j=o===$.length-1,this.bitUniques={},j?(this.uniques=g,this.found=r):(this.uniques={},this.found=[]),0===o){if(this[c](t,l,h,p,d,m,f),i&&j&&r.length)break t}else if(i&&j){for(a=0,u=M.length;a<u;a++)if(this[c](M[a],l,h,p,d,m,f),r.length)break t}else for(a=0,u=M.length;a<u;a++)this[c](M[a],l,h,p,d,m,f);M=this.found}return(v||1<s.expressions.length)&&this.sort(r),i?r[0]||null:r},i.uidx=1,i.uidk="slick-uniqueid",i.getUIDXML=function(t){var e=t.getAttribute(this.uidk);return e||(e=this.uidx++,t.setAttribute(this.uidk,e)),e},i.getUIDHTML=function(t){return t.uniqueNumber||(t.uniqueNumber=this.uidx++)},i.sort=function(t){return this.documentSorter&&t.sort(this.documentSorter),t},i.cacheNTH={},i.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/,i.parseNTHArgument=function(t){var e,n,i=t.match(this.matchNTH);return!!i&&(e=i[2]||!1,"-"==(n=i[1]||1)&&(n=-1),this.cacheNTH[t]="n"==e?{a:n,b:+i[3]||0}:"odd"==e?{a:2,b:1}:"even"==e?{a:2,b:0}:{a:0,b:n})},i.createNTHPseudo=function(a,u,c,l){return function(t,e){var n=this.getUID(t);if(!this[c][n]){var i=t.parentNode;if(!i)return!1;var r=i[a],s=1;if(l)for(var o=t.nodeName;r.nodeName==o&&(this[c][this.getUID(r)]=s++),r=r[u];);else for(;1==r.nodeType&&(this[c][this.getUID(r)]=s++),r=r[u];);}i=this.cacheNTH[e=e||"n"]||this.parseNTHArgument(e);if(!i)return!1;t=i.a,e=i.b,i=this[c][n];if(0==t)return e==i;if(0<t){if(i<e)return!1}else if(e<i)return!1;return(i-e)%t==0}},i.pushArray=function(t,e,n,i,r,s){this.matchSelector(t,e,n,i,r,s)&&this.found.push(t)},i.pushUID=function(t,e,n,i,r,s){var o=this.getUID(t);!this.uniques[o]&&this.matchSelector(t,e,n,i,r,s)&&(this.uniques[o]=!0,this.found.push(t))},i.matchNode=function(t,e){if(this.isHTMLDocument&&this.nativeMatchesSelector)try{return this.nativeMatchesSelector.call(t,e.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(t){}e=this.Slick.parse(e);if(!e)return!0;var n=e.expressions,i=0;for(a=0;currentExpression=n[a];a++)if(1==currentExpression.length){var r=currentExpression[0];if(this.matchSelector(t,this.isXMLDocument?r.tag:r.tag.toUpperCase(),r.id,r.classes,r.attributes,r.pseudos))return!0;i++}if(i!=e.length)for(var s,o=this.search(this.document,e),a=0;s=o[a++];)if(s===t)return!0;return!1},i.matchPseudo=function(t,e,n){var i="pseudo:"+e;return this[i]?this[i](t,n):(i=this.getAttribute(t,e),n?n==i:!!i)},i.matchSelector=function(t,e,n,i,r,s){if(e){var o=this.isXMLDocument?t.nodeName:t.nodeName.toUpperCase();if("*"==e){if(o<"@")return!1}else if(o!=e)return!1}if(n&&t.getAttribute("id")!=n)return!1;var a,u,c;if(i)for(a=i.length;a--;)if(!(c=this.getAttribute(t,"class"))||!i[a].regexp.test(c))return!1;if(r)for(a=r.length;a--;)if((u=r[a]).operator?!u.test(this.getAttribute(t,u.key)):!this.hasAttribute(t,u.key))return!1;if(s)for(a=s.length;a--;)if(u=s[a],!this.matchPseudo(t,u.key,u.value))return!1;return!0},{" ":function(t,e,n,i,r,s,o){var a,u,c;if(this.isHTMLDocument){if(n){if(!(u=this.document.getElementById(n))&&t.all||this.idGetsName&&u&&u.getAttributeNode("id").nodeValue!=n){if(!(c=t.all[n]))return;for(c[0]||(c=[c]),a=0;u=c[a++];){var l=u.getAttributeNode("id");if(l&&l.nodeValue==n){this.push(u,e,null,i,r,s);break}}return}if(u)return this.document===t||this.contains(t,u)?void this.push(u,e,null,i,r,s):void 0;if(this.contains(this.root,t))return}if(i&&t.getElementsByClassName&&!this.brokenGEBCN&&(c=t.getElementsByClassName(o.join(" ")))&&c.length){for(a=0;u=c[a++];)this.push(u,e,n,null,r,s);return}}if((c=t.getElementsByTagName(e))&&c.length)for(this.brokenStarGEBTN||(e=null),a=0;u=c[a++];)this.push(u,e,n,i,r,s)},">":function(t,e,n,i,r,s){if(t=t.firstChild)for(;1==t.nodeType&&this.push(t,e,n,i,r,s),t=t.nextSibling;);},"+":function(t,e,n,i,r,s){for(;t=t.nextSibling;)if(1==t.nodeType){this.push(t,e,n,i,r,s);break}},"^":function(t,e,n,i,r,s){(t=t.firstChild)&&(1==t.nodeType?this.push(t,e,n,i,r,s):this["combinator:+"](t,e,n,i,r,s))},"~":function(t,e,n,i,r,s){for(;t=t.nextSibling;)if(1==t.nodeType){var o=this.getUID(t);if(this.bitUniques[o])break;this.bitUniques[o]=!0,this.push(t,e,n,i,r,s)}},"++":function(t,e,n,i,r,s){this["combinator:+"](t,e,n,i,r,s),this["combinator:!+"](t,e,n,i,r,s)},"~~":function(t,e,n,i,r,s){this["combinator:~"](t,e,n,i,r,s),this["combinator:!~"](t,e,n,i,r,s)},"!":function(t,e,n,i,r,s){for(;t=t.parentNode;)t!==this.document&&this.push(t,e,n,i,r,s)},"!>":function(t,e,n,i,r,s){(t=t.parentNode)!==this.document&&this.push(t,e,n,i,r,s)},"!+":function(t,e,n,i,r,s){for(;t=t.previousSibling;)if(1==t.nodeType){this.push(t,e,n,i,r,s);break}},"!^":function(t,e,n,i,r,s){(t=t.lastChild)&&(1==t.nodeType?this.push(t,e,n,i,r,s):this["combinator:!+"](t,e,n,i,r,s))},"!~":function(t,e,n,i,r,s){for(;t=t.previousSibling;)if(1==t.nodeType){var o=this.getUID(t);if(this.bitUniques[o])break;this.bitUniques[o]=!0,this.push(t,e,n,i,r,s)}}});for(t in n)i["combinator:"+t]=n[t];var r,s={empty:function(t){var e=t.firstChild;return!(e&&1==e.nodeType||(t.innerText||t.textContent||"").length)},not:function(t,e){return!this.matchNode(t,e)},contains:function(t,e){return-1<(t.innerText||t.textContent||"").indexOf(e)},"first-child":function(t){for(;t=t.previousSibling;)if(1==t.nodeType)return!1;return!0},"last-child":function(t){for(;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"only-child":function(t){for(var e=t;e=e.previousSibling;)if(1==e.nodeType)return!1;for(var n=t;n=n.nextSibling;)if(1==n.nodeType)return!1;return!0},"nth-child":i.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":i.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":i.createNTHPseudo("firstChild","nextSibling","posNTHType",!0),"nth-last-of-type":i.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",!0),index:function(t,e){return this["pseudo:nth-child"](t,""+(e+1))},even:function(t){return this["pseudo:nth-child"](t,"2n")},odd:function(t){return this["pseudo:nth-child"](t,"2n+1")},"first-of-type":function(t){for(var e=t.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;return!0},"last-of-type":function(t){for(var e=t.nodeName;t=t.nextSibling;)if(t.nodeName==e)return!1;return!0},"only-of-type":function(t){for(var e=t,n=t.nodeName;e=e.previousSibling;)if(e.nodeName==n)return!1;for(var i=t;i=i.nextSibling;)if(i.nodeName==n)return!1;return!0},enabled:function(t){return!t.disabled},disabled:function(t){return t.disabled},checked:function(t){return t.checked||t.selected},focus:function(t){return this.isHTMLDocument&&this.document.activeElement===t&&(t.href||t.type||this.hasAttribute(t,"tabindex"))},root:function(t){return t===this.root},selected:function(t){return t.selected}};for(r in s)i["pseudo:"+r]=s[r];var o=i.attributeGetters={for:function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")},tabindex:function(){var t=this.getAttributeNode("tabindex");return t&&t.specified?t.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var t=this.getAttributeNode("maxLength");return t&&t.specified?t.nodeValue:null}},H=(o.MAXLENGTH=o.maxLength=o.maxlength,i.Slick=this.Slick||{});H.version="1.1.7",H.search=function(t,e,n){return i.search(t,e,n)},H.find=function(t,e){return i.search(t,e,null,!0)},H.contains=function(t,e){return i.setDocument(t),i.contains(t,e)},H.getAttribute=function(t,e){return i.setDocument(t),i.getAttribute(t,e)},H.hasAttribute=function(t,e){return i.setDocument(t),i.hasAttribute(t,e)},H.match=function(t,e){return!(!t||!e)&&(!e||e===t||(i.setDocument(t),i.matchNode(t,e)))},H.defineAttributeGetter=function(t,e){return i.attributeGetters[t]=e,this},H.lookupAttributeGetter=function(t){return i.attributeGetters[t]},H.definePseudo=function(t,n){return i["pseudo:"+t]=function(t,e){return n.call(t,e)},this},H.lookupPseudo=function(t){var e=i["pseudo:"+t];return e?function(t){return e.call(this,t)}:null},H.override=function(t,e){return i.override(t,e),this},H.isXML=i.isXML,H.uidOf=function(t){return i.getUIDHTML(t)},this.Slick||(this.Slick=H)}.apply("undefined"!=typeof exports?exports:this),function(t,e){var n=Element.Constructors[t];if(n)return n(e);if("string"!=typeof t)return document.id(t).set(e);if(e=e||{},!/^[\w-]+$/.test(t)){var n=Slick.parse(t).expressions[0][0],i=(t="*"==n.tag?"div":n.tag,n.id&&null==e.id&&(e.id=n.id),n.attributes);if(i)for(var r,s=0,o=i.length;s<o;s++)null==e[(r=i[s]).key]&&(null!=r.value&&"="==r.operator?e[r.key]=r.value:r.value||r.operator||(e[r.key]=!0));n.classList&&null==e.class&&(e.class=n.classList.join(" "))}return document.newElement(t,e)}),IFrame=(Browser.Element&&(Element.prototype=Browser.Element.prototype,Element.prototype._fireEvent=(n=>function(t,e){return n.call(this,t,e)})(Element.prototype.fireEvent)),new Type("Element",Element).mirror(function(o){var t;Array.prototype[o]||((t={})[o]=function(){for(var t=[],e=arguments,n=!0,i=0,r=this.length;i<r;i++)var s=this[i],s=t[i]=s[o].apply(s,e),n=n&&"element"==typeOf(s);return n?new Elements(t):t},Elements.implement(t))}),Browser.Element||(Element.parent=Object,Element.Prototype={$constructor:Element,$family:Function.from("element").hide()},Element.mirror(function(t,e){Element.Prototype[t]=e})),Element.Constructors={},Element.Constructors=new Hash,new Type("IFrame",function(){function t(){r.call(e.contentWindow)}var e,n=Array.link(arguments,{properties:Type.isObject,iframe:function(t){return null!=t}}),i=n.properties||{},r=(n.iframe&&(e=document.id(n.iframe)),i.onload||function(){});delete i.onload,i.id=i.name=[i.id,i.name,e?e.id||e.name:"IFrame_"+String.uniqueID()].pick(),e=new Element(e||"iframe",i);return window.frames[i.id]?t():e.addListener("load",t),e})),Elements=this.Elements=function(t){if(t&&t.length)for(var e,n={},i=0;e=t[i++];){var r=Slick.uidOf(e);n[r]||(n[r]=!0,this.push(e))}},Cookie=(Elements.prototype={length:0},Elements.parent=Array,new Type("Elements",Elements).implement({filter:function(e,t){return e?new Elements(Array.filter(this,"string"==typeOf(e)?function(t){return t.match(e)}:e,t)):this}.protect(),push:function(){for(var t=this.length,e=0,n=arguments.length;e<n;e++){var i=document.id(arguments[e]);i&&(this[t++]=i)}return this.length=t}.protect(),unshift:function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var i=document.id(arguments[e]);i&&t.push(i)}return Array.prototype.unshift.apply(this,t)}.protect(),concat:function(){for(var t=new Elements(this),e=0,n=arguments.length;e<n;e++){var i=arguments[e];Type.isEnumerable(i)?t.append(i):t.push(i)}return t}.protect(),append:function(t){for(var e=0,n=t.length;e<n;e++)this.push(t[e]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()}),Elements.alias("extend","append"),(()=>{var n,i=Array.prototype.splice,t={0:0,1:1,length:2};i.call(t,1,1),1==t[1]&&Elements.implement("splice",function(){for(var t=this.length,e=i.apply(this,arguments);t>=this.length;)delete this[t--];return e}.protect()),Array.forEachMethod(function(t,e){Elements.implement(e,t)}),Array.mirror(Elements);try{n="x"==document.createElement("<input name=x>").name}catch(t){}function r(t){return(""+t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}Document.implement({newElement:function(t,e){return e&&null!=e.checked&&(e.defaultChecked=e.checked),n&&e&&(t="<"+t,e.name&&(t+=' name="'+r(e.name)+'"'),e.type&&(t+=' type="'+r(e.type)+'"'),t+=">",delete e.name,delete e.type),this.id(this.createElement(t)).set(e)}})})(),(()=>{function n(t,e){if(!t)return e;for(var n=(t=Object.clone(Slick.parse(t))).expressions,i=n.length;i--;)n[i][0].combinator=e;return t}Slick.uidOf(window),Slick.uidOf(document),Document.implement({newTextNode:function(t){return this.createTextNode(t)},getDocument:function(){return this},getWindow:function(){return this.window},id:((r={string:function(t,e,n){return(t=Slick.find(n,"#"+t.replace(/(\W)/g,"\\$1")))?r.element(t,e):null},element:function(t,e){var n;return Slick.uidOf(t),e||t.$family||/^(?:object|embed)$/i.test(t.tagName)||(n=t.fireEvent,t._fireEvent=function(t,e){return n(t,e)},Object.append(t,Element.Prototype)),t},object:function(t,e,n){return t.toElement?r.element(t.toElement(n),e):null}}).textnode=r.whitespace=r.window=r.document=function(t){return t},function(t,e,n){var i;return t&&t.$family&&t.uniqueNumber?t:(i=typeOf(t),r[i]?r[i](t,e,n||document):null)})}),null==window.$&&Window.implement("$",function(t,e){return document.id(t,e,this.document)}),Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}}),[Document,Element].invoke("implement",{getElements:function(t){return Slick.search(this,t,new Elements)},getElement:function(t){return document.id(Slick.find(this,t))}});var r,t={contains:function(t){return Slick.contains(this,t)}},i=(document.contains||Document.implement(t),document.createElement("div").contains||Element.implement(t),Element.implement("hasChild",function(t){return this!==t&&this.contains(t)}),!function(i,n,r){this.Selectors={};function s(){for(var t in e)e.hasOwnProperty(t)&&(Slick.definePseudo(t,e[t]),delete e[t])}var e=this.Selectors.Pseudo=new Hash;Slick.search=function(t,e,n){return s(),i.call(this,t,e,n)},Slick.find=function(t,e){return s(),n.call(this,t,e)},Slick.match=function(t,e){return s(),r.call(this,t,e)}}(Slick.search,Slick.find,Slick.match),Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(e,t){Element.implement(t,function(t){return this.getElement(n(t,e))})}),Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(e,t){Element.implement(t,function(t){return this.getElements(n(t,e))})}),Element.implement({getFirst:function(t){return document.id(Slick.search(this,n(t,">"))[0])},getLast:function(t){return document.id(Slick.search(this,n(t,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(t){return document.id(Slick.find(this,"#"+(""+t).replace(/(\W)/g,"\\$1")))},match:function(t){return!t||Slick.match(this,t)}}),null==window.$$&&Window.implement("$$",function(t){var e=new Elements;if(1==arguments.length&&"string"==typeof t)return Slick.search(this.document,t,e);for(var n=Array.flatten(arguments),i=0,r=n.length;i<r;i++){var s=n[i];switch(typeOf(s)){case"element":e.push(s);break;case"string":Slick.search(this.document,s,e)}}return e}),null==window.$$&&Window.implement("$$",function(t){if(1==arguments.length){if("string"==typeof t)return Slick.search(this.document,t,new Elements);if(Type.isEnumerable(t))return new Elements(t)}return new Elements(arguments)}),{before:function(t,e){var n=e.parentNode;n&&n.insertBefore(t,e)},after:function(t,e){var n=e.parentNode;n&&n.insertBefore(t,e.nextSibling)},bottom:function(t,e){e.appendChild(t)},top:function(t,e){e.insertBefore(t,e.firstChild)}}),s=(i.inside=i.bottom,Object.each(i,function(e,t){var n={};n["inject"+(t=t.capitalize())]=function(t){return e(this,document.id(t,!0)),this},n["grab"+t]=function(t){return e(document.id(t,!0),this),this},Element.implement(n)}),{}),o={},e={},t=(Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(t){e[t.toLowerCase()]=t}),e.html="innerHTML",e.text=null==document.createElement("div").textContent?"innerText":"textContent",Object.forEach(e,function(n,t){o[t]=function(t,e){t[n]=e},s[t]=function(t){return t[n]}}),Array.forEach(["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"],function(n){var t=n.toLowerCase();t,o[t]=function(t,e){t[n]=!!e},s[t]=function(t){return!!t[n]}}),Object.append(o,{class:function(t,e){"className"in t?t.className=e||"":t.setAttribute("class",e)},for:function(t,e){"htmlFor"in t?t.htmlFor=e:t.setAttribute("for",e)},style:function(t,e){t.style?t.style.cssText=e:t.setAttribute("style",e)},value:function(t,e){t.value=null!=e?e:""}}),s.class=function(t){return"className"in t?t.className||null:t.getAttribute("class")},document.createElement("button"));try{t.type="button"}catch(t){}function a(t){return h[t]||(h[t]={})}function u(t){var e=t.uniqueNumber;return t.removeEvents&&t.removeEvents(),t.clearAttributes&&t.clearAttributes(),null!=e&&(delete l[e],delete h[e]),t}"button"!=t.type&&(o.type=function(t,e){t.setAttribute("type",e)});var t=null,c=((t=document.createElement("input")).value="t",t.type="submit","t"!=t.value&&(o.type=function(t,e){var n=t.value;t.type=e,t.value=n}),t=null,((t=document.createElement("div")).random="attribute")==t.getAttribute("random")),l=(Element.implement({setProperty:function(t,e){var n,i=o[t.toLowerCase()];return i?i(this,e):(c&&(n=this.retrieve("$attributeWhiteList",{})),null==e?(this.removeAttribute(t),c&&delete n[t]):(this.setAttribute(t,""+e),c&&(n[t]=!0))),this},setProperties:function(t){for(var e in t)this.setProperty(e,t[e]);return this},getProperty:function(t){var e=s[t.toLowerCase()];if(e)return e(this);if(c){var e=this.getAttributeNode(t),n=this.retrieve("$attributeWhiteList",{});if(!e)return null;if(e.expando&&!n[t]){e=this.outerHTML;if(e.substr(0,e.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(t)<0)return null;n[t]=!0}}e=Slick.getAttribute(this,t);return e||Slick.hasAttribute(this,t)?e:null},getProperties:function(){var t=Array.from(arguments);return t.map(this.getProperty,this).associate(t)},removeProperty:function(t){return this.setProperty(t,null)},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},set:function(t,e){var n=Element.Properties[t];n&&n.set?n.set.call(this,e):this.setProperty(t,e)}.overloadSetter(),get:function(t){var e=Element.Properties[t];return e&&e.get?e.get.apply(this):this.getProperty(t)}.overloadGetter(),erase:function(t){var e=Element.Properties[t];return e&&e.erase?e.erase.apply(this):this.removeProperty(t),this},hasClass:function(t){return this.className.clean().contains(t," ")},addClass:function(t){return this.hasClass(t)||(this.className=(this.className+" "+t).clean()),this},removeClass:function(t){return this.className=this.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1"),this},toggleClass:function(t,e){return(e=null==e?!this.hasClass(t):e)?this.addClass(t):this.removeClass(t)},adopt:function(){var t,e=this,n=Array.flatten(arguments),i=n.length;1<i&&(e=t=document.createDocumentFragment());for(var r=0;r<i;r++){var s=document.id(n[r],!0);s&&e.appendChild(s)}return t&&this.appendChild(t),this},appendText:function(t,e){return this.grab(this.getDocument().newTextNode(t),e)},grab:function(t,e){return i[e||"bottom"](document.id(t,!0),this),this},inject:function(t,e){return i[e||"bottom"](this,document.id(t,!0)),this},replaces:function(t){return(t=document.id(t,!0)).parentNode.replaceChild(this,t),this},wraps:function(t,e){return t=document.id(t,!0),this.replaces(t).grab(t,e)},getSelected:function(){return this.selectedIndex,new Elements(Array.from(this.options).filter(function(t){return t.selected}))},toQueryString:function(){var n=[];return this.getElements("input, select, textarea").each(function(e){var t=e.type;e.name&&!e.disabled&&"submit"!=t&&"reset"!=t&&"file"!=t&&"image"!=t&&(t="select"==e.get("tag")?e.getSelected().map(function(t){return document.id(t).get("value")}):"radio"!=t&&"checkbox"!=t||e.checked?e.get("value"):null,Array.from(t).each(function(t){void 0!==t&&n.push(encodeURIComponent(e.name)+"="+encodeURIComponent(t))}))}),n.join("&")}}),{}),h={},d={input:"checked",option:"selected",textarea:"value"},f=(Element.implement({destroy:function(){var t=u(this).getElementsByTagName("*");return Array.each(t,u),Element.dispose(this),null},empty:function(){return Array.from(this.childNodes).each(Element.dispose),this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},clone:function(t,e){var n=this.cloneNode(t=!1!==t),i=[n],r=[this];for(t&&(i.append(Array.from(n.getElementsByTagName("*"))),r.append(Array.from(this.getElementsByTagName("*")))),p=i.length;p--;){var s=i[p],o=r[p];if(e||s.removeAttribute("id"),s.clearAttributes&&(s.clearAttributes(),s.mergeAttributes(o),s.removeAttribute("uniqueNumber"),s.options))for(var a=s.options,u=o.options,c=a.length;c--;)a[c].selected=u[c].selected;var l=d[o.tagName.toLowerCase()];l&&o[l]&&(s[l]=o[l])}if(Browser.ie)for(var h=n.getElementsByTagName("object"),f=this.getElementsByTagName("object"),p=h.length;p--;)h[p].outerHTML=f[p].outerHTML;return document.id(n)}}),[Element,Window,Document].invoke("implement",{addListener:function(t,e){var n,i;return"unload"==t?(n=e,i=this,e=function(){i.removeListener("unload",e),n()}):l[Slick.uidOf(this)]=this,this.addEventListener?this.addEventListener(t,e,!!arguments[2]):this.attachEvent("on"+t,e),this},removeListener:function(t,e){return this.removeEventListener?this.removeEventListener(t,e,!!arguments[2]):this.detachEvent("on"+t,e),this},retrieve:function(t,e){var n=a(Slick.uidOf(this)),i=n[t];return null!=(i=null!=e&&null==i?n[t]=e:i)?i:null},store:function(t,e){return a(Slick.uidOf(this))[t]=e,this},eliminate:function(t){return delete a(Slick.uidOf(this))[t],this}}),window.attachEvent&&!window.addEventListener&&window.addListener("unload",function(){Object.each(l,u),window.CollectGarbage&&CollectGarbage()}),Element.Properties={},Element.Properties=new Hash,Element.Properties.style={set:function(t){this.style.cssText=t},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html={set:function(t){null==t?t="":"array"==typeOf(t)&&(t=t.join("")),this.innerHTML=t},erase:function(){this.innerHTML=""}},(t=document.createElement("div")).innerHTML="<nav></nav>",1==t.childNodes.length);if(!f)for(var p="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),m=document.createDocumentFragment(),g=p.length;g--;)m.createElement(p[g]);var v,y,t=null,t=Function.attempt(function(){return document.createElement("table").innerHTML="<tr><td></td></tr>",!0}),b="<td></td>",b=((E=document.createElement("tr")).innerHTML=b,E.innerHTML==b),E=null;t&&b&&f||(Element.Properties.html.set=(v=Element.Properties.html.set,(y={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]}).thead=y.tfoot=y.tbody,function(t){var e=y[this.get("tag")];if(!(e=e||f?e:[0,"",""]))return v.call(this,t);var n=e[0],i=document.createElement("div"),r=i;for(f||m.appendChild(i),i.innerHTML=[e[1],t,e[2]].flatten().join("");n--;)r=r.firstChild;this.empty().adopt(r.childNodes),f||m.removeChild(i)})),(E=document.createElement("form")).innerHTML="<select><option>s</option></select>","s"!=E.firstChild.value&&(Element.Properties.value={set:function(t){if("select"!=this.get("tag"))return this.setProperty("value",t);for(var e=this.getElements("option"),n=0;n<e.length;n++){var i=e[n],r=i.getAttributeNode("value");if((r&&r.specified?i.value:i.get("text"))==t)return i.selected=!0}},get:function(){var t=this,e=t.get("tag");return"select"!=e&&"option"!=e?this.getProperty("value"):"select"!=e||(t=t.getSelected()[0])?(e=t.getAttributeNode("value"))&&e.specified?t.value:t.get("text"):""}}),E=null,document.createElement("div").getAttributeNode("id")&&(Element.Properties.id={set:function(t){this.id=this.getAttributeNode("id").value=t},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}})})(),(()=>{function e(t,e){t.store("$opacity",e),t.style.visibility=0<e||null==e?"visible":"hidden"}var t=document.html,i=((n=document.createElement("div")).style.color="red",n.style.color=null,"red"==n.style.color),n=null,n=(Element.Properties.styles={set:function(t){this.setStyles(t)}},null!=t.style.opacity),r=null!=t.style.filter,s=/alpha\(opacity=([\d.]+)\)/i,o=n?function(t,e){t.style.opacity=e}:r?function(t,e){var n=t.style,t=(t.currentStyle&&t.currentStyle.hasLayout||(n.zoom=1),e=null==e||1==e?"":"alpha(opacity="+(100*e).limit(0,100).round()+")",n.filter||t.getComputedStyle("filter")||"");n.filter=s.test(t)?t.replace(s,e):t+e,n.filter||n.removeAttribute("filter")}:e,a=n?function(t){t=t.style.opacity||t.getComputedStyle("opacity");return""==t?1:t.toFloat()}:r?function(t){var e,t=t.style.filter||t.getComputedStyle("filter");return null==(e=t?t.match(s):e)||null==t?1:e[1]/100}:function(t){var e=t.retrieve("$opacity");return e=null==e?"hidden"==t.style.visibility?0:1:e},u=null==t.style.cssFloat?"styleFloat":"cssFloat";Element.implement({getComputedStyle:function(t){var e;return this.currentStyle?this.currentStyle[t.camelCase()]:(e=(e=Element.getDocument(this).defaultView)?e.getComputedStyle(this,null):null)?e.getPropertyValue(t==u?"float":t.hyphenate()):null},setStyle:function(t,e){var n;return"opacity"==t?(null!=e&&(e=parseFloat(e)),o(this,e)):(t=("float"==t?u:t).camelCase(),"string"!=typeOf(e)?(n=(Element.Styles[t]||"@").split(" "),e=Array.from(e).map(function(t,e){return n[e]?"number"==typeOf(t)?n[e].replace("@",Math.round(t)):t:""}).join(" ")):e==String(Number(e))&&(e=Math.round(e)),(""==(this.style[t]=e)||null==e)&&i&&this.style.removeAttribute&&this.style.removeAttribute(t)),this},getStyle:function(t){if("opacity"==t)return a(this);t=("float"==t?u:t).camelCase();var e,n,i=this.style[t];if(!i||"zIndex"==t){for(var r in i=[],Element.ShortStyles)if(t==r){for(var s in Element.ShortStyles[r])i.push(this.getStyle(s));return i.join(" ")}i=this.getComputedStyle(t)}if(i&&(e=(i=String(i)).match(/rgba?\([\d\s,]+\)/))&&(i=i.replace(e[0],e[0].rgbToHex())),Browser.opera||Browser.ie){if(/^(height|width)$/.test(t)&&!/px$/.test(i))return n=0,("width"==t?["left","right"]:["top","bottom"]).each(function(t){n+=this.getStyle("border-"+t+"-width").toInt()+this.getStyle("padding-"+t).toInt()},this),this["offset"+t.capitalize()]-n+"px";if(Browser.ie&&/^border(.+)Width|margin|padding/.test(t)&&isNaN(parseFloat(i)))return"0px"}return i},setStyles:function(t){for(var e in t)this.setStyle(e,t[e]);return this},getStyles:function(){var e={};return Array.flatten(arguments).each(function(t){e[t]=this.getStyle(t)},this),e}}),Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@"},Element.implement({setOpacity:function(t){return o(this,t),this},getOpacity:function(){return a(this)}}),Element.Properties.opacity={set:function(t){o(this,t),e(this,t)},get:function(){return a(this)}},Element.Styles=new Hash(Element.Styles),Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each(function(n){var i=Element.ShortStyles,r=Element.Styles,t=(["margin","padding"].each(function(t){var e=t+n;i[t][e]=r[e]="@px"}),"border"+n),e=(i.border[t]=r[t]="@px @ rgb(@, @, @)",t+"Width"),s=t+"Style",o=t+"Color";i[t]={},i.borderWidth[e]=i[t][e]=r[e]="@px",i.borderStyle[s]=i[t][s]=r[s]="@",i.borderColor[o]=i[t][o]=r[o]="rgb(@, @, @)"})})(),(()=>{var t;Element.Properties.events={set:function(t){this.addEvents(t)}},[Element,Window,Document].invoke("implement",{addEvent:function(e,n){var t,i,r,s,o,a,u=this.retrieve("events",{});return u[e]||(u[e]={keys:[],values:[]}),u[e].keys.contains(n)||(u[e].keys.push(n),i=Element.Events[t=e],r=n,s=this,i&&(i.onAdd&&i.onAdd.call(this,n,e),i.condition&&(r=function(t){return!i.condition.call(this,t,e)||n.call(this,t)}),i.base)&&(t=Function.from(i.base).call(this,e)),o=function(){return n.call(s)},(a=Element.NativeEvents[t])&&this.addListener(t,o=2==a?function(t){t=new DOMEvent(t,s.getWindow()),!1===r.call(s,t)&&t.stop()}:o,arguments[2]),u[e].values.push(o)),this},removeEvent:function(t,e){var n,i,r=this.retrieve("events");return r&&r[t]&&-1!=(n=(r=r[t]).keys.indexOf(e))&&(i=r.values[n],delete r.keys[n],delete r.values[n],(r=Element.Events[t])&&(r.onRemove&&r.onRemove.call(this,e,t),r.base)&&(t=Function.from(r.base).call(this,t)),Element.NativeEvents[t])?this.removeListener(t,i,arguments[2]):this},addEvents:function(t){for(var e in t)this.addEvent(e,t[e]);return this},removeEvents:function(e){if("object"==typeOf(e))for(var t in e)this.removeEvent(t,e[t]);else{var n=this.retrieve("events");if(n)if(e)n[e]&&(n[e].keys.each(function(t){this.removeEvent(e,t)},this),delete n[e]);else{for(t in n)this.removeEvents(t);this.eliminate("events")}}return this},fireEvent:function(t,e,n){var i=this.retrieve("events");return i&&i[t]&&(e=Array.from(e),i[t].keys.each(function(t){n?t.delay(n,this,e):t.apply(this,e)},this)),this},cloneEvents:function(t,e){var n=(t=document.id(t)).retrieve("events");if(n)if(e)n[e]&&n[e].keys.each(function(t){this.addEvent(e,t)},this);else for(var i in n)this.cloneEvents(t,i);return this}}),Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1},Element.Events={mousewheel:{base:Browser.firefox?"DOMMouseScroll":"mousewheel"}},"onmouseenter"in document.documentElement?Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2:(Element.Events.mouseenter={base:"mouseover",condition:t=function(t){t=t.relatedTarget;return null==t||!!t&&t!=this&&"xul"!=t.prefix&&"document"!=typeOf(this)&&!this.contains(t)}},Element.Events.mouseleave={base:"mouseout",condition:t}),window.addEventListener||(Element.NativeEvents.propertychange=2,Element.Events.change={base:function(){var t=this.type;return"input"!=this.get("tag")||"radio"!=t&&"checkbox"!=t?"change":"propertychange"},condition:function(t){return"radio"!=this.type||"checked"==t.event.propertyName&&this.checked}}),Element.Events=new Hash(Element.Events)})(),(()=>{function m(t,e,n,i,r){for(;r&&r!=t;){if(e(r,i))return n.call(r,i,r);r=document.id(r.parentNode)}}function t(l){return{base:"focusin",remove:function(t,e){var n=t.retrieve(h+l+"listeners",{})[e];if(n&&n.forms)for(var i=n.forms.length;i--;)n.forms[i].removeEvent(l,n.fns[i])},listen:function(e,n,i,t,r,s){var o,a,u,c,t="form"==r.get("tag")?r:t.target.getParent("form");t&&(c=(a=(o=e.retrieve(h+l+"listeners",{}))[s]||{forms:[],fns:[]}).forms,u=a.fns,-1==c.indexOf(t))&&(c.push(t),t.addEvent(l,c=function(t){m(e,n,i,t,r)}),u.push(c),o[s]=a,e.store(h+l+"listeners",o))}}}function e(o){return{base:"focusin",listen:function(e,n,i,t,r){var s={blur:function(){this.removeEvents(s)}};s[o]=function(t){m(e,n,i,t,r)},t.target.addEvents(s)}}}function n(s,o){return function(t,e,n){var i,r;return-1==t.indexOf(":relay")||"relay"!=(i=Slick.parse(t).expressions[0][0]).pseudos[0].key?s.call(this,t,e,n):(r=i.tag,i.pseudos.slice(1).each(function(t){r+=":"+t.key+(t.value?"("+t.value+")":"")}),s.call(this,t,e),o.call(this,r,i.pseudos[0].value,e))}}var i=!!window.addEventListener,g=(Element.NativeEvents.focusin=Element.NativeEvents.focusout=2,{mouseenter:{base:"mouseover"},mouseleave:{base:"mouseout"},focus:{base:"focus"+(i?"":"in"),capture:!0},blur:{base:i?"blur":"focusout",capture:!0}}),h="$delegation:";i||Object.append(g,{submit:t("submit"),reset:t("reset"),change:e("change"),select:e("select")});var v=(i=Element.prototype).addEvent,f=i.removeEvent,p={addEvent:function(n,i,r){var t=this.retrieve("$delegates",{}),e=t[n];if(e)for(var s in e)if(e[s].fn==r&&e[s].match==i)return this;var o,a,u=n,c=i,l=r,h=g[n]||{},f=(n=h.base||u,i=function(t){return Slick.match(t,c)},Element.Events[u]),p=(f&&f.condition&&(o=i,a=f.condition,i=function(t,e){return o(t,e)&&a.call(t,e,n)}),this),d=String.uniqueID(),f=h.listen?function(t,e){(e=!e&&t&&t.target?t.target:e)&&h.listen(p,i,r,t,e,d)}:function(t,e){(e=!e&&t&&t.target?t.target:e)&&m(p,i,r,t,e)};return(e=e||{})[d]={match:c,fn:l,delegator:f},t[u]=e,v.call(this,n,f,h.capture)},removeEvent:function(t,e,n,i){var r,s,o,a,u,c=this.retrieve("$delegates",{}),l=c[t];if(l){if(i)return r=t,s=l[i].delegator,t=(o=g[t]||{}).base||r,o.remove&&o.remove(this,i),delete l[i],c[r]=l,f.call(this,t,s);if(n){for(a in l)if((u=l[a]).match==e&&u.fn==n)return p.removeEvent.call(this,t,e,n,a)}else for(a in l)(u=l[a]).match==e&&p.removeEvent.call(this,t,e,u.fn,a)}return this}};[Element,Window,Document].invoke("implement",{addEvent:n(v,p.addEvent),removeEvent:n(f,p.removeEvent)})})(),(()=>{function n(t){return"static"!=u(t,"position")||f(t)}function i(t){return n(t)||/^(?:table|td|th)$/i.test(t.tagName)}var t=document.createElement("div"),e=document.createElement("div"),e=(t.style.height="0",t.appendChild(e),e.offsetParent===t),t=null,u=(Element.implement({scrollTo:function(t,e){return f(this)?this.getWindow().scrollTo(t,e):(this.scrollLeft=t,this.scrollTop=e),this},getSize:function(){return f(this)?this.getWindow().getSize():{x:this.offsetWidth,y:this.offsetHeight}},getScrollSize:function(){return f(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return f(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var t=this.parentNode,e={x:0,y:0};t&&!f(t);)e.x+=t.scrollLeft,e.y+=t.scrollTop,t=t.parentNode;return e},getOffsetParent:e?function(){var t=this;if(!f(t)&&"fixed"!=u(t,"position"))for(var e="static"==u(t,"position")?i:n;t=t.parentNode;)if(e(t))return t;return null}:function(){if(!f(this)&&"fixed"!=u(this,"position"))try{return this.offsetParent}catch(t){}return null},getOffsets:function(){var t,e,n,i,r;if(this.getBoundingClientRect&&!Browser.Platform.ios)return t=this.getBoundingClientRect(),n=(e=document.id(this.getDocument().documentElement)).getScroll(),i=this.getScrolls(),r="fixed"==u(this,"position"),{x:t.left.toInt()+i.x+(r?0:n.x)-e.clientLeft,y:t.top.toInt()+i.y+(r?0:n.y)-e.clientTop};var s,o=this,a={x:0,y:0};if(!f(this)){for(;o&&!f(o);)a.x+=o.offsetLeft,a.y+=o.offsetTop,Browser.firefox?(c(o)||(a.x+=h(o),a.y+=l(o)),(s=o.parentNode)&&"visible"!=u(s,"overflow")&&(a.x+=h(s),a.y+=l(s))):o!=this&&Browser.safari&&(a.x+=h(o),a.y+=l(o)),o=o.offsetParent;Browser.firefox&&!c(this)&&(a.x-=h(this),a.y-=l(this))}return a},getPosition:function(t){var e=this.getOffsets(),n=this.getScrolls(),e={x:e.x-n.x,y:e.y-n.y};return(t=t&&document.id(t))?(n=t.getPosition(),{x:e.x-n.x-h(t),y:e.y-n.y-l(t)}):e},getCoordinates:function(t){var e;return f(this)?this.getWindow().getCoordinates():(t=this.getPosition(t),e=this.getSize(),(t={left:t.x,top:t.y,width:e.x,height:e.y}).right=t.left+t.width,t.bottom=t.top+t.height,t)},computePosition:function(t){return{left:t.x-r(this,"margin-left"),top:t.y-r(this,"margin-top")}},setPosition:function(t){return this.setStyles(this.computePosition(t))}}),[Document,Window].invoke("implement",{getSize:function(){var t=s(this);return{x:t.clientWidth,y:t.clientHeight}},getScroll:function(){var t=this.getWindow(),e=s(this);return{x:t.pageXOffset||e.scrollLeft,y:t.pageYOffset||e.scrollTop}},getScrollSize:function(){var t=s(this),e=this.getSize(),n=this.getDocument().body;return{x:Math.max(t.scrollWidth,n.scrollWidth,e.x),y:Math.max(t.scrollHeight,n.scrollHeight,e.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var t=this.getSize();return{top:0,left:0,bottom:t.y,right:t.x,height:t.y,width:t.x}}}),Element.getComputedStyle);function r(t,e){return u(t,e).toInt()||0}function c(t){return"border-box"==u(t,"-moz-box-sizing")}function l(t){return r(t,"border-top-width")}function h(t){return r(t,"border-left-width")}function f(t){return/^(?:body|html)$/i.test(t.tagName)}function s(t){t=t.getDocument();return t.compatMode&&"CSS1Compat"!=t.compatMode?t.body:t.html}})(),Element.alias({position:"setPosition"}),[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}}),!function(){var i=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:!1,duration:500,frames:null,frameSkip:!0,link:"ignore"},initialize:function(t){this.subject=this.subject||this,this.setOptions(t)},getTransition:function(){return function(t){return-(Math.cos(Math.PI*t)-1)/2}},step:function(t){var e;this.options.frameSkip?(e=(null!=this.time?t-this.time:0)/this.frameInterval,this.time=t,this.frame+=e):this.frame++,this.frame<this.frames?(t=this.transition(this.frame/this.frames),this.set(this.compute(this.from,this.to,t))):(this.frame=this.frames,this.set(this.compute(this.from,this.to,1)),this.stop())},set:function(t){return t},compute:function(t,e,n){return i.compute(t,e,n)},check:function(){if(!this.isRunning())return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},start:function(t,e){var n;return this.check(t,e)&&(this.from=t,this.to=e,this.frame=this.options.frameSkip?0:-1,this.time=null,this.transition=this.getTransition(),t=this.options.frames,e=this.options.fps,n=this.options.duration,this.duration=i.Durations[n]||n.toInt(),this.frameInterval=1e3/e,this.frames=t||Math.round(this.duration/this.frameInterval),this.fireEvent("start",this.subject),o.call(this,e)),this},stop:function(){return this.isRunning()&&(this.time=null,t.call(this,this.options.fps),this.frames==this.frame?(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)):this.fireEvent("stop",this.subject)),this},cancel:function(){return this.isRunning()&&(this.time=null,t.call(this,this.options.fps),this.frame=this.frames,this.fireEvent("cancel",this.subject).clearChain()),this},pause:function(){return this.isRunning()&&(this.time=null,t.call(this,this.options.fps)),this},resume:function(){return this.frame<this.frames&&!this.isRunning()&&o.call(this,this.options.fps),this},isRunning:function(){var t=n[this.options.fps];return t&&t.contains(this)}}),n=(i.compute=function(t,e,n){return(e-t)*n+t},i.Durations={short:250,normal:500,long:1e3},{}),r={},s=function(){for(var t=Date.now(),e=this.length;e--;){var n=this[e];n&&n.step(t)}},o=function(t){var e=n[t]||(n[t]=[]);e.push(this),r[t]||(r[t]=s.periodical(Math.round(1e3/t),e))},t=function(t){var e=n[t];e&&(e.erase(this),!e.length)&&r[t]&&(delete n[t],r[t]=clearInterval(r[t]))}}(),Fx.CSS=new Class({Extends:Fx,prepare:function(t,e,n){var i,r,s,o=(n=Array.from(n))[0],n=n[1];return null==n&&(n=o,o=t.getStyle(e),i=this.options.unit)&&o.slice(-i.length)!=i&&0!=parseFloat(o)&&(t.setStyle(e,n+i),s=t.getComputedStyle(e),/px$/.test(s)||null==(s=t.style[("pixel-"+e).camelCase()])&&(r=t.style.left,t.style.left=n+i,s=t.style.pixelLeft,t.style.left=r),o=(n||1)/(parseFloat(s)||1)*(parseFloat(o)||0),t.setStyle(e,o+i)),{from:this.parse(o),to:this.parse(n)}},parse:function(t){return(t="string"==typeof(t=Function.from(t)())?t.split(" "):Array.from(t)).map(function(i){i=String(i);var r=!1;return Object.each(Fx.CSS.Parsers,function(t,e){var n;r||!(n=t.parse(i))&&0!==n||(r={value:n,parser:t})}),r=r||{value:i,parser:Fx.CSS.Parsers.String}})},compute:function(e,n,i){var r=[];return Math.min(e.length,n.length).times(function(t){r.push({value:e[t].parser.compute(e[t].value,n[t].value,i),parser:e[t].parser})}),r.$family=Function.from("fx:css:value"),r},serve:function(t,e){"fx:css:value"!=typeOf(t)&&(t=this.parse(t));var n=[];return t.each(function(t){n=n.concat(t.parser.serve(t.value,e))}),n},render:function(t,e,n,i){t.setStyle(e,this.serve(n,i))},search:function(t){var i,r;return Fx.CSS.Cache[t]||(i={},r=new RegExp("^"+t.escapeRegExp()+"$"),Array.each(document.styleSheets,function(t,e){var n=t.href;n&&n.contains("://")&&!n.contains(document.domain)||(n=t.rules||t.cssRules,Array.each(n,function(n,t){var e;n.style&&(e=n.selectorText?n.selectorText.replace(/^\w+/,function(t){return t.toLowerCase()}):null)&&r.test(e)&&Object.each(Element.Styles,function(t,e){n.style[e]&&!Element.ShortStyles[e]&&(t=String(n.style[e]),i[e]=/^rgb/.test(t)?t.rgbToHex():t)})}))}),Fx.CSS.Cache[t]=i)}}),Fx.CSS.Cache={},Fx.CSS.Parsers={Color:{parse:function(t){return t.match(/^#[0-9a-f]{3,6}$/i)?t.hexToRgb(!0):!!(t=t.match(/(\d+),\s*(\d+),\s*(\d+)/))&&[t[1],t[2],t[3]]},compute:function(n,i,r){return n.map(function(t,e){return Math.round(Fx.compute(n[e],i[e],r))})},serve:function(t){return t.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(t,e){return e?t+e:t}},String:{parse:Function.from(!1),compute:function(t,e){return e},serve:function(t){return t}}},Fx.CSS.Parsers=new Hash(Fx.CSS.Parsers),Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(t,e){this.element=this.subject=document.id(t),this.parent(e)},set:function(t,e){return 1==arguments.length&&(e=t,t=this.property||this.options.property),this.render(this.element,t,e,this.options.unit),this},start:function(t,e,n){return this.check(t,e,n)?(t=Array.flatten(arguments),this.property=this.options.property||t.shift(),e=this.prepare(this.element,this.property,t),this.parent(e.from,e.to)):this}}),Element.Properties.tween={set:function(t){return this.get("tween").cancel().setOptions(t),this},get:function(){var t=this.retrieve("tween");return t||(t=new Fx.Tween(this,{link:"cancel"}),this.store("tween",t)),t}},Element.implement({tween:function(t,e,n){return this.get("tween").start(t,e,n),this},fade:function(t){var e,n=this.get("tween"),i=["opacity"].append(arguments);switch(null==i[1]&&(i[1]="toggle"),i[1]){case"in":s="start",i[1]=1;break;case"out":s="start",i[1]=0;break;case"show":s="set",i[1]=1;break;case"hide":s="set",i[1]=0;break;case"toggle":var r=this.retrieve("fade:flag",1==this.getStyle("opacity")),s="start";i[1]=r?0:1,this.store("fade:flag",!r),e=!0;break;default:s="start"}e||this.eliminate("fade:flag"),n[s].apply(n,i);var o=i[i.length-1];return"set"==s||0!=o?this.setStyle("visibility",0==o?"hidden":"visible"):n.chain(function(){this.element.setStyle("visibility","hidden"),this.callChain()}),this},highlight:function(t,e){e=e||("transparent"==(e=this.retrieve("highlight:original",this.getStyle("background-color")))?"#fff":e);var n=this.get("tween");return n.start("background-color",t||"#ffff88",e).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),n.callChain()}.bind(this)),this}}),Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(t,e){this.element=this.subject=document.id(t),this.parent(e)},set:function(t){for(var e in t="string"==typeof t?this.search(t):t)this.render(this.element,e,t[e],this.options.unit);return this},compute:function(t,e,n){var i,r={};for(i in t)r[i]=this.parent(t[i],e[i],n);return r},start:function(t){if(!this.check(t))return this;var e,n={},i={};for(e in t="string"==typeof t?this.search(t):t){var r=this.prepare(this.element,e,t[e]);n[e]=r.from,i[e]=r.to}return this.parent(n,i)}}),Element.Properties.morph={set:function(t){return this.get("morph").cancel().setOptions(t),this},get:function(){var t=this.retrieve("morph");return t||(t=new Fx.Morph(this,{link:"cancel"}),this.store("morph",t)),t}},Element.implement({morph:function(t){return this.get("morph").start(t),this}}),Fx.implement({getTransition:function(){var t,e=this.options.transition||Fx.Transitions.Sine.easeInOut;return e="string"==typeof e&&(t=e.split(":"),e=(e=Fx.Transitions)[t[0]]||e[t[0].capitalize()],t[1])?e["ease"+t[1].capitalize()+(t[2]?t[2].capitalize():"")]:e}}),Fx.Transition=function(e,n){n=Array.from(n);function t(t){return e(t,n)}return Object.append(t,{easeIn:t,easeOut:function(t){return 1-e(1-t,n)},easeInOut:function(t){return(t<=.5?e(2*t,n):2-e(2*(1-t),n))/2}})},Fx.Transitions={linear:function(t){return t}},Fx.Transitions=new Hash(Fx.Transitions),Fx.Transitions.extend=function(t){for(var e in t)Fx.Transitions[e]=new Fx.Transition(t[e])},Fx.Transitions.extend({Pow:function(t,e){return Math.pow(t,e&&e[0]||6)},Expo:function(t){return Math.pow(2,8*(t-1))},Circ:function(t){return 1-Math.sin(Math.acos(t))},Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Back:function(t,e){return e=e&&e[0]||1.618,Math.pow(t,2)*((e+1)*t-e)},Bounce:function(t){for(var e,n=0,i=1;;n+=i,i/=2)if((7-4*n)/11<=t){e=i*i-Math.pow((11-6*n-11*t)/4,2);break}return e},Elastic:function(t,e){return Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e&&e[0]||1)/3)}}),["Quad","Cubic","Quart","Quint"].each(function(t,e){Fx.Transitions[t]=new Fx.Transition(function(t){return Math.pow(t,e+2)})}),!function(){function n(){}var s="onprogress"in new Browser.Request,e=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,timeout:0,noCache:!1},initialize:function(t){this.xhr=new Browser.Request,this.setOptions(t),this.headers=this.options.headers},onStateChange:function(){var e=this.xhr;4==e.readyState&&this.running&&(this.running=!1,this.status=0,Function.attempt(function(){var t=e.status;this.status=1223==t?204:t}.bind(this)),e.onreadystatechange=n,s&&(e.onprogress=e.onloadstart=n),clearTimeout(this.timer),this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML},this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure())},isSuccess:function(){var t=this.status;return 200<=t&&t<300},isRunning:function(){return!!this.running},processScripts:function(t){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?Browser.exec(t):t.stripScripts(this.options.evalScripts)},success:function(t,e){this.onSuccess(this.processScripts(t),e)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(t){this.fireEvent("loadstart",[t,this.xhr])},progress:function(t){this.fireEvent("progress",[t,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr)},setHeader:function(t,e){return this.headers[t]=e,this},getHeader:function(t){return Function.attempt(function(){return this.xhr.getResponseHeader(t)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},send:function(t){if(this.check(t)){this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var e=typeOf(t),e=("string"!=e&&"element"!=e||(t={data:t}),this.options),n=(t=Object.append({data:e.data,url:e.url,method:e.method},t)).data,e=String(t.url),t=t.method.toLowerCase();switch(typeOf(n)){case"element":n=document.id(n).toQueryString();break;case"object":case"hash":n=Object.toQueryString(n)}this.options.format&&(i="format="+this.options.format,n=n?i+"&"+n:i),this.options.emulation&&!["get","post"].contains(t)&&(i="_method="+t,n=n?i+"&"+n:i,t="post"),this.options.urlEncoded&&["post","put"].contains(t)&&(i=this.options.encoding?"; charset="+this.options.encoding:"",this.headers["Content-type"]="application/x-www-form-urlencoded"+i);var i=(e=e||document.location.pathname).lastIndexOf("/"),r=(-1<i&&-1<(i=e.indexOf("#"))&&(e=e.substr(0,i)),this.options.noCache&&(e+=(e.contains("?")?"&":"?")+String.uniqueID()),n&&"get"==t&&(e+=(e.contains("?")?"&":"?")+n,n=null),this.xhr);s&&(r.onloadstart=this.loadstart.bind(this),r.onprogress=this.progress.bind(this)),r.open(t.toUpperCase(),e,this.options.async,this.options.user,this.options.password),this.options.user&&"withCredentials"in r&&(r.withCredentials=!0),r.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(e,n){try{r.setRequestHeader(n,e)}catch(t){this.fireEvent("exception",[n,e])}},this),this.fireEvent("request"),r.send(n),this.options.async?this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)):this.onStateChange()}return this},cancel:function(){var t;return this.running&&(this.running=!1,(t=this.xhr).abort(),clearTimeout(this.timer),t.onreadystatechange=n,s&&(t.onprogress=t.onloadstart=n),this.xhr=new Browser.Request,this.fireEvent("cancel")),this}}),t={};["get","post","put","delete","GET","POST","PUT","DELETE"].each(function(n){t[n]=function(t){var e={method:n};return null!=t&&(e.data=t),this.send(e)}}),e.implement(t),Element.Properties.send={set:function(t){return this.get("send").cancel().setOptions(t),this},get:function(){var t=this.retrieve("send");return t||(t=new e({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")}),this.store("send",t)),t}},Element.implement({send:function(t){var e=this.get("send");return e.send({data:this,url:t||e.options.url}),this}})}(),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(t){var e,n=this.options,i=this.response,t=(i.html=t.stripScripts(function(t){i.javascript=t}),i.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i)),t=(t&&(i.html=t[1]),new Element("div").set("html",i.html));i.tree=t.childNodes,i.elements=t.getElements(n.filter||"*"),n.filter&&(i.tree=i.elements),n.update?(e=document.id(n.update).empty(),n.filter?e.adopt(i.elements):e.set("html",i.html)):n.append&&(e=document.id(n.append),n.filter?i.elements.reverse().inject(e):e.adopt(t.getChildren())),n.evalScripts&&Browser.exec(i.javascript),this.onSuccess(i.tree,i.elements,i.html,i.javascript)}}),Element.Properties.load={set:function(t){return this.get("load").cancel().setOptions(t),this},get:function(){var t=this.retrieve("load");return t||(t=new Request.HTML({data:this,link:"cancel",update:this,method:"get"}),this.store("load",t)),t}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString})),this}}),"undefined"==typeof JSON&&(this.JSON={}),JSON=new Hash({stringify:JSON.stringify,parse:JSON.parse}),!function(){var special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(t){return special[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(t){return t=t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(t)},JSON.encode=JSON.stringify?function(t){return JSON.stringify(t)}:function(t){switch(t&&t.toJSON&&(t=t.toJSON()),typeOf(t)){case"string":return'"'+t.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+t.map(JSON.encode).clean()+"]";case"object":case"hash":var n=[];return Object.each(t,function(t,e){t=JSON.encode(t);t&&n.push(JSON.encode(e)+":"+t)}),"{"+n+"}";case"number":case"boolean":return""+t;case"null":return"null"}return null},JSON.decode=function(string,secure){if(!string||"string"!=typeOf(string))return null;if(secure||JSON.secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}return eval("("+string+")")}}(),Request.JSON=new Class({Extends:Request,options:{secure:!0},initialize:function(t){this.parent(t),Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(e){var t;try{t=this.response.json=JSON.decode(e,this.options.secure)}catch(t){return void this.fireEvent("error",[e,t])}null==t?this.onFailure():this.onSuccess(t,e)}}),new Class({Implements:Options,options:{path:"/",domain:!1,duration:!1,secure:!1,document:document,encode:!0},initialize:function(t,e){this.key=t,this.setOptions(e)},write:function(t){var e;return this.options.encode&&(t=encodeURIComponent(t)),this.options.domain&&(t+="; domain="+this.options.domain),this.options.path&&(t+="; path="+this.options.path),this.options.duration&&((e=new Date).setTime(e.getTime()+24*this.options.duration*60*60*1e3),t+="; expires="+e.toGMTString()),this.options.secure&&(t+="; secure"),this.options.document.cookie=this.key+"="+t,this},read:function(){var t=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return t?decodeURIComponent(t[1]):null},dispose:function(){return new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write(""),this}}));Cookie.write=function(t,e,n){return new Cookie(t,n).write(e)},Cookie.read=function(t){return new Cookie(t).read()},Cookie.dispose=function(t,e){return new Cookie(t,e).dispose()},((e,n)=>{function t(){for(var t=c.length;t--;)if(c[t]())return h(),!0;return!1}function i(){clearTimeout(u),t()||(u=setTimeout(i,10))}function r(){try{return l.doScroll(),!0}catch(t){}return!1}var s,o,a,u,c=[],l=n.createElement("div"),h=function(){clearTimeout(u),s||(Browser.loaded=s=!0,n.removeListener("DOMContentLoaded",h).removeListener("readystatechange",t),n.fireEvent("domready"),e.fireEvent("domready"))};n.addListener("DOMContentLoaded",h),l.doScroll&&!r()&&(c.push(r),a=!0),n.readyState&&c.push(function(){var t=n.readyState;return"loaded"==t||"complete"==t}),"onreadystatechange"in n?n.addListener("readystatechange",t):a=!0,a&&i(),Element.Events.domready={onAdd:function(t){s&&t.call(this)}},Element.Events.load={base:"load",onAdd:function(t){o&&this==e&&t.call(this)},condition:function(){return this==e&&(h(),delete Element.Events.load),!0}},e.addEvent("load",function(){o=!0})})(window,document),!function(){var Swiff=this.Swiff=new Class({Implements:Options,options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:"high",allowScriptAccess:"always",wMode:"window",swLiveConnect:!0},callBacks:{},vars:{}},toElement:function(){return this.object},initialize:function(t,e){this.instance="Swiff_"+String.uniqueID(),this.setOptions(e),e=this.options;var n,i=this.id=e.id||this.instance,r=document.id(e.container),s=(Swiff.CallBacks[this.instance]={},e.params),o=e.vars,a=e.callBacks,u=Object.append({height:e.height,width:e.width},e.properties),c=this;for(n in a)Swiff.CallBacks[this.instance][n]=(t=>function(){return t.apply(c.object,arguments)})(a[n]),o[n]="Swiff.CallBacks."+this.instance+"."+n;s.flashVars=Object.toQueryString(o),Browser.ie?(u.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",s.movie=t):u.type="application/x-shockwave-flash",u.data=t;var l,h,f='<object id="'+i+'"';for(l in u)f+=" "+l+'="'+u[l]+'"';for(h in f+=">",s)s[h]&&(f+='<param name="'+h+'" value="'+s[h]+'" />');f+="</object>",this.object=(r?r.empty():new Element("div")).set("html",f).firstChild},replaces:function(t){return(t=document.id(t,!0)).parentNode.replaceChild(this.toElement(),t),this},inject:function(t){return document.id(t,!0).appendChild(this.toElement()),this},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].append(arguments))}});Swiff.CallBacks={},Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+"</invoke>");return eval(rs)}}();
MooTools.More={version:"1.2.5.1",build:"254884f2b83651bf95260eed5c6cceb838e22d8e"},(()=>{var n,s={language:"en-US",languages:{"en-US":{}},cascades:["en-US"]};MooTools.lang=new Events,$extend(MooTools.lang,{setLanguage:function(t){return s.languages[t]&&(s.language=t,this.load(),this.fireEvent("langChange",t)),this},load:function(){var t=this.cascade(this.getCurrentLanguage());n={},$each(t,function(t,e){n[e]=this.lambda(t)},this)},getCurrentLanguage:function(){return s.language},addLanguage:function(t){return s.languages[t]=s.languages[t]||{},this},cascade:function(t){var e=(s.languages[t]||{}).cascades||[],t=(e.combine(s.cascades),e.erase(t).push(t),e.map(function(t){return s.languages[t]},this));return $merge.apply(this,t)},lambda:function(i){return(i||{}).get=function(t,e){return $lambda(i[t]).apply(this,$splat(e))},i},get:function(t,e,i){if(n&&n[t])return e?n[t].get(e,i):n[t]},set:function(t,e,i){return this.addLanguage(t),(langData=s.languages[t])[e]||(langData[e]={}),$extend(langData[e],i),t==this.getCurrentLanguage()&&(this.load(),this.fireEvent("langChange",t)),this},list:function(){return Hash.getKeys(s.languages)}})})(),Class.refactor=function(e,t){return $each(t,function(i,t){var n=e.prototype[t];(n=n&&(n._origin||n))&&"function"==typeof i?e.implement(t,function(){var t=this.previous,e=(this.previous=n,i.apply(this,arguments));return this.previous=t,e}):e.implement(t,i)}),e},Class.Mutators.Binds=function(t){return t},Class.Mutators.initialize=function(t){return function(){return $splat(this.Binds).each(function(t){var e=this[t];e&&(this[t]=e.bind(this))},this),t.apply(this,arguments)}},Class.Occlude=new Class({occlude:function(t,e){var i=(e=document.id(e||this.element)).retrieve(t||this.property);return i&&!$defined(this.occluded)?this.occluded=i:(this.occluded=!1,e.store(t||this.property,this),this.occluded)}}),(()=>{var e={wait:function(t){return this.chain(function(){this.callChain.delay($pick(t,500),this)}.bind(this))}};Chain.implement(e),window.Fx&&(Fx.implement(e),["Css","Tween","Elements"].each(function(t){Fx[t]&&Fx[t].implement(e)})),Element.implement({chains:function(t){return $splat($pick(t,["tween","morph","reveal"])).each(function(t){(t=this.get(t))&&t.setOptions({link:"chain"})},this),this},pauseFx:function(t,e){return this.chains(e).get($pick(e,"tween")).wait(t),this}})})(),function(){function n(t,e){return new Array(e-String(t).length+1).join("0")+t}function i(t,e,i){var n=-1,s=r.getMsg(t+"s");switch($type(e)){case"object":n=s[e.get(t)];break;case"number":if(n=s[e])break;throw new Error("Invalid "+t+" index: "+e);case"string":var o=s.filter(function(t){return this.test(t)},new RegExp("^"+e,"i"));if(!o.length)throw new Error("Invalid "+t+" string");if(1<o.length)throw new Error("Ambiguous "+t);n=o[0]}return i?s.indexOf(n):n}var o,r=this.Date,s=(r.now||(r.now=$time),r.Methods={ms:"Milliseconds",year:"FullYear",min:"Minutes",mo:"Month",sec:"Seconds",hr:"Hours"},["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds","Time","TimezoneOffset","Week","Timezone","GMTOffset","DayOfYear","LastMonth","LastDayOfMonth","UTCDate","UTCDay","UTCFullYear","AMPM","Ordinal","UTCHours","UTCMilliseconds","UTCMinutes","UTCMonth","UTCSeconds","UTCMilliseconds"].each(function(t){r.Methods[t.toLowerCase()]=t}),r.implement({set:function(t,e){switch($type(t)){case"object":for(var i in t)this.set(i,t[i]);break;case"string":t=t.toLowerCase();var n=r.Methods;n[t]&&this["set"+n[t]](e)}return this},get:function(t){t=t.toLowerCase();var e=r.Methods;return e[t]?this["get"+e[t]]():null},clone:function(){return new r(this.get("time"))},increment:function(t,e){switch(t=t||"day",e=$pick(e,1),t){case"year":return this.increment("month",12*e);case"month":var i=this.get("date");return this.set("date",1).set("mo",this.get("mo")+e),this.set("date",i.min(this.get("lastdayofmonth")));case"week":return this.increment("day",7*e);case"day":return this.set("date",this.get("date")+e)}if(r.units[t])return this.set("time",this.get("time")+e*r.units[t]());throw new Error(t+" is not a supported interval")},decrement:function(t,e){return this.increment(t,-1*$pick(e,1))},isLeapYear:function(){return r.isLeapYear(this.get("year"))},clearTime:function(){return this.set({hr:0,min:0,sec:0,ms:0})},diff:function(t,e){return(((t="string"==$type(t)?r.parse(t):t)-this)/r.units[e||"day"](3,3)).round()},getLastDayOfMonth:function(){return r.daysInMonth(this.get("mo"),this.get("year"))},getDayOfYear:function(){return(r.UTC(this.get("year"),this.get("mo"),this.get("date")+1)-r.UTC(this.get("year"),0,1))/r.units.day()},getWeek:function(){return(this.get("dayofyear")/7).ceil()},getOrdinal:function(t){return r.getMsg("ordinal",t||this.get("date"))},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}).[0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},getGMTOffset:function(){var t=this.get("timezoneOffset");return(0<t?"-":"+")+n((t.abs()/60).floor(),2)+n(t%60,2)},setAMPM:function(t){t=t.toUpperCase();var e=this.get("hr");return 11<e&&"AM"==t?this.decrement("hour",12):e<12&&"PM"==t?this.increment("hour",12):this},getAMPM:function(){return this.get("hr")<12?"AM":"PM"},parse:function(t){return this.set("time",r.parse(t)),this},isValid:function(t){return!isNaN((t||this).valueOf())},format:function(t){if(!this.isValid())return"invalid date";t=s[(t=t||"%x %X").toLowerCase()]||t;var i=this;return t.replace(/%([a-z%])/gi,function(t,e){switch(e){case"a":return r.getMsg("days")[i.get("day")].substr(0,3);case"A":return r.getMsg("days")[i.get("day")];case"b":return r.getMsg("months")[i.get("month")].substr(0,3);case"B":return r.getMsg("months")[i.get("month")];case"c":return i.toString();case"d":return n(i.get("date"),2);case"D":case"e":return i.get("date");case"H":return n(i.get("hr"),2);case"I":return i.get("hr")%12||12;case"j":return n(i.get("dayofyear"),3);case"m":return n(i.get("mo")+1,2);case"M":return n(i.get("min"),2);case"o":return i.get("ordinal");case"p":return r.getMsg(i.get("ampm"));case"s":return Math.round(i/1e3);case"S":return n(i.get("seconds"),2);case"U":return n(i.get("week"),2);case"w":return i.get("day");case"x":return i.format(r.getMsg("shortDate"));case"X":return i.format(r.getMsg("shortTime"));case"y":return i.get("year").toString().substr(2);case"Y":return i.get("year");case"T":return i.get("GMTOffset");case"Z":return i.get("Timezone");case"z":return n(i.get("ms"),3)}return e})},toISOString:function(){return this.format("iso8601")}}),r.alias("toISOString","toJSON"),r.alias("diff","compare"),r.alias("format","strftime"),{db:"%Y-%m-%d %H:%M:%S",compact:"%Y%m%dT%H%M%S",iso8601:"%Y-%m-%dT%H:%M:%S%T",rfc822:"%a, %d %b %Y %H:%M:%S %Z",short:"%d %b %H:%M",long:"%B %d, %Y %H:%M"}),h=[],e=r.parse,a=(r.extend({getMsg:function(t,e){return MooTools.lang.get("Date",t,e)},units:{ms:$lambda(1),second:$lambda(1e3),minute:$lambda(6e4),hour:$lambda(36e5),day:$lambda(864e5),week:$lambda(6084e5),month:function(t,e){var i=new r;return 864e5*r.daysInMonth($pick(t,i.get("mo")),$pick(e,i.get("year")))},year:function(t){return t=t||(new r).get("year"),r.isLeapYear(t)?316224e5:31536e6}},daysInMonth:function(t,e){return[31,r.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},parse:function(i){var n,t=$type(i);return"number"==t?new r(i):"string"!=t?i:(i=i.clean()).length?(h.some(function(t){var e=t.re.exec(i);return!!e&&(n=t.handler(e))}),n||new r(e(i))):null},parseDay:function(t,e){return i("day",t,e)},parseMonth:function(t,e){return i("month",t,e)},parseUTC:function(t){t=new r(t),t=r.UTC(t.get("year"),t.get("mo"),t.get("date"),t.get("hr"),t.get("min"),t.get("sec"),t.get("ms"));return new r(t)},orderIndex:function(t){return r.getMsg("dateOrder").indexOf(t)+1},defineFormat:function(t,e){s[t]=e},defineFormats:function(t){for(var e in t)r.defineFormat(e,t[e])},parsePatterns:h,defineParser:function(t){h.push(t.re&&t.handler?t:p(t))},defineParsers:function(){Array.flatten(arguments).each(r.defineParser)},define2DigitYearStart:function(t){a=t-(l=t%100)}}),1900),l=70,u=function(t){return new RegExp("(?:"+r.getMsg(t).map(function(t){return t.substr(0,3)}).join("|")+")[a-z]*")},c=function(t){switch(t){case"x":return(1==r.orderIndex("month")?"%m[-./]%d":"%d[-./]%m")+"([-./]%y)?";case"X":return"%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%T?"}return null},d={d:/[0-2]?[0-9]|3[01]/,H:/[01]?[0-9]|2[0-3]/,I:/0?[1-9]|1[0-2]/,M:/[0-5]?\d/,s:/\d+/,o:/[a-z]*/,p:/[ap]\.?m\.?/,y:/\d{2}|\d{4}/,Y:/\d{4}/,T:/Z|[+-]\d{2}(?::?\d{2})?/},p=(d.m=d.I,d.S=d.M,function(t){var s,e;return o?(s=[],e=(t.source||t).replace(/%([a-z])/gi,function(t,e){return c(e)||t}).replace(/\((?!\?)/g,"(?:").replace(/ (?!\?|\*)/g,",? ").replace(/%([a-z%])/gi,function(t,e){var i=d[e];return i?(s.push(e),"("+i.source+")"):e}).replace(/\[a-z\]/gi,"[a-z\\u00c0-\\uffff]"),{format:t,re:new RegExp("^"+e+"$","i"),handler:function(t){t=t.slice(1).associate(s);var e,i=(new r).clearTime(),n=t.y||t.Y;for(e in null!=n&&m.call(i,"y",n),"d"in t&&m.call(i,"d",1),("m"in t||"b"in t||"B"in t)&&m.call(i,"m",1),t)m.call(i,e,t[e]);return i}}):{format:t}}),m=function(t,e){if(e)switch(t){case"a":case"A":return this.set("day",r.parseDay(e,!0));case"b":case"B":return this.set("mo",r.parseMonth(e,!0));case"d":return this.set("date",e);case"H":case"I":return this.set("hr",e);case"m":return this.set("mo",e-1);case"M":return this.set("min",e);case"p":return this.set("ampm",e.replace(/\./g,""));case"S":return this.set("sec",e);case"s":return this.set("ms",1e3*("0."+e));case"w":return this.set("day",e);case"Y":return this.set("year",e);case"y":return(e=+e)<100&&(e+=a+(e<l?100:0)),this.set("year",e);case"T":var i=((i=(e="Z"==e?"+00":e).match(/([+-])(\d{2}):?(\d{2})?/))[1]+"1")*(60*i[2]+(+i[3]||0))+this.getTimezoneOffset();return this.set("time",this-6e4*i)}return this};r.defineParsers("%Y([-./]%m([-./]%d((T| )%X)?)?)?","%Y%m%d(T%H(%M%S?)?)?","%x( %X)?","%d%o( %b( %Y)?)?( %X)?","%b( %d%o)?( %Y)?( %X)?","%Y %b( %d%o( %X)?)?","%o %b %d %X %T %Y"),MooTools.lang.addEvent("langChange",function(t){MooTools.lang.get("Date")&&(o=t,d.a=d.A=u("days"),d.b=d.B=u("months"),h.each(function(t,e){t.format&&(h[e]=p(t.format))}))}).fireEvent("langChange",MooTools.lang.getCurrentLanguage())}(),Date.implement({timeDiffInWords:function(t){return Date.distanceOfTimeInWords(this,t||new Date)},timeDiff:function(t,e){var i=(((t=null==t?new Date:t)-this)/1e3).toInt();if(!i)return"0s";var n,s,o={s:60,m:60,h:24,d:365,y:0},r=[];for(s in o){if(!i)break;(n=o[s])?(r.unshift(i%n+s),i=(i/n).toInt()):r.unshift(i+s)}return r.join(e||":")}}),Date.alias("timeDiffInWords","timeAgoInWords"),Date.extend({distanceOfTimeInWords:function(t,e){return Date.getTimePhrase(((e-t)/1e3).toInt())},getTimePhrase:function(t){var e,i=t<0?"Until":"Ago",n=(t<0&&(t*=-1),{minute:60,hour:60,day:24,week:7,month:52/12,year:12,eon:1/0}),s="lessThanMinute";for(e in n){var o=n[e];if(t<1.5*o){.75*o<t&&(s=e);break}t/=o,s=e+"s"}return Date.getMsg(s+i,t).substitute({delta:t.round()})}}),Date.defineParsers({re:/^(?:tod|tom|yes)/i,handler:function(t){var e=(new Date).clearTime();switch(t[0]){case"tom":return e.increment();case"yes":return e.decrement();default:return e}}},{re:/^(next|last) ([a-z]+)$/i,handler:function(t){var e=(new Date).clearTime(),i=e.getDay(),n=Date.parseDay(t[2],!0),s=n-i;return n<=i&&(s+=7),"last"==t[1]&&(s-=7),e.set("date",e.getDate()+s)}}),Hash.implement({getFromPath:function(t){var i=this.getClean();return t.replace(/\[([^\]]+)\]|\.([^.[]+)|[^[.]+/g,function(t){var e;return i?(i=(e=arguments[2]||arguments[1]||t)in i?i[e]:null,t):null}),i},cleanValues:function(i){return i=i||$defined,this.each(function(t,e){i(t)||this.erase(e)},this),this},run:function(){var i=arguments;this.each(function(t,e){"function"==$type(t)&&t.run(i)})}}),(()=>{var t={a:"[]",A:"[]",c:"[]",C:"[]",d:"[]",D:"[]",e:"[]",E:"[]",g:"[]",G:"[]",i:"[]",I:"[]",l:"[]",L:"[]",n:"[]",N:"[]",o:"[]",O:"[]",r:"[]",R:"[]",s:"[]",S:"[]",t:"[]",T:"[]",ue:"[]",UE:"[]",u:"[]",U:"[]",y:"[]",Y:"[]",z:"[]",Z:"[]",th:"[]",TH:"[]",dh:"[]",DH:"[]",ss:"[]",oe:"[]",OE:"[]",ae:"[]",AE:"[]"},e={" ":"[]","*":"[]","'":"[]",'"':"[]","...":"[]","-":"[]","--":"[]","&raquo;":"[]"};function i(t,e){var i=t;for(key in e)i=i.replace(new RegExp(e[key],"g"),key);return i}function n(t,e){return t=t||"",reg=new RegExp(e?"<"+t+"(?!\\w)[^>]*>([\\s\\S]*?)</"+t+"(?!\\w)>":"</?"+t+"([^>]+)?>","gi")}String.implement({standardize:function(){return i(this,t)},repeat:function(t){return new Array(t+1).join(this)},pad:function(t,e,i){return this.length>=t?this:(e=(null==e?" ":""+e).repeat(t-this.length).substr(0,t-this.length),i&&"right"!=i?"left"==i?e+this:e.substr(0,(e.length/2).floor())+this+e.substr(0,(e.length/2).ceil()):this+e)},getTags:function(t,e){return this.match(n(t,e))||[]},stripTags:function(t,e){return this.replace(n(t,e),"")},tidy:function(){return i(this,e)}})})(),String.implement({parseQueryString:function(r,i){null==r&&(r=!0),null==i&&(i=!0);var t=this.split(/[&;]/),h={};return t.length&&t.each(function(t){var e=t.indexOf("="),n=e<0?[""]:t.substr(0,e).match(/([^\]\[]+|(\B)(?=\]))/g),s=i?decodeURIComponent(t.substr(e+1)):t.substr(e+1),o=h;n.each(function(t,e){r&&(t=decodeURIComponent(t));var i=o[t];e<n.length-1?o=o[t]=i||{}:"array"==$type(i)?i.push(s):o[t]=$defined(i)?[i,s]:s})}),h},cleanQueryString:function(n){return this.split("&").filter(function(t){var e=t.indexOf("="),i=e<0?"":t.substr(0,e),t=t.substr(e+1);return n?n.run([i,t]):$chk(t)}).join("&")}});var URI=new Class({Implements:Options,options:{},regex:/^(?:(\w+):)?(?:\/\/(?:(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)?(\.\.?$|(?:[^?#\/]*\/)*)([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,parts:["scheme","user","password","host","port","directory","file","query","fragment"],schemes:{http:80,https:443,ftp:21,rtsp:554,mms:1755,file:0},initialize:function(t,e){this.setOptions(e);e=this.options.base||URI.base;(t=t||e)&&t.parsed?this.parsed=$unlink(t.parsed):this.set("value",t.href||t.toString(),!!e&&new URI(e))},parse:function(t,e){t=t.match(this.regex);return!!t&&(t.shift(),this.merge(t.associate(this.parts),e))},merge:function(e,i){return!!(e&&e.scheme||i&&i.scheme)&&(i&&this.parts.every(function(t){return!e[t]&&(e[t]=i[t]||"",!0)}),e.port=e.port||this.schemes[e.scheme.toLowerCase()],e.directory=e.directory?this.parseDirectory(e.directory,i?i.directory:""):"/",e)},parseDirectory:function(t,e){var i;return(t=("/"==t.substr(0,1)?"":e||"/")+t).test(URI.regs.directoryDot)?(i=[],t.replace(URI.regs.endSlash,"").split("/").each(function(t){".."==t&&0<i.length?i.pop():"."!=t&&i.push(t)}),i.join("/")+"/"):t},combine:function(t){return t.value||t.scheme+"://"+(t.user?t.user+(t.password?":"+t.password:"")+"@":"")+(t.host||"")+(t.port&&t.port!=this.schemes[t.scheme]?":"+t.port:"")+(t.directory||"/")+(t.file||"")+(t.query?"?"+t.query:"")+(t.fragment?"#"+t.fragment:"")},set:function(t,e,i){var n;return"value"==t?(n=(n=e.match(URI.regs.scheme))&&n[1])&&!$defined(this.schemes[n.toLowerCase()])?this.parsed={scheme:n,value:e}:this.parsed=this.parse(e,(i||this).parsed)||(n?{scheme:n,value:e}:{value:e}):"data"==t?this.setData(e):this.parsed[t]=e,this},get:function(t,e){switch(t){case"value":return this.combine(this.parsed,!!e&&e.parsed);case"data":return this.getData()}return this.parsed[t]||""},go:function(){document.location.href=this.toString()},toURI:function(){return this},getData:function(t,e){var e=this.get(e||"query");return $chk(e)?(e=e.parseQueryString(),t?e[t]:e):t?null:{}},setData:function(t,e,i){return"string"==typeof t?((data=this.getData())[arguments[0]]=e,t=data):e&&(t=$merge(this.getData(),t)),this.set(i||"query",Hash.toQueryString(t))},clearData:function(t){return this.set(t||"query","")}}),OverText=(URI.prototype.toString=URI.prototype.valueOf=function(){return this.get("value")},URI.regs={endSlash:/\/$/,scheme:/^(\w+):/,directoryDot:/\.\/|\.$/},URI.base=new URI(document.getElements("base[href]",!0).getLast(),{base:document.location}),String.implement({toURI:function(t){return new URI(this,t)}}),URI=Class.refactor(URI,{combine:function(t,e){if(!e||t.scheme!=e.scheme||t.host!=e.host||t.port!=e.port)return this.previous.apply(this,arguments);var i=t.file+(t.query?"?"+t.query:"")+(t.fragment?"#"+t.fragment:"");if(!e.directory)return(t.directory||(t.file?"":"./"))+i;for(var n=e.directory.split("/"),s=t.directory.split("/"),o="",r=0,h=0;h<n.length&&h<s.length&&n[h]==s[h];h++);for(r=0;r<n.length-h-1;r++)o+="../";for(r=h;r<s.length-1;r++)o+=s[r]+"/";return(o||(t.file?"":"./"))+i},toAbsolute:function(t){return(t=new URI(t))&&t.set("directory","").set("file",""),this.toRelative(t)},toRelative:function(t){return this.get("value",new URI(t))}}),Elements.from=function(t,e){var i,e=(t=$pick(e,!0)?t.stripScripts():t).match(/^\s*<(t[dhr]|tbody|tfoot|thead)/i);return((i=e&&(i=new Element("table"),e=e[1].toLowerCase(),["td","th","tr"].contains(e))&&(i=new Element("tbody").inject(i),"tr"!=e)?new Element("tr").inject(i):i)||new Element("div")).set("html",t).getChildren()},Element.implement({measure:function(t){function e(t){return!(t&&!t.offsetHeight&&!t.offsetWidth)}if(e(this))return t.apply(this);for(var i=this.getParent(),n=[];!e(i)&&i!=document.body;)n.push(i.expose()),i=i.getParent();var s=this.expose(),t=t.apply(this);return s(),n.each(function(t){t()}),t},expose:function(){var t;return"none"!=this.getStyle("display")?$empty:(t=this.style.cssText,this.setStyles({display:"block",position:"absolute",visibility:"hidden"}),function(){this.style.cssText=t}.bind(this))},getDimensions:function(t){t=$merge({computeSize:!1},t);function e(t,e){return e.computeSize?t.getComputedSize(e):t.getSize()}var i={},n=this.getParent("body");if(n&&"none"==this.getStyle("display"))i=this.measure(function(){return e(this,t)});else if(n)try{i=e(this,t)}catch(t){}else i={x:0,y:0};return $chk(i.x)?$extend(i,{width:i.x,height:i.y}):$extend(i,{x:i.width,y:i.height})},getComputedSize:function(i){i&&i.plains&&(i.planes=i.plains),i=$merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},i);var o={width:0,height:0};switch(i.mode){case"vertical":delete o.width,delete i.planes.width;break;case"horizontal":delete o.height,delete i.planes.height}var r=[],h=($each(i.planes,function(t,e){t.each(function(e){i.styles.each(function(t){r.push("border"==t?t+"-"+e+"-width":t+"-"+e)})})}),{}),a=(r.each(function(t){h[t]=this.getComputedStyle(t)},this),[]);return $each(i.planes,function(t,n){var s=n.capitalize();o["total"+s]=o["computed"+s]=0,t.each(function(i){o["computed"+i.capitalize()]=0,r.each(function(t,e){t.test(i)&&(h[t]=h[t].toInt()||0,o["total"+s]=o["total"+s]+h[t],o["computed"+i.capitalize()]=o["computed"+i.capitalize()]+h[t]),t.test(i)&&n!=t&&(t.test("border")||t.test("padding"))&&!a.contains(t)&&(a.push(t),o["computed"+s]=o["computed"+s]-h[t])})})}),["Width","Height"].each(function(t){var e=t.toLowerCase();$chk(o[e])&&(o[e]=o[e]+this["offset"+t]+o["computed"+t],o["total"+t]=o[e]+o["total"+t],delete o["computed"+t])},this),$extend(h,o)}}),(()=>{var h=!1,a=!1;Element.implement({pin:function(t,e){if(a||(i=new Element("div").setStyles({position:"fixed",top:0,right:0}).inject(document.body),h=0===i.offsetTop,i.dispose(),a=!0),"none"!=this.getStyle("display")){var i=window.getScroll();if(!1!==t){var n,s=this.getPosition(h?document.body:this.getOffsetParent());this.retrieve("pin:_pinned")||(t={top:s.y-i.y,left:s.x-i.x},h&&!e?this.setStyle("position","fixed").setStyles(t):(o=this.getOffsetParent(),n=this.getPosition(o),e=this.getStyles("left","top"),(o&&"auto"==e.left||"auto"==e.top)&&this.setPosition(n),"static"==this.getStyle("position")&&this.setStyle("position","absolute"),n={x:e.left.toInt()-i.x,y:e.top.toInt()-i.y},r=function(){var t;this.retrieve("pin:_pinned")&&(t=window.getScroll(),this.setStyles({left:n.x+t.x,top:n.y+t.y}))}.bind(this),this.store("pin:_scrollFixer",r),window.addEvent("scroll",r)),this.store("pin:_pinned",!0))}else{if(!this.retrieve("pin:_pinned"))return this;var o,r,t="static"!=(o=this.getParent()).getComputedStyle("position")?o:o.getOffsetParent();s=this.getPosition(t),this.store("pin:_pinned",!1),(r=this.retrieve("pin:_scrollFixer"))?(this.store("pin:_scrollFixer",null),window.removeEvent("scroll",r)):this.setStyles({position:"absolute",top:s.y+i.y,left:s.x+i.x}),this.removeClass("isPinned")}}return this},unpin:function(){return this.pin(!1)},togglepin:function(){return this.pin(!this.retrieve("pin:_pinned"))}})})(),(()=>{var f=Element.prototype.position;Element.implement({position:function(n){if(n&&($defined(n.x)||$defined(n.y)))return f?f.apply(this,arguments):this;$each(n||{},function(t,e){$defined(t)||delete n[e]}),n=$merge({relativeTo:document.body,position:{x:"center",y:"center"},edge:!1,offset:{x:0,y:0},returnPos:!1,relFixedPosition:!1,ignoreMargins:!1,ignoreScroll:!1,allowNegative:!1},n);function t(t){var e;return"string"!=$type(t)?t:(e={},(t=t.toLowerCase()).test("left")?e.x="left":t.test("right")?e.x="right":e.x="center",t.test("upper")||t.test("top")?e.y="top":t.test("bottom")?e.y="bottom":e.y="center",e)}var e=!1,i=this.measure(function(){return document.id(this.getOffsetParent())}),s=(i&&i!=this.getDocument().body&&(p=i.measure(function(){return this.getPosition()}),e=i!=document.id(n.relativeTo),n.offset.x=n.offset.x-p.x,n.offset.y=n.offset.y-p.y),n.edge=t(n.edge),n.position=t(n.position),n.edge||("center"==n.position.x&&"center"==n.position.y?n.edge={x:"center",y:"center"}:n.edge={x:"left",y:"top"}),this.setStyle("position","absolute"),document.id(n.relativeTo)||document.body),i=s==document.body?window.getScroll():s.getPosition(),o=i.y,r=i.x,h=this.getDimensions({computeSize:!0,styles:["padding","border","margin"]}),a={},l=n.offset.y,u=n.offset.x,c=window.getSize();switch(n.position.x){case"left":a.x=r+u;break;case"right":a.x=r+u+s.offsetWidth;break;default:a.x=r+(s==document.body?c.x:s.offsetWidth)/2+u}switch(n.position.y){case"top":a.y=o+l;break;case"bottom":a.y=o+l+s.offsetHeight;break;default:a.y=o+(s==document.body?c.y:s.offsetHeight)/2+l}if(n.edge){var d={};switch(n.edge.x){case"left":d.x=0;break;case"right":d.x=-h.x-h.computedRight-h.computedLeft;break;default:d.x=-h.totalWidth/2}switch(n.edge.y){case"top":d.y=0;break;case"bottom":d.y=-h.y-h.computedTop-h.computedBottom;break;default:d.y=-h.totalHeight/2}a.x+=d.x,a.y+=d.y}var p,a={left:(0<=a.x||e||n.allowNegative?a.x:0).toInt(),top:(0<=a.y||e||n.allowNegative?a.y:0).toInt()},m={left:"x",top:"y"},i=(["minimum","maximum"].each(function(i){["left","top"].each(function(t){var e=n[i]?n[i][m[t]]:null;null!=e&&("minimum"==i?a[t]<e:a[t]>e)&&(a[t]=e)})}),"fixed"!=s.getStyle("position")&&!n.relFixedPosition||(p=window.getScroll(),a.top+=p.y,a.left+=p.x),s.getScroll());return n.ignoreScroll?(a.top-=i.y,a.left-=i.x):(a.top+=i.y,a.left+=i.x),n.ignoreMargins&&(a.left+="right"==n.edge.x?h["margin-right"]:"center"==n.edge.x?-h["margin-left"]+(h["margin-right"]+h["margin-left"])/2:-h["margin-left"],a.top+="bottom"==n.edge.y?h["margin-bottom"]:"center"==n.edge.y?-h["margin-top"]+(h["margin-bottom"]+h["margin-top"])/2:-h["margin-top"]),a.left=Math.ceil(a.left),a.top=Math.ceil(a.top),n.returnPos?a:(this.setStyles(a),this)}})})(),Element.implement({isDisplayed:function(){return"none"!=this.getStyle("display")},isVisible:function(){var t=this.offsetWidth,e=this.offsetHeight;return(0!=t||0!=e)&&(0<t&&0<e||"none"!=this.style.display)},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var t;try{t=this.getStyle("display")}catch(t){}return"none"==t?this:this.store("element:_originalDisplay",t||"").setStyle("display","none")},show:function(t){return!t&&this.isDisplayed()?this:(t=t||this.retrieve("element:_originalDisplay")||"block",this.setStyle("display","none"==t?"block":t))},swapClass:function(t,e){return this.removeClass(t).addClass(e)}}),Document.implement({clearSelection:function(){var t;document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(t=window.getSelection())&&t.removeAllRanges&&t.removeAllRanges()}}),new Class({Implements:[Options,Events,Class.Occlude],Binds:["reposition","assert","focus","hide"],options:{element:"label",positionOptions:{position:"upperLeft",edge:"upperLeft",offset:{x:4,y:2}},poll:!1,pollInterval:250,wrap:!1},property:"OverText",initialize:function(t,e){return this.element=document.id(t),this.occlude()?this.occluded:(this.setOptions(e),this.attach(this.element),OverText.instances.push(this),this.options.poll&&this.poll(),this)},toElement:function(){return this.element},attach:function(){var t=this.options.textOverride||this.element.get("alt")||this.element.get("title");if(t)return this.text=new Element(this.options.element,{class:"overTxtLabel",styles:{lineHeight:"normal",position:"absolute",cursor:"text"},html:t,events:{click:this.hide.pass("label"==this.options.element,this)}}).inject(this.element,"after"),"label"==this.options.element&&(this.element.get("id")||this.element.set("id","input_"+(new Date).getTime()),this.text.set("for",this.element.get("id"))),this.options.wrap&&(this.textHolder=new Element("div",{styles:{lineHeight:"normal",position:"relative"},class:"overTxtWrapper"}).adopt(this.text).inject(this.element,"before")),this.enable()},destroy:function(){return this.element.eliminate("OverTextDiv").eliminate("OverText"),this.disable(),this.text&&this.text.destroy(),this.textHolder&&this.textHolder.destroy(),this},disable:function(){return this.element.removeEvents({focus:this.focus,blur:this.assert,change:this.assert}),window.removeEvent("resize",this.reposition),this.hide(!0,!0),this},enable:function(){return this.element.addEvents({focus:this.focus,blur:this.assert,change:this.assert}),window.addEvent("resize",this.reposition),this.assert(!0),this.reposition(),this},wrap:function(){"label"==this.options.element&&(this.element.get("id")||this.element.set("id","input_"+(new Date).getTime()),this.text.set("for",this.element.get("id")))},startPolling:function(){return this.pollingPaused=!1,this.poll()},poll:function(t){var e;return this.poller&&!t||(e=function(){this.pollingPaused||this.assert(!0)}.bind(this),t?$clear(this.poller):this.poller=e.periodical(this.options.pollInterval,this)),this},stopPolling:function(){return this.pollingPaused=!0,this.poll(!0)},focus:function(){this.text&&(!this.text.isDisplayed()||this.element.get("disabled"))||this.hide()},hide:function(t,e){if(this.text&&this.text.isDisplayed()&&(!this.element.get("disabled")||e)&&(this.text.hide(),this.fireEvent("textHide",[this.text,this.element]),this.pollingPaused=!0,!t))try{this.element.fireEvent("focus"),this.element.focus()}catch(t){}return this},show:function(){return this.text&&!this.text.isDisplayed()&&(this.text.show(),this.reposition(),this.fireEvent("textShow",[this.text,this.element]),this.pollingPaused=!1),this},assert:function(t){this[this.test()?"show":"hide"](t)},test:function(){return!this.element.get("value")},reposition:function(){return this.assert(!0),this.element.isVisible()?(this.text&&this.test()&&this.text.position($merge(this.options.positionOptions,{relativeTo:this.element})),this):this.stopPolling().hide()}})),SmoothScroll=(OverText.instances=[],$extend(OverText,{each:function(i){return OverText.instances.map(function(t,e){return t.element&&t.text?i.apply(OverText,[t,e]):null})},update:function(){return OverText.each(function(t){return t.reposition()})},hideAll:function(){return OverText.each(function(t){return t.hide(!0,!0)})},showAll:function(){return OverText.each(function(t){return t.show()})}}),window.Fx&&Fx.Reveal&&Fx.Reveal.implement({hideInputs:!!Browser.Engine.trident&&"select, input, textarea, object, embed, .overTxtLabel"}),Fx.Elements=new Class({Extends:Fx.CSS,initialize:function(t,e){this.elements=this.subject=$$(t),this.parent(e)},compute:function(t,e,i){var n,s={};for(n in t){var o,r=t[n],h=e[n],a=s[n]={};for(o in r)a[o]=this.parent(r[o],h[o],i)}return s},set:function(t){for(var e in t)if(this.elements[e]){var i,n=t[e];for(i in n)this.render(this.elements[e],i,n[i],this.options.unit)}return this},start:function(t){if(!this.check(t))return this;var e,i={},n={};for(e in t)if(this.elements[e]){var s,o=t[e],r=i[e]={},h=n[e]={};for(s in o){var a=this.prepare(this.elements[e],s,o[s]);r[s]=a.from,h[s]=a.to}}return this.parent(i,n)}}),Fx.Move=new Class({Extends:Fx.Morph,options:{relativeTo:document.body,position:"center",edge:!1,offset:{x:0,y:0}},start:function(t){var e=this.element,i=e.getStyles("top","left");return"auto"!=i.top&&"auto"!=i.left||e.setPosition(e.getPosition(e.getOffsetParent())),this.parent(e.position($merge(this.options,t,{returnPos:!0})))}}),Element.Properties.move={set:function(t){var e=this.retrieve("move");return e&&e.cancel(),this.eliminate("move").store("move:options",$extend({link:"cancel"},t))},get:function(t){return!t&&this.retrieve("move")||(!t&&this.retrieve("move:options")||this.set("move",t),this.store("move",new Fx.Move(this,this.retrieve("move:options")))),this.retrieve("move")}},Element.implement({move:function(t){return this.get("move").start(t),this}}),Fx.Reveal=new Class({Extends:Fx.Morph,options:{link:"cancel",styles:["padding","border","margin"],transitionOpacity:!Browser.Engine.trident4,mode:"vertical",display:function(){return"tr"!=this.element.get("tag")?"block":"table-row"},hideInputs:!!Browser.Engine.trident&&"select, input, textarea, object, embed",opacity:1},dissolve:function(){try{var i,n,t;this.hiding||this.showing?"chain"==this.options.link?this.chain(this.dissolve.bind(this)):"cancel"!=this.options.link||this.hiding||(this.cancel(),this.dissolve()):"none"!=this.element.getStyle("display")?(this.hiding=!0,this.showing=!1,this.hidden=!0,this.cssText=this.element.style.cssText,i=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode}),this.element.setStyle("display",$lambda(this.options.display).apply(this)),this.options.transitionOpacity&&(i.opacity=this.options.opacity),n={},$each(i,function(t,e){n[e]=[t,0]},this),this.element.setStyle("overflow","hidden"),t=this.options.hideInputs?this.element.getElements(this.options.hideInputs):null,this.$chain.unshift(function(){this.hidden&&(this.hiding=!1,$each(i,function(t,e){i[e]=t},this),this.element.style.cssText=this.cssText,this.element.setStyle("display","none"),t)&&t.setStyle("visibility","visible"),this.fireEvent("hide",this.element),this.callChain()}.bind(this)),t&&t.setStyle("visibility","hidden"),this.start(n)):(this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("hide",this.element))}catch(t){this.hiding=!1,this.element.setStyle("display","none"),this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("hide",this.element)}return this},reveal:function(){try{var i,n,t;this.showing||this.hiding?"chain"==this.options.link?this.chain(this.reveal.bind(this)):"cancel"!=this.options.link||this.showing||(this.cancel(),this.reveal()):"none"==this.element.getStyle("display")?(this.showing=!0,this.hiding=this.hidden=!1,this.cssText=this.element.style.cssText,this.element.measure(function(){i=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode})}.bind(this)),$each(i,function(t,e){i[e]=t}),$chk(this.options.heightOverride)&&(i.height=this.options.heightOverride.toInt()),$chk(this.options.widthOverride)&&(i.width=this.options.widthOverride.toInt()),this.options.transitionOpacity&&(this.element.setStyle("opacity",0),i.opacity=this.options.opacity),n={height:0,display:$lambda(this.options.display).apply(this)},$each(i,function(t,e){n[e]=0}),this.element.setStyles($merge(n,{overflow:"hidden"})),(t=this.options.hideInputs?this.element.getElements(this.options.hideInputs):null)&&t.setStyle("visibility","hidden"),this.start(i),this.$chain.unshift(function(){this.element.style.cssText=this.cssText,this.element.setStyle("display",$lambda(this.options.display).apply(this)),this.hidden||(this.showing=!1),t&&t.setStyle("visibility","visible"),this.callChain(),this.fireEvent("show",this.element)}.bind(this))):(this.callChain(),this.fireEvent("complete",this.element),this.fireEvent("show",this.element))}catch(t){this.element.setStyles({display:$lambda(this.options.display).apply(this),visiblity:"visible",opacity:this.options.opacity}),this.showing=!1,this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("show",this.element)}return this},toggle:function(){return"none"==this.element.getStyle("display")?this.reveal():this.dissolve(),this},cancel:function(){return this.parent.apply(this,arguments),this.element.style.cssText=this.cssText,this.hiding=!1,this.showing=!1,this}}),Element.Properties.reveal={set:function(t){var e=this.retrieve("reveal");return e&&e.cancel(),this.eliminate("reveal").store("reveal:options",t)},get:function(t){return!t&&this.retrieve("reveal")||(!t&&this.retrieve("reveal:options")||this.set("reveal",t),this.store("reveal",new Fx.Reveal(this,this.retrieve("reveal:options")))),this.retrieve("reveal")}},Element.Properties.dissolve=Element.Properties.reveal,Element.implement({reveal:function(t){return this.get("reveal",t).reveal(),this},dissolve:function(t){return this.get("reveal",t).dissolve(),this},nix:function(){var t=Array.link(arguments,{destroy:Boolean.type,options:Object.type});return this.get("reveal",t.options).dissolve().chain(function(){this[t.destroy?"destroy":"dispose"]()}.bind(this)),this},wink:function(){var t=Array.link(arguments,{duration:Number.type,options:Object.type}),e=this.get("reveal",t.options);e.reveal().chain(function(){!function(){e.dissolve()}.delay(t.duration||2e3)})}}),Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:!0},initialize:function(t,e){this.element=this.subject=document.id(t),this.parent(e);var i=this.cancel.bind(this,!1),n=("element"!=$type(this.element)&&(this.element=document.id(this.element.getDocument().body)),this.element);this.options.wheelStops&&(this.addEvent("start",function(){n.addEvent("mousewheel",i)},!0),this.addEvent("complete",function(){n.removeEvent("mousewheel",i)},!0))},set:function(){var t=Array.flatten(arguments);Browser.Engine.gecko&&(t=[Math.round(t[0]),Math.round(t[1])]),this.element.scrollTo(t[0]+this.options.offset.x,t[1]+this.options.offset.y)},compute:function(e,i,n){return[0,1].map(function(t){return Fx.compute(e[t],i[t],n)})},start:function(t,e){if(!this.check(t,e))return this;var i,n=this.element.getScrollSize(),s=this.element.getScroll(),o={x:t,y:e};for(i in o){var r=n[i];$chk(o[i])?o[i]="number"==$type(o[i])?o[i]:r:o[i]=s[i],o[i]+=this.options.offset[i]}return this.parent([s.x,s.y],[o.x,o.y])},toTop:function(){return this.start(!1,0)},toLeft:function(){return this.start(0,!1)},toRight:function(){return this.start("right",!1)},toBottom:function(){return this.start(!1,"bottom")},toElement:function(t){t=document.id(t).getPosition(this.element);return this.start(t.x,t.y)},scrollIntoView:function(t,e,i){e=e?$splat(e):["x","y"];var n={},s=(t=document.id(t)).getPosition(this.element),t=t.getSize(),o=this.element.getScroll(),r=this.element.getSize(),h={x:s.x+t.x,y:s.y+t.y};return["x","y"].each(function(t){e.contains(t)&&(h[t]>o[t]+r[t]&&(n[t]=h[t]-r[t]),s[t]<o[t])&&(n[t]=s[t]),null==n[t]&&(n[t]=o[t]),i&&i[t]&&(n[t]=n[t]+i[t])},this),n.x==o.x&&n.y==o.y||this.start(n.x,n.y),this},scrollToCenter:function(t,e,i){e=e?$splat(e):["x","y"],t=$(t);var n={},s=t.getPosition(this.element),o=t.getSize(),r=this.element.getScroll(),h=this.element.getSize();s.x,o.x,s.y,o.y;return["x","y"].each(function(t){e.contains(t)&&(n[t]=s[t]-(h[t]-o[t])/2),null==n[t]&&(n[t]=r[t]),i&&i[t]&&(n[t]=n[t]+i[t])},this),n.x==r.x&&n.y==r.y||this.start(n.x,n.y),this}}),Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:!1,hideOverflow:!0,resetHeight:!1},initialize:function(t,e){this.addEvent("complete",function(){this.open=0!=this.wrapper["offset"+this.layout.capitalize()],this.open&&this.options.resetHeight&&this.wrapper.setStyle("height",""),this.open&&Browser.Engine.webkit419&&this.element.dispose().inject(this.wrapper)},!0),this.element=this.subject=document.id(t),this.parent(e);t=this.element.retrieve("wrapper"),e=this.element.getStyles("margin","position","overflow");this.options.hideOverflow&&(e=$extend(e,{overflow:"hidden"})),this.options.wrapper&&(t=document.id(this.options.wrapper).setStyles(e)),this.wrapper=t||new Element("div",{styles:e}).wraps(this.element),this.element.store("wrapper",this.wrapper).setStyle("margin",0),this.now=[],this.open=!0},vertical:function(){this.margin="margin-top",this.layout="height",this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left",this.layout="width",this.offset=this.element.offsetWidth},set:function(t){return this.element.setStyle(this.margin,t[0]),this.wrapper.setStyle(this.layout,t[1]),this},compute:function(e,i,n){return[0,1].map(function(t){return Fx.compute(e[t],i[t],n)})},start:function(t,e){if(!this.check(t,e))return this;this[e||this.options.mode]();var i,e=this.element.getStyle(this.margin).toInt(),n=this.wrapper.getStyle(this.layout).toInt(),s=[[e,n],[0,this.offset]],o=[[e,n],[-this.offset,0]];switch(t){case"in":i=s;break;case"out":i=o;break;case"toggle":i=0==n?s:o}return this.parent(i[0],i[1])},slideIn:function(t){return this.start("in",t)},slideOut:function(t){return this.start("out",t)},hide:function(t){return this[t||this.options.mode](),this.open=!1,this.set([-this.offset,0])},show:function(t){return this[t||this.options.mode](),this.open=!0,this.set([0,this.offset])},toggle:function(t){return this.start("toggle",t)}}),Element.Properties.slide={set:function(t){var e=this.retrieve("slide");return e&&e.cancel(),this.eliminate("slide").store("slide:options",$extend({link:"cancel"},t))},get:function(t){return!t&&this.retrieve("slide")||(!t&&this.retrieve("slide:options")||this.set("slide",t),this.store("slide",new Fx.Slide(this,this.retrieve("slide:options")))),this.retrieve("slide")}},Element.implement({slide:function(t,e){t=t||"toggle";var i,n=this.get("slide");switch(t){case"hide":n.hide(e);break;case"show":n.show(e);break;case"toggle":var s=this.retrieve("slide:flag",n.open);n[s?"slideOut":"slideIn"](e),this.store("slide:flag",!s),i=!0;break;default:n.start(t,e)}return i||this.eliminate("slide:flag"),this}}),Fx.SmoothScroll=new Class({Extends:Fx.Scroll,initialize:function(t,e){e=e||document,this.doc=e.getDocument();var i=e.getWindow(),n=(this.parent(this.doc,t),this.links=$$(this.options.links||this.doc.links),i.location.href.match(/^[^#]*/)[0]+"#");this.links.each(function(t){var e;0==t.href.indexOf(n)&&(e=t.href.substr(n.length))&&this.useLink(t,e)},this),Browser.Engine.webkit419||this.addEvent("complete",function(){i.location.hash=this.anchor},!0)},useLink:function(e,i){var n;e.addEvent("click",function(t){(n=!1!==n?n||document.id(i)||this.doc.getElement("a[name="+i+"]"):n)&&(t.preventDefault(),this.anchor=i,this.toElement(n).chain(function(){this.fireEvent("scrolledTo",[e,n])}.bind(this)),e.blur())}.bind(this))}})),Drag=(Fx.Sort=new Class({Extends:Fx.Elements,options:{mode:"vertical"},initialize:function(t,e){this.parent(t,e),this.elements.each(function(t){"static"==t.getStyle("position")&&t.setStyle("position","relative")}),this.setDefaultOrder()},setDefaultOrder:function(){this.currentOrder=this.elements.map(function(t,e){return e})},sort:function(e){var s,o,n,r,h,a,l,i;return"array"==$type(e)&&(o=s=0,n={},r={},h="vertical"==this.options.mode,a=this.elements.map(function(t,e){var i,n=t.getComputedSize({styles:["border","padding","margin"]}),n=(h?(i={top:s,margin:n["margin-top"],height:n.totalHeight},s+=i.height-n["margin-top"]):(i={left:o,margin:n["margin-left"],width:n.totalWidth},o+=i.width),h?"top":"left"),t=(r[e]={},t.getStyle(n).toInt());return r[e][n]=t||0,i},this),this.set(r),(e=e.map(function(t){return t.toInt()})).length!=this.elements.length&&(this.currentOrder.each(function(t){e.contains(t)||e.push(t)}),e.length>this.elements.length)&&e.splice(this.elements.length-1,e.length-this.elements.length),l=s=o=0,e.each(function(t,e){var i={};h?(i.top=s-a[t].top-l,s+=a[t].height):(i.left=o-a[t].left,o+=a[t].width),l+=a[t].margin,n[t]=i},this),i={},$A(e).sort().each(function(t){i[t]=n[t]}),this.start(i),this.currentOrder=e,this)},rearrangeDOM:function(t){t=t||this.currentOrder;var e=this.elements[0].getParent(),i=[];return this.elements.setStyle("opacity",0),t.each(function(t){i.push(this.elements[t].inject(e).setStyles({top:0,left:0}))},this),this.elements.setStyle("opacity",1),this.elements=$$(i),this.setDefaultOrder(),this},getDefaultOrder:function(){return this.elements.map(function(t,e){return e})},forward:function(){return this.sort(this.getDefaultOrder())},backward:function(){return this.sort(this.getDefaultOrder().reverse())},reverse:function(){return this.sort(this.currentOrder.reverse())},sortByElements:function(t){return this.sort(t.map(function(t){return this.elements.indexOf(t)},this))},swap:function(t,e){"element"==$type(t)&&(t=this.elements.indexOf(t)),"element"==$type(e)&&(e=this.elements.indexOf(e));var i=$A(this.currentOrder);return i[this.currentOrder.indexOf(t)]=e,i[this.currentOrder.indexOf(e)]=t,this.sort(i)}}),new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:!1,style:!0,limit:!1,handle:!1,invert:!1,preventDefault:!1,stopPropagation:!1,modifiers:{x:"left",y:"top"}},initialize:function(){var t=Array.link(arguments,{options:Object.type,element:$defined}),t=(this.element=document.id(t.element),this.document=this.element.getDocument(),this.setOptions(t.options||{}),$type(this.options.handle));this.handles=("array"==t||"collection"==t?$$(this.options.handle):document.id(this.options.handle))||this.element,this.mouse={now:{},pos:{}},this.value={start:{},now:{}},this.selection=Browser.Engine.trident?"selectstart":"mousedown",this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:$lambda(!1)},this.attach()},attach:function(){return this.handles.addEvent("mousedown",this.bound.start),this},detach:function(){return this.handles.removeEvent("mousedown",this.bound.start),this},start:function(t){if(!t.rightClick){this.options.preventDefault&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation(),this.mouse.start=t.page,this.fireEvent("beforeStart",this.element);var e,i,n=this.options.limit,s=(this.limit={x:[],y:[]},this.element.getStyles("left","right","top","bottom"));for(e in this._invert={x:"left"==this.options.modifiers.x&&"auto"==s.left&&!isNaN(s.right.toInt())&&(this.options.modifiers.x="right"),y:"top"==this.options.modifiers.y&&"auto"==s.top&&!isNaN(s.bottom.toInt())&&(this.options.modifiers.y="bottom")},this.options.modifiers)if(this.options.modifiers[e]){var o=this.element.getStyle(this.options.modifiers[e]);if(o&&!o.match(/px$/)&&(o=(i=i||this.element.getCoordinates(this.element.getOffsetParent()))[this.options.modifiers[e]]),this.options.style?this.value.now[e]=(o||0).toInt():this.value.now[e]=this.element[this.options.modifiers[e]],this.options.invert&&(this.value.now[e]*=-1),this._invert[e]&&(this.value.now[e]*=-1),this.mouse.pos[e]=t.page[e]-this.value.now[e],n&&n[e])for(var r=2;r--;)$chk(n[e][r])&&(this.limit[e][r]=$lambda(n[e][r])())}"number"==$type(this.options.grid)&&(this.options.grid={x:this.options.grid,y:this.options.grid}),this.document.addEvents({mousemove:this.bound.check,mouseup:this.bound.cancel}),this.document.addEvent(this.selection,this.bound.eventStop)}},check:function(t){this.options.preventDefault&&t.preventDefault(),Math.round(Math.sqrt(Math.pow(t.page.x-this.mouse.start.x,2)+Math.pow(t.page.y-this.mouse.start.y,2)))>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),this.fireEvent("start",[this.element,t]).fireEvent("snap",this.element))},drag:function(t){for(var e in this.options.preventDefault&&t.preventDefault(),this.mouse.now=t.page,this.options.modifiers)this.options.modifiers[e]&&(this.value.now[e]=this.mouse.now[e]-this.mouse.pos[e],this.options.invert&&(this.value.now[e]*=-1),this._invert[e]&&(this.value.now[e]*=-1),this.options.limit&&this.limit[e]&&($chk(this.limit[e][1])&&this.value.now[e]>this.limit[e][1]?this.value.now[e]=this.limit[e][1]:$chk(this.limit[e][0])&&this.value.now[e]<this.limit[e][0]&&(this.value.now[e]=this.limit[e][0])),this.options.grid[e]&&(this.value.now[e]-=(this.value.now[e]-(this.limit[e][0]||0))%this.options.grid[e]),this.options.style?this.element.setStyle(this.options.modifiers[e],this.value.now[e]+this.options.unit):this.element[this.options.modifiers[e]]=this.value.now[e]);this.fireEvent("drag",[this.element,t])},cancel:function(t){this.document.removeEvent("mousemove",this.bound.check),this.document.removeEvent("mouseup",this.bound.cancel),t&&(this.document.removeEvent(this.selection,this.bound.eventStop),this.fireEvent("cancel",this.element))},stop:function(t){this.document.removeEvent(this.selection,this.bound.eventStop),this.document.removeEvent("mousemove",this.bound.drag),this.document.removeEvent("mouseup",this.bound.stop),t&&this.fireEvent("complete",[this.element,t])}})),Sortables=(Element.implement({makeResizable:function(t){var e=new Drag(this,$merge({modifiers:{x:"width",y:"height"}},t));return this.store("resizer",e),e.addEvent("drag",function(){this.fireEvent("resize",e)}.bind(this))}}),Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:!1,precalculate:!1,includeMargins:!0,checkDroppables:!0},initialize:function(t,e){var i,n;this.parent(t,e),t=this.element,this.droppables=$$(this.options.droppables),this.container=document.id(this.options.container),this.container&&"element"!=$type(this.container)&&(this.container=document.id(this.container.getDocument().body)),this.options.style&&("left"==this.options.modifiers.x&&"top"==this.options.modifiers.y&&((e=document.id(t.getOffsetParent()))&&(i=e.getStyles("border-top-width","border-left-width")),n=t.getStyles("left","top"),!e||"auto"!=n.left&&"auto"!=n.top||((n=t.getPosition(e)).x=n.x-(i["border-left-width"]?i["border-left-width"].toInt():0),n.y=n.y-(i["border-top-width"]?i["border-top-width"].toInt():0),t.setPosition(n))),"static"==t.getStyle("position"))&&t.setStyle("position","absolute"),this.addEvent("start",this.checkDroppables,!0),this.overed=null},start:function(t){this.container&&(this.options.limit=this.calculateLimit()),this.options.precalculate&&(this.positions=this.droppables.map(function(t){return t.getCoordinates()})),this.parent(t)},calculateLimit:function(){var t,e=document.id(this.element.getOffsetParent())||document.body,i=this.container.getCoordinates(e),n={},s={},o={},r={},h={},a=(["top","right","bottom","left"].each(function(t){n[t]=this.container.getStyle("border-"+t).toInt(),t,this.element.getStyle("border-"+t).toInt(),s[t]=this.element.getStyle("margin-"+t).toInt(),o[t]=this.container.getStyle("margin-"+t).toInt(),h[t]=e.getStyle("padding-"+t).toInt(),r[t]=e.getStyle("border-"+t).toInt()},this),this.element.offsetWidth+s.left+s.right),l=this.element.offsetHeight+s.top+s.bottom,u=0,c=0,a=i.right-n.right-a,l=i.bottom-n.bottom-l;return this.options.includeMargins?(u+=s.left,c+=s.top):(a+=s.right,l+=s.bottom),"relative"==this.element.getStyle("position")?((t=this.element.getCoordinates(e)).left-=this.element.getStyle("left").toInt(),t.top-=this.element.getStyle("top").toInt(),u+=n.left-t.left,c+=n.top-t.top,a+=s.left-t.left,l+=s.top-t.top,this.container!=e&&(u+=o.left+h.left,c+=(Browser.Engine.trident4?0:o.top)+h.top)):(u-=s.left,c-=s.top,this.container==e?(a-=n.left,l-=n.top):(u+=i.left+n.left-r.left,c+=i.top+n.top-r.top,a-=r.left,l-=r.top)),{x:[u,a],y:[c,l]}},checkAgainst:function(t,e){t=this.positions?this.positions[e]:t.getCoordinates();e=this.mouse.now;return e.x>t.left&&e.x<t.right&&e.y<t.bottom&&e.y>t.top},checkDroppables:function(){var t=this.droppables.filter(this.checkAgainst,this).getLast();this.overed!=t&&(this.overed&&this.fireEvent("leave",[this.element,this.overed]),t&&this.fireEvent("enter",[this.element,t]),this.overed=t)},drag:function(t){this.parent(t),this.options.checkDroppables&&this.droppables.length&&this.checkDroppables()},stop:function(t){return this.checkDroppables(),this.fireEvent("drop",[this.element,this.overed,t]),this.overed=null,this.parent(t)}}),Element.implement({makeDraggable:function(t){t=new Drag.Move(this,t);return this.store("dragger",t),t}}),new Class({Implements:[Events,Options],options:{snap:4,opacity:1,clone:!1,revert:!1,handle:!1,constrain:!1,preventDefault:!1},initialize:function(t,e){this.setOptions(e),this.elements=[],this.lists=[],this.idle=!0,this.addLists($$(document.id(t)||t)),this.options.clone||(this.options.revert=!1),this.options.revert&&(this.effect=new Fx.Morph(null,$merge({duration:250,link:"cancel"},this.options.revert)))},attach:function(){return this.addLists(this.lists),this},detach:function(){return this.lists=this.removeLists(this.lists),this},addItems:function(){return Array.flatten(arguments).each(function(t){this.elements.push(t);var e=t.retrieve("sortables:start",this.start.bindWithEvent(this,t));(this.options.handle&&t.getElement(this.options.handle)||t).addEvent("mousedown",e)},this),this},addLists:function(){return Array.flatten(arguments).each(function(t){this.lists.push(t),this.addItems(t.getChildren())},this),this},removeItems:function(){return $$(Array.flatten(arguments).map(function(t){this.elements.erase(t);var e=t.retrieve("sortables:start");return(this.options.handle&&t.getElement(this.options.handle)||t).removeEvent("mousedown",e),t},this))},removeLists:function(){return $$(Array.flatten(arguments).map(function(t){return this.lists.erase(t),this.removeItems(t.getChildren()),t},this))},getClone:function(t,i){return this.options.clone?"function"==$type(this.options.clone)?this.options.clone.call(this,t,i,this.list):((t=i.clone(!0).setStyles({margin:"0px",position:"absolute",visibility:"hidden",width:i.getStyle("width")})).get("html").test("radio")&&t.getElements("input[type=radio]").each(function(t,e){t.set("name","clone_"+e),t.get("checked")&&i.getElements("input[type=radio]")[e].set("checked",!0)}),t.inject(this.list).setPosition(i.getPosition(i.getOffsetParent()))):new Element(i.tagName).inject(document.body)},getDroppables:function(){var t=this.list.getChildren();return(t=this.options.constrain?t:this.lists.concat(t).erase(this.list)).erase(this.clone).erase(this.element)},insert:function(t,e){var i="inside";this.lists.contains(e)?(this.list=e,this.drag.droppables=this.getDroppables()):i=this.element.getAllPrevious().contains(e)?"before":"after",this.element.inject(e,i),this.fireEvent("sort",[this.element,this.clone])},start:function(t,e){!this.idle||t.rightClick||["button","input"].contains(document.id(t.target).get("tag"))||(this.idle=!1,this.element=e,this.opacity=e.get("opacity"),this.list=e.getParent(),this.clone=this.getClone(t,e),this.drag=new Drag.Move(this.clone,{preventDefault:this.options.preventDefault,snap:this.options.snap,container:this.options.constrain&&this.element.getParent(),droppables:this.getDroppables(),onSnap:function(){t.stop(),this.clone.setStyle("visibility","visible"),this.element.set("opacity",this.options.opacity||0),this.fireEvent("start",[this.element,this.clone])}.bind(this),onEnter:this.insert.bind(this),onCancel:this.reset.bind(this),onComplete:this.end.bind(this)}),this.clone.inject(this.element,"before"),this.drag.start(t))},end:function(){var t,e;this.drag.detach(),this.element.set("opacity",this.opacity),this.effect?(t=this.element.getStyles("width","height"),e=this.clone.computePosition(this.element.getPosition(this.clone.getOffsetParent())),this.effect.element=this.clone,this.effect.start({top:e.top,left:e.left,width:t.width,height:t.height,opacity:.25}).chain(this.reset.bind(this))):this.reset()},reset:function(){this.idle=!0,this.clone.destroy(),this.fireEvent("complete",this.element)},serialize:function(){var e=Array.link(arguments,{modifier:Function.type,index:$defined}),t=this.lists.map(function(t){return t.getChildren().map(e.modifier||function(t){return t.get("id")},this)},this),i=e.index;return 1==this.lists.length&&(i=0),$chk(i)&&0<=i&&i<this.lists.length?t[i]:t}})),Asset={javascript:function(t,e){(e=$extend({onload:$empty,document:document,check:$lambda(!0)},e)).onLoad&&(e.onload=e.onLoad,delete e.onLoad);var i,t=new Element("script",{src:t,type:"text/javascript"}),n=e.onload.bind(t),s=e.check,o=e.document;return delete e.onload,delete e.check,delete e.document,t.addEvents({load:n,readystatechange:function(){["loaded","complete"].contains(this.readyState)&&n()}}).set(e),Browser.Engine.webkit419&&(i=function(){$try(s)&&($clear(i),n())}.periodical(50)),t.inject(o.head)},css:function(t,e){var i=(e=e||{}).onload||e.onLoad;return i&&(e.events=e.events||{},e.events.load=i,delete e.onload,delete e.onLoad),new Element("link",$merge({rel:"stylesheet",media:"screen",type:"text/css",href:t},e)).inject(document.head)},image:function(t,s){s=$merge({onload:$empty,onabort:$empty,onerror:$empty},s);var o=new Image,r=document.id(o)||new Element("img");return["load","abort","error"].each(function(t){var e="on"+t,i=t.capitalize(),n=(s["on"+i]&&(s[e]=s["on"+i],delete s["on"+i]),s[e]);delete s[e],o[e]=function(){o&&(r.parentNode||(r.width=o.width,r.height=o.height),o=o.onload=o.onabort=o.onerror=null,n.delay(1,r,r),r.fireEvent(t,r,1))}}),o.src=r.src=t,o&&o.complete&&o.onload.delay(1),r.set(s)},images:function(i,n){n=$merge({onComplete:$empty,onProgress:$empty,onError:$empty,properties:{}},n),i=$splat(i);var s=0;return new Elements(i.map(function(t,e){return Asset.image(t,$extend(n.properties,{onload:function(){n.onProgress.call(this,s,e),++s==i.length&&n.onComplete()},onerror:function(){n.onError.call(this,s,e),++s==i.length&&n.onComplete()}}))}))}},Color=new Native({initialize:function(t,e){switch(3<=arguments.length?(e="rgb",t=Array.slice(arguments,0,3)):"string"==typeof t&&(t=t.match(/rgb/)?t.rgbToHex().hexToRgb(!0):t.match(/hsb/)?t.hsbToRgb():t.hexToRgb(!0)),e=e||"rgb"){case"hsb":var i=t;(t=t.hsbToRgb()).hsb=i;break;case"hex":t=t.hexToRgb(!0)}return t.rgb=t.slice(0,3),t.hsb=t.hsb||t.rgbToHsb(),t.hex=t.rgbToHex(),$extend(t,this)}}),$RGB=(Color.implement({mix:function(){var t=Array.slice(arguments),i="number"==$type(t.getLast())?t.pop():50,n=this.slice();return t.each(function(t){t=new Color(t);for(var e=0;e<3;e++)n[e]=Math.round(n[e]/100*(100-i)+t[e]/100*i)}),new Color(n,"rgb")},invert:function(){return new Color(this.map(function(t){return 255-t}))},setHue:function(t){return new Color([t,this.hsb[1],this.hsb[2]],"hsb")},setSaturation:function(t){return new Color([this.hsb[0],t,this.hsb[2]],"hsb")},setBrightness:function(t){return new Color([this.hsb[0],this.hsb[1],t],"hsb")}}),function(t,e,i){return new Color([t,e,i],"rgb")}),$HSB=function(t,e,i){return new Color([t,e,i],"hsb")},$HEX=function(t){return new Color(t,"hex")};Array.implement({rgbToHsb:function(){var t,e,i=this[0],n=this[1],s=this[2],o=0,r=Math.max(i,n,s),h=r-Math.min(i,n,s),a=r/255,l=0!=r?h/r:0;return 0!=l&&(t=(r-i)/h,e=(r-n)/h,s=(r-s)/h,o=i==r?s-e:n==r?2+t-s:4+e-t,(o/=6)<0)&&o++,[Math.round(360*o),Math.round(100*l),Math.round(100*a)]},hsbToRgb:function(){var t=Math.round(this[2]/100*255);if(0==this[1])return[t,t,t];var e=this[0]%360,i=e%60,n=Math.round(this[2]*(100-this[1])/1e4*255),s=Math.round(this[2]*(6e3-this[1]*i)/6e5*255),o=Math.round(this[2]*(6e3-this[1]*(60-i))/6e5*255);switch(Math.floor(e/60)){case 0:return[t,o,n];case 1:return[s,t,n];case 2:return[n,t,o];case 3:return[n,s,t];case 4:return[o,n,t];case 5:return[t,n,s]}return!1}}),String.implement({rgbToHsb:function(){var t=this.match(/\d{1,3}/g);return t?t.rgbToHsb():null},hsbToRgb:function(){var t=this.match(/\d{1,3}/g);return t?t.hsbToRgb():null}}),MooTools.lang.set("en-US","Date",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:"AM",PM:"PM",ordinal:function(t){return 3<t&&t<21?"th":["th","st","nd","rd","th"][Math.min(t%10,4)]},lessThanMinuteAgo:"less than a minute ago",minuteAgo:"about a minute ago",minutesAgo:"{delta} minutes ago",hourAgo:"about an hour ago",hoursAgo:"about {delta} hours ago",dayAgo:"1 day ago",daysAgo:"{delta} days ago",weekAgo:"1 week ago",weeksAgo:"{delta} weeks ago",monthAgo:"1 month ago",monthsAgo:"{delta} months ago",yearAgo:"1 year ago",yearsAgo:"{delta} years ago",lessThanMinuteUntil:"less than a minute from now",minuteUntil:"about a minute from now",minutesUntil:"{delta} minutes from now",hourUntil:"about an hour from now",hoursUntil:"about {delta} hours from now",dayUntil:"1 day from now",daysUntil:"{delta} days from now",weekUntil:"1 week from now",weeksUntil:"{delta} weeks from now",monthUntil:"1 month from now",monthsUntil:"{delta} months from now",yearUntil:"1 year from now",yearsUntil:"{delta} years from now"});
((s,i)=>{function l(e){var t=e.match(n);return t?{event:t[1],selector:t[2]}:{event:e}}var n=/(.*?):relay\(((?:\(.*?\)|.)+)\)$/,a=/[+>~\s]/;Element.implement({addEvent:function(n,e){var t,r,i=l(n);return i.selector&&!(t=this.retrieve("delegation:_delegateMonitors",{}))[n]&&(r=function(e){var t=function(e,t){var n=e.target;if(a.test(t=t.trim()))for(var r=this.getElements(t),i=r.length;i--;){var s=r[i];if(n==s||s.hasChild(n))return s}else for(;n&&n!=this;n=n.parentNode)if(Element.match(n,t))return document.id(n);return null}.call(this,e,i.selector);t&&this.fireEvent(n,[e,t],0,t)}.bind(this),t[n]=r,s.call(this,i.event,r)),s.apply(this,arguments)},removeEvent:function(e,t){var n,r=l(e);return r.selector?((n=this.retrieve("events"))&&n[e]&&(!t||n[e].keys.contains(t))&&(t?i.apply(this,[e,t]):i.apply(this,e),n=this.retrieve("events"))&&n[e]&&0==n[e].keys.length&&(t=this.retrieve("delegation:_delegateMonitors",{}),i.apply(this,[r.event,t[e]]),delete t[e]),this):i.apply(this,arguments)},fireEvent:function(e,t,n,r){var i=this.retrieve("events");return t&&(t[0],0),i&&i[e]&&i[e].keys.each(function(e){e.create({bind:r||this,delay:n,arguments:t})()},this),this}})})(Element.prototype.addEvent,Element.prototype.removeEvent);try{"undefined"!=typeof HTMLElement&&(HTMLElement.prototype.fireEvent=Element.prototype.fireEvent)}catch(e){}
(()=>{var u=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;function d(e){return e.replace("data-","").camelCase()}function e(){[Document,Element].invoke("implement",{data:function(e,t){var n,a,i=this.retrieve("dataCollection"),l=0,o=!1;if(i&&!0!==t)o=!0;else{for(i={},n=(a=this.attributes||[]).length;l<n;++l)0===a[l].name.indexOf("data-")&&(i[d(a[l].name)]=a[l].value.test(u)?JSON.decode(a[l].value):a[l].value,o=!0);this.store("dataCollection",i=o?i:null)}return e?o&&i[d(e)]||null:i}})}"function"==typeof define&&define.amd?define(e):e()})();
window.matchMedia||(window.matchMedia=(()=>{var t,e,r,n=window.styleMedia||window.media;return n||(t=document.createElement("style"),e=document.getElementsByTagName("script")[0],r=null,t.type="text/css",t.id="matchmediajs-test",e.parentNode.insertBefore(t,e),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,n={matchMedium:function(e){e="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=e:t.textContent=e,"1px"===r.width}}),function(e){return{matches:n.matchMedium(e||"all"),media:e||"all"}}})()),((t,s,r)=>{function n(e){for(var t,r,n,i,s=e||{},o=s.elements||c.getAllElements(),a=0,l=o.length;a<l;a++)if(r=(t=o[a]).parentNode,i=n=void 0,"IMG"===t.nodeName.toUpperCase()&&(t[c.ns]||(t[c.ns]={}),s.reevaluate||!t[c.ns].evaluated)){if("PICTURE"===r.nodeName.toUpperCase()){if(c.removeVideoShim(r),!1===(n=c.getMatch(t,r)))continue}else n=void 0;("PICTURE"===r.nodeName.toUpperCase()||t.srcset&&!c.srcsetSupported||!c.sizesSupported&&t.srcset&&-1<t.srcset.indexOf("w"))&&c.dodgeSrcset(t),n?(i=c.processSourceSet(n),c.applyBestCandidate(i,t)):(i=c.processSourceSet(t),void 0!==t.srcset&&!t[c.ns].srcset||c.applyBestCandidate(i,t)),t[c.ns].evaluated=!0}}if(t.HTMLPictureElement)return t.picturefill=function(){};s.createElement("picture");var e,c={};function i(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),t.setTimeout(function(){n({reevaluate:!0}),t._picturefillWorking=!1},60))}c.ns="picturefill",c.srcsetSupported="srcset"in r,c.sizesSupported="sizes"in r,c.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c.endsWith=function(e,t){return e.endsWith?e.endsWith(t):-1!==e.indexOf(t,e.length-t.length)},c.restrictsMixedContent=function(){return"https:"===t.location.protocol},c.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},c.getDpr=function(){return t.devicePixelRatio||1},c.getWidthFromLength=function(e){e=(e=e&&-1<e.indexOf("%")==0&&(0<parseFloat(e)||-1<e.indexOf("calc("))?e:"100vw").replace("vw","%"),c.lengthEl||(c.lengthEl=s.createElement("div"),c.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),c.lengthEl.style.width=e,s.body.appendChild(c.lengthEl),c.lengthEl.className="helper-from-picturefill-js",c.lengthEl.offsetWidth<=0&&(c.lengthEl.style.width=s.documentElement.offsetWidth+"px");e=c.lengthEl.offsetWidth;return s.body.removeChild(c.lengthEl),e},c.types={},c.types["image/jpeg"]=!0,c.types["image/gif"]=!0,c.types["image/png"]=!0,c.types["image/svg+xml"]=s.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),c.types["image/webp"]=function(){var e="image/webp";r.onerror=function(){c.types[e]=!1,n()},r.onload=function(){c.types[e]=1===r.width,n()},r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},c.verifyTypeSupport=function(e){e=e.getAttribute("type");return null===e||""===e||("function"==typeof c.types[e]?(c.types[e](),"pending"):c.types[e])},c.parseSize=function(e){e=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:e&&e[1],length:e&&e[2]}},c.findWidthFromSourceSize=function(e){for(var t,r=c.trim(e).split(/\s*,\s*/),n=0,i=r.length;n<i;n++){var s=r[n],s=c.parseSize(s),o=s.length,s=s.media;if(o&&(!s||c.matchesMedia(s))){t=o;break}}return c.getWidthFromLength(t)},c.parseSrcset=function(e){for(var t=[];""!==e;){var r,n=(e=e.replace(/^\s+/g,"")).search(/\s/g),i=null;-1!==n?(","!==(r=e.slice(0,n)).slice(-1)&&""!==r||(r=r.replace(/,+$/,""),i=""),e=e.slice(n+1),null===i&&(e=-1!==(n=e.indexOf(","))?(i=e.slice(0,n),e.slice(n+1)):(i=e,""))):(r=e,e=""),(r||i)&&t.push({url:r,descriptor:i})}return t},c.parseDescriptor=function(e,t){var t=t||"100vw",e=e&&e.replace(/(^\s+|\s+$)/g,""),r=c.findWidthFromSourceSize(t);if(e)for(var n=e.split(" "),i=n.length-1;0<=i;i--){var s,o=n[i],a=o&&o.slice(o.length-1);"h"!==a&&"w"!==a||c.sizesSupported?"x"===a&&(s=(a=o&&parseFloat(o,10))&&!isNaN(a)?a:1):s=parseFloat(parseInt(o,10)/r)}return s||1},c.getCandidatesFromSourceSet=function(e,t){for(var r=c.parseSrcset(e),n=[],i=0,s=r.length;i<s;i++){var o=r[i];n.push({url:o.url,resolution:c.parseDescriptor(o.descriptor,t)})}return n},c.dodgeSrcset=function(e){e.srcset&&(e[c.ns].srcset=e.srcset,e.removeAttribute("srcset"))},c.processSourceSet=function(e){var t=e.getAttribute("srcset"),r=e.getAttribute("sizes"),n=[];return n=(t="IMG"===e.nodeName.toUpperCase()&&e[c.ns]&&e[c.ns].srcset?e[c.ns].srcset:t)?c.getCandidatesFromSourceSet(t,r):n},c.applyBestCandidate=function(e,t){var r;e.sort(c.ascendingSort);for(var n,i,s,o,a=e[(n=e.length)-1],l=0;l<n;l++)if((r=e[l]).resolution>=c.getDpr()){a=r;break}a&&!c.endsWith(t.src,a.url)&&(c.restrictsMixedContent()&&"http:"===a.url.substr(0,"http:".length).toLowerCase()?console.warn("Blocked mixed content image "+a.url):(t.src=a.url,t.currentSrc=t.src,s="webkitBackfaceVisibility"in(i=t.style||{}),o=i.zoom,s&&(i.zoom=".999",s=t.offsetWidth,i.zoom=o)))},c.ascendingSort=function(e,t){return e.resolution-t.resolution},c.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var r=t[0],n=r.getElementsByTagName("source");n.length;)e.insertBefore(n[0],r);r.parentNode.removeChild(r)}},c.getAllElements=function(){for(var e=[],t=s.getElementsByTagName("img"),r=0,n=t.length;r<n;r++){var i=t[r];("PICTURE"===i.parentNode.nodeName.toUpperCase()||null!==i.getAttribute("srcset")||i[c.ns]&&null!==i[c.ns].srcset)&&e.push(i)}return e},c.getMatch=function(e,t){for(var r,n=t.childNodes,i=0,s=n.length;i<s;i++){var o=n[i];if(1===o.nodeType){if(o===e)return r;if("SOURCE"===o.nodeName.toUpperCase()){null!==o.getAttribute("src")&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var a=o.getAttribute("media");if(o.getAttribute("srcset")&&(!a||c.matchesMedia(a))){a=c.verifyTypeSupport(o);if(!0===a){r=o;break}if("pending"===a)return!1}}}}return r},n(),e=setInterval(function(){return n(),/^loaded|^i|^c/.test(s.readyState)?void clearInterval(e):void 0},250),t.addEventListener?t.addEventListener("resize",i,!1):t.attachEvent&&t.attachEvent("onresize",i),n._=c,"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof t&&(t.picturefill=n)})(this,this.document,new this.Image);
var Milkbox=new Class({Implements:[Options,Events],options:{overlayOpacity:.85,topPosition:50,initialWidth:250,initialHeight:250,canvasBorderWidth:"0px",canvasBorderColor:"#000000",canvasPadding:"0px",resizeDuration:500,resizeTransition:"sine:in:out",autoPlay:!1,autoPlayDelay:7,removeTitle:!1,autoSize:!0,maxHeight:0,imageOfText:"/",onXmlGalleries:$empty,onClosed:$empty,onFileReady:$empty},initialize:function(t){this.setOptions(t),this.autoPlayBkup={autoPlayDelay:this.options.autoPlayDelay,autoPlay:this.options.autoPlay},this.fullOptionsBkup={},this.galleries=[],this.families=[],this.xmlFiles=[],this.loadedImages=[],this.currentFile=null,this.currentIndex=null,this.currentGallery=null,this.currentRequest=null,this.currentResponse=null,this.mode=null,this.closed=!0,this.busy=!0,this.paused=!0,this.fileReady=!1,this.eventsok=!1,this.first=!0,this.activated=!1,this.intObj=null,this.formtags=null,this.prepareGalleries(),0!=this.options.overlayOpacity&&"none"!=bertaGlobalOptions.galleryFullScreenBackground||(this.options.overlayOpacity=1e-4),this.saveOptions(),0!=this.galleries.length&&this.initMilkbox(!0)},initMilkbox:function(t){t&&(this.formtags=$$("select","textarea")),this.prepareHTML(),this.prepareEffects(),this.prepareEvents(),this.activated=!0},openMilkbox:function(t,e){var i,s;this.closed=!1,this.formtags&&0!=this.formtags.length&&this.formtags.setStyle("display","none"),this.overlay.setStyles({top:-$(window).getScroll().y,height:$(window).getScrollSize().y+$(window).getScroll().y}),this.center.setStyles({top:this.options.topPosition,visibility:"visible"}),this.currentGallery=t,this.currentIndex=e,this.overlay.tween("opacity",this.options.overlayOpacity),1==t.length?(this.mode="singleFile",this.loadFile(t[e],e)):(this.mode="fileGallery",$$(this.close,this.prev,this.next).setStyle("display","inline"),"yes"==bertaGlobalOptions.galleryFullScreenImageNumbers&&$$(this.count).setStyle("display","inline"),this.options.autoPlay&&(this.playpause.setStyle("display","block"),this.playpause.getSize().x),this.center.getStyle("border-right-width").toInt(),i=e!=t.length-1?t[e+1]:t[0],s=0!=e?t[e-1]:t[t.length-1],this.loadFile(t[e],s==i?[s]:[s,i]))},loadFile:function(t,e){this.fileReady=!1,this.checkFileType(t,"swf")?this.loadSwf(t):(this.loadedImages.contains(t.retrieve("href"))||this.center.addClass("mbLoading"),this.loadImage(t.retrieve("href"))),e&&this.preloadFiles(e)},preloadFiles:function(t){t.each(function(t,e){this.checkFileType(t.retrieve("href"),"swf")||this.preloadImage(t.retrieve("href"))},this)},loadImage:function(e){new Asset.image(e,{onload:function(t){this.loadedImages.contains(e)||this.loadedImages.push(e),this.currentFile=t,this.loadAux(this.currentFile)}.bindWithEvent(this)})},preloadImage:function(e){this.loadedImages.contains(e)||new Asset.image(e,{onload:function(t){this.loadedImages.push(e)}.bindWithEvent(this)})},loadSwf:function(t){var e=new Swiff(t.retrieve("href"),{width:t.retrieve("width").toInt(),height:t.retrieve("height").toInt(),params:{wMode:"opaque",swLiveConnect:"false"}});this.currentFile=e,this.loadAux(t)},loadAux:function(t){this.fileReady=!0,this.fireEvent("fileReady"),$$(this.description,this.navigation).setStyle("visibility","hidden"),this.navigation.setStyle("height",""),this.showFile(t)},showFile:function(t){var e,i,s,n,l,a;this.closed||(e=new Hash,i=new Hash,l={},(a=n=0)!=this.options.canvasBorderWidth.toInt()&&0==this.canvas.getStyle("borderWidth").toInt()&&(s=this.options.canvasBorderWidth+" solid "+this.options.canvasBorderColor,this.canvas.setStyle("border",s)),0!=this.options.canvasPadding.toInt()&&0==this.canvas.getStyle("padding").toInt()&&(s=this.options.canvasPadding,this.canvas.setStyle("padding",s)),s=this.canvas.getSize(),a=2*this.canvas.getStyle("borderWidth").toInt()+2*this.canvas.getStyle("padding").toInt(),this.canvas.setStyles({opacity:0,width:"",height:""}),t.retrieve("width")?e.extend({height:t.retrieve("height").toInt(),width:t.retrieve("width").toInt()}):(e=e.extend(t.getProperties("width","height")).map(function(t){return t.toInt()}),this.options.autoSize&&(e=this.computeSize(e),t.setProperties({width:e.width,height:e.height})),1<this.currentGallery.length?t.addEvent("click",this.next_prev_aux.bindWithEvent(this,"next")):t.setStyle("cursor","default")),i=i.extend(this.center.getStyles("width","height")).map(function(t){return t.toInt()}),e.width!=i.width&&(t=this.center.getStyles("padding-left","padding-right"),t=parseInt(t["padding-left"])+parseInt(t["padding-right"]),l.width=e.width+a,l.marginLeft=-((l.width+t)/2).round()),t=0<s.y-a?i.height-s.y:0,l.height=e.height+a+t,this.canvas.setStyles({width:e.width,height:e.height}),this.center.removeClass("mbLoading"),this.first&&(this.first=!(n=500)),function(){this.center.morph(l)}.delay(n,this))},computeSize:function(t){var e=window.getSize(),e={width:e.x-60,height:e.y-68-2*this.options.topPosition},i=Math.max(e.height,e.width),i=i==e.width?(s=i/t.width,"height"):(s=i/t.height,"width"),s=s<=1?s:1,t=t.map(function(t){return Math.floor(t*s)});return s=e[i]/t[i]<=1?e[i]/t[i]:1,t=t.map(function(t){return Math.floor(t*s)}),0<this.options.maxHeight&&(s=this.options.maxHeight/t.height<1?this.options.maxHeight/t.height:1,t=t.map(function(t){return Math.floor(t*s)})),t},showGallery:function(t){var e,i,s;t&&t.gallery&&(e=$chk(t.index)?t.index:0,i=this.getGallery(t.gallery),s=!1,(t.autoplay||i.options&&i.options.autoplay)&&(s=!0),-1==i||this.opened||(s?(s=t&&t.delay?t.delay:i.options&&i.options.delay?i.options.delay:this.autoPlayDelay,this.startAutoPlay({gallery:i,index:e,delay:s})):this.openMilkbox(i,e)))},addGalleries:function(i){this.currentRequest=new Request({method:"get",autoCancel:!0,url:i,onRequest:function(){}.bindWithEvent(this),onSuccess:function(t,e){t=t.replace(/(<a.+)\/>/gi,"$1></a>");this.setGalleries(new Element("div",{html:t}),i)}.bindWithEvent(this),onFailure:function(t){alert("Milkbox :: addGalleries: XML file path error or local Ajax test: please test addGalleries() on-line")}}),this.currentRequest.send()},setGalleries:function(t,e){this.xmlFiles.contains(e)||this.xmlFiles.push(e);var e=t.getElements(".gallery"),s=[],n=[];e.each(function(t,e){var i={gallery:t.getProperty("name"),autoplay:Boolean(t.getProperty("autoplay")),delay:Number(t.getProperty("delay"))},t=t.getChildren("a").map(function(t){return t.setProperty("rel","milkbox["+i.gallery+"]")});s.push(t),i.autoplay&&n.push(i)}),this.prepareGalleries(s.flatten()),this.setAutoPlay(n),this.activated||this.initMilkbox(),this.fireEvent("xmlGalleries")},checkFileType:function(t,e){var i=null,i="string"!=$type(t)?t.retrieve("href"):t,t=new RegExp(".("+e+")$","i");return i.split("?")[0].test(t)},getGallery:function(t){t=(t.test(/^milkbox/i)?this.families:this.families.map(function(t){t=t.trim();return t.slice(0,t.length).substr(8).replace(/(.+)]$/,"$1")})).indexOf(t);return-1!=t?this.galleries[t]:t},setFileProps:function(i,t){t.split(",").each(function(t,e){t=t.trim().split(":");i.store(t[0].trim(),t[1].trim())},this)},changeOptions:function(t){t&&(this.setOptions(t),this.center.get("morph").setOptions({transition:this.options.resizeTransition,duration:this.options.resizeDuration}))},saveOptions:function(t){$chk(t)?this.fullOptionsBkup=t:this.fullOptionsBkup=this.options},restoreOptions:function(){this.setOptions(this.fullOptionsBkup);var t=this.options.canvasBorderWidth+" solid "+this.options.canvasBorderColor;this.canvas.setStyles({border:t,padding:this.options.canvasPadding}),this.center.get("morph").setOptions({transition:this.options.resizeTransition,duration:this.options.resizeDuration})},reloadGalleries:function(){this.galleries=[],this.families=[],this.formtags=$$("select","textarea"),this.activated||this.initMilkbox(!1),this.prepareGalleries(),this.removeGalleriesEvents(),this.setGalleriesEvents(),0!=this.xmlFiles.length&&this.xmlFiles.each(function(t,e){this.addGalleries(t)}.bind(this))},setAutoPlay:function(t){("object"==$type(t)?[t]:t).each(function(t){var e,i=this.getGallery(t.gallery);-1!=i&&(e=1==t.autoplay&&t.autoplay,t=$chk(t.delay)&&e?t.delay:this.options.autoPlayDelay,i.options={autoplay:e,delay:t})},this)},startAutoPlay:function(t){var e,i=-1;if(t&&t.gallery&&("array"==$type(t.gallery)?i=t.gallery:"string"==$type(t.gallery)&&(i=this.getGallery(t.gallery))),-1==i&&(i=this.galleries[0]),e=t&&t.delay&&"number"==$type(t.delay)?1e3*t.delay:i.options&&i.options.delay?1e3*i.options.delay:1e3*this.options.autoPlayDelay,t=t&&t.index&&"number"==$type(t.index)?t.index:0,e<2*this.options.resizeDuration&&(e=2*this.options.resizeDuration),this.options.autoPlayDelay=e/1e3,this.options.autoPlay||this.setOptions({autoPlay:!0,autoPlayDelay:this.options.autoPlayDelay}),this.closed){if(this.openMilkbox(i,t),"fileGallery"!=this.mode)return;this.addEvent("fileReady",function(){this.intObj=this.next_prev_aux.periodical(e,this,[null,"next"]),this.removeEvents("fileReady")}.bindWithEvent(this))}else this.closed,this.next_prev_aux(null,"next"),this.intObj=this.next_prev_aux.periodical(e,this,[null,"next"]);this.paused=!1},stopAutoPlay:function(){this.intObj&&($clear(this.intObj),this.intObj=null),this.playpause.setStyle("backgroundPosition","0 -44px"),this.paused=!0},removeGalleriesEvents:function(){this.galleries.each(function(t){$$(t).removeEvents("click")},this)},setGalleriesEvents:function(){this.galleries.each(function(i){$$(i).addEvent("click",function(t){var e=$(t.target).match("a")?$(t.target):$(t.target).getParent("a"),t=(t.preventDefault(),this.getGallery(e.rel));t.options&&t.options.autoplay&&this.setOptions({autoPlay:t.options.autoplay,autoPlayDelay:t.options.delay}),this.options.autoPlay?this.startAutoPlay({gallery:i,index:i.indexOf(e)}):this.openMilkbox(i,i.indexOf(e))}.bindWithEvent(this))},this)},prepareEvents:function(t){this.setGalleriesEvents(),this.next.addEvent("click",this.next_prev_aux.bindWithEvent(this,"next")),this.prev.addEvent("click",this.next_prev_aux.bindWithEvent(this,"prev")),$$(this.next,this.prev).addEvents({mouseover:function(){this.setStyle("backgroundPosition","0 -22px")},mouseout:function(){this.setStyle("backgroundPosition","0 0")}}),$(window.document).addEvent("keydown",function(t){"fileGallery"==this.mode&&1!=this.busy&&("right"==t.key||"space"==t.key?this.next_prev_aux(t,"next"):"left"==t.key?this.next_prev_aux(t,"prev"):"esc"==t.key&&this.closeMilkbox())}.bindWithEvent(this)),this.playpause.addEvents({mouseover:function(t){0==this.paused?this.playpause.setStyle("backgroundPosition","0 -22px"):this.playpause.setStyle("backgroundPosition","0 -66px")}.bindWithEvent(this),mouseout:function(){0==this.paused?this.playpause.setStyle("backgroundPosition","0 0"):this.playpause.setStyle("backgroundPosition","0 -44px")}.bindWithEvent(this),click:function(){var t;0==this.paused?(this.stopAutoPlay(),this.paused=!0,this.playpause.setStyle("backgroundPosition","0 -66px")):(t=this.currentGallery.options&&this.currentGallery.options.delay?this.currentGallery.options.delay:this.options.autoPlayDelay,this.startAutoPlay({gallery:this.currentGallery,index:this.currentIndex+1,delay:t}),this.paused=!1,this.playpause.setStyle("backgroundPosition","0 0"))}.bindWithEvent(this)}),this.overlay.get("tween").addEvent("onComplete",function(){this.overlay.getStyle("opacity")==this.options.overlayOpacity?this.center.tween("opacity",1):0==this.overlay.getStyle("opacity")&&this.overlay.setStyles({height:0,top:""})}.bindWithEvent(this)),this.center.get("morph").addEvent("onComplete",function(){"element"==$type(this.currentFile)?this.canvas.grab(this.currentFile):function(){this.canvas.grab(this.currentFile)}.delay(500,this),this.canvas.tween("opacity",1);var t="showThisImage"!=this.mode?this.currentGallery[this.currentIndex].retrieve("title"):this.specialDescription,t=($chk(t)&&(this.description.innerHTML=t),"fileGallery"==this.mode&&this.count.appendText(this.currentIndex+1+""+this.options.imageOfText+this.currentGallery.length),this.center.getStyle("height").toInt()),e=this.bottom.getSize().y,e=t>this.canvas.getSize().y?this.bottom.getSize().y+this.canvas.getSize().y-t:e;e+=this.close.getSize().y,this.bottom.setStyle("display","none"),this.center.retrieve("setFinalHeight").start(t,t+e)}.bindWithEvent(this)),this.center.retrieve("setFinalHeight").addEvent("onComplete",function(){this.bottom.setStyles({visibility:"visible",display:"block"}),$$(this.description,this.navigation).setStyle("visibility","visible");var t=$(window).getScrollSize().y,e=$(window).getScroll().y;this.overlay.setStyles({height:t+e,top:-e}),this.busy=!1}.bindWithEvent(this)),window.addEvent("resize",function(){var t,e;0!=this.overlay.getStyle("opacity")&&(t=$(window).getScrollSize().y,e=$(window).getScroll().y,this.overlay.setStyles({height:t+e,top:-e}))}.bindWithEvent(this)),$$(this.overlay,this.close).addEvent("click",this.closeMilkbox.bindWithEvent(this)),this.eventsok=!0},next_prev_aux:function(t,e){if(t)t.preventDefault(),this.stopAutoPlay();else if(this.busy||!this.fileReady)return;var i;this.busy=!0,t="next"==e?(i=this.currentIndex!=this.currentGallery.length-1?this.currentIndex+=1:this.currentIndex=0,this.currentIndex!=this.currentGallery.length-1?this.currentIndex+1:0):(i=0!=this.currentIndex?--this.currentIndex:this.currentIndex=this.currentGallery.length-1,0!=this.currentIndex?this.currentIndex-1:this.currentGallery.length-1),this.canvas.empty(),this.description.empty(),this.count.empty(),this.loadFile(this.currentGallery[i],[this.currentGallery[t]])},prepareEffects:function(){this.overlay.set("tween",{duration:"short",link:"cancel"}),this.center.set("tween",{duration:"short",link:"chain"}),this.center.set("morph",{duration:this.options.resizeDuration,link:"chain",transition:this.options.resizeTransition}),this.center.store("setFinalHeight",new Fx.Tween(this.center,{property:"height",duration:"short"})),this.canvas.set("tween",{link:"chain"})},prepareGalleries:function(t){var e=[];(t||$$("a")).each(function(t){t.rel&&t.rel.test(/^milkbox/i)&&t.href.split("?")[0].test(/\.(gif|jpg|jpeg|png|swf)$/i)&&(7<t.rel.length&&!this.families.contains(t.rel)&&this.families.push(t.rel),e.push(t))},this),e.each(function(e){$(e).store("href",e.href),$(e).store("rel",e.rel),$(e).store("title",e.title),this.checkFileType(e.href,"swf")&&this.setFileProps($(e),e.rev),this.options.removeTitle&&$(e).removeProperty("title"),7<e.rel.length?this.families.each(function(i,t){var s,n;e.rel==i&&(s=!1,this.galleries.each(function(t,e){t[0].rel==i&&(s=!0,n=e)}),1==s?this.galleries[n].push($(e)):this.galleries.push([$(e)]))},this):this.galleries.push([$(e)])},this)},prepareHTML:function(){this.overlay=new Element("div",{id:"mbOverlay",styles:{opacity:0,visibility:"visible",height:0,overflow:"hidden"}}).inject($(document.body)),"white"==bertaGlobalOptions.galleryFullScreenBackground&&this.overlay.setStyle("background-color","#fff"),this.center=new Element("div",{id:"mbCenter",styles:{width:this.options.initialWidth,height:this.options.initialHeight,marginLeft:-this.options.initialWidth/2,opacity:0,visibility:"hidden"}}).inject($(document.body)),this.canvas=new Element("div",{id:"mbCanvas"}).inject(this.center),this.bottom=new Element("div",{id:"mbBottom"}).inject(this.center).setStyle("visibility","hidden"),this.bottom.setStyle("text-align",bertaGlobalOptions.galleryFullScreenCaptionAlign),this.navigation=new Element("div",{id:"mbNavigation"}).setStyle("visibility","hidden"),this.description=new Element("div",{id:"mbDescription"}).setStyle("visibility","hidden"),this.bottom.adopt(this.navigation,this.description,new Element("div",{class:"mbClear"})),this.close=new Element("a",{id:"mbCloseLink"}),this.next=new Element("a",{id:"mbNextLink"}),this.next.set("text",">"),this.prev=new Element("a",{id:"mbPrevLink"}),this.prev.set("text","<"),this.playpause=new Element("a",{id:"mbPlayPause"}),this.count=new Element("span",{id:"mbCount"}),$$(this.next,this.prev,this.count,this.playpause).setStyle("display","none"),this.navigation.adopt(this.prev,this.count,this.next),this.close.inject(this.center,"top")},closeMilkbox:function(){this.cancelAllEffects(),this.stopAutoPlay(),this.setOptions(this.autoPlayBkup),this.currentFile=null,this.currentIndex=null,this.currentGallery=null,this.currentRequest=null,this.currentResponse=null,$$(this.prev,this.next,this.playpause,this.count).setStyle("display","none"),this.playpause.setStyle("backgroundPosition","0 0");var t=this.center.getStyle("border-right-width").toInt();this.close.getSize().x;this.navigation.setStyles({visibility:"hidden"}),this.description.empty(),this.bottom.setStyles({visibility:"hidden",display:""}),this.canvas.setStyles({opacity:0,width:"",height:""}),this.canvas.empty(),this.count.empty(),this.center.setStyles({opacity:0,visibility:"hidden",width:this.options.initialWidth,height:this.options.initialHeight,marginLeft:-this.options.initialWidth/2}),this.overlay.tween("opacity",0),this.formtags&&0!=this.formtags.length&&this.formtags.setStyle("display",""),this.mode=null,this.closed=!0,this.first=!0,this.fileReady=!1,this.fireEvent("closed")},cancelAllEffects:function(){this.overlay.get("tween").cancel(),this.center.get("morph").cancel(),this.center.get("tween").cancel(),this.center.retrieve("setFinalHeight").cancel(),this.canvas.get("tween").cancel()}});
window.BertaHelpers={logoutUser:function(){window.parent===window?window.location.reload():window.parent.postMessage("user:logout","*")},isMobile:function(){var i=navigator.userAgent||navigator.vendor||window.opera;return!(!/(ipad|playbook|silk|android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(i)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))},debounce:function(a,t,n){var r;return function(){var i=this,e=arguments,o=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||a.apply(i,e)},t),o&&a.apply(i,e)}},throttle:function(i,e){var o=!1;return function(){o||(i.call(),o=!0,setTimeout(function(){o=!1},e))}},updateQueryStringParameter:function(i,e,o){var a=new RegExp("([?&])"+e+"=.*?(&|$)","i"),t=-1!==i.indexOf("?")?"&":"?";return i.match(a)?i.replace(a,"$1"+e+"="+o+"$2"):i+t+e+"="+o}};
var BertaBackToTop=function(){var e,n,o,t,i,c,r,s,d;"yes"===bertaGlobalOptions.backToTopEnabled&&(e=document.querySelector(".js-back-to-top"))&&(n={bufferSize:2,scrollSpeed:300,buttonShowTime:4e3},o="ontouchstart"in document.documentElement,i=function(){e.style.display="flex",e.classList.add("show"),clearTimeout(t),t=setTimeout(function(){c()},n.buttonShowTime)},c=function(){e.classList.remove("show"),setTimeout(function(){e.style.display="none"},200)},r=function(e,t){function i(){e=d+=20,n=r,o=s;var e,n,o=(e/=t/2)<1?o/2*e*e+n:-o/2*(--e*(e-2)-1)+n;window.scrollTo(c,o),d<t&&window.setTimeout(i,20)}var n=document.scrollingElement,c=n&&n.scrollLeft||window.pageXOffset,r=n&&n.scrollTop||window.pageYOffset,s=e-r,d=0;i()},s=function(){var e=document.scrollingElement;return(e&&e.scrollTop||window.pageYOffset)>window.innerHeight*n.bufferSize},d=function(){(s()?i:c)()},e.addEventListener("click",function(e){e.preventDefault(),r(0,n.scrollSpeed)}),window.addEventListener("scroll",window.BertaHelpers.debounce(function(){d()},200)),window.addEventListener("resize",window.BertaHelpers.debounce(function(){d()},200)),o||window.addEventListener("mousemove",window.BertaHelpers.throttle(function(){s()&&i()},200)),d())};document.addEventListener("DOMContentLoaded",function(){BertaBackToTop()});
var BertaGallerySlideshow=new Class({options:{},container:null,imageContainer:null,gallerySwiper:null,navContainer:null,initialize:function(e){this.container=e,this.is_mobile_device=window.BertaHelpers.isMobile(),e.hasClass("xInitialized")||(e.addClass("xInitialized"),this.is_mobile_device&&e.addClass("bt-is-mobile-device"),this.initOptions(),this.attach(),this.loadFirst())},initOptions:function(){this.options={fullscreen:null!==this.container.get("data-fullscreen"),autoplay:parseInt(this.container.get("data-autoplay"),10),asRowGallery:this.container.get("data-as-row-gallery"),swiperOptions:{loop:this.container.get("data-loop")}}},attach:function(){this.imageContainer=this.container.getElement("div.xGallery"),this.navContainer=this.container.getElement("ul.xGalleryNav"),this.navContainer&&!this.navContainer.getElements("a").length&&(this.navContainer=null)},detach:function(){this.gallerySwiper&&this.gallerySwiper.destroy(),this.navContainer&&this.navContainer.getElements("a").each(function(e){e.removeEvents("click")}),this.container=this.imageContainer=this.navContainer=null},loadFirst:function(){var t,i,e,n,a,s,l;this.navContainer&&(t=this.navContainer,i=this.nav_highlightItem,l=this.navContainer.getElement("li"),this.nav_highlightItem(l),this.options.fullscreen||this.getNext())&&(e=this.imageContainer.getElement(".swiper-container"),n=[],a=function(e){e.data("autoplay")&&(e.muted=!0,e.play())},this.options.asRowGallery&&((s=this.container.getFirst()).setStyle("width","100vw"),(l=function(){var e=this.container.getBoundingClientRect();s.setStyle("margin-left",-e.left)}.bindWithEvent(this))(),window.addEvent("resize",window.BertaHelpers.debounce(l.bindWithEvent(this),300))),l={init:!1,loop:this.options.swiperOptions.loop,centeredSlides:this.options.asRowGallery,slidesPerView:this.options.asRowGallery?"auto":1,spaceBetween:this.options.asRowGallery?10:0,autoHeight:!0,effect:this.options.asRowGallery?"slide":"fade",mousewheel:!!this.options.asRowGallery&&{releaseOnEdges:!0},fadeEffect:{crossFade:!0},navigation:{nextEl:e.getElement(".swiper-button-next"),prevEl:e.getElement(".swiper-button-prev")}},this.options.autoplay&&(l.autoplay={delay:1e3*this.options.autoplay}),this.gallerySwiper=new Swiper(e,l),this.gallerySwiper.on("init",function(){this.imageContainer.querySelectorAll(".xGalleryItem").forEach(function(t,i){(this.options.asRowGallery||this.options.fullscreen)&&(this.options.fullscreen&&(t.style.cursor="pointer"),t.addEventListener("click",function(){if(this.options.asRowGallery){if(t.parentNode.classList.contains("swiper-slide-next"))return void this.gallerySwiper.slideNext();if(t.parentNode.classList.contains("swiper-slide-prev"))return void this.gallerySwiper.slidePrev()}var e;t.classList.contains("xGalleryItemType-video")||(e=this.gallerySwiper.params.loop?parseInt(t.parentNode.getAttribute("data-swiper-slide-index"),10):i,BertaGalleryFullscreen(this.container,e))}.bind(this)))},this),e.querySelectorAll(".swiper-slide").forEach(function(e,t){e=e.querySelector("video");e&&(n[t]=e).addEventListener("loadeddata",function e(t){this.gallerySwiper.update(),t.target.removeEventListener(t.type,e)}.bind(this),!1)},this),n[this.gallerySwiper.activeIndex]&&a(n[this.gallerySwiper.activeIndex])}.bind(this)),this.gallerySwiper.on("init slideChange resize",function(){var e,t=this;t.slides.length&&(e=null!==t.slides[t.activeIndex].querySelector(".xGalleryItemType-image"),t.$el[0].setAttribute("data-slide-type",e?"image":"video"))}),this.gallerySwiper.on("slideChange",function(){var e=this;n[e.previousIndex]&&n[e.previousIndex].pause(),n[e.activeIndex]&&a(n[e.activeIndex]),i(t.querySelectorAll("li")[e.realIndex])}),this.gallerySwiper.init(),this.nav_setEvents())},getNext:function(e){if(this.navContainer){var t=this.navContainer.getElement("li.selected");if(t)return!(t=t.getNext())&&e?this.navContainer.getElement("li"):t}return null},nav_setEvents:function(){this.navContainer.getElements("a").addEvent("click",this.nav_onItemClick.bindWithEvent(this))},nav_onItemClick:function(e){e.event&&e.stop();var e=$(e.target),t=(e="A"!=e.tagName?e.getParent("a"):e).getParent("li");this.nav_highlightItem(t),this.gallerySwiper.slideTo(parseInt(e.getClassStoredValue("xImgIndex")-(this.gallerySwiper.params.loop?0:1),10))},nav_highlightItem:function(e){e.getParent().getChildren().removeClass("selected"),e.addClass("selected")}});
var BertaGalleryRow=new Class({container:null,imageContainer:null,navContainer:null,rowClearElement:null,newObjectInjectWhere:null,newObjectInjectPosition:null,currentSrc:null,preload:null,loadTimer:null,loadedItems:0,currentItem:0,initialize:function(e){this.is_mobile_device=window.BertaHelpers.isMobile(),e.hasClass("xInitialized")||(e.addClass("xInitialized"),this.is_mobile_device&&e.addClass("bt-is-mobile-device"),this.attach(e),this.loadFirst(),window.addEvent("resize",window.BertaHelpers.debounce(this.layout_update.bindWithEvent(this),200)))},attach:function(e){this.container=e,this.fullscreen=null!==this.container.get("data-fullscreen"),this.imageContainer=this.container.getElement("div.xGallery"),this.navContainer=this.container.getElement("ul.xGalleryNav"),this.galleryEditButton=this.imageContainer.getElement(".xGalleryEditButton");e=this.imageContainer.getElement(".loading");e&&e.dispose(),this.loadedItems=this.container.getElements(".xGalleryItem").length,this.navContainer&&0<this.navContainer.getElements("a").length?(this.rowClearElement=new Element("br",{class:"clear"}).inject(this.imageContainer),this.newObjectInjectWhere="site"==bertaGlobalOptions.environment?this.rowClearElement:this.galleryEditButton,this.newObjectInjectPosition="before"):this.navContainer=null},detach:function(){this.navContainer&&this.navContainer.getElements("a").each(function(e){e.removeEvents("click")}),this.container=this.imageContainer=this.navContainer=null,this.currentSrc=null},loadFirst:function(){var e,t;this.navContainer&&(e=this.navContainer.getElement("li"),this.nav_highlightItem(e),t=this.navContainer.getElement("li a"),this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),1,t.get("data-srcset")))},loadNext:function(e){var t;this.navContainer&&((e=this.getNext(e))?(this.nav_highlightItem(e),t=e.getElement("a"),this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),t.getClassStoredValue("xImgIndex"),t.get("data-srcset"))):(this.fullscreen&&this.attachFullscreen(),this.galleryEditButton&&this.galleryEditButton.setStyle("width",this.imageContainer.scrollWidth)))},attachFullscreen:function(){this.container.getElements(".xGalleryItem").each(function(e,t){e.hasClass("xGalleryItemType-video")||(e.setStyle("cursor","pointer"),e.addEvent("click",function(){BertaGalleryFullscreen(this.container,t)}.bindWithEvent(this)))},this)},getNext:function(e){if(this.navContainer){var t=this.navContainer.getElement("li.selected");if(t)return!(t=t.getNext())&&e?this.navContainer.getElement("li"):t}return null},layout_update:function(){var t=this.imageContainer.get("xRowGalleryPadding");t&&this.imageContainer.getChildren().each(function(e){e.setStyle("padding",t)}),this.imageContainer.getChildren(".xGalleryItem").each(function(e){"video"!=e.getClassStoredValue("xGalleryItemType")&&e.setStyle("height","auto")}),this.imageContainer.getElements(".xGalleryItem").setStyle("position","relative")},layout_inject:function(e){e||(this.preload.inject(this.newObjectInjectWhere,this.newObjectInjectPosition),picturefill(this.preload.getElement("img"))),this.layout_update()},nav_setEvents:function(){this.navContainer.getElements("a").addEvent("click",this.nav_onItemClick.bindWithEvent(this))},nav_onItemClick:function(e){e.event&&e.stop();e=$(e.target),e=(e="A"!=e.tagName?e.getParent("a"):e).getParent("li");this.nav_highlightItem(e)},nav_highlightItem:function(e){e.getParent().getChildren().removeClass("selected"),e.addClass("selected")},load:function(e,t,i,n,a,l,s,r,o){this.currentItem+=1,this.currentSrc=null;var h=this.currentItem<=this.loadedItems;this.load_Render(e,t,i,n,a,l,s,r,o,h)},load_Render:function(e,t,i,n,a,l,s,r,o,h){switch(this.currentSrc=e,this.xImgIndex=r,this.srcset=o||null,t){case"image":h||(d=s.replace(/(<([^>]+)>)/gi," ").replace(/(\r\n|\n|\r)/gm," ").replace(/\s{2,}/g," ").trim(),this.preload=new Asset.image(e,{width:i,height:n,srcset:this.srcset,alt:d}),this.preload=new Element("div",{class:"xGalleryItem xGalleryItemType-image xImgIndex-"+this.xImgIndex}).adopt(this.preload),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload)),this.load_Finish(e,t,h);break;case"video":var d;h?this.preload=this.imageContainer.getChildren()[this.currentItem-1].getElement("video"):(this.preload=new Element("video",{width:i,class:"xGalleryItem xGalleryItemType-video",controls:!0,controlsList:"nodownload",poster:e&&"#"!==e.charAt(0)?e:null}),d=a.split(".").pop(),new Element("source",{src:a,type:"video/"+d}).inject(this.preload,"top"),this.layout_inject(h),this.preload.setStyle("position","absolute"),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload)),0<l&&(this.preload.muted=!0,this.preload.play()),this.load_Finish(e,t,h)}},load_Finish:function(e,t,i){e==this.currentSrc&&("image"==t&&this.layout_inject(i),this.layout_update(),this.loadNext())}});
var BertaGalleryColumn=new Class({container:null,imageContainer:null,navContainer:null,rowClearElement:null,newObjectInjectWhere:null,newObjectInjectPosition:null,currentSrc:null,preload:null,phase:null,loadTimer:null,imageFadeOutFx:null,imageResizeFx:null,imageShowFx:null,initialize:function(e){this.is_mobile_device=window.BertaHelpers.isMobile(),e.hasClass("xInitialized")||(e.addClass("xInitialized"),this.is_mobile_device&&e.addClass("bt-is-mobile-device"),this.attach(e),this.loadFirst(),window.addEvent("resize",window.BertaHelpers.debounce(this.layout_update.bindWithEvent(this),200)))},attach:function(e){this.container=e,this.fullscreen=null!==this.container.get("data-fullscreen"),this.imageContainer=this.container.getElement("div.xGallery"),this.navContainer=this.container.getElement("ul.xGalleryNav"),this.navContainer&&0<this.navContainer.getElements("a").length?(this.imageFadeOutFx=new Fx.Tween(this.imageContainer,{duration:"short",transition:Fx.Transitions.Sine.easeInOut}),this.imageShowFx=new Fx.Tween(this.imageContainer,{duration:"normal",transition:Fx.Transitions.Sine.easeInOut}),this.rowClearElement=new Element("br",{class:"clear"}).inject(this.imageContainer),this.newObjectInjectWhere="site"==bertaGlobalOptions.environment?this.rowClearElement:this.imageContainer.getElement(".xGalleryEditButton"),this.newObjectInjectPosition="before"):this.navContainer=null},detach:function(){this.navContainer&&(this.navContainer.getElements("a").each(function(e){e.removeEvents("click")}),this.imageFadeOutFx.cancel(),this.imageResizeFx&&this.imageResizeFx.cancel(),this.imageShowFx.cancel(),this.imageFadeOutFx=this.imageResizeFx=this.imageShowFx=null),this.container=this.imageContainer=this.navContainer=null,this.currentSrc=null},loadFirst:function(){var e,t;this.navContainer&&(e=this.navContainer.getElement("li"),this.nav_highlightItem(e),"image"!=(t=this.navContainer.getElement("li a")).getClassStoredValue("xType")?this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),!0,1,t.get("data-srcset")):(this.currentSrc=t.get("href"),this.preload=this.imageContainer.getElement("div.xGalleryItem"),this.layout_update(),this.loadNext()))},loadNext:function(e){var t;this.navContainer&&((e=this.getNext(e))?(this.nav_highlightItem(e),t=e.getElement("a"),this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),!1,t.getClassStoredValue("xImgIndex"),t.get("data-srcset"))):this.fullscreen&&this.attachFullscreen())},attachFullscreen:function(){this.container.getElements(".xGalleryItem").each(function(e,t){e.hasClass("xGalleryItemType-video")||(e.setStyle("cursor","pointer"),e.addEvent("click",function(){BertaGalleryFullscreen(this.container,t)}.bindWithEvent(this)))},this)},getNext:function(e){if(this.navContainer){var t=this.navContainer.getElement("li.selected");if(t)return!(t=t.getNext())&&e?this.navContainer.getElement("li"):t}return null},layout_update:function(){var t,i=0,n=0;this.imageContainer.getChildren(".xGalleryItem").each(function(e){t=e.getSize(),i+=t.y,n<t.x&&(n=t.x)}),this.imageContainer.setStyle("height",i+"px"),this.imageContainer.setStyle("width",n+"px"),this.imageContainer.getElements(".xGalleryItem").setStyle("position","relative")},layout_inject:function(e,t){e&&this.imageContainer.getChildren(".xGalleryItem").destroy(),this.preload.inject(this.newObjectInjectWhere,this.newObjectInjectPosition),picturefill(this.preload.getElement("img")),t?this.imageShowFx.set("opacity",1):new Fx.Tween(this.preload,{duration:"short",transition:Fx.Transitions.Sine.easeInOut}).set("opacity",0).start("opacity",1),this.layout_update()},nav_setEvents:function(){this.navContainer.getElements("a").addEvent("click",this.nav_onItemClick.bindWithEvent(this))},nav_onItemClick:function(e){e.event&&e.stop();e=$(e.target),e=(e="A"!=e.tagName?e.getParent("a"):e).getParent("li");this.nav_highlightItem(e)},nav_highlightItem:function(e){e.getParent().getChildren().removeClass("selected"),e.addClass("selected")},load:function(e,t,i,n,a,l,s,r,o,h){switch(this.phase){case"fadeout":this.imageFadeOutFx.cancel();break;case"fadein":this.imageResizeFx.cancel(),this.imageShowFx.cancel();break;default:this.imageShowFx.cancel()}this.currentSrc=null,this.load_Render(e,t,i,n,a,l,s,r,o,h)},load_Render:function(e,t,i,n,a,l,s,r,o,h){switch(this.currentSrc=e,this.currentVideoAutoPlay=l,this.currentCaption=s,this.xImgIndex=o,this.srcset=h||null,t){case"image":var c=this.imageContainer.getNext(".loader"),d=(c&&(this.loadTimer=setTimeout(function(){c.removeClass("xHidden")},500)),this.phase="preload",s.replace(/(<([^>]+)>)/gi," ").replace(/(\r\n|\n|\r)/gm," ").replace(/\s{2,}/g," ").trim());this.preload=new Asset.image(e,{width:i,height:n,srcset:this.srcset,alt:d}),this.preload=new Element("div",{class:"image"}).adopt(this.preload),i&&this.preload.setStyle("width",i+"px"),n&&this.preload.setStyle("height",n+"px"),this.preload=new Element("div",{class:"xGalleryItem xGalleryItemType-image xImgIndex-"+this.xImgIndex}).adopt(this.preload),i&&this.preload.setStyle("width",i+"px"),n&&this.preload.setStyle("height",n+"px"),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload),this.load_Finish(e,t,i,n,r);break;case"video":n=n&&parseInt(n),this.preload=new Element("video",{width:i,class:"xGalleryItem xGalleryItemType-video",controls:!0,controlsList:"nodownload",poster:e&&"#"!==e.charAt(0)?e:null});d=a.split(".").pop();new Element("source",{src:a,type:"video/"+d}).inject(this.preload,"top"),this.layout_inject(r,!0),this.preload.setStyle("position","absolute"),0<l&&(this.preload.muted=!0,this.preload.play()),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload),this.load_Finish(e,t,i,n,r)}},load_Finish:function(e,t,i,n,a){e==this.currentSrc&&(this.phase="done","image"==t&&this.layout_inject(a,!1),this.layout_update(),this.loadNext())}});
var BertaGalleryPile=new Class({container:null,imageContainer:null,navContainer:null,rowClearElement:null,newObjectInjectWhere:null,newObjectInjectPosition:null,currentSrc:null,preload:null,phase:null,loadTimer:null,imageFadeOutFx:null,imageResizeFx:null,imageShowFx:null,initialize:function(e){this.is_mobile_device=window.BertaHelpers.isMobile(),e.hasClass("xInitialized")||(e.addClass("xInitialized"),this.is_mobile_device&&e.addClass("bt-is-mobile-device"),this.attach(e),this.loadFirst(),window.addEvent("resize",window.BertaHelpers.debounce(this.layout_update.bindWithEvent(this),200)))},attach:function(e){this.container=e,this.fullscreen=null!==this.container.get("data-fullscreen"),this.imageContainer=this.container.getElement("div.xGallery"),this.navContainer=this.container.getElement("ul.xGalleryNav"),this.galleryEditButton=this.imageContainer.getElement(".xGalleryEditButton"),this.navContainer&&0<this.navContainer.getElements("a").length?(this.imageFadeOutFx=new Fx.Tween(this.imageContainer,{duration:"short",transition:Fx.Transitions.Sine.easeInOut}),this.imageShowFx=new Fx.Tween(this.imageContainer,{duration:"normal",transition:Fx.Transitions.Sine.easeInOut}),this.rowClearElement=new Element("br",{class:"clear"}).inject(this.imageContainer),this.newObjectInjectWhere="site"==bertaGlobalOptions.environment?this.rowClearElement:this.galleryEditButton,this.newObjectInjectPosition="before"):this.navContainer=null},detach:function(){this.navContainer&&(this.navContainer.getElements("a").each(function(e){e.removeEvents("click")}),this.imageFadeOutFx.cancel(),this.imageResizeFx&&this.imageResizeFx.cancel(),this.imageShowFx.cancel(),this.imageFadeOutFx=this.imageResizeFx=this.imageShowFx=null),this.container=this.imageContainer=this.navContainer=null,this.currentSrc=null},loadFirst:function(){var e,t;this.navContainer&&(e=this.navContainer.getElement("li"),this.nav_highlightItem(e),"image"!=(t=this.navContainer.getElement("li a")).getClassStoredValue("xType")?this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),!0,1,t.get("data-srcset")):(this.currentSrc=t.get("href"),this.preload=this.imageContainer.getElement("div.xGalleryItem"),this.layout_update(),this.loadNext()))},loadNext:function(e){var t;this.navContainer&&((e=this.getNext(e))?(this.nav_highlightItem(e),t=e.getElement("a"),this.load(t.get("href"),t.getClassStoredValue("xType"),t.getClassStoredValue("xW"),t.getClassStoredValue("xH"),t.getClassStoredValue("xVideoHref"),t.getClassStoredValue("xAutoPlay"),e.getElement(".xGalleryImageCaption").get("html"),!1,t.getClassStoredValue("xImgIndex"),t.get("data-srcset"))):(this.fullscreen&&this.attachFullscreen(),this.galleryEditButton&&this.galleryEditButton.setStyle("width",this.imageContainer.scrollWidth)))},attachFullscreen:function(){this.container.getElements(".xGalleryItem").each(function(e,t){e.hasClass("xGalleryItemType-video")||(e.setStyle("cursor","pointer"),e.addEvent("click",function(){BertaGalleryFullscreen(this.container,t)}.bindWithEvent(this)))},this)},getNext:function(e){if(this.navContainer){var t=this.navContainer.getElement("li.selected");if(t)return!(t=t.getNext())&&e?this.navContainer.getElement("li"):t}return null},layout_update:function(){var t=0,i=0,a=0;this.layout_pileOnHoverBinded||"site"!==bertaGlobalOptions.environment||(this.layout_pileOnHoverBinded=this.layout_pileOnHover.bindWithEvent(this)),this.imageContainer.getChildren(".xGalleryItem").each(function(e){i=Math.max(i,t+parseInt(e.getStyle("height"))),a=Math.max(a,t+parseInt(e.getStyle("width"))),e.setStyles({left:t+"px",top:t+"px"}),this.layout_pileOnHoverBinded&&e.addEvent("mouseover",this.layout_pileOnHoverBinded),t+=30},this),this.imageContainer.setStyle("height",i+"px"),this.imageContainer.setStyle("width",a+"px"),this.imageContainer.getElements(".xGalleryItem").setStyle("position","absolute"),this.layout_rowTotalHeight=i,this.layout_rowTotalWidth=a},layout_pileOnHover:function(e){e.stop();var t,i,a=$(e.target);(a=a.hasClass("xGalleryItem")?a:a.getParent(".xGalleryItem"))&&(t=1e3,i=200,this.imageContainer.getChildren(".xGalleryItem").each(function(e){e.setStyle("z-index",t),t+=i=e==a?-199:i},this))},layout_inject:function(e,t){e&&this.imageContainer.getChildren(".xGalleryItem").destroy(),this.preload.inject(this.newObjectInjectWhere,this.newObjectInjectPosition),picturefill(this.preload.getElement("img")),t?this.imageShowFx.set("opacity",1):new Fx.Tween(this.preload,{duration:"short",transition:Fx.Transitions.Sine.easeInOut}).set("opacity",0).start("opacity",1),this.layout_update()},nav_setEvents:function(){this.navContainer.getElements("a").addEvent("click",this.nav_onItemClick.bindWithEvent(this))},nav_onItemClick:function(e){e.event&&e.stop();e=$(e.target),e=(e="A"!=e.tagName?e.getParent("a"):e).getParent("li");this.nav_highlightItem(e)},nav_highlightItem:function(e){e.getParent().getChildren().removeClass("selected"),e.addClass("selected")},load:function(e,t,i,a,n,l,s,o,r,h){switch(this.phase){case"fadeout":this.imageFadeOutFx.cancel();break;case"fadein":this.imageResizeFx.cancel(),this.imageShowFx.cancel();break;default:this.imageShowFx.cancel()}this.currentSrc=null,this.load_Render(e,t,i,a,n,l,s,o,r,h)},load_Render:function(e,t,i,a,n,l,s,o,r,h){switch(this.currentSrc=e,this.currentVideoAutoPlay=l,this.currentCaption=s,this.xImgIndex=r,this.srcset=h||null,t){case"image":var d=this.imageContainer.getNext(".loader"),c=(d&&(this.loadTimer=setTimeout(function(){d.removeClass("xHidden")},500)),this.phase="preload",s.replace(/(<([^>]+)>)/gi," ").replace(/(\r\n|\n|\r)/gm," ").replace(/\s{2,}/g," ").trim());this.preload=new Asset.image(e,{width:i,height:a,srcset:this.srcset,alt:c}),this.preload=new Element("div",{class:"image"}).adopt(this.preload),i&&this.preload.setStyle("width",i+"px"),a&&this.preload.setStyle("height",a+"px"),this.preload=new Element("div",{class:"xGalleryItem xGalleryItemType-image xImgIndex-"+this.xImgIndex}).adopt(this.preload),i&&this.preload.setStyle("width",i+"px"),a&&this.preload.setStyle("height",a+"px"),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload),this.load_Finish(e,t,i,a,o);break;case"video":a=a&&parseInt(a),this.preload=new Element("video",{width:i,class:"xGalleryItem xGalleryItemType-video",controls:!0,controlsList:"nodownload",poster:e&&"#"!==e.charAt(0)?e:null});c=n.split(".").pop();new Element("source",{src:n,type:"video/"+c}).inject(this.preload,"top"),this.layout_inject(o,!0),this.preload.setStyle("position","absolute"),0<l&&(this.preload.muted=!0,this.preload.play()),new Element("div",{class:"xGalleryImageCaption"}).set("html",s).inject(this.preload),this.load_Finish(e,t,i,a,o)}},load_Finish:function(e,t,i,a,n){e==this.currentSrc&&(this.phase="done","image"==t&&this.layout_inject(n,!1),this.layout_update(),this.loadNext())}});
var BertaGalleryLink=new Class({container:null,initialize:function(n){this.attach(n)},attach:function(n){this.container=n},detach:function(){this.container=null}});
var BertaPortfolio=new Class({Implements:Options,initialize:function(t){this.setOptions(t),window.addEvent("domready",this.onDOMReady.bindWithEvent(this)),window.addEventListener("addEntry",this.onAddPortfolio.bindWithEvent(this))},onAddPortfolio:function(){this.portfolioThumbnails()},onDOMReady:function(){this.portfolioThumbnails()},showEntry:function(t){t.removeClass("xHidden");var n=t.getElements(".xGalleryContainer");setTimeout(function(){n[0].each(function(t){("site"==bertaGlobalOptions.environment?berta:bertaEditor).initGallery(t)})},500)},portfolioThumbnails:function(){var t=$$(".portfolioThumbnails"),i=$$(".xEntry"),t=(that=this,t.length&&(t=t.getElements("a"),$$(t).addEvent("click",function(t){var n=$$(this.get("href"));i.addClass("xHidden"),that.showEntry(n)})),window.location.hash);t.length&&(t=$$(t)).length&&this.showEntry(t)}});new BertaPortfolio;
Class.Mutators.Singleton=function(t,n){var e;n&&(t.constructor.__instance=void 0,$defined(t.initialize)&&"function"==$type(t.initialize)&&(e=t.initialize),t.initialize=function(){return $defined(this.constructor.__instance)||($defined(e)&&"function"==$type(e)&&e.apply(this,arguments),this.constructor.__instance=this),this.constructor.__instance})};var UnlinearProcessHandler=new Class({Implements:Options,Singleton:!0,_processes:null,_observables:null,options:{debug:!1},initialize:function(t){this._processes=new Hash,this._observables=new Array},addObservable:function(t){return!!t.hasUnlinearProcessDispatcher&&(t.addEvent("onUnlinearProcessStart",this._onStart.bind(this)),t.addEvent("onUnlinearProcessStop",this._onEnd.bind(this)),this._observables.push(t),!0)},removeObservable:function(t){return 0<=this._observables.indexOf(t)&&(this._observables.erase(t),!0)},getRunningTitles:function(){var e=new Array;return this._processes.each(function(t,n){e.push(t.title||n)}),e},hasRunning:function(n){return n?this._processes.some(function(t){return t.initiator==n}):0<this._processes.getLength()},isIdleOrWarnIfBusy:function(t){return!this.hasRunning(t)||(t=this.getRunningTitles(),alert("This can't be done! Berta is too busy now with:\n\n"+t.join("\n")+"\n\nPlease wait a couple of moments and try again!"),!1)},_onStart:function(t,n,e){this.options.debug&&console.log('*** process "'+n+'" started, initiator: ',t),this._processes.set(n,{initiator:t,title:e,started:(new Date).getTime()})},_onEnd:function(t,n,e){this.options.debug&&console.log('*** process "'+n+'" finito, initiator: ',t),this._processes.has(n)&&this._processes.erase(n)}}),UnlinearProcessDispatcher=new Class({Implements:Events,hasUnlinearProcessDispatcher:!0,unlinearProcess_getId:function(t){return(t?t+"-":"")+(new Date).getTime()},unlinearProcess_start:function(t,n){this.fireEvent("onUnlinearProcessStart",[this,t,n],10)},unlinearProcess_stop:function(t){this.fireEvent("onUnlinearProcessStop",[this,t],10)}});Fx.ProgressBar=new Class({Extends:Fx,options:{text:null,transition:Fx.Transitions.Circ.easeOut,link:"cancel"},initialize:function(t,n){this.element=$(t),this.parent(n),this.text=$(this.options.text),this.set(0)},start:function(t,n){return this.parent(this.now,1==arguments.length?t.limit(0,100):t/n*100)},set:function(t){return this.now=t,this.element.setStyle("backgroundPosition",100-t+"% 0px"),this.text&&this.text.set("text",Math.round(t)+"%"),this}});
Element.implement({getIndex:function(e){return e=e||"",$$(e).indexOf(this)},exists:function(){return this},getClassStoredValue:function(e){for(var t=this.get("class").split(" "),s=0;s<t.length;s++)if(t[s].substr(0,t[s].indexOf("-"))==e)return t[s].substr(t[s].indexOf("-")+1);return null},setClassStoredValue:function(e,t){var s=this.getClassStoredValue(e);s&&this.removeClass(e+"-"+s),this.addClass(e+"-"+t)}});var BertaEditorBase=new Class({Implements:[Options,Events],options:{xBertaEditorClassSimple:".xEditable",xBertaEditorClassSelect:".xEditableSelect",xBertaEditorClassSelectRC:".xEditableSelectRC",xBertaEditorClassFontSelect:".xEditableFontSelect",xBertaEditorClassTA:".xEditableTA",xBertaEditorClassMCE:".xEditableMCE",xBertaEditorClassMCESimple:".xEditableMCESimple",xBertaEditorClassRC:".xEditableRC",xBertaEditorClassImage:".xEditableImage",xBertaEditorClassICO:".xEditableICO",xBertaEditorClassYesNo:".xEditableYesNo",xEditableRealCheck:".xEditableRealCheck",xBertaEditorClassDragXY:".xEditableDragXY",xBertaEditorClassAction:".xAction",xBertaEditorClassReset:".xReset",xEmptyClass:".xEmpty",updateUrl:"/engine/update.php"},tinyMCESettings:{Base:null,simple:null,full:null},elementEdit_instances:new Array,shiftPressed:!1,xGuideLineX:null,xGuideLineY:null,query:null,intialize:function(){this.initConsoleReplacement()},initConsoleReplacement:function(){this.query=window.location.search.replace("?","").parseQueryString(),this.query.site&&(this.options.updateUrl=this.options.updateUrl+"?site="+this.query.site),window.console||(window.console={}),window.console.debug||(window.console.debug=function(){}),window.console.error||(window.console.error=function(){}),window.console.log||(window.console.log=function(){}),window.console.info||(window.console.info=function(){});var t=this;$(document).addEvent("keydown",function(e){16==e.code&&(t.shiftPressed=!0)}).addEvent("keyup",function(){t.shiftPressed=!1})},fixDragHandlePos:function(){$$(this.options.xBertaEditorClassDragXY).each(function(e){var t,s;e.hasClass("xEntry")||(t=e.getElement(".xHandle"),s=Math.abs(parseInt(t.getStyle("margin-left"))),(e=parseInt(e.getStyle("left")))<s?t.setStyle("left",s-e+"px"):t.setStyle("left",0))})},initGuideLines:function(){$("xGuideLineX")||(this.xGuideLineX=new Element("div",{id:"xGuideLineX",class:"xGuideLine"}),this.xGuideLineY=new Element("div",{id:"xGuideLineY",class:"xGuideLine"}))},elementEdit_init:function(n,e,t){if(n.retrieve("elementEdit_init"))return!1;n.store("elementEdit_init",!0);var s=this.makePlaceholderIfEmpty(n),a=this;switch(e){case this.options.xBertaEditorClassSimple:n.store("onElementSave",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){this.hasClass("xSaving")||this.hasClass("xEditing")||(this.addClass("xEditing"),t.makeEmptyIfEmpty(this),t.elementEdit_instances.push(this.inlineEdit({onComplete:t.elementEdit_save.bind(t)})),t.fireEvent(BertaEditorBase.EDITABLE_START,[n,t.elementEdit_instances[t.elementEdit_instances.length-1]]))}.bindWithEvent(n,this));break;case this.options.xBertaEditorClassTA:n.store("onElementSave",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){this.hasClass("xSaving")||this.hasClass("xEditing")||(this.addClass("xEditing"),this.inlineIsEmpty()&&(this.innerHTML="&nbsp;"),t.elementEdit_instances.push(this.inlineEdit({type:"textarea",onComplete:t.elementEdit_save.bind(t)})),t.fireEvent(BertaEditorBase.EDITABLE_START,[n,t.elementEdit_instances[t.elementEdit_instances.length-1]]))}.bindWithEvent(n,this));break;case this.options.xBertaEditorClassMCE:case this.options.xBertaEditorClassMCESimple:n.store("onElementSave",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){$$(".xEditOwerlay").destroy(),this.hasClass("xSaving")||this.hasClass("xEditing")||(n.addClass("xEditing"),this.inlineIsEmpty()&&(this.innerHTML=""),t.elementEdit_instances.push(this.inlineEdit({type:"textarea",WYSIWYGSettings:(n.hasClass(t.options.xBertaEditorClassMCESimple.substr(1))?t.tinyMCESettings.simple:t.tinyMCESettings.full).options,onComplete:t.elementEdit_save.bind(t)})),t.fireEvent(BertaEditorBase.EDITABLE_START,[n,t.elementEdit_instances[t.elementEdit_instances.length-1]]))}.bindWithEvent(n,this)),a.initEditOwerlay(n);break;case this.options.xBertaEditorClassRC:n.store("onElementSave",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){this.hasClass("xSaving")||this.hasClass("xEditing")||(n.addClass("xEditing"),this.inlineIsEmpty()&&(this.innerHTML=""),this.set("old_content",this.innerHTML),this.set("text",this.get("title")),t.elementEdit_instances.push(this.inlineEdit({onComplete:t.elementEdit_save.bind(t)})),t.fireEvent(BertaEditorBase.EDITABLE_START,[n,t.elementEdit_instances[t.elementEdit_instances.length-1]]))}.bindWithEvent(n,this));break;case this.options.xBertaEditorClassSelect:case this.options.xBertaEditorClassSelectRC:case this.options.xBertaEditorClassFontSelect:n.store("onElementSave",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){this.hasClass("xSaving")||this.hasClass("xEditing")||(this.addClass("xEditing"),this.inlineIsEmpty()&&(this.innerHTML=""),t.elementEdit_instances.push(this.inlineEdit({type:"select",subtype:this.hasClass(t.options.xBertaEditorClassFontSelect.substr(1))?"font":this.hasClass(t.options.xBertaEditorClassSelectRC.substr(1))?"rc":"",selectOptions:this.getProperty("x_options").split("||"),onComplete:t.elementEdit_save.bind(t)})),t.fireEvent(BertaEditorBase.EDITABLE_START,[n,t.elementEdit_instances[t.elementEdit_instances.length-1]]))}.bindWithEvent(n,this));break;case this.options.xBertaEditorClassYesNo:n.store("onElementSave",t),n.addClass(e.substr(1));var i=!s&&"1"==n.get("html"),l=(n.empty(),n.getClassStoredValue("xProperty")),o=new Element("a",{href:"#",class:(i?"active":"")+" xValue-1"}).set("html","yes"),i=new Element("a",{href:"#",class:(i?"":"active")+" xValue-0"}).set("html","no");n.grab(o).appendText(" / ").grab(i),i.addEvent("click",this.eSup_onYesNoClick.bindWithEvent(this)),o.addEvent("click",this.eSup_onYesNoClick.bindWithEvent(this));break;case this.options.xBertaEditorClassImage:case this.options.xBertaEditorClassICO:n.store("onElementSave",t),n.addClass(e.substr(1));for(var r,i=s?"":n.get("html"),l=(n.empty(),n.getClassStoredValue("xProperty")),d=new Element("span",{class:"name"}).set("html",i).inject(n),o=new Element("a",{href:"#"}).set("html","choose file").inject(n),c=new Element("a",{href:"#"}).set("html","delete").inject(n),h=new Element("input",{type:"file"}).inject(n),p=(o.addEvent("click",function(e){e.preventDefault(),h.click()}),i||c.setStyle("display","none"),c.addEvent("click",this.eSup_onImageDeleteClick.bindWithEvent(this)),[]),u=["xMinWidth","xMinHeight","xMaxWidth","xMaxHeight"],m=["min_width","min_height","max_width","max_height"],E=0;E<u.length;E++)(r=n.getClassStoredValue(u[E]))&&p.push(m[E]+"="+r);this.query.site&&p.push("site="+this.query.site),p.push("session_id="+this.options.session_id);var g=["jpg","jpeg","gif","png"],x=(e==this.options.xBertaEditorClassICO&&(g=["ico"]),new XMLHttpRequest),C=function(e){d.empty(),d.set("html",e.value),c.setStyle("display","block"),n.removeClass("xSaving").addClass("xEditing")};x.addEventListener("load",function(){var e,t,s,i=JSON.decode(x.responseText);401==x.status?window.location.href=this.options.paths.engineRoot:0<i.status?(s=[],(t=n.dataset.path)?("settings"===(s=t.split("/"))[1]&&(e=Actions.initUpdateSiteSettings),"function"==typeof(e="site_template_settings"===s[1]?Actions.initUpdateSiteTemplateSettings:e)?redux_store.dispatch(e(t,i.filename,C)):console.error("BertaEditorBase.elementEdit_init xBertaEditorClassImage/xBertaEditorClassICO: Undefined updateAction!")):C({value:i.filename})):alert(i.error)}.bindWithEvent(this),!1),x.addEventListener("error",function(){n.removeClass("xSaving").addClass("xEditing")},!1),h.addEvent("change",function(){var e=$$(h);if(e.length){var t=new FormData,s=e[0].files[0].name,i=s.split(".").pop();if(-1===g.indexOf(i))return alert("Allowed file extensions: "+g.join(", ")),!1;t.append("Filedata",e[0].files[0],s);i=this.options.paths.engineRoot+"upload.php?property="+l+"&"+p.join("&");n.removeClass("xEditing").addClass("xSaving"),x.open("POST",i,!0),x.send(t)}}.bindWithEvent(this));break;case this.options.xEditableRealCheck:n.store("onElementSave",t),n.addClass(e.substr(1));o=String(n.get("html")),i=(n.empty(),new Element("input",{type:"button",class:1==o?"checked":"",value:""}).inject(n));n.addEvent("click",this.eSup_onRealCheckClick.bindWithEvent(this,[n,i]));break;case this.options.xBertaEditorClassDragXY:n.store("onElementSave",t),n.addClass(e.substr(1));var S,o=n.getElement(".xHandle"),i=(o||(o=new Element("div",{class:"xHandle",styles:{left:"0px"}})).inject(n),n.getElement(".xHandle").addEvents({click:function(e){e.preventDefault()},mouseenter:function(e){var t=document.getScrollSize();a.xGuideLineX.setStyle("width",t.x+"px"),a.xGuideLineY.setStyle("height",t.y+"px"),a.xGuideLineX.inject(document.body),document.body.getElement("#contentContainer.xCentered")&&0==n.hasClass("xFixed")?a.xGuideLineY.inject(document.body.getElement("#contentContainer")):document.body.getElement("#allContainer.xCentered")&&0==n.hasClass("xFixed")?a.xGuideLineY.inject(document.body.getElement("#allContainer")):a.xGuideLineY.inject(document.body),a.drawGuideLines(n)},mouseleave:function(e){a.xGuideLineX.setStyle("width","0px"),a.xGuideLineY.setStyle("height","0px")}}),parseInt(bertaGlobalOptions.gridStep)),i=isNaN(i)||i<1?1:i,y=($("pageEntries")&&(S=$("pageEntries").getElements(".xEntry.mess")),!1);n.makeDraggable({snap:0,grid:i,handle:n.getElement(".xHandle"),onSnap:function(t){t.addClass("xEditing");var s,i,e=new Element("div",{id:"xCoords"});t.grab(e,"top"),(y=a.shiftPressed&&t.hasClass("xEntry"))&&(t.startTop=parseInt(t.getStyle("top")),t.startLeft=parseInt(t.getStyle("left")),E=0,s=new Array,i=new Array,S.each(function(e){t!=e&&(s[E]=parseInt(e.getStyle("top")),i[E]=parseInt(e.getStyle("left")),E++)}),t.entriesStartTop=s,t.entriesStartLeft=i)},onDrag:function(){parseInt(n.getStyle("left"))<0&&n.setStyle("left","0"),n.hasClass("xEntry")&&parseInt(n.getStyle("top"))<20?n.setStyle("top","20px"):parseInt(n.getStyle("top"))<0&&n.setStyle("top","0"),$("xCoords").set("html","X:"+parseInt(n.getStyle("left"))+" Y:"+parseInt(n.getStyle("top"))),a.drawGuideLines(n),y&&(n.movedTop=parseInt(n.getStyle("top"))-n.startTop,n.movedLeft=parseInt(n.getStyle("left"))-n.startLeft,E=0,S.each(function(e){n!=e&&(e.setStyles({top:n.movedTop+n.entriesStartTop[E]+"px",left:n.movedLeft+n.entriesStartLeft[E]+"px"}),E++)}))},onComplete:function(e){$("xCoords").destroy(),e.removeClass("xEditing");var t,s=this;"object"==typeof messyMess&&messyMess.copyrightStickToBottom(),y?S.each(function(e){var t=(this.container.hasClass("xCentered")&&e.hasClass("xFixed")?parseInt(e.getStyle("left"))-(window.getSize().x-this.container.getSize().x)/2:parseInt(e.getStyle("left")))+","+parseInt(e.getStyle("top"));s.elementEdit_save(null,e,null,null,t,t)}.bind(this)):(t=(this.container.hasClass("xCentered")&&e.hasClass("xFixed")?parseInt(e.getStyle("left"))-(window.getSize().x-this.container.getSize().x)/2:parseInt(e.getStyle("left")))+","+parseInt(e.getStyle("top")),this.elementEdit_save(null,e,null,null,t,t),s.fixDragHandlePos()),y=!1}.bind(this)});break;case this.options.xBertaEditorClassAction:n.store("onActionComplete",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){var s,i;this.hasClass("xSaving")||this.hasClass("xEditing")||(s=this.getClassStoredValue("xCommand"),i=this.getClassStoredValue("xParams"),s&&t.elementEdit_action(n,s,i))}.bindWithEvent(n,this));break;case this.options.xBertaEditorClassReset:n.store("onActionComplete",t),n.addClass(e.substr(1)),n.addEvent("click",function(e,t){var s;e.stop(),this.hasClass("xSaving")||this.hasClass("xEditing")||(e=this.getClassStoredValue("xCommand"),s=this.getClassStoredValue("xParams"),e&&t.elementEdit_reset(n,e,s))}.bindWithEvent(n,this))}},initEditOwerlay:function(e){var t=new Element("a",{class:"xEditOwerlay"});e.addEvents({mouseenter:function(){e.hasClass("xEditing")||(t.style.width=e.getSize().x+"px",t.style.height=e.getSize().y+"px",t.inject(e))},mouseleave:function(){t.destroy()}})},drawGuideLines:function(e){var t=e.getStyle("top"),e=e.getStyle("left");this.xGuideLineX.setStyle("top",t),this.xGuideLineY.setStyle("left",e)},eSup_onYesNoClick:function(e){e.stop();var e=$(e.target),t=e.getParent(),e=e.getClassStoredValue("xValue");this.elementEdit_save(null,t,null,null,e,e)},eSup_onRealCheckClick:function(e,t,s){var i,n;t.hasClass("xSaving")||(s.toggleClass("checked"),s=s.hasClass("checked")?"1":"0",t.hasClass("xProperty-fixed")&&(i=t.getParent(".xEntry"),"1"==s?(i.addClass("xFixed"),this.container.hasClass("xCentered")&&(n=parseInt(i.getStyle("left"))+(window.getSize().x-this.container.getSize().x)/2,i.setStyle("left",n+"px"))):(i.removeClass("xFixed"),this.container.hasClass("xCentered")&&(n=parseInt(i.getStyle("left"))-(window.getSize().x-this.container.getSize().x)/2,i.setStyle("left",n+"px")))),this.elementEdit_save(null,t,null,null,s,s))},eSup_onImageDeleteClick:function(e){e.stop();var t,s,i=$(e.target),n=i.getParent(),e={property:n.getClassStoredValue("xProperty"),params:"delete",value:""},a=n.dataset.path;n.removeClass("xEditing"),n.addClass("xSaving"),a?("settings"===(t=a.split("/"))[1]&&(s=Actions.initUpdateSiteSettings),"function"==typeof(s="site_template_settings"===t[1]?Actions.initUpdateSiteTemplateSettings:s)?redux_store.dispatch(s(a,"",function(){n.getElement("span.name").set("html",""),i.setStyle("display","none"),n.removeClass("xSaving"),n.addClass("xEditing")})):console.error("BertaEditorBase.eSup_onImageDeleteClick: Undefined updateAction!")):new Request.JSON({url:this.options.updateUrl,data:JSON.stringify(e),urlEncoded:!1,onComplete:function(e,t){e.error_message?alert(e.error_message):(n.getElement("span.name").set("html",""),i.setStyle("display","none")),n.removeClass("xSaving"),n.addClass("xEditing")},onError:function(e){console.error(e)}}).post()},findEditByReplacement:function(t){var s;return t=$(t),this.elementEdit_instances.each(function(e){e.inputBox==t&&(s=e)}),s},elementEdit_save:function(e,o,t,s,i,n){if(t!=i||o.hasClass("xBgColor")){if(t!=i||o.hasClass("xBgColor")){var a=o.getClassStoredValue("xProperty"),l=0<o.getClassStoredValue("xCSSUnits"),r=o.getClassStoredValue("xUnits"),d="toPrice"==o.getClassStoredValue("xFormatModifier"),c="cartAttributes"==a,h=o.hasClass("xNoHTMLEntities"),p=o.hasClass("xLink"),u=o.getClassStoredValue("xParam"),m=this.getEntryInfoForElement(o);if(""==m.section&&(m.section=this.sectionName),(o.hasClass(this.options.xBertaEditorClassSimple.substr(1))||o.hasClass(this.options.xBertaEditorClassRC.substr(1)))&&/(\spx|\spt|\sem)$/i.test(i)&&(n=i=i.replace(/(\spx|\spt|\sem)$/i,i.substr(-2))),o.hasClass(this.options.xBertaEditorClassYesNo.substr(1))||i&&!i.test("^([s]|&nbsp;)+$")||(i=n=o.getClassStoredValue("xRequired")?o.get("title"):"",o.set("html",n)),i=i?i.trim():"",(i=h&&e&&e.removeHTMLEntities?e.removeHTMLEntities(i):i)==parseInt(i)&&l&&(i=i&&"0"!=i?String(i)+"px":"0"),r&&r.length&&(i=(i=parseInt(i))||0,i=String(i)+r),p&&i.length&&i.search(":")<0&&(i="http://"+i),d&&(h=o.getNext(".aele"),E=o.getNext(".cartAttributes"),h)&&((i=parseFloat(i))?(h.removeClass("hidden"),E.removeClass("hidden")):(h.addClass("hidden"),E.addClass("hidden"))),c){var E=o.getParent(".xEntry").getElement(".cartAttributes"),l=o.getParent(".xEntry").getElement(".cartPrice").get("text"),g=i.split(","),r=!(1==g.length&&""==g[0]);if(E.set("text","").addClass("hidden"),r){for(var x=new Element("select",{class:"cart_attributes"}),C=0;C<g.length;C++){var S=g[C].trim(),S=this.unescapeHtml(S),y=new Element("option",{value:S});y.set("text",S),y.inject(x)}x.inject(E),0<parseInt(l)&&E.removeClass("hidden")}}o.hasClass("xProperty-width")&&(p=o.getParent(".xEntry"),i.length?p.setStyle("width",i):p.setStyle("width",null)),o.removeClass("xEditing"),o.addClass("xSaving");var f,v,d=o.getClassStoredValue("xCommand"),h=(d&&(u="SET_BG_CAPTION_BACK_COLOR"==d?n.hexToRgb(!0).join(","):this.escapeForJSON(n)),o.dataset.path),c=[],r=i?this.escapeForJSON(i):null,b=this.onElementEditComplete(e,o,i,n);h?(l=b,"site"===(c=h.split("/"))[0]&&(v="name"===(f=c[2])?Actions.renameSite:Actions.initUpdateSite),"settings"===c[1]&&(v=Actions.initUpdateSiteSettings),"site_template_settings"===c[1]&&(v=Actions.initUpdateSiteTemplateSettings),"section"===c[1]&&(v="title"===(f=c.pop())?Actions.initRenameSiteSection:Actions.initUpdateSiteSection,"type"===f)&&(l=function(e,t){var s=getCurrentSite(),i=redux_store.getState(),n=i.siteSettings.toJSON()[s].template.template,a=i.siteTemplates.toJSON()[n].sectionTypes,l=e.section["@attributes"].type||"default",l=(a[l]||a.default).params,a=(e.params=this.getTypeHTML(s,e.order,e.section,i.siteTemplateSettings.toJSON()[s][n],l,"xSection-"+e.section.name+" xSectionField"),b(e,t),o.getParent("li").getElement(".csDetails"));a.empty(),a.set("html",e.params),this.editablesInit(a)}.bind(this)),"function"==typeof(v="entry"===c[1]?Actions.initUpdateSectionEntry:v)?redux_store.dispatch(v(h,r,l)):console.error("BertaEditorBase.elementEdit_save: Undefined updateAction!")):(E={site:m.site,section:m.section,entry:m.entryId,property:a,params:u,value:r,action:d,before:this.escapeForJSON(o.get("old_content")?o.get("old_content"):t),before_real:this.escapeForJSON(o.get("title")?o.get("title"):t),format_modifier:o.getClassStoredValue("xFormatModifier")},new Request.JSON({url:this.options.updateUrl,data:JSON.stringify(E),urlEncoded:!1,onError:function(e){console.error(e)},onComplete:b}).post())}}else{p=t;(p=t.test("^([s]|&nbsp;)+$")?"":p)?o.set("html",o.get("old_content")?o.get("old_content"):s):this.makePlaceholder(o),o.removeClass("xEditing")}},onElementEditComplete:function(o,r,d,c){return function(e,t){if(!!r&&r.exists()){switch(!0){case!e.update:this.makePlaceholder(r);break;case r.hasClass(this.options.xBertaEditorClassYesNo.substr(1)):r.getElements("a").removeClass("active"),r.getElement("a.xValue-"+e.update).addClass("active");break;case r.hasClass(this.options.xBertaEditorClassSelectRC.substr(1)):case r.hasClass(this.options.xBertaEditorClassFontSelect.substr(1)):var s,i,n=this.elementEdit_instances[this.elementEdit_instances.length-1].editting;if(n.hasClass("xEntrySlideNumberVisibility")&&(s="no"==e.update?"yes":"no",n.getParent(".xGalleryContainer").removeClass("xSlideNumbersVisible-"+s).addClass("xSlideNumbersVisible-"+e.update)),e.update==d)r.set("html",c);else{c=!1;for(var a=0;a<this.options.selectOptions.length;a++)if((i=this.options.selectOptions[a].split("|"))[0]==e.real){e.update=i[1];break}r.set("html",e.update)}r.hasClass("xEntrySetGalType")&&$$(".galleryTypeSettings").addClass("xHidden"),"slideshow"==c&&r.getSiblings(".xEntrySlideshowSettings").removeClass("xHidden"),"row"==c&&r.getSiblings(".xEntryRowSettings").removeClass("xHidden"),"link"==c&&r.getSiblings(".xEntryLinkSettings").removeClass("xHidden");break;case r.hasClass(this.options.xBertaEditorClassRC.substr(1)):!r.hasClass("xEntryAutoPlay")&&!r.hasClass("xBgAutoPlay")||/^\d+$/.test(c)?r.hasClass("xEntryLinkAddress")&&!c?(r.set("title","http://"),r.set("html","http://")):(r.set("title",o.removeHTMLEntities(e.real)),r.set("html",e.update)):(r.set("title",0),r.set("text",0));break;default:o&&(r.empty(),r.set("html",e.update))}e.error_message&&alert(e.error_message),r.removeClass("xSaving"),r.removeClass("xEditing"),r.removeProperty("old_content");try{this.setWmodeTransparent()}catch(e){}}var l=r.retrieve("onElementSave");l&&l(r,e.update,e.real,e.error_message,e.params),this.fireEvent(BertaEditorBase.EDITABLE_FINISH,[r]),"object"==typeof messyMess&&messyMess.copyrightStickToBottom()}.bind(this)},elementEdit_action:function(s,i,n){s.addClass("xSaving");var e=this.getEntryInfoForElement(s);""==e.section&&(e.section=this.sectionName),new Request.JSON({url:this.options.updateUrl,data:JSON.stringify({section:e.section,entry:e.entryId,action:i,property:null,value:null,params:n}),urlEncoded:!1,onComplete:function(e){var t;e?e.error_message&&alert(e.error_message):alert("server produced an error while performing the requested action! something went sooooo wrong..."),s&&(s.removeClass.delay(500,s,"xSaving"),t=s.retrieve("onActionComplete"))&&t(s,i,n,e)}.bind(this),onError:function(e){console.error(e)}}).post()},elementEdit_reset:function(t,e,s){var i;t.hasClass("xBgColorReset")&&confirm("Berta asks:\n\nAre you sure you want to remove this color?")&&(t.addClass("xSaving"),""==(i=this.getEntryInfoForElement(t)).section&&(i.section=this.sectionName),i=t.dataset.path,redux_store.dispatch(Actions.resetSiteSection(i,function(e){e?e.error_message&&alert(e.error_message):alert("server produced an error while performing the requested action! something went sooooo wrong..."),t&&(t.removeClass.delay(500,t,"xSaving"),(elem=0==(elem=t.getSiblings(".xCommand-"+s)).length?t.getSiblings(".xProperty-"+s):elem).each(function(e){e.set("title","#ffffff").set("text","none")}))}.bind(this))))},tinyMCE_onSave:function(e){var t;e&&(t=e.getElement(),e.remove(),t.setStyle("visibility","hidden"),(e=this.findEditByReplacement(t)).onSave.delay(100,e))},tinyMCE_ConfigurationsInit:function(){this.tinyMCESettings.Base=new Class({Implements:Options,options:{icons_url:"../_lib/tinymce/icons.js",icons:"berta",license_key:"gpl",promotion:!1,branding:!1,menubar:!1,plugins:"save code table lists link",toolbar:"save undo redo bold italic forecolor backcolor bullist numlist link unlink code | fontsize blocks alignleft aligncenter alignright alignjustify outdent indent table removeformat",width:"563px",height:"300",save_enablewhendirty:!1,save_onsavecallback:this.tinyMCE_onSave.bind(this),invalid_elements:"script",block_formats:"Paragraph=p;  Heading 2=h2; Heading 3=h3",convert_urls:!1,relative_urls:!1,sandbox_iframes:!1},initialize:function(e){this.setOptions(e)}}),this.tinyMCESettings.full=new this.tinyMCESettings.Base,this.tinyMCESettings.simple=new this.tinyMCESettings.Base({width:"100%",plugins:"save link code",toolbar:"save bold italic link unlink removeformat code"})},unescapeHtml:function(e){var t=document.createElement("div"),e=(t.innerHTML=e,t.childNodes[0].nodeValue);return t.removeChild(t.firstChild),e},getEmptyPlaceholder:function(e,t){return e=t?t.replace(/\+/g," "):(e=e.split("/"))[e.length-1],new Element("span",{class:this.options.xEmptyClass.substr(1),html:"&nbsp;"+e+"&nbsp;"})},makePlaceholder:function(e){var t=e.getClassStoredValue("xProperty"),s=e.getClassStoredValue("xCaption");return e.empty(),this.getEmptyPlaceholder(t,s).inject(e),!0},makePlaceholderIfEmpty:function(e){return""==e.get("html").trim()&&this.makePlaceholder(e)},makeEmptyIfEmpty:function(e){e.inlineIsEmpty()&&(e.innerHTML="")},escapeForJSON:function(e){return String(e).replace(/\&quot;/g,'"')},getEntryInfoForElement:function(e){var t={};return t.site=e.getClassStoredValue("xSite"),t.entryObj=e.getClassStoredValue("xEntryId")?e:e.getParent(".xEntry"),t.listObj=e.getClassStoredValue("xSection")?e:e.getParent(".xEntriesList"),t.entryId=t.entryObj?t.entryObj.getClassStoredValue("xEntryId"):"",t.entryNum=t.entryObj?t.entryObj.getClassStoredValue("xEntryNum"):"",t.section=t.entryObj?t.entryObj.getClassStoredValue("xSection"):"",t.section||(t.section=t.listObj?t.listObj.getClassStoredValue("xSection"):""),t},getSectionNameForElement:function(e){return e.getClassStoredValue("xSection")?e.getClassStoredValue("xSection"):null},getTypeHTML:function(e,t,n,s,a,l){var o=e+"/section/"+t+"/",r="";return a&&(s.pageLayout&&s.pageLayout.responsive&&"yes"===s.pageLayout.responsive||(a.columns&&delete a.columns,a.entryMaxWidth&&delete a.entryMaxWidth,a.entryPadding&&delete a.entryPadding),(l=Object.getOwnPropertyNames(a)).forEach(function(e){var t=a[e],s=[],i={html_before:t.html_before||"",format:formats[t.format]||"",property:e,html_entities:t.html_entities?"":"xNoHTMLEntities",css_units:t.css_units?"1":"0",link:t.link?"xLink":"",allow_blank:"xRequired-"+(t.allow_blank?"0":"1"),validation:t.validator?"xValidator-"+t.validator:"",additional_params:l||"",title:escapeHTML(t.default),path:o+e,x_options:"",value:n[e]||"",html_after:t.html_after||""};i.value=!i.value&&t&&t.default?t.default:i.value,"select"!==t.format&&"fontselect"!==t.format||("templates"===t.values?s=getAllTemplates():Array.isArray(t.values)?!(s=t.values)[i.value]||0<parseInt(i.value,10)||(i.value=s[i.value]):Object.getOwnPropertyNames(t.values).forEach(function(e){s.push(e+"|"+t.values[e]),i.value===e&&(i.value=t.values[e])}),i.x_options=escapeHTML(s.join("||"))),r+=Templates.get("type_params",Object.assign({},editables,i))})),r}});BertaEditorBase.EDITABLE_START="editable_start",BertaEditorBase.EDITABLE_FINISH="editable_finish";
var inlineEdit=new Class({getOptions:function(){return{onComplete:function(t,e,n){},type:"input",subtype:"",WYSIWYGSettings:0,selectOptions:new Array,dontHideOnBlur:!1}},addHTMLEntities:function(t){for(var e=[new RegExp("&","g"),new RegExp('"',"g"),new RegExp("<","g"),new RegExp(">","g")],n=["&amp;","&quot;","&lt;","&gt;"],i=0;i<e.length;i++)t=t.replace(e[i],n[i]);return t},removeHTMLEntities:function(t){var e=new Element("textarea"),t=(e.set("html",t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e.value);return e.destroy(),t},initialize:function(n,t){if(t.skipSetStyles=n.getClassStoredValue("xSkipSetStyles"),this.setOptions(this.getOptions(),t),!n.innerHTML.toLowerCase().match("<"+this.options.type)){this.editting=n,this.oldContent=this.oldContentText=n.innerHTML;var e,i,s,o,t=this.oldContent.trim(),l=(this.options.WYSIWYGSettings||(t=t.replace(new RegExp("<br.*?/?>","gi"),"\n"),t=this.removeHTMLEntities(t)),"_replacement"+$random(0,9999)+$random(0,9999)+$random(0,9999));if(this.inputBox=new Element(this.options.type,{id:l,value:t}).setStyles({margin:"-3px -4px -3px -4px","border-width":"1px",padding:"2px",width:"80%","font-size":"100%"}),"textarea"==this.options.type&&(e=n.getSize().y,this.inputBox.setStyles({height:e+"px"})),!this.inputBox.value)try{this.inputBox.set("html",t)}catch(t){}if(this.options.skipSetStyles||this.setAllStyles(n,this.inputBox),"select"==this.options.type)for(var h=0;h<this.options.selectOptions.length;h++)1==(i=this.options.selectOptions[h].split("|")).length&&(i[1]=this.options.selectOptions[h]),new Element("option",{style:"font"==this.options.subtype?"font-family: "+i[0]+"; font-size: 16px":""}).setProperty("value",i[0]).setProperty("value_title",i[1]).setProperty("selected","rc"==this.options.subtype||"font"==this.options.subtype?i[1]==this.oldContentText:i[0]==this.oldContent).set("html",i[1]).injectInside(this.inputBox),"rc"!=this.options.subtype&&"font"!=this.options.subtype||i[1]!=this.oldContentText||(this.oldContent=i[0]);this.editting.set("html",""),this.inputBox.injectInside(this.editting),!function(){try{this.inputBox.focus()}catch(t){}this.inputBox.select&&this.inputBox.select()}.bind(this).delay(300),this.options.WYSIWYGSettings?(s=this,o=new tinymce.Editor(l,this.options.WYSIWYGSettings,tinymce.EditorManager),tinymce.EditorManager.add(o),o.render(),function(){var t=$(o.id+"_tbl"),e=$(o.id+"_ifr");t&&(t.setStyle("height",s.options.WYSIWYGSettings.height),e.setStyle("height",s.options.WYSIWYGSettings.height)),s.setAllStylesMCE(n,o),"object"==typeof messyMess&&messyMess.copyrightStickToBottom()}.delay(1e3)):(this.inputBox.addEvent("change",this.onSave.bind(this)),this.options.dontHideOnBlur||this.inputBox.addEvent("blur",this.onSave.bind(this)))}},onSave:function(){this.entryUnHover(this.editting),this.inputBox.removeEvents(),this.newContent=this.options.WYSIWYGSettings?this.inputBox.get("value").trim():this.addHTMLEntities(this.inputBox.get("value").trim()).replace(new RegExp("\n","gi"),"<br />"),this.newContentText=this.newContent,"select"==this.options.type&&"rc"==this.options.subtype||"font"==this.options.subtype?(this.newContentText=this.inputBox.getSelected().get("text"),this.newContentText instanceof Array&&(this.newContentText=this.newContentText[0]),this.editting.set("html",this.newContentText)):this.editting.set("html",this.newContent),this.fireEvent("onComplete",[this,this.editting,this.oldContent,this.oldContentText,this.newContent,this.newContentText])},entryUnHover:function(t){var e=t.data("path").split("/");6===e.length&&"entry"===e.slice(1)[0]&&"tag"===e.slice(-1)[0]&&"off"===(e=t.getParent(".xEntry")).getAttribute("data-hover")&&e.removeClass("xEntryHover")},setAllStyles:function(n,i){["font-family","font-weight","font-style","text-transform","line-height","letter-spacing","font","color","background-color"].map(function(t){var e=("background-color"===t?n.getParent("body"):n).getStyle(t);e&&i.setStyle(t,e)})},setAllStylesMCE:function(n,i){var s=i.dom.select("body");["font-size","font-family","font-weight","font-style","text-transform","line-height","letter-spacing","font","color","background-color"].map(function(t){var e=("background-color"===t?n.getParent("body"):n).getStyle(t);e&&i.dom.setStyle(s,t,e)})}});Element.implement({inlineEdit:function(t){return new inlineEdit(this,t)},inlineIsEmpty:function(){return 0==this.innerHTML.indexOf('<span class="xEmpty">')}}),inlineEdit.implement(new Events),inlineEdit.implement(new Options);
var BertaEditor=new Class({Extends:BertaEditorBase,Implements:[Options,UnlinearProcessDispatcher,Events],options:{paths:null},edittingMode:"entries",galleries:new Array,processHandler:null,entriesList:null,portfolioThumbnails:null,subMenu:null,currentSection:null,currentTag:null,submenuSortables:new Array,orderSortables:null,tagsMenu:null,initialize:function(t){this.setOptions(t),this.initConsoleReplacement(),this.tinyMCE_ConfigurationsInit(),this.processHandler=new UnlinearProcessHandler,this.processHandler.addObservable(this),this.processHandler.test="aaa",["sitesMenuRerendered","sectionsMenuRerendered"].forEach(function(t){window.addEventListener(t,this.onDOMReadyDo.bindWithEvent(this))}.bindWithEvent(this)),window.addEventListener("addEntry",this.onAddEntry.bindWithEvent(this)),window.addEvent("domready",this.onDOMReady.bindWithEvent(this)),window.addEvent("load",this.onLoad.bindWithEvent(this))},onAddEntry:function(){window.redux_store.dispatch(Actions.getState(window.getCurrentSite())),this.onDOMReadyDo()},onDOMReady:function(){this.onDOMReadyDo.delay(1e3,this)},onDOMReadyDo:function(){switch(this.edittingMode=$$("body")[0].get("x_mode"),this.edittingMode||(this.edittingMode="entries"),this.setWmodeTransparent(),this.edittingMode){case"multipage":break;case"settings":this.editablesInit(),$("xFinishInstall").addEvent("click",function(t){t=t.target.data("data-path");redux_store.dispatch(Actions.initUpdateSiteSettings(t,1,function(){window.location.reload()}))}),$$(this.options.xActionClass).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassAction)},this);break;default:var t;this.container=document.getElementById("contentContainer"),this.entriesList=$$(".xEntriesList")[0],this.portfolioThumbnails=$$(".portfolioThumbnails"),$("xBgEditorPanelTrig")&&$("xBgEditorPanelTrig").addEvent("click",this.onBgEditClick.bindWithEvent(this)),this.entriesList?(this.currentSection=this.entriesList.getClassStoredValue("xSection"),this.currentTag=this.entriesList.getClassStoredValue("xTag"),this.currentSection?(this.entriesList.getElements(".xEntry .xEntryEditWrap").addEvent("mouseenter",this.entryOnHover.bindWithEvent(this)),this.entriesList.getElements(".xEntry .xEntryEditWrap").addEvent("mouseleave",this.entryOnUnHover.bindWithEvent(this)),this.entriesList.getElements(".xEntry .xEntryDropdown").addEvent("mouseenter",this.entryDropdownToggle.bindWithEvent(this)),this.entriesList.getElements(".xEntry .xEntryDropdown").addEvent("click",this.entryDropdownToggle.bindWithEvent(this)),this.submenuSortingInit(),this.entriesList.getElements(".xEntry .xEntryDropdownBox").addEvents({mouseleave:function(t){this.removeClass("xVisible"),(dropdown=this.getParent().getElement(".xEntryDropdown")).removeClass("xEntryDropdowHover")}}),createNewEntryText="messy"!=this.options.templateName.substr(0,5)&&"portfolio"!=this.options.sectionType?this.options.i18n["create new entry here"]:this.options.i18n["create new entry"],new Element("A",{class:"xCreateNewEntry xPanel xAction-entryCreateNew",href:"#"}).adopt(new Element("span",{html:createNewEntryText})).inject(this.entriesList,"after"),$$(".xEntryDelete").addEvent("click",this.entryDelete.bindWithEvent(this)),$$(".xCreateNewEntry").addEvent("click",this.entryCreate.bindWithEvent(this)),"messy"==this.options.templateName.substr(0,5)&&($$(".xCreateNewEntry").addClass("mess"),$$(".xCreateNewEntry").adopt(new Element("div",{class:"xHandle",events:{click:function(){return!1}}})),(t=$$(".xCreateNewEntry")).makeDraggable({handle:t.getElement(".xHandle")})),this.entriesList.getElements(".xGalleryContainer").each(function(t){t.getParent(".xEntry").hasClass("xHidden")||this.initGallery(t)}.bind(this)),this.entriesList.getElements(".xGalleryEditButton").addEvent("click",this.onGalleryEditClick.bindWithEvent(this)),this.editablesInit(),this.entriesList.hasClass("xNoEntryOrdering")||(this.orderSortables=new Sortables(this.entriesList,{handle:".xEntryMove",constrain:!0,clone:!0,opacity:.3,revert:!0,onComplete:function(t){this.entriesList.getElements(".xCreateNewEntry").setStyle("visibility","visible"),this.entryOrderSave(t)}.bind(this),onStart:function(){this.entriesList.getElements(".xCreateNewEntry").setStyle("visibility","hidden")}.bind(this)}),this.portfolioThumbnails.length&&new Sortables(this.portfolioThumbnails,{handle:".xHandle",constrain:!0,clone:function(t,e){return new Element("span",{class:"portfolioThumbnail"}).setStyles({display:"block",visibility:"hidden",position:"absolute",left:e.offsetLeft,top:e.offsetTop}).set("html",e.get("html"))},opacity:.3,revert:!0,onComplete:function(t){this.portfolioThumbnailsOrderSave(t)}.bind(this)})),document.querySelectorAll(".js-bt-open-move-entry-to-section").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var t=this.closest(".xEntryEditWrap"),e=t.querySelector(".xEntryDropdownBox"),t=t.querySelector(".bt-move-entry-to-section");e.classList.remove("xVisible"),t.style.display="block"})}),document.querySelectorAll(".js-move-entry-to-section").forEach(function(t){t.addEventListener("change",this.entryMoveToSection.bind(this))}.bind(this)),this.highlightNewEntry.delay(100,this)):(this.currentSection,(t=this.container.getElement("h1"))&&t.hide())):this.editablesInit()}},initGallery:function(t){var e;switch(t.getClassStoredValue("xGalleryType")){case"row":e=new BertaGalleryRow(t);break;case"column":e=new BertaGalleryColumn(t);break;case"pile":e=new BertaGalleryPile(t);break;case"link":e=new BertaGalleryLink(t);break;default:e=new BertaGallerySlideshow(t)}this.galleries.push(e)},onLoad:function(){},editablesInit:function(){$$(this.options.xBertaEditorClassSimple).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassSimple)}.bind(this)),$$(this.options.xBertaEditorClassTA).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassTA)}.bind(this)),$$(this.options.xBertaEditorClassMCE).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassMCE)}.bind(this)),$$(this.options.xBertaEditorClassMCESimple).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassMCE)}.bind(this)),$$(this.options.xBertaEditorClassRC).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassRC)}.bind(this)),$$(this.options.xBertaEditorClassFontSelect).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassFontSelect)}.bind(this)),$$(this.options.xBertaEditorClassSelect).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassSelect)}.bind(this)),$$(this.options.xBertaEditorClassSelectRC).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassSelectRC)}.bind(this));var t=$$(this.options.xBertaEditorClassDragXY);t.length&&this.initGuideLines(),t.each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassDragXY)}.bind(this)),$$(this.options.xEditableRealCheck).each(function(t){this.elementEdit_init(t,this.options.xEditableRealCheck)}.bind(this)),$$(this.options.xBertaEditorClassImage).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassImage)}.bind(this)),$$(this.options.xBertaEditorClassICO).each(function(t){this.elementEdit_init(t,this.options.xBertaEditorClassICO)}.bind(this)),this.fireEvent(BertaEditor.EDITABLES_INIT)},highlightNewEntry:function(){var t=Cookie.read("_berta__entry_highlight");Cookie.dispose("_berta__entry_highlight",{path:this.options.paths.engineABSRoot}),t&&(t=this.entriesList.getElement(".xEntryId-"+t))&&(t=t.getPosition(),"messy"==this.options.templateName.substr(0,5)?window.scrollTo(t.x,t.y):window.scrollTo(0,t.y))},setWmodeTransparent:function(){document.getElements("iframe").each(function(t){var e=t.src;if(e&&!e.match(/javascript:/gi)){e=new URI(e);try{e.setData("wmode","transparent"),e=e.toString(),t.set("src",e)}catch(t){}}})},onBgEditClick:function(t){t.stop();t=getCurrentSite();window.parent.postMessage({action:"BackgroundGalleryEditorOpen",site:t,section:this.currentSection},"*")},onGalleryEditClick:function(t){t.stop();var e=getCurrentSite(),t=$(t.target).getParent(".xEntry").getClassStoredValue("xEntryId");window.parent.postMessage({action:"EntryGalleryEditorOpen",site:e,section:this.currentSection,entryId:t},"*")},entryCreate:function(t){t=new Event(t).stop();var t=$(t.target),e=("A"!=t.tagName&&(t=t.getParent("a")),getCurrentSite()),t=this.getEntryInfoForElement(t);redux_store.dispatch(Actions.initCreateSectionEntry(e,this.currentSection,this.currentTag,t.entryId,function(t){Cookie.write("_berta__entry_highlight",t.entryid,{path:this.options.paths.engineABSRoot}),window.location.hash="entry-"+t.entryid}.bindWithEvent(this)))},entryMoveToSection:function(t){var e=getCurrentSite(),i=t.target.value,t=t.target.closest(".xEntry").getClassStoredValue("xEntryId"),n=window.BertaHelpers.updateQueryStringParameter(window.location.href,"section",i);redux_store.dispatch(Actions.initEntryMoveToSection(e,this.currentSection,t,i,function(){window.location.href=n}))},entryDelete:function(t){t=new Event(t).stop();var e=$(t.target).getParent(".xEntry"),t=e.getClassStoredValue("xEntryId"),i=$$('.portfolioThumbnail[data-id="'+t+'"]'),n=getCurrentSite();redux_store.dispatch(Actions.initDeleteSectionEntry(n,this.currentSection,t,function(){e.destroy(),i.destroy()}.bindWithEvent(this)))},entryOrderSave:function(t){var e=t.getClassStoredValue("xEntryId"),t=t.getNext(".xEntry"),t=t?t.getClassStoredValue("xEntryId"):null,i=getCurrentSite();redux_store.dispatch(Actions.initOrderSectionEntries(i,this.currentSection,e,t))},portfolioThumbnailsOrderSave:function(t){var e=t.get("data-id"),t=t.getNext(".portfolioThumbnail"),t=t?t.get("data-id"):null,i=getCurrentSite();redux_store.dispatch(Actions.initOrderSectionEntries(i,this.currentSection,e,t))},entryOnHover:function(t){t=new Event(t);t=$(t.target);(t=t.hasClass("xEntry")?t:t.getParent(".xEntry")).addClass("xEntryHover"),t.setAttribute("data-hover","on")},entryOnUnHover:function(t){t=new Event(t);t=$(t.target);(t=t.hasClass("xEntry")?t:t.getParent(".xEntry")).getElement(".tagsList input")||t.removeClass("xEntryHover"),t.setAttribute("data-hover","off")},entryDropdownToggle:function(t){var t=$(t.target),e=t.getParent().getParent();(dropdownBox=e.getElement(".xEntryDropdownBox")).toggleClass("xVisible",!0),dropdownBox.hasClass("xVisible")?t.addClass("xEntryDropdowHover"):t.removeClass("xEntryDropdowHover")},submenuSortingInit:function(){this.subMenu=$$(".subMenu"),this.subMenu.length&&(this.subMenu.getElements("a").each(function(t,e){t.addEvent("click",function(t){this.getParent("ul").hasClass("xSortNotClick")&&t.preventDefault()})}),this.subMenu.each(function(i,t){i.hasClass("xAllowOrdering")&&(this.submenuSortables[t]=new Sortables(i,{handle:".handle",constrain:!0,clone:!0,opacity:.3,revert:!0,onComplete:function(t){i.hasClass("xSortNotClick")&&(this.submenuOrderSave(t,i),i.removeClass("xSortNotClick"))}.bind(this),onStart:function(t,e){i.addClass("xSortNotClick")}.bind(this)}))}.bind(this)))},submenuOrderSave:function(t,e){e.addClass("xSaving");var i=getCurrentSite(),n=e.getClassStoredValue("xSection"),s=t.getClassStoredValue("xTag"),t=t.getNext("li"),t=t?t.getClassStoredValue("xTag"):null;redux_store.dispatch(Actions.initOrderSectionTags(i,n,s,t,function(){e.removeClass("xSaving")}))}});BertaEditor.EDITABLES_INIT="editables_init",window.bertaEditor=new BertaEditor(window.bertaGlobalOptions);
(()=>{function c(e){return{eq:e}}function u(a){return c(function(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(!a.eq(e[n],t[n]))return!1;return!0})}var n=function(e){var t;return null===e?"null":void 0===e?"undefined":"object"==(t=typeof e)&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},m=c(function(e,t){return e===t}),x=function(d){return c(function(e,t){var r,n,a=Object.keys(e),o=Object.keys(t);if(r=u(m),n=function(e){return Array.prototype.slice.call(e).sort(void 0)},!c(function(e,t){return r.eq(n(e),n(t))}).eq(a,o))return!1;for(var i=a.length,l=0;l<i;l++){var s=a[l];if(!d.eq(e[s],t[s]))return!1}return!0})},_=c(function(e,t){var r;return e===t||(r=n(e))===n(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?u(_).eq(e,t):"object"===r&&x(_).eq(e,t))});let r=Object.getPrototypeOf,a=(e,t,r)=>!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name,t=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&a(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t},o=t=>e=>typeof e===t,i=t=>e=>t===e,p=(e,t)=>le(e)&&a(e,t,(e,t)=>r(e)===t),Z=t("string"),le=t("object"),se=e=>p(e,Object),Q=t("array"),I=i(null),de=o("boolean"),b=i(void 0),U=e=>null==e,z=e=>!U(e),j=o("function"),y=o("number"),k=(r,n)=>{if(Q(r)){for(let e=0,t=r.length;e<t;++e)if(!n(r[e]))return!1;return!0}return!1},H=()=>{},s=(t,r)=>(...e)=>t(r.apply(null,e)),l=(t,r)=>e=>t(r(e)),J=e=>()=>e,f=e=>e,d=(e,t)=>e===t;function C(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}let ce=t=>e=>!t(e),g=e=>()=>{throw new Error(e)},N=e=>e(),R=e=>{e()},h=J(!1),S=J(!0);class ee{constructor(e,t){this.tag=e,this.value=t}static some(e){return new ee(!0,e)}static none(){return ee.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?ee.some(e(this.value)):ee.none()}bind(e){return this.tag?e(this.value):ee.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:ee.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return z(e)?ee.some(e):ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}function A(e,r,n,a){a=a||this,e&&(n&&(e=e[n]),Ke(e,(e,t)=>!1!==r.call(a,e,t,n)&&(A(e,r,n,a),!0)))}ee.singletonNone=new ee(!1);let T=Array.prototype.slice,O=Array.prototype.indexOf,ue=Array.prototype.push,me=(e,t)=>O.call(e,t),V=(e,t)=>-1<me(e,t),$=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},te=(r,n)=>{let e=r.length,a=new Array(e);for(let t=0;t<e;t++){let e=r[t];a[t]=n(e,t)}return a},re=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},ge=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},fe=(r,n)=>{var a=[],o=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];(n(i,e)?a:o).push(i)}return{pass:a,fail:o}},B=(r,n)=>{var a=[];for(let e=0,t=r.length;e<t;e++){var o=r[e];n(o,e)&&a.push(o)}return a},pe=(e,r,n)=>(ge(e,(e,t)=>{n=r(n,e,t)}),n),he=(e,r,n)=>(re(e,(e,t)=>{n=r(n,e,t)}),n),ve=(r,n,a)=>{for(let e=0,t=r.length;e<t;e++){var o=r[e];if(n(o,e))return ee.some(o);if(a(o,e))break}return ee.none()},be=(e,t)=>ve(e,t,h),ye=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return ee.some(e);return ee.none()},Ce=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!Q(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);ue.apply(n,r[e])}return n},we=(e,t)=>Ce(te(e,t)),Ee=(r,n)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==n(r[e],e))return!1;return!0},xe=e=>{e=T.call(e,0);return e.reverse(),e},_e=(e,t)=>B(e,e=>!V(t,e)),ke=(r,n)=>{var a={};for(let e=0,t=r.length;e<t;e++){var o=r[e];a[String(o)]=n(o,e)}return a},Se=(e,t)=>{e=T.call(e,0);return e.sort(t),e},Ne=(e,t)=>0<=t&&t<e.length?ee.some(e[t]):ee.none(),Re=e=>Ne(e,0),Ae=e=>Ne(e,e.length-1),Te=j(Array.from)?Array.from:e=>T.call(e),Oe=(t,r)=>{for(let e=0;e<t.length;e++){var n=r(t[e],e);if(n.isSome())return n}return ee.none()},Be=(r,n)=>{let a=[],o=j(n)?t=>$(a,e=>n(e,t)):e=>V(a,e);for(let e=0,t=r.length;e<t;e++){var i=r[e];o(i)||a.push(i)}return a},Pe=Object.keys,De=Object.hasOwnProperty,ne=(r,n)=>{var a=Pe(r);for(let e=0,t=a.length;e<t;e++){var o=a[e];n(r[o],o)}},Le=(e,r)=>Me(e,(e,t)=>({k:t,v:r(e,t)})),Me=(e,r)=>{let n={};return ne(e,(e,t)=>{e=r(e,t);n[e.k]=e.v}),n},Ie=r=>(e,t)=>{r[t]=e},Fe=(e,r,n,a)=>{ne(e,(e,t)=>{(r(e,t)?n:a)(e,t)})},Ue=(e,t)=>{var r={};return Fe(e,t,Ie(r),H),r},ze=(e,r)=>{let n=[];return ne(e,(e,t)=>{n.push(r(e,t))}),n},je=e=>ze(e,f),w=(e,t)=>ae(e,t)?ee.from(e[t]):ee.none(),ae=(e,t)=>De.call(e,t),He=(e,t)=>ae(e,t)&&null!=e[t],Ve=e=>{let t={};return re(e,e=>{t[e]={}}),Pe(t)},$e=e=>void 0!==e.length,We=Array.isArray,Ke=(r,n,a)=>{if(!r)return!1;if(a=a||r,$e(r)){for(let e=0,t=r.length;e<t;e++)if(!1===n.call(a,r[e],e,r))return!1}else for(var e in r)if(ae(r,e)&&!1===n.call(a,r[e],e,r))return!1;return!0},Ye=(r,n)=>{let a=[];return Ke(r,(e,t)=>{a.push(n(e,t,r))}),a},Ge=(r,n)=>{let a=[];return Ke(r,(e,t)=>{n&&!n(e,t,r)||a.push(e)}),a},Xe=(t,r,e,n)=>{let a=b(e)?t[0]:e;for(let e=0;e<t.length;e++)a=r.call(n,a,t[e],e);return a},Ze=(r,n,a)=>{for(let e=0,t=r.length;e<t;e++)if(n.call(a,r[e],e,r))return e;return-1},Qe=e=>e[e.length-1],Je=t=>{let r,n=!1;return(...e)=>(n||(n=!0,r=t.apply(null,e)),r)},et=()=>tt(0,0),tt=(e,t)=>({major:e,minor:t}),rt={nu:tt,detect:(e,r)=>{var r=String(r).toLowerCase();if(0===e.length)return et();{var n=r;let t=((t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}})(e,n);return t?(r=e=>Number(n.replace(t,"$"+e)),tt(r(1),r(2))):{major:0,minor:0}}},unknown:et},nt=(e,t)=>{let r=String(t).toLowerCase();return be(e,e=>e.search(r))},at=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,ot=(e,t)=>lt(e,t)?(t=t.length,e.substring(t)):e,it=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!b(n)||e+t.length<=n)},lt=(e,t)=>at(e,t,0),st=(e,t)=>at(e,t,e.length-t.length),dt=t=>e=>e.replace(t,""),ct=dt(/^\s+|\s+$/g),ut=dt(/^\s+/g),mt=dt(/\s+$/g),gt=e=>0<e.length,ft=e=>!gt(e),pt=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?ee.none():ee.some(e)},ht=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,vt=t=>e=>it(e,t),bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>it(e,"edge/")&&it(e,"chrome")&&it(e,"safari")&&it(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ht],search:e=>it(e,"chrome")&&!it(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>it(e,"msie")||it(e,"trident")},{name:"Opera",versionRegexes:[ht,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:vt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:vt("firefox")},{name:"Safari",versionRegexes:[ht,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(it(e,"safari")||it(e,"mobile/"))&&it(e,"applewebkit")}],yt=[{name:"Windows",search:vt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>it(e,"iphone")||it(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:vt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:vt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:vt("linux"),versionRegexes:[]},{name:"Solaris",search:vt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:vt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:vt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ct={browsers:J(bt),oses:J(yt)},wt="Chromium",Et="Firefox",xt=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n("Edge"),isChromium:n(wt),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(Et),isSafari:n("Safari")}},_t=()=>xt({current:void 0,version:rt.unknown()}),kt=xt,St=(J("Edge"),J(wt),J("IE"),J("Opera"),J(Et),J("Safari"),"Windows"),Nt="Android",Rt="Solaris",At="FreeBSD",Tt="ChromeOS",Ot=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(St),isiOS:n("iOS"),isAndroid:n(Nt),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(Rt),isFreeBSD:n(At),isChromeOS:n(Tt)}},Bt=()=>Ot({current:void 0,version:rt.unknown()}),Pt=Ot,Dt=(J(St),J("iOS"),J(Nt),J("Linux"),J("macOS"),J(Rt),J(At),J(Tt),e=>window.matchMedia(e).matches),Lt=Je(()=>{{var o=window.navigator.userAgent,i=ee.from(window.navigator.userAgentData),l=Dt,s,d,c,u,m,g,f;let t=Ct.browsers(),e=Ct.oses(),r=i.bind(e=>{return n=t,e=e,Oe(e.brands,t=>{let r=t.brand.toLowerCase();return be(n,e=>r===(null==(e=e.brand)?void 0:e.toLowerCase())).map(e=>({current:e.name,version:rt.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=t,r=o,nt(e,r).map(e=>{var t=rt.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(_t,kt),n=(i=e,f=o,nt(i,f).map(e=>{var t=rt.detect(e.versionRegexes,f);return{current:e.name,version:t}}).fold(Bt,Pt)),a=(i=r,d=o,l=l,c=(s=n).isiOS()&&!0===/ipad/i.test(d),u=s.isiOS()&&!c,m=s.isiOS()||s.isAndroid(),g=m||l("(pointer:coarse)"),l=c||!u&&m&&l("(min-device-width:768px)"),m=u||m&&!l,i=i.isSafari()&&s.isiOS()&&!1===/safari/i.test(d),d=!m&&!l&&!i,{isiPad:J(c),isiPhone:J(u),isTablet:J(l),isPhone:J(m),isTouch:J(g),isAndroid:s.isAndroid,isiOS:s.isiOS,isWebView:J(i),isDesktop:J(d)});return{browser:r,os:n,deviceType:a}}}),Mt=()=>Lt(),It=window.navigator.userAgent,Ft=Mt(),Ut=Ft.browser,zt=Ft.os,jt=Ft.deviceType,Ht=-1!==It.indexOf("Windows Phone"),F={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ut.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ut.isIE(),windowsPhone:Ht,browser:{current:Ut.current,version:Ut.version,isChromium:Ut.isChromium,isEdge:Ut.isEdge,isFirefox:Ut.isFirefox,isIE:Ut.isIE,isOpera:Ut.isOpera,isSafari:Ut.isSafari},os:{current:zt.current,version:zt.version,isAndroid:zt.isAndroid,isChromeOS:zt.isChromeOS,isFreeBSD:zt.isFreeBSD,isiOS:zt.isiOS,isLinux:zt.isLinux,isMacOS:zt.isMacOS,isSolaris:zt.isSolaris,isWindows:zt.isWindows},deviceType:{isDesktop:jt.isDesktop,isiPad:jt.isiPad,isiPhone:jt.isiPhone,isPhone:jt.isPhone,isTablet:jt.isTablet,isTouch:jt.isTouch,isWebView:jt.isWebView}},Vt=/^\s*|\s*$/g,$t=e=>U(e)?"":(""+e).replace(Vt,""),oe={trim:$t,isArray:We,is:(e,t)=>t?!("array"!==t||!We(e))||typeof e===t:void 0!==e,toArray:r=>{if(We(r))return r;var n=[];for(let e=0,t=r.length;e<t;e++)n[e]=r[e];return n},makeMap:(e,t,r={})=>{var n=Z(e)?e.split(t||","):e||[];let a=n.length;for(;a--;)r[n[a]]={};return r},each:Ke,map:Ye,grep:Ge,inArray:(r,n)=>{if(r)for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},hasOwn:ae,extend:(t,...r)=>{for(let e=0;e<r.length;e++){var n,a=r[e];for(let e in a)ae(a,e)&&void 0!==(n=a[e])&&(t[e]=n)}return t},walk:A,resolve:(e,r=window)=>{var n=e.split(".");for(let e=0,t=n.length;e<t&&(r=r[n[e]]);e++);return r},explode:(e,t)=>Q(e)?e:""===e?[]:Ye(e.split(t||","),$t),_addCacheSuffix:e=>{var t=F.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},qt=(e,t,r=d)=>e.exists(e=>r(e,t)),Wt=(e,t,r=d)=>Kt(e,t,r).getOr(e.isNone()&&t.isNone()),Kt=(e,t,r)=>e.isSome()&&t.isSome()?ee.some(r(e.getOrDie(),t.getOrDie())):ee.none(),Yt=(e,t)=>e?ee.some(t):ee.none(),Gt="undefined"!=typeof window?window:Function("return this;")(),Xt=(e,r)=>{{var n=e.split(".");let t=null!=r?r:Gt;for(let e=0;e<n.length&&null!=t;++e)t=t[n[e]];return t}},Zt=Object.getPrototypeOf,Qt=e=>{var t=Xt("ownerDocument.defaultView",e);return le(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=Xt("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Zt(e).constructor.name))},q=e=>e.dom.nodeName.toLowerCase(),Jt=e=>e.dom.nodeType,er=t=>e=>Jt(e)===t,tr=e=>rr(e)&&Qt(e.dom),rr=er(1),nr=er(3),ar=er(9),or=er(11),ir=t=>e=>rr(e)&&q(e)===t,lr=(e,t,r)=>{if(!(Z(r)||de(r)||y(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},sr=(e,t,r)=>{lr(e.dom,t,r)},dr=(e,t)=>{let r=e.dom;ne(t,(e,t)=>{lr(r,t,e)})},cr=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},ur=(e,t)=>ee.from(cr(e,t)),mr=(e,t)=>{e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},gr=(e,t)=>{e.dom.removeAttribute(t)},fr=e=>he(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),pr=(e,t)=>{e=cr(e,t);return void 0===e||""===e?[]:e.split(" ")},hr=e=>void 0!==e.dom.classList,vr=e=>pr(e,"class"),br=(e,t)=>(t=pr(e,"class").concat([t]),sr(e,"class",t.join(" ")),!0),yr=(e,t)=>{return e=e,r="class",n=t,0<(t=B(pr(e,r),e=>e!==n)).length?sr(e,r,t.join(" ")):gr(e,r),!1;var r,n},Cr=(e,t)=>{hr(e)?e.dom.classList.add(t):br(e,t)},wr=e=>{0===(hr(e)?e.dom.classList:vr(e)).length&&gr(e,"class")},Er=(e,t)=>{hr(e)?e.dom.classList.remove(t):yr(e,t),wr(e)},xr=(e,t)=>hr(e)&&e.dom.classList.contains(t),_r=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},kr=(t,e)=>{e=(e||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length){let e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return _r(e.childNodes[0])},Sr=(e,t)=>{t=(t||document).createElement(e);return _r(t)},Nr=(e,t)=>{t=(t||document).createTextNode(e);return _r(t)},W=_r,Rr=(e,t,r)=>ee.from(e.dom.elementFromPoint(t,r)).map(_r),Ar=(e,t)=>{let r=[],n=e=>(r.push(e),t(e)),a=t(e);for(;(a=a.bind(n)).isSome(););return r},Tr=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{let e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Or=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,P=(e,t)=>e.dom===t.dom,Br=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},Pr=e=>W(e.dom.ownerDocument),Dr=e=>ar(e)?e:Pr(e),Lr=e=>W(Dr(e).dom.defaultView),Mr=e=>ee.from(e.dom.parentNode).map(W),Ir=e=>ee.from(e.dom.parentElement).map(W),Fr=(e,t)=>{var r=j(t)?t:h;let n=e.dom;for(var a=[];null!=n.parentNode;){let e=n.parentNode,t=W(e);if(a.push(t),!0===r(t))break;n=e}return a},Ur=e=>ee.from(e.dom.previousSibling).map(W),zr=e=>ee.from(e.dom.nextSibling).map(W),jr=e=>xe(Ar(e,Ur)),Hr=e=>Ar(e,zr),Vr=e=>te(e.dom.childNodes,W),$r=(e,t)=>{e=e.dom.childNodes;return ee.from(e[t]).map(W)},qr=e=>$r(e,0),Wr=e=>$r(e,e.dom.childNodes.length-1),Kr=e=>e.dom.childNodes.length,Yr=e=>or(e)&&z(e.dom.host),Gr=e=>W(e.dom.getRootNode()),Xr=e=>{if(Yr(e))return e;e=Dr(e).dom.head;if(null==e)throw new Error("Head is not available yet");return W(e)},Zr=e=>W(e.dom.host),Qr=e=>{if(z(e.target)){var t=W(e.target);if(rr(t)&&Jr(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Re(t)}}return ee.from(e.target)},Jr=e=>z(e.dom.shadowRoot),en=e=>{let t=nr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return(e=>{e=Gr(e);return Yr(e)?ee.some(e):ee.none()})(W(t)).fold(()=>r.body.contains(t),l(en,Zr))};var tn,rn,nn=(e,t,r,n,a)=>e(r,n)?ee.some(r):j(a)&&a(r)?ee.none():t(r,n,a);let an=(e,t,r)=>{let n=e.dom;for(var a=j(r)?r:h;n.parentNode;){n=n.parentNode;let e=W(n);if(t(e))return ee.some(e);if(a(e))break}return ee.none()},on=(e,t,r)=>nn((e,t)=>t(e),an,e,t,r),ln=(e,n)=>{let a=t=>{for(let e=0;e<t.childNodes.length;e++){var r=W(t.childNodes[e]);if(n(r))return ee.some(r);r=a(t.childNodes[e]);if(r.isSome())return r}return ee.none()};return a(e.dom)},sn=(e,t,r)=>an(e,e=>Tr(e,t),r),dn=(e,t)=>(t=t,e=void 0===e?document:e.dom,Or(e)?ee.none():ee.from(e.querySelector(t)).map(W)),cn=(e,t,r)=>nn((e,t)=>Tr(e,t),sn,e,t,r),un=(e,t=!1)=>en(e)?e.dom.isContentEditable:(e=e,cn(e,"[contenteditable]").fold(J(t),e=>"true"===mn(e))),mn=e=>e.dom.contentEditable,gn=(e,t)=>{e.dom.contentEditable=t?"true":"false"},fn=e=>void 0!==e.style&&j(e.style.getPropertyValue),pn=(e,t,r)=>{if(!Z(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);fn(e)&&e.style.setProperty(t,r)},hn=(e,t,r)=>{e=e.dom;pn(e,t,r)},vn=(e,t)=>{let r=e.dom;ne(t,(e,t)=>{pn(r,t,e)})},bn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||en(e)?n:yn(r,t)},yn=(e,t)=>fn(e)?e.style.getPropertyValue(t):"",Cn=(e,t)=>{e=e.dom,e=yn(e,t);return ee.from(e).filter(e=>0<e.length)},wn=e=>{var t={},r=e.dom;if(fn(r))for(let e=0;e<r.style.length;e++){var n=r.style.item(e);t[n]=r.style[n]}return t},En=(e,t)=>{var r;r=e.dom,t=t,fn(r)&&r.style.removeProperty(t),qt(ur(e,"style").map(ct),"")&&gr(e,"style")},xn=(t,r)=>{Mr(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},_n=(e,t)=>{zr(e).fold(()=>{Mr(e).each(e=>{K(e,t)})},e=>{xn(e,t)})},kn=(t,r)=>{qr(t).fold(()=>{K(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},K=(e,t)=>{e.dom.appendChild(t.dom)},Sn=(e,t)=>{xn(e,t),K(t,e)},Nn=(t,e)=>{re(e,e=>{K(t,e)})},Rn=e=>{e.dom.textContent="",re(Vr(e),e=>{Y(e)})},Y=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},An=e=>{var r,n,t=Vr(e);0<t.length&&(r=e,re(n=t,(e,t)=>{t=0===t?r:n[t-1];_n(t,e)})),Y(e)},Tn=e=>te(e,W),On=e=>e.dom.innerHTML,Bn=(e,t)=>{let r=Pr(e).dom,n=W(r.createDocumentFragment()),a=(t=t,(o=(r||document).createElement("div")).innerHTML=t,Vr(W(o)));var o;Nn(n,a),Rn(e),K(e,n)},Pn=(e,t,r,n)=>{return t=t,i=r,l=n,r=e=>{var t,r,n,a,o;i(e)&&l((t=e,e=W(Qr(t).getOr(t.target)),n=()=>t.stopPropagation(),a=()=>t.preventDefault(),o=s(a,n),r=t.clientX,{target:e,x:r,y:t.clientY,stop:n,prevent:a,kill:o,raw:t}))},(n=e).dom.addEventListener(t,r,!1),{unbind:C(Dn,n,t,r,!1)};var i,l},Dn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Ln=(r,n)=>({left:r,top:n,translate:(e,t)=>Ln(r+e,n+t)}),Mn=Ln,In=(e,t)=>void 0!==e?e:void 0!==t?t:0,Fn=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Mn(r.offsetLeft,r.offsetTop):en(e)?(r=t.getBoundingClientRect(),Mn(r.left,r.top)):Mn(0,0)},Un=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Mn(t,e)},zn=(e,t,r)=>{r=(void 0!==r?r.dom:document).defaultView;r&&r.scrollTo(e,t)},jn=(e,t)=>{Mt().browser.isSafari()&&j(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Hn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),Vn=e=>{let r=void 0===e?window:e,t=r.document,n=Un(W(t));return(e=>{e=void 0===e?window:e;return Mt().browser.isFirefox()?ee.none():ee.from(e.visualViewport)})(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return Hn(n.left,n.top,t,e)},e=>Hn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},$n=(e,t)=>{let r=[];return re(Vr(e),e=>{r=(r=t(e)?r.concat([e]):r).concat($n(e,t))}),r},qn=(e,t)=>(t=t,e=void 0===e?document:e.dom,Or(e)?[]:te(e.querySelectorAll(t),W)),Wn=(e,t,r)=>an(e,t,r).isSome(),Kn=(e,t)=>{return n=t,((t=(r=e).dom).parentNode?(t=W(t.parentNode),be(t.dom.childNodes,e=>(e=W(e),!P(r,e)&&n(e))).map(W)):ee.none()).isSome();var r,n},Yn=(e,t)=>ln(e,t).isSome();class Gn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(r,e,n,t){if(r){if(!t&&r[e])return r[e];if(r!==this.rootNode){let t=r[n];if(t)return t;for(let e=r.parentNode;e&&e!==this.rootNode;e=e.parentNode)if(t=e[n])return t}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(!this.rootNode||r!==this.rootNode){if(r){if(!t)for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return r}t=e.parentNode;return t&&t!==this.rootNode?t:void 0}}}}let Xn="\ufeff",Zn="",Qn=e=>e===Xn,Jn=/^[ \t\r\n]*$/,ea=e=>Jn.test(e),ta=e=>"\n"===e||"\r"===e,ra=(e,t=4,a=!0,o=!0)=>{let r=t<=0?"":new Array(t+1).join(" "),i=e.replace(/\t/g,r),n=he(i,(e,t)=>{return-1!==" \f\t\v".indexOf(t)||t===Zn?e.pcIsSpace||""===e.str&&a||e.str.length===i.length-1&&o||(r=i,(n=e.str.length+1)<r.length&&0<=n&&ta(r[n]))?{pcIsSpace:!1,str:e.str+Zn}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:ta(t),str:e.str+t};var r,n},{pcIsSpace:!1,str:""});return n.str},na=t=>e=>!!e&&e.nodeType===t,aa=e=>!!e&&!Object.getPrototypeOf(e),G=na(1),oa=e=>G(e)&&tr(W(e)),ia=e=>{let t=e.toLowerCase();return e=>z(e)&&e.nodeName.toLowerCase()===t},la=e=>{let t=e.map(e=>e.toLowerCase());return e=>!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),V(t,e))},sa=(a,e)=>{let o=e.toLowerCase().split(" ");return t=>{if(G(t)){var r=t.ownerDocument.defaultView;if(r)for(let e=0;e<o.length;e++){var n=r.getComputedStyle(t,null);if((n?n.getPropertyValue(a):null)===o[e])return!0}}return!1}},da=e=>G(e)&&e.hasAttribute("data-mce-bogus"),ca=e=>G(e)&&"TABLE"===e.tagName,ua=t=>e=>{if(oa(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1},ma=la(["textarea","input"]),D=na(3),ga=na(4),fa=na(7),pa=na(8),ha=na(9),va=na(11),L=ia("br"),ba=ia("img"),ya=ua("true"),E=ua("false"),Ca=e=>oa(e)&&e.isContentEditable&&z(e.parentElement)&&!e.parentElement.isContentEditable,wa=la(["td","th"]),Ea=la(["td","th","caption"]),xa=la(["video","audio","object","embed"]),_a=ia("li"),ka=ia("details"),Sa=ia("summary"),Na={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Ra=e=>G(e)&&e.hasAttribute("data-mce-bookmark"),Aa=(t,e,r,n)=>{return D(t)&&(a=t,e=e,r=r,!(ea(a.data)&&!((e,t,r)=>{let n=W(t),a=W(e),o=r.getWhitespaceElements();return Wn(a,e=>ae(o,q(e)),C(P,n))})(a,e,r)))&&(!n.includeZwsp||!(()=>{for(var e of t.data)if(!Qn(e))return!1;return!0})());var a},Ta=(e,t,r,n)=>{return j(n.isContent)&&n.isContent(t)||(a=t,o=e,G(a)&&ae(o.getNonEmptyElements(),a.nodeName))||Ra(t)||(o=t,G(o)&&"A"===o.nodeName&&!o.hasAttribute("href")&&(o.hasAttribute("name")||o.hasAttribute("id")))||Aa(t,r,e,n)||E(t)||ya(t)&&(a=t,Ir(W(a)).exists(e=>!un(e)));var a,o},Oa=(e,t,r)=>{var n={...Na,...r};if(n.checkRootAsContent&&Ta(e,t,t,n))return!1;let a=t.firstChild,o=0;if(!a)return!0;var i=new Gn(a,t);do{if(n.skipBogus&&G(a)){let e=a.getAttribute("data-mce-bogus");if(e){a=i.next("all"===e);continue}}if(pa(a))a=i.next(!0);else{if(L(a))o++;else if(Ta(e,a,t,n))return!1;a=i.next()}}while(a);return o<=1},Ba=(e,t,r)=>Oa(e,t.dom,{checkRootAsContent:!0,...r}),Pa=(e,t,r)=>Ta(e,t,t,{includeZwsp:Na.includeZwsp,...r}),Da=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},La=t=>{let r=Da(ee.none()),n=()=>r.get().each(e=>clearInterval(e));return{clear:()=>{n(),r.set(ee.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:e=>{n(),r.set(ee.some(setInterval(e,t)))}}},Ma=()=>{let t=(e=>{let t=Da(ee.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(ee.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(ee.some(e))}}})(H);return{...t,on:e=>t.get().each(e)}},Ia=e=>{e=e.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},Fa=e=>"html"!==Ia(e),Ua=e=>Fa(e.nodeName),za=e=>Ia(e.nodeName),ja=["svg","math"],Ha="data-mce-block",Va=e=>te((e=e,B(Pe(e),e=>!/[A-Z]/.test(e))),e=>{let t=CSS.escape(e);return t+":"+te(ja,e=>`not(${e} ${t})`).join(":")}).join(","),$a=(e,t)=>z(t.querySelector(e))?(t.setAttribute(Ha,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ha),!1),qa=(e,t)=>{let r=Va(e.getTransparentElements()),n=Va(e.getBlockElements());return B(t.querySelectorAll(r),e=>$a(n,e))},Wa=(t,r,e)=>{var n,a=e?"lastChild":"firstChild";for(let e=r[a];e;e=e[a])if(Oa(t,e,{checkRootAsContent:!0}))return void(null!=(n=e.parentNode)&&n.removeChild(e))},Ka=(l,e,t)=>{let r=l.getBlockElements(),n=W(e),a=e=>q(e)in r,o=e=>P(e,n);re(Tn(t),e=>{an(e,a,o).each(t=>{r=e;var r=B(Vr(r),e=>a(e)&&!l.isValidChild(q(t),q(e)));if(0<r.length){let e=Ir(t);re(r,i=>{an(i,a,o).each(e=>{var t,r,n,a,o;t=l,e=e.dom,r=i.dom,a=document.createRange(),(o=e.parentNode)&&(a.setStartBefore(e),a.setEndBefore(r),n=a.extractContents(),Wa(t,n,!0),a.setStartAfter(r),a.setEndAfter(e),a=a.extractContents(),Wa(t,a,!1),Oa(t,n,{checkRootAsContent:!0})||o.insertBefore(n,e),Oa(t,r,{checkRootAsContent:!0})||o.insertBefore(r,e),Oa(t,a,{checkRootAsContent:!0})||o.insertBefore(a,e),o.removeChild(e))})}),e.each(e=>qa(l,e.dom))}})})},Ya=(e,t)=>{var r,n=qa(e,t);Ka(e,t,n),r=e,e=t,t=n,re([...t,...Ja(r,e)?[e]:[]],e=>re(qn(W(e),e.nodeName.toLowerCase()),e=>{eo(r,e.dom)&&An(e)}))},Ga=(e,t)=>{Qa(e,t)&&(e=Va(e.getBlockElements()),$a(e,t))},Xa=e=>e.hasAttribute(Ha),Za=(e,t)=>ae(e.getTransparentElements(),t),Qa=(e,t)=>G(t)&&Za(e,t.nodeName),Ja=(e,t)=>Qa(e,t)&&Xa(t),eo=(e,t)=>Qa(e,t)&&!Xa(t),to=(e,t)=>1===t.type&&Za(e,t.name)&&Z(t.attr(Ha)),ro=Mt().browser,no=e=>be(e,rr),ao=(e,t)=>e.children&&V(e.children,t),oo=(e,d={})=>{let t=0,c={},r=W(e),u=Dr(r),m=e=>{K(Xr(r),e)},n=e=>{var t=Xr(r);dn(t,"#"+e).each(Y)},g=e=>w(c,e).getOrThunk(()=>({id:"mce-u"+t++,passed:[],failed:[],count:0})),a=s=>new Promise((e,t)=>{let r,n=oe._addCacheSuffix(s),a=g(n),o=((c[n]=a).count++,(e,t)=>{re(e,R),a.status=t,a.passed=[],a.failed=[],r&&(r.onload=null,r.onerror=null,r=null)}),i=()=>o(a.passed,2),l=()=>o(a.failed,3);e&&a.passed.push(e),t&&a.failed.push(t),1!==a.status&&(2===a.status?i():3===a.status?l():(a.status=1,e=Sr("link",u.dom),dr(e,{rel:"stylesheet",type:"text/css",id:a.id}),d.contentCssCors&&sr(e,"crossOrigin","anonymous"),d.referrerPolicy&&sr(e,"referrerpolicy",d.referrerPolicy),(r=e.dom).onload=i,r.onerror=l,m(e),sr(e,"href",n)))}),o=e=>{let t=oe._addCacheSuffix(e);w(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})};return{load:a,loadRawCss:(e,t)=>{var r=g(e),n=((c[e]=r).count++,Sr("style",u.dom));dr(n,{rel:"stylesheet",type:"text/css",id:r.id,"data-mce-key":e}),n.dom.innerHTML=t,m(n)},loadAll:e=>Promise.allSettled(te(e,e=>a(e).then(J(e)))).then(e=>{e=fe(e,e=>"fulfilled"===e.status);return 0<e.fail.length?Promise.reject(te(e.fail,e=>e.reason)):te(e.pass,e=>e.value)}),unload:o,unloadRawCss:t=>{w(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})},unloadAll:e=>{re(e,e=>{o(e)})},_setReferrerPolicy:e=>{d.referrerPolicy=e},_setContentCssCors:e=>{d.contentCssCors=e}}},io=(()=>{let n=new WeakMap;return{forElement:(e,t)=>{let r=Gr(e).dom;return ee.from(n.get(r)).getOrThunk(()=>{var e=oo(r,t);return n.set(r,e),e})}}})(),lo=(e,t)=>z(e)&&(Pa(t,e)||t.isInline(e.nodeName.toLowerCase())),so=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),co=(t,r,n,a)=>{var e,o,i,l=a||r;if(!G(r)||!so(r)){var s=r.childNodes;for(let e=s.length-1;0<=e;e--)co(t,s[e],n,l);if(G(r)){let e=r.childNodes;1!==e.length||!so(e[0])||null!=(a=r.parentNode)&&a.insertBefore(e[0],r)}a=r,va(a)||ha(a)||Pa(n,r)||(a=r,!!G(a)&&0<a.childNodes.length)||(a=r,e=l,o=n,D(a)&&0<a.data.length&&(a=a,e=e,o=o,i=new Gn(a,e).prev(!1),a=new Gn(a,e).next(!1),e=b(i)||lo(i,o),i=b(a)||lo(a,o),e)&&i)||t.remove(r)}return r},uo=oe.makeMap,mo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,go=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fo=/[<>&\"\']/g,po=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ho={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},vo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},bo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},yo=(e,r)=>{var n={};if(e){var a=e.split(",");r=r||10;for(let t=0;t<a.length;t+=2){var o=String.fromCharCode(parseInt(a[t],r));if(!vo[o]){let e="&"+a[t+1]+";";n[o]=e,n[e]=o}}return n}},Co=yo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),wo=(e,t)=>e.replace(t?mo:go,e=>vo[e]||e),Eo=(e,t)=>e.replace(t?mo:go,e=>1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":vo[e]||"&#"+e.charCodeAt(0)+";"),xo=(e,t,r)=>{let n=r||Co;return e.replace(t?mo:go,e=>vo[e]||n[e]||e)},_o={encodeRaw:wo,encodeAllRaw:e=>(""+e).replace(fo,e=>vo[e]||e),encodeNumeric:Eo,encodeNamed:xo,getEncodeFunc:(e,t)=>{let r=yo(t)||Co,n=uo(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?mo:go,e=>void 0!==vo[e]?vo[e]:void 0!==r[e]?r[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>xo(e,t,r):xo:n.numeric?Eo:wo},decode:e=>e.replace(po,(e,t)=>t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ho[t]||String.fromCharCode(t):bo[e]||Co[e]||(t=e,(e=Sr("div").dom).innerHTML=t,e.textContent)||e.innerText||t)},ko=(e,t)=>(e=oe.trim(e))?e.split(t||" "):[],So=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),No=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),Ro=e=>{let t,r;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(r=[r,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));e=[t,r].join(" ");return{blockContent:t,phrasingContent:r,flowContent:e}},Ao=e=>{var{blockContent:e,phrasingContent:t,flowContent:r}=Ro(e),n=e=>Object.freeze(e.split(" "));return Object.freeze({blockContent:n(e),phrasingContent:n(t),flowContent:n(r)})},To={html4:Je(()=>Ao("html4")),html5:Je(()=>Ao("html5")),"html5-strict":Je(()=>Ao("html5-strict"))},Oo=(e,t)=>{var{blockContent:e,phrasingContent:r,flowContent:n}=To[e]();return"blocks"===t?ee.some(e):"phrasing"===t?ee.some(r):"flow"===t?ee.some(n):ee.none()},Bo=e=>ee.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(e=>({preset:"@"===e[1],name:e[2]})),Po={},Do=oe.makeMap,Lo=oe.each,Mo=oe.extend,Io=oe.explode,Fo=(e,t={})=>{e=Do(e," ",Do(e.toUpperCase()," "));return Mo(e,t)},Uo=e=>Fo("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),zo=(e,n)=>{if(e){let r={};return Z(e)&&(e={"*":e}),Lo(e,(e,t)=>{r[t]=r[t.toUpperCase()]=("map"===n?Do:Io)(e,/[, ]/)}),r}},jo=(a={})=>{let e,i={},l={},o=[],t={},r={},n=(t,r,n)=>{var e=a[t];if(e)return Do(e,/[, ]/,Do(e.toUpperCase(),/[, ]/));{let e=Po[t];return e||(e=Fo(r,n),Po[t]=e),e}},s=null!=(e=a.schema)?e:"html5",d=(e=>{let l=No(e),{phrasingContent:t,flowContent:r}=Ro(e),i={},s=(e,t,r)=>{i[e]={attributes:ke(t,J({})),attributesOrder:t,children:ke(r,J({}))}},n=(e,t="",r="")=>{var n=ko(r),a=ko(e);let o=a.length;for(var i=[...l,...ko(t)];o--;)s(a[o],i.slice(),n)},a=(e,t)=>{var n=ko(e),a=ko(t);let o=n.length;for(;o--;){let r=i[n[o]];for(let e=0,t=a.length;e<t;e++)r.attributes[a[e]]={},r.attributesOrder.push(a[e])}};return"html5-strict"!==e&&(re(ko("acronym applet basefont big font strike tt"),e=>{n(e,"",t)}),re(ko("center dir isindex noframes"),e=>{n(e,"",r)})),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),n("dd div","",r),n("address dt caption","","html4"===e?t:r),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),n("blockquote","cite",r),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",r),n("dl","","dt dd"),n("a","href target rel media hreflang type","html4"===e?t:r),n("q","cite",t),n("ins del","cite datetime",r),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",r),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),n("param","name value"),n("map","name",[r,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",r),n("th","colspan rowspan headers scope abbr",r),n("form","accept-charset action autocomplete enctype method name novalidate target",r),n("fieldset","disabled form name",[r,"legend"].join(" ")),n("label","form for",t),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:t),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[r,"li"].join(" ")),n("noscript","",r),"html4"!==e&&(n("wbr"),n("ruby","",[t,"rt rp"].join(" ")),n("figcaption","",r),n("mark rt rp bdi","",t),n("summary","",[t,"h1 h2 h3 h4 h5 h6"].join(" ")),n("canvas","width height",r),n("data","value",t),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[t,"option"].join(" ")),n("article section nav aside main header footer","",r),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[r,"figcaption"].join(" ")),n("time","datetime",t),n("dialog","open",r),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",t),n("progress","value max",t),n("meter","value min max low high optimum",t),n("details","open",[r,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name"),s("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),"html4"!==e&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==e&&re([i.video,i.audio],e=>{delete e.children.audio,delete e.children.video}),re(ko("a form meter progress dfn"),e=>{i[e]&&delete i[e].children[e]}),delete i.caption.children.table,delete i.script,i})(s),c=(!1===a.verify_html&&(a.valid_elements="*[*]"),zo(a.valid_styles)),u=zo(a.invalid_styles,"map"),m=zo(a.valid_classes,"map"),g=n("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=n("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=n("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=n("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",b=n("non_empty_elements",v+" pre svg textarea summary",p),y=n("move_caret_before_on_enter_elements",v+" table",p),C="h1 h2 h3 h4 h5 h6",w=n("text_block_elements",C+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),E=n("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),x=n("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),_=n("transparent_elements","a ins del canvas map"),k=n("wrap_block_elements","pre "+C),S=(Lo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{r[e]=new RegExp("</"+e+"[^>]*>","gi")}),e=>{let t=ee.from(i["@"]),n=/[*?+]/;re(((i,e)=>{let t=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return we(ko(e,","),e=>{var d=t.exec(e);if(d){let e=d[1],t=d[2],r=d[3],n=d[4],a=d[5],o={attributes:{},attributesOrder:[]};if(i.each(e=>{return e=e,r=o,ne(e.attributes,(e,t)=>{r.attributes[t]=e}),void r.attributesOrder.push(...e.attributesOrder);var r}),"#"===e?o.paddEmpty=!0:"-"===e&&(o.removeEmpty=!0),"!"===n&&(o.removeEmptyAttrs=!0),a){d=a;var c=o;let t=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,i=/[*?+]/,{attributes:l,attributesOrder:s}=c;re(ko(d,"|"),e=>{var o=t.exec(e);if(o){let t={},e=o[1],r=o[2].replace(/[\\:]:/g,":"),n=o[3],a=o[4];if("!"===e&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(r),t.required=!0),"-"===e)delete l[r],s.splice(oe.inArray(s,r),1);else if(n&&("="===n?(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:r,value:a}),t.defaultValue=a):"~"===n?(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:r,value:a}),t.forcedValue=a):"<"===n&&(t.validValues=oe.makeMap(a,"?"))),i.test(r)){let e=t;c.attributePatterns=c.attributePatterns||[],e.pattern=So(r),c.attributePatterns.push(e)}else l[r]||s.push(r),l[r]=t}})}if(r&&(o.outputName=t),"@"===t){if(!i.isNone())return[];i=ee.some(o)}return[r?{name:t,element:o,aliasName:r}:{name:t,element:o}]}return[]})})(t,null!=e?e:""),({name:t,element:r,aliasName:e})=>{if(e&&(i[e]=r),n.test(t)){let e=r;e.pattern=So(t),o.push(e)}else i[t]=r})}),N=e=>{o=[],re(Pe(i),e=>{delete i[e]}),S(e)},R=(a,o)=>{var r;delete Po.text_block_elements,delete Po.block_elements;let e=!!o.extends&&!D(o.extends),n=o.extends;if(l[a]=n?l[n]:{},t[a]=null!=n?n:a,b[a.toUpperCase()]={},b[a]={},e||(E[a.toUpperCase()]={},E[a]={}),n&&!i[a]&&i[n]){let e=(e=>{let r=e=>{return Q(e)?te(e,r):(t=e,le(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(e.source,e.flags):le(e)?Le(e,r):e);var t};return r(e)})(i[n]);delete e.removeEmptyAttrs,delete e.removeEmpty,i[a]=e}else i[a]={attributesOrder:[],attributes:{}};if(Q(o.attributes)){let n=e=>{t.attributesOrder.push(e),t.attributes[e]={}},t=null!=(r=i[a])?r:{};delete t.attributesDefault,delete t.attributesForced,delete t.attributePatterns,delete t.attributesRequired,t.attributesOrder=[],t.attributes={},re(o.attributes,e=>{let r=No(s);Bo(e).each(({preset:e,name:t})=>{e?"global"===t&&re(r,n):n(t)})}),i[a]=t}if(de(o.padEmpty)){let e=null!=(r=i[a])?r:{};e.paddEmpty=o.padEmpty,i[a]=e}if(Q(o.children)){let t={},r=e=>{t[e]={}},n=e=>{Oo(s,e).each(e=>{re(e,r)})};re(o.children,e=>{Bo(e).each(({preset:e,name:t})=>{(e?n:r)(t)})}),l[a]=t}n&&ne(l,(e,t)=>{e[n]&&(l[t]=e=Mo({},l[t]),e[a]=e[n])})},A=e=>{le(e)?ne(e,(e,t)=>R(t,e)):Z(e)&&(e=e,re((e=>{let t=/^(~)?(.+)$/;return we(ko(e,","),e=>{e=t.exec(e);return e?[{cloneName:"~"===e[1]?"span":"div",name:e[2]}]:[]})})(null!=e?e:""),({name:e,cloneName:t})=>{R(e,{extends:t})}))},T=e=>{re((e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return we(ko(e,","),e=>{var r=t.exec(e);if(r){let e=r[1],t=e?"-"===e?"remove":"add":"replace";return[{operation:t,name:r[2],validChildren:we(ko(r[3],"|"),e=>Bo(e).toArray())}]}return[]})})(null!=e?e:""),({operation:t,name:e,validChildren:r})=>{let n="replace"===t?{"#comment":{}}:l[e],a=e=>{"remove"===t?delete n[e]:n[e]={}};re(r,({preset:e,name:t})=>{e?(e=t,Oo(s,e).each(e=>{re(e,a)})):a(t)}),l[e]=n})},O=t=>{let e=i[t];if(e)return e;let r=o.length;for(;r--;){let e=o[r];if(e.pattern.test(t))return e}},M=J(c),I=J(u),F=J(m),U=J(h),B=J(E),z=J(w),j=J(x),H=J(Object.seal(p)),V=J(f),$=J(b),q=J(y),W=J(g),K=J(_),Y=J(k),G=J(Object.seal(r)),P=(e,r)=>{var n=O(e);if(n){if(!r)return!0;{if(n.attributes[r])return!0;let t=n.attributePatterns;if(t){let e=t.length;for(;e--;)if(t[e].pattern.test(r))return!0}}}return!1},D=e=>ae(B(),e),L=e=>!lt(e,"#")&&P(e)&&!D(e),X=J(t);return a.valid_elements?(N(a.valid_elements),Lo(d,(e,t)=>{l[t]=e.children})):(Lo(d,(e,t)=>{i[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},l[t]=e.children}),Lo(ko("strong/b em/i"),e=>{e=ko(e,"/");i[e[1]].outputName=e[0]}),Lo(x,(e,t)=>{i[t]&&(a.padd_empty_block_inline_children&&(i[t].paddInEmptyBlock=!0),i[t].removeEmpty=!0)}),Lo(ko("ol ul blockquote a table tbody"),e=>{i[e]&&(i[e].removeEmpty=!0)}),Lo(ko("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{i[e]&&(i[e].paddEmpty=!0)}),Lo(ko("span"),e=>{i[e].removeEmptyAttrs=!0})),delete i.svg,A(a.custom_elements),T(a.valid_children),S(a.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),Lo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{i[t]&&(i[t].parentsRequired=ko(e))}),a.invalid_elements&&Lo(Io(a.invalid_elements),e=>{i[e]&&delete i[e]}),O("span")||S("span[!data-mce-type|*]"),{type:s,children:l,elements:i,getValidStyles:M,getValidClasses:F,getBlockElements:B,getInvalidStyles:I,getVoidElements:H,getTextBlockElements:z,getTextInlineElements:j,getBoolAttrs:U,getElementRule:O,getSelfClosingElements:V,getNonEmptyElements:$,getMoveCaretBeforeOnEnterElements:q,getWhitespaceElements:W,getTransparentElements:K,getSpecialElements:G,isValidChild:(e,t)=>{e=l[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:P,isBlock:D,isInline:L,isWrapper:e=>ae(Y(),e)||L(e),getCustomElements:X,addValidElements:S,setValidElements:N,addCustomElements:A,addValidChildren:T}},Ho=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Vo=e=>({value:(e=Ho(e.red)+Ho(e.green)+Ho(e.blue),ot(e,"#").toUpperCase())}),$o=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,qo=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Wo=(e,t,r,n)=>({red:parseInt(e,10),green:parseInt(t,10),blue:parseInt(r,10),alpha:parseFloat(n)}),Ko=e=>{var t=$o.exec(e);return null!==t?ee.some(Wo(t[1],t[2],t[3],"1")):null!==(t=qo.exec(e))?ee.some(Wo(t[1],t[2],t[3],t[4])):ee.none()},Yo=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Go=e=>Ko(e).map(Vo).map(e=>"#"+e.value).getOr(e),Xo=(h={},e)=>{let v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,y=/\s+$/,C={},t,l,w=Xn;e&&(t=e.getValidStyles(),l=e.getInvalidStyles());var r="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let e=0;e<r.length;e++)C[r[e]]=w+e,C[w+e]=r[e];let E={parse:e=>{let d={},r=!1,i=h.url_converter,l=h.url_converter_scope||E,t=(t,r,n)=>{var a=d[t+"-top"+r];if(a){var o=d[t+"-right"+r];if(o){var i=d[t+"-bottom"+r];if(i){var l=d[t+"-left"+r];if(l){var s=[a,o,i,l];let e=s.length-1;for(;e--&&s[e]===s[e+1];);-1<e&&n||(d[t+r]=-1===e?s[0]:s.join(" "),delete d[t+"-top"+r],delete d[t+"-right"+r],delete d[t+"-bottom"+r],delete d[t+"-left"+r])}}}}},n=t=>{var r=d[t];if(r){var n=-1<r.indexOf(",")?[r]:r.split(" ");let e=n.length;for(;e--;)if(n[e]!==n[0])return!1;return d[t]=n[0],!0}},a=e=>(r=!0,C[e]),s=(e,t)=>(r&&(e=e.replace(/\uFEFF[0-9]/g,e=>C[e])),e=t?e:e.replace(/\\([\'\";:])/g,"$1")),o=e=>String.fromCharCode(parseInt(e.slice(1),16)),c=e=>e.replace(/\\[0-9a-f]+/gi,o),u=(e,t,r,n,a,o)=>{if(a=a||o)return"'"+(a=s(a)).replace(/\'/g,"\\'")+"'";if(t=s(t||r||n||""),!h.allow_script_urls){let e=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(e))return"";if(!h.allow_svg_data_urls&&/^data:image\/svg/i.test(e))return""}return"url('"+(t=i?i.call(l,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,a).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,a));p=b.exec(e);){b.lastIndex=p.index+p[0].length;let e=p[1].replace(y,"").toLowerCase(),t=p[2].replace(y,"");e&&t&&(e=c(e),t=c(t),-1===e.indexOf(w))&&-1===e.indexOf('"')&&(h.allow_script_urls||"behavior"!==e&&!/expression\s*\(|\/\*|\*\//.test(t))&&("font-weight"===e&&"700"===t?t="bold":"color"!==e&&"background-color"!==e||(t=t.toLowerCase()),"rgb"==(p=t,$o.test(p)?"rgb":qo.test(p)?"rgba":"other")&&Ko(t).each(e=>{t=Go(Yo(e)).toLowerCase()}),t=t.replace(v,u),d[e]=r?s(t,!0):t)}t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),g="border-style",f="border-color",n(m="border-width")&&n(g)&&n(f)&&(d.border=d[m]+" "+d[g]+" "+d[f],delete d[m],delete d[g],delete d[f]),"medium none"===d.border&&delete d.border,"none"===d["border-image"]&&delete d["border-image"]}var m,g,f,p;return d},serialize:(a,o)=>{let i="";var e=(e,t)=>{var n=t[e];if(n)for(let r=0,e=n.length;r<e;r++){let e=n[r],t=a[e];t&&(i+=(0<i.length?" ":"")+e+": "+t+";")}};return o&&t?(e("*",t),e(o,t)):ne(a,(e,t)=>{var r,n,a;!e||(r=t,n=o,l&&n&&((a=l["*"])&&a[r]||(a=l[n])&&a[r]))||(i+=(0<i.length?" ":"")+t+": "+e+";")}),i}};return E},Zo={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Qo=(t,e)=>{var r=null!=e?e:{};for(let e in t)ae(Zo,e)||(r[e]=t[e]);return z(t.composedPath)&&(r.composedPath=()=>t.composedPath()),z(t.getModifierState)&&(r.getModifierState=e=>t.getModifierState(e)),z(t.getTargetRanges)&&(r.getTargetRanges=()=>t.getTargetRanges()),r},Jo=(e,t,r,n)=>{let a,o=Qo(t,n);return o.type=e,U(o.target)&&(o.target=null!=(a=o.srcElement)?a:r),n=t,(U(n.preventDefault)||(n=n)instanceof Event||j(n.initEvent))&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=S,j(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=S,j(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=S,o.stopPropagation()},(e=o).isDefaultPrevented!==S&&e.isDefaultPrevented!==h&&(o.isDefaultPrevented=!0===o.defaultPrevented?S:h,o.isPropagationStopped=!0===o.cancelBubble?S:h,o.isImmediatePropagationStopped=h)),o},ei=/^(?:mouse|contextmenu)|click/,ti=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},ri=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},ni=(a,e)=>{var o=Jo(a.type,a,document,e);if(e=a,z(e)&&ei.test(e.type)&&b(a.pageX)&&!b(a.clientX)){let e=o.target.ownerDocument||document,t=e.documentElement,r=e.body,n=o;n.pageX=a.clientX+(t&&t.scrollLeft||r&&r.scrollLeft||0)-(t&&t.clientLeft||r&&r.clientLeft||0),n.pageY=a.clientY+(t&&t.scrollTop||r&&r.scrollTop||0)-(t&&t.clientTop||r&&r.clientTop||0)}return o};class ai{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(a,e,o,i){let l=this,s,d=window,c=e=>{l.executeHandlers(ni(e||d.event),u)};if(!a||D(a)||pa(a))return o;let u;a[l.expando]?u=a[l.expando]:(u=l.count++,a[l.expando]=u,l.events[u]={}),i=i||a;var m=e.split(" ");let g=m.length;for(;g--;){let e=m[g],t=c,r=!1,n=!1;"DOMContentLoaded"===e&&(e="ready"),l.domLoaded&&"ready"===e&&"complete"===a.readyState?o.call(i,ni({type:e})):(l.hasFocusIn||"focusin"!==e&&"focusout"!==e||(r=!0,n="focusin"===e?"focus":"blur",t=e=>{e=ni(e||d.event);e.type="focus"===e.type?"focusin":"focusout",l.executeHandlers(e,u)}),(s=l.events[u][e])?"ready"===e&&l.domLoaded?o(ni({type:e})):s.push({func:o,scope:i}):(l.events[u][e]=s=[{func:o,scope:i}],s.fakeName=n,s.capture=r,s.nativeHandler=t,"ready"===e?((t,r,n)=>{let a=t.document,o={type:"ready"};if(n.domLoaded)r(o);else{let e=()=>{ri(t,"DOMContentLoaded",e),ri(t,"load",e),n.domLoaded||(n.domLoaded=!0,r(o)),t=null};"complete"===a.readyState||"interactive"===a.readyState&&a.body?e():ti(t,"DOMContentLoaded",e),n.domLoaded||ti(t,"load",e)}})(a,t,l):ti(a,n||e,t,r)))}return a=s=null,o}unbind(r,n,s){if(r&&!D(r)&&!pa(r)){let e=r[this.expando];if(e){let l=this.events[e];if(n){let e=n.split(" "),t=e.length;for(;t--;){let o=e[t],i=l[o];if(i){if(s){let a=i.length;for(;a--;)if(i[a].func===s){let e=i.nativeHandler,t=i.fakeName,r=i.capture,n=i.slice(0,a).concat(i.slice(a+1));n.nativeHandler=e,n.fakeName=t,n.capture=r,l[o]=n}}s&&0!==i.length||(delete l[o],ri(r,i.fakeName||o,i.nativeHandler,i.capture))}}}else ne(l,(e,t)=>{ri(r,e.fakeName||t,e.nativeHandler,e.capture)}),l={};for(let e in l)if(ae(l,e))return this;delete this.events[e];try{delete r[this.expando]}catch(n){r[this.expando]=null}}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(t,e,r){if(t&&!D(t)&&!pa(t)){var n=ni({type:e,target:t},r);do{let e=t[this.expando];e&&this.executeHandlers(n,e),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!n.isPropagationStopped())}return this}clean(t){if(t&&!D(t)&&!pa(t)&&(t[this.expando]&&this.unbind(t),t=t.getElementsByTagName?t:t.document)&&t.getElementsByTagName){this.unbind(t);var r=t.getElementsByTagName("*");let e=r.length;for(;e--;)(t=r[e])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(r,e){let t=this.events[e],n=t&&t[r.type];if(n)for(let t=0,e=n.length;t<e;t++){let e=n[t];if(e&&!1===e.func.call(e.scope,r)&&r.preventDefault(),r.isImmediatePropagationStopped())return}}}ai.Event=new ai;let oi=oe.each,ii=oe.grep,li="data-mce-style",si=oe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),di=(e,t,r)=>{U(r)||""===r?gr(e,t):sr(e,t,r)},ci=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),ui=(e,n)=>{let a=0;if(e)for(let t=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){let e=r.nodeType;n&&D(r)&&(e===t||!r.data.length)||(a++,t=e)}return a},mi=(e,t)=>{var r=cr(t,"style"),e=e.serialize(e.parse(r),q(t));di(t,li,e)},gi=(e,t,r)=>{t=ci(t);U(r)||""===r?En(e,t):hn(e,t,(e=r,r=t,y(e)?ae(si,r)?e+"":e+"px":e))},X=(l,i={})=>{let r={},e=window,a={},M=0,o=io.forElement(W(l),{contentCssCors:i.contentCssCors,referrerPolicy:i.referrerPolicy}),s=[],d=i.schema||jo({}),n=Xo({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),c=i.ownEvents?new ai:ai.Event,t=d.getBlockElements(),u=e=>e&&l&&Z(e)?l.getElementById(e):e,m=e=>{e=u(e);return z(e)?W(e):null},g=(e,t,r="")=>{let n;var a=m(e);if(z(a)&&rr(a)){let e=F[t];n=e&&e.get?e.get(a.dom,t):cr(a,t)}return z(n)?n:r},f=e=>{e=u(e);return U(e)?[]:e.attributes},p=(e,a,o)=>{x(e,e=>{var t,r,n;G(e)&&(e=W(e),t=""===o?null:o,r=cr(e,a),(n=F[a])&&n.set?n.set(e.dom,t,a):di(e,a,t),r!==t)&&i.onSetAttrib&&i.onSetAttrib({attrElm:e.dom,attrName:a,attrValue:t})})},h=()=>i.root_element||l.body,v=(a,o)=>{{var i=l.body,e=(a=u(a),o);let r=0,n=0;if(o=i.ownerDocument,e=e||i,a){if(e===i&&a.getBoundingClientRect&&"static"===bn(W(i),"position")){let e=a.getBoundingClientRect();return r=e.left+(o.documentElement.scrollLeft||i.scrollLeft)-o.documentElement.clientLeft,n=e.top+(o.documentElement.scrollTop||i.scrollTop)-o.documentElement.clientTop,{x:r,y:n}}let t=a;for(;t&&t!==e&&t.nodeType&&!ao(t,e);){let e=t;r+=e.offsetLeft||0,n+=e.offsetTop||0,t=e.offsetParent}for(t=a.parentNode;t&&t!==e&&t.nodeType&&!ao(t,e);)r-=t.scrollLeft||0,n-=t.scrollTop||0,t=t.parentNode;n+=(i=W(a),ro.isFirefox()&&"table"===q(i)?no(Vr(i)).filter(e=>"caption"===q(e)).bind(n=>no(Hr(n)).map(e=>{var e=e.dom.offsetTop,t=n.dom.offsetTop,r=n.dom.offsetHeight;return e<=t?-r:0})).getOr(0):0)}return{x:r,y:n}}},b=(e,t,r)=>{var n,e=u(e);if(!U(e)&&(oa(e)||G(n=e)&&"http://www.w3.org/2000/svg"===n.namespaceURI))return r?bn(W(e),ci(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),e.style?e.style[t]:void 0)},y=e=>{e=u(e);if(!e)return{w:0,h:0};let t=b(e,"width"),r=b(e,"height");return t&&-1!==t.indexOf("px")||(t="0"),r&&-1!==r.indexOf("px")||(r="0"),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},C=(e,t)=>!!e&&(e=Q(e)?e:[e],$(e,e=>Tr(W(e),t))),w=(e,r,t,n)=>{var a=[];let o=u(e);n=void 0===n;var i=t||("BODY"!==h().nodeName?h().parentNode:null);if(Z(r))if("*"===r)r=G;else{let t=r;r=e=>C(e,t)}for(;o&&!(o===i||U(o.nodeType)||ha(o)||va(o));){if(!r||r(o)){if(!n)return[o];a.push(o)}o=o.parentNode}return n?a:null},E=(t,r,n)=>{let a=r;if(t){Z(r)&&(a=e=>C(e,r));for(let e=t[n];e;e=e[n])if(j(a)&&a(e))return e}return null},x=function(t,n,e){let a=null!=e?e:this;if(Q(t)){let r=[];return oi(t,(e,t)=>{e=u(e);e&&r.push(n.call(a,e,t))}),r}{let e=u(t);return!!e&&n.call(a,e)}},_=(e,t)=>{x(e,r=>{ne(t,(e,t)=>{p(r,t,e)})})},k=(e,t)=>{x(e,e=>{e=W(e);Bn(e,t)})},S=(e,r,n,a,o)=>x(e,e=>{var t=Z(r)?l.createElement(r):r;return z(n)&&_(t,n),a&&(!Z(a)&&a.nodeType?t.appendChild(a):Z(a)&&k(t,a)),o?t:e.appendChild(t)}),N=(e,t,r)=>S(l.createElement(e),e,t,r,!0),R=_o.encodeAllRaw,A=(e,r)=>x(e,e=>{let t=W(e);return r&&re(Vr(t),e=>{nr(e)&&0===e.dom.length?Y(e):xn(t,e)}),Y(t),t.dom}),T=(e,n,a)=>{x(e,r=>{if(G(r)){let t=W(r),e=n.split(" ");re(e,e=>{(z(a)?a?Cr:Er:(e,t)=>{var r;hr(e)?e.dom.classList.toggle(t):(r=e,t=t,(V(vr(r),t)?yr:br)(r,t));wr(e)})(t,e)})}})},O=(n,a,o)=>x(a,e=>{let t,r=Q(a)?n.cloneNode(!0):n;return o&&oi(ii(e.childNodes),e=>{r.appendChild(e)}),null!=(t=e.parentNode)&&t.replaceChild(r,e),e}),B=()=>l.createRange(),P=(r,n,a,o)=>{if(Q(r)){let e=r.length,t=[];for(;e--;)t[e]=P(r[e],n,a,o);return t}return!i.collect||r!==l&&r!==e||s.push([r,n,a,o]),c.bind(r,n,a,o||L)},D=(a,o,i)=>{if(Q(a)){let e=a.length,t=[];for(;e--;)t[e]=D(a[e],o,i);return t}if(0<s.length&&(a===l||a===e)){let n=s.length;for(;n--;){let[e,t,r]=s[n];a!==e||o&&o!==t||i&&i!==r||c.unbind(e,t,r)}}return c.unbind(a,o,i)},I=e=>{var t;return e&&oa(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},L={doc:l,settings:i,win:e,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:o,boundEvents:s,styles:n,schema:d,events:c,isBlock:e=>Z(e)?ae(t,e):G(e)&&(ae(t,e.nodeName)||Ja(d,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:h,getViewPort:e=>{e=Vn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:e=>{var e=u(e),t=v(e),e=y(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:y,getParent:(e,t,r)=>{e=w(e,t,r,!1);return e&&0<e.length?e[0]:null},getParents:w,get:u,getNext:(e,t)=>E(e,t,"nextSibling"),getPrev:(e,t)=>E(e,t,"previousSibling"),select:(e,t)=>{t=null!=(t=null!=(t=u(t))?t:i.root_element)?t:l;return j(t.querySelectorAll)?Te(t.querySelectorAll(e)):[]},is:C,add:S,create:N,createHTML:(e,t,r="")=>{let n="<"+e;for(let e in t)He(t,e)&&(n+=" "+e+'="'+R(t[e])+'"');return ft(r)&&ae(d.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var t,r=l.createElement("div"),n=l.createDocumentFragment();for(n.appendChild(r),e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n.removeChild(r),n},remove:A,setStyle:(e,t,r)=>{x(e,e=>{e=W(e);gi(e,t,r),i.update_styles&&mi(n,e)})},getStyle:b,setStyles:(e,t)=>{x(e,e=>{let r=W(e);ne(t,(e,t)=>{gi(r,t,e)}),i.update_styles&&mi(n,r)})},removeAllAttribs:e=>x(e,t=>{var r=t.attributes;for(let e=r.length-1;0<=e;e--)t.removeAttributeNode(r.item(e))}),setAttrib:p,setAttribs:_,getAttrib:g,getPos:v,parseStyle:e=>n.parse(e),serializeStyle:(e,t)=>n.serialize(e,t),addStyle:e=>{if(L!==X.DOM&&l===document){if(r[e])return;r[e]=!0}let t=l.getElementById("mceDefaultStyles");if(!t){(t=l.createElement("style")).id="mceDefaultStyles",t.type="text/css";let e=l.head;e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(l.createTextNode(e))},loadCSS:e=>{e=e||"",re(e.split(","),e=>{a[e]=!0,o.load(e).catch(H)})},addClass:(e,t)=>{T(e,t,!0)},removeClass:(e,t)=>{T(e,t,!1)},hasClass:(e,t)=>{let r=m(e),n=t.split(" ");return z(r)&&Ee(n,e=>xr(r,e))},toggleClass:T,show:e=>{x(e,e=>En(W(e),"display"))},hide:e=>{x(e,e=>hn(W(e),"display","none"))},isHidden:e=>{e=m(e);return z(e)&&qt(Cn(e,"display"),"none")},uniqueId:e=>(e||"mce_")+M++,setHTML:k,getOuterHTML:e=>{var t,e=m(e);return z(e)?G(e.dom)?e.dom.outerHTML:(e=e,t=Sr("div"),e=W(e.dom.cloneNode(!0)),K(t,e),On(t)):""},setOuterHTML:(e,t)=>{x(e,e=>{G(e)&&(e.outerHTML=t)})},decode:_o.decode,encode:R,insertAfter:(e,t)=>{let n=u(t);return x(e,e=>{var t=null==n?void 0:n.parentNode,r=null==n?void 0:n.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},replace:O,rename:(r,e)=>{if(r.nodeName===e.toUpperCase())return r;{let t=N(e);return oi(f(r),e=>{p(t,e.nodeName,g(r,e.nodeName))}),O(t,r,!0),t}},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:x,getAttribs:f,isEmpty:(e,t,r)=>se(t)?Oa(d,e,{...r,isContent:e=>{e=e.nodeName.toLowerCase();return Boolean(t[e])}}):Oa(d,e,r),createRng:B,nodeIndex:ui,split:(e,t,r)=>{let n,a,o=B();var i;if(e&&t&&e.parentNode&&t.parentNode)return i=e.parentNode,o.setStart(i,ui(e)),o.setEnd(t.parentNode,ui(t)),n=o.extractContents(),(o=B()).setStart(t.parentNode,ui(t)+1),o.setEnd(i,ui(e)+1),a=o.extractContents(),i.insertBefore(co(L,n,d),e),r?i.insertBefore(r,e):i.insertBefore(t,e),i.insertBefore(co(L,a,d),e),A(e),r||t},bind:P,unbind:D,fire:(e,t,r)=>c.dispatch(e,t,r),dispatch:(e,t,r)=>c.dispatch(e,t,r),getContentEditable:I,getContentEditableParent:t=>{var r=h();let n=null;for(let e=t;e&&e!==r&&null===(n=I(e));e=e.parentNode);return n},isEditable:e=>!!z(e)&&(e=G(e)?e:e.parentElement,z(e))&&oa(e)&&un(W(e)),destroy:()=>{if(0<s.length){let e=s.length;for(;e--;){var[t,r,n]=s[e];c.unbind(t,r,n)}}ne(a,(e,t)=>{o.unload(t),delete a[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},F=((r,a,o)=>{let n=a.keep_values,e={set:(e,t,r)=>{var n=W(e);j(a.url_converter)&&z(t)&&(t=a.url_converter.call(a.url_converter_scope||o(),String(t),r,e)),di(n,"data-mce-"+r,t),di(n,r,t)},get:(e,t)=>{e=W(e);return cr(e,"data-mce-"+t)||cr(e,t)}},t={style:{set:(e,t)=>{e=W(e);n&&di(e,li,t),gr(e,"style"),Z(t)&&vn(e,r.parse(t))},get:e=>{var e=W(e),t=cr(e,li)||cr(e,"style");return r.serialize(r.parse(t),q(e))}}};return n&&(t.href=t.src=e),t})(n,i,J(L));return L},fi=(X.DOM=X(document),X.nodeIndex=ui,X.DOM);class pi{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(i){return new Promise((e,t)=>{let r=fi,n,a=()=>{r.remove(o),n&&(n.onerror=n.onload=n=null)},o=r.uniqueId();(n=document.createElement("script")).id=o,n.type="text/javascript",n.src=oe._addCacheSuffix(i),this.settings.referrerPolicy&&r.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{a(),e()},n.onerror=()=>{a(),t("Failed to load script: "+i)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(r){let n=this;return n.queue.push(r),void 0===n.states[r]&&(n.states[r]=0),new Promise((e,t)=>{n.scriptLoadedCallbacks[r]||(n.scriptLoadedCallbacks[r]=[]),n.scriptLoadedCallbacks[r].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){let n=this,r=(t,r)=>{w(n.scriptLoadedCallbacks,r).each(e=>{re(e,e=>e[t](r))}),delete n.scriptLoadedCallbacks[r]},a=e=>{e=B(e,e=>"rejected"===e.status);return 0<e.length?Promise.reject(we(e,({reason:e})=>Q(e)?e:[e])):Promise.resolve()},o=e=>Promise.allSettled(te(e,t=>2===n.states[t]?(r("resolve",t),Promise.resolve()):3===n.states[t]?(r("reject",t),Promise.reject(t)):(n.states[t]=1,n.loadScript(t).then(()=>{n.states[t]=2,r("resolve",t);var e=n.queue;return 0<e.length?(n.queue=[],o(e).then(a)):Promise.resolve()},()=>(n.states[t]=3,r("reject",t),Promise.reject(t)))))),i=e=>(n.loading=!0,o(e).then(e=>{n.loading=!1;var t=n.queueLoadedCallbacks.shift();return ee.from(t).each(R),a(e)})),l=Ve(e);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>{i(l).then(e,t)})}):i(l)}}pi.ScriptLoader=new pi;let hi={},vi=Da("en"),bi=()=>w(hi,vi.get()),yi={getData:()=>Le(hi,e=>({...e})),setCode:e=>{e&&vi.set(e)},getCode:()=>vi.get(),add:(e,i)=>{let l=hi[e],s=(l||(hi[e]=l={}),te(Pe(i),e=>e.toLowerCase()));ne(i,(e,t)=>{var r,n,a,o=t.toLowerCase();o!==t&&(r=s,n=o,-1!==(a=r.indexOf(n)))&&r.indexOf(n,a+1)>a?(ae(i,o)||(l[o]=e),l[t]=e):l[o]=e})},translate:e=>{let t=bi().getOr({}),n=e=>j(e)?Object.prototype.toString.call(e):r(e)?"":""+e,r=e=>""===e||null==e,a=e=>{e=n(e);return ae(t,e)?n(t[e]):w(t,e.toLowerCase()).map(n).getOr(e)},o=e=>e.replace(/{context:\w+}$/,"");if(r(e))return"";if(le(i=e)&&ae(i,"raw"))return n(e.raw);var i;if(i=e,Q(i)&&1<i.length){let r=e.slice(1);return o(a(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>ae(r,t)?n(r[t]):e))}return o(a(e))},isRtl:()=>bi().bind(e=>w(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>ae(hi,e)},Ci=()=>{let r=[],n={},a={},o=[],i=(t,r)=>{var e=B(o,e=>e.name===t&&e.state===r);re(e,e=>e.resolve())},l=e=>ae(n,e),s=(e,t)=>{var r=yi.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||pi.ScriptLoader.add(n[e]+"/langs/"+r+".js")},d=(t,r="added")=>{return"added"===r&&(e=t,ae(a,e))||"loaded"===r&&l(t)?Promise.resolve():new Promise(e=>{o.push({name:t,state:r,resolve:e})});var e};return{items:r,urls:n,lookup:a,get:e=>{if(a[e])return a[e].instance},requireLangPack:(e,t)=>{!1!==Ci.languageLoad&&(l(e)?s(e,t):d(e,"loaded").then(()=>s(e,t)))},add:(e,t)=>(r.push(t),a[e]={instance:t},i(e,"added"),t),remove:e=>{delete n[e],delete a[e]},createUrl:(e,t)=>Z(t)?Z(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,t)=>{if(n[e])return Promise.resolve();let r=Z(t)?t:t.prefix+t.resource+t.suffix;0!==r.indexOf("/")&&-1===r.indexOf("://")&&(r=Ci.baseURL+"/"+r),n[e]=r.substring(0,r.lastIndexOf("/"));t=()=>(i(e,"loaded"),Promise.resolve());return a[e]?t():pi.ScriptLoader.add(r).then(t)},waitFor:d}},wi=(Ci.languageLoad=!0,Ci.baseURL="",Ci.PluginManager=Ci(),Ci.ThemeManager=Ci(),Ci.ModelManager=Ci(),(t,r)=>{let n=null;return{cancel:()=>{I(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{I(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}}),Ei=(t,r)=>{let n=null,a=()=>{I(n)||(clearTimeout(n),n=null)};return{cancel:a,throttle:(...e)=>{a(),n=setTimeout(()=>{n=null,t.apply(null,e)},r)}}},xi=J("mce-annotation"),_i=J("data-mce-annotation"),ki=J("data-mce-annotation-uid"),Si=J("data-mce-annotation-active"),Ni=J("data-mce-annotation-classes"),Ri=J("data-mce-annotation-attrs"),Ai=t=>e=>P(e,t),Ti=(n,e)=>{var t=n.selection.getRng(),r=W(t.startContainer),a=W(n.getBody()),e=e.fold(()=>"."+xi(),e=>`[${_i()}="${e}"]`),t=$r(r,t.startOffset).getOr(r);return cn(t,e,Ai(a)).bind(e=>ur(e,""+ki()).bind(r=>ur(e,""+_i()).map(e=>{var t=Bi(n,r);return{uid:r,name:e,elements:t}})))},Oi=(e,t)=>mr(e,"data-mce-bogus")||(e=e,t=Ai(t),sn(e,'[data-mce-bogus="all"]',t).isSome()),Bi=(e,t)=>{let r=W(e.getBody()),n=qn(r,`[${ki()}="${t}"]`);return B(n,e=>!Oi(e,r))},Pi=(e,t)=>{let n=W(e.getBody()),r=qn(n,`[${_i()}="${t}"]`),a={};return re(r,r=>{if(!Oi(r,n)){let e=cr(r,ki()),t=w(a,e).getOr([]);a[e]=t.concat([r])}}),a},Di=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,Li=0,Mi=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Di())+ ++Li+String(t)},Ii=(e,t)=>W(e.dom.cloneNode(t)),Fi=e=>Ii(e,!1),Ui=e=>Ii(e,!0),zi=(e,t,r=h)=>{let n=new Gn(e,t),a=e=>{let t;for(;(t=n[e]())&&!D(t)&&!r(t););return ee.from(t).filter(D)};return{current:()=>ee.from(n.current()).filter(D),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},ji=(o,e)=>{let i=e||(e=>o.isBlock(e)||L(e)||E(e)),l=(t,r,n,a)=>{if(D(t)){let e=a(t,r,t.data);if(-1!==e)return ee.some({container:t,offset:e})}return n().bind(e=>l(e.container,e.offset,n,a))};return{backwards:(e,t,r,n)=>{let a=zi(e,null!=n?n:o.getRoot(),i);return l(e,t,()=>a.prev().map(e=>({container:e,offset:e.length})),r).getOrNull()},forwards:(e,t,r,n)=>{let a=zi(e,null!=n?n:o.getRoot(),i);return l(e,t,()=>a.next().map(e=>({container:e,offset:0})),r).getOrNull()}}},Hi=(r=>{let t=e=>r(e)?ee.from(e.dom.nodeValue):ee.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(nr),Vi=e=>Hi.get(e),$i=(e,t)=>Hi.set(e,t),qi=t=>{let r;return e=>(r=r||ke(t,S),ae(r,q(e)))},Wi=e=>rr(e)&&"br"===q(e),Ki=qi(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Yi=qi(["ul","ol","dl"]),Gi=qi(["li","dd","dt"]),Xi=qi(["thead","tbody","tfoot"]),Zi=qi(["td","th"]),Qi=qi(["pre","script","textarea","style"]),Ji=()=>{var e=Sr("br");return sr(e,"data-mce-bogus","1"),e},el=e=>{Rn(e),K(e,Ji())},tl=Xn,rl=Qn,nl=e=>e.replace(/\uFEFF/g,""),al=G,ol=D,il=e=>(ol(e)&&(e=e.parentNode),al(e)&&e.hasAttribute("data-mce-caret")),ll=e=>ol(e)&&rl(e.data),sl=e=>il(e)||ll(e),dl=e=>e.firstChild!==e.lastChild||!L(e.firstChild),cl=e=>{var t=e.container();return!!D(t)&&(t.data.charAt(e.offset())===tl||e.isAtStart()&&ll(t.previousSibling))},ul=e=>{var t=e.container();return!!D(t)&&(t.data.charAt(e.offset()-1)===tl||e.isAtEnd()&&ll(t.nextSibling))},ml=e=>ol(e)&&e.data[0]===tl,gl=e=>ol(e)&&e.data[e.data.length-1]===tl,fl=e=>{return e&&e.hasAttribute("data-mce-caret")?(r=(r=e.getElementsByTagName("br"))[r.length-1],da(r)&&null!=(t=r.parentNode)&&t.removeChild(r),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r},pl=e=>il(e.startContainer),hl=Math.round,vl=e=>e?{left:hl(e.left),top:hl(e.top),bottom:hl(e.bottom),right:hl(e.right),width:hl(e.width),height:hl(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},bl=(e,t)=>(e=vl(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),yl=(e,t,r)=>0<=e&&e<=Math.min(t.height,r.height)/2,Cl=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&yl(t.top-e.bottom,e,t)},wl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&yl(t.bottom-e.top,e,t),El=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),e=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-e)*(r-e))},xl=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},_l=(e,t)=>{var r,n;return G(e)&&e.hasChildNodes()?(r=e.childNodes,n=r.length-1,r[Math.min(Math.max(t,0),n)]):e},kl=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Sl=e=>Z(e)&&768<=e.charCodeAt(0)&&kl.test(e),Nl=ya,Rl=E,Al=L,Tl=D,Ol=la(["script","style","textarea"]),Bl=la(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Pl=la(["table"]),Dl=sl,Ll=e=>!Dl(e)&&(Tl(e)?!Ol(e.parentNode):Bl(e)||Al(e)||Pl(e)||Ml(e)),Ml=e=>{return t=e,!(G(t)&&"true"===t.getAttribute("unselectable"))&&Rl(e);var t},Il=(r,e)=>Ll(r)&&(t=>{for(let e=r.parentNode;e&&e!==t;e=e.parentNode){if(Ml(e))return!1;if(Nl(e))return!0}return!0})(e),Fl=G,Ul=Ll,zl=sa("display","block table"),jl=sa("float","left right"),Hl=(tn=[Fl,Ul,ce(jl)],t=>{for(let e=0;e<tn.length;e++)if(!tn[e](t))return!1;return!0}),Vl=ce(sa("white-space","pre pre-line pre-wrap")),$l=D,ql=L,Wl=X.nodeIndex,Kl=(e,t)=>t<0&&G(e)&&e.hasChildNodes()?void 0:_l(e,t),Yl=e=>e?e.createRange():X.DOM.createRng(),Gl=e=>Z(e)&&/[\r\n\t ]/.test(e),Xl=e=>!!e.setStart&&!!e.setEnd,Zl=e=>{var t=e.startContainer,r=e.startOffset;if(Gl(e.toString())&&Vl(t.parentNode)&&D(t)){let e=t.data;if(Gl(e[r-1])||Gl(e[r+1]))return!0}return!1},Ql=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Jl=e=>{var t,r,n,a,o=e.getClientRects(),o=0<o.length?vl(o[0]):vl(e.getBoundingClientRect());return!Xl(e)&&ql(e)&&Ql(o)?(r=(t=e).ownerDocument,n=Yl(r),r=r.createTextNode(Zn),(a=t.parentNode).insertBefore(r,t),n.setStart(r,0),n.setEnd(r,1),t=vl(n.getBoundingClientRect()),a.removeChild(r),t):Ql(o)&&Xl(e)&&null!=(n=(t=>{let e=t.startContainer,r=t.endContainer,n=t.startOffset,a=t.endOffset;if(e===r&&D(r)&&0===n&&1===a){let e=t.cloneRange();return e.setEndAfter(r),Jl(e)}return null})(e))?n:o},es=(e,t)=>{e=bl(e,t);return e.width=1,e.right=e.left+1,e},M=(t,r,e)=>{let n=()=>e=e||(e=>{let n=[],a=e=>{var t,r;0===e.height||0<n.length&&(t=e,r=n[n.length-1],t.left===r.left)&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right||n.push(e)},t=(e,t)=>{var r=Yl(e.ownerDocument);if(t<e.data.length){if(Sl(e.data[t]))return;if(Sl(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!Zl(r)))return void a(es(Jl(r),!1))}0<t&&(r.setStart(e,t-1),r.setEnd(e,t),Zl(r)||a(es(Jl(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),Zl(r)||a(es(Jl(r),!0)))},r=e.container(),o=e.offset();if($l(r))t(r,o);else if(Fl(r))if(e.isAtEnd()){let e=Kl(r,o);$l(e)&&t(e,e.data.length),Hl(e)&&!ql(e)&&a(es(Jl(e),!1))}else{var i=Kl(r,o);if($l(i)&&t(i,0),Hl(i)&&e.isAtEnd())return a(es(Jl(i),!1)),n;e=Kl(e.container(),e.offset()-1);!Hl(e)||ql(e)||!zl(e)&&!zl(i)&&Hl(i)||a(es(Jl(e),!1)),Hl(i)&&a(es(Jl(i),!0))}return n})(M(t,r));return{container:J(t),offset:J(r),toRange:()=>{var e=Yl(t.ownerDocument);return e.setStart(t,r),e.setEnd(t,r),e},getClientRects:n,isVisible:()=>0<n().length,isAtStart:()=>($l(t),0===r),isAtEnd:()=>$l(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:e=>e&&t===e.container()&&r===e.offset(),getNode:e=>Kl(t,e?r-1:r)}},ts=(M.fromRangeStart=e=>M(e.startContainer,e.startOffset),M.fromRangeEnd=e=>M(e.endContainer,e.endOffset),M.after=e=>M(e.parentNode,Wl(e)+1),M.before=e=>M(e.parentNode,Wl(e)),M.isAbove=(e,t)=>Kt(Re(t.getClientRects()),Ae(e.getClientRects()),Cl).getOr(!1),M.isBelow=(e,t)=>Kt(Ae(t.getClientRects()),Re(e.getClientRects()),wl).getOr(!1),M.isAtStart=e=>!!e&&e.isAtStart(),M.isAtEnd=e=>!!e&&e.isAtEnd(),M.isTextPosition=e=>!!e&&D(e.container()),M.isElementPosition=e=>!M.isTextPosition(e),(e,t)=>{D(t)&&0===t.data.length&&e.remove(t)}),rs=(e,t,r)=>{var n,a,o,i,l;va(r)?(n=e,a=t,o=r,i=ee.from(o.firstChild),l=ee.from(o.lastChild),a.insertNode(o),i.each(e=>ts(n,e.previousSibling)),l.each(e=>ts(n,e.nextSibling))):(a=e,o=r,t.insertNode(o),ts(a,o.previousSibling),ts(a,o.nextSibling))},ns=D,as=da,os=X.nodeIndex,is=e=>{e=e.parentNode;return as(e)?is(e):e},ls=e=>e?Xe(e.childNodes,(e,t)=>(as(t)&&"BR"!==t.nodeName?e=e.concat(ls(t)):e.push(t),e),[]):[],ss=t=>e=>t===e,ds=e=>(ns(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let n,t;n=ls(is(e)),t=Ze(n,ss(e),e),n=n.slice(0,t+1);var r=Xe(n,(e,t,r)=>(ns(t)&&ns(n[r-1])&&e++,e),0);return n=Ge(n,la([e.nodeName])),Ze(n,ss(e),e)-r})(e)+"]",cs=(e,t)=>{let r,n=[],a=t.container(),o=t.offset();if(ns(a))r=((e,t)=>{let r=e;for(;(r=r.previousSibling)&&ns(r);)t+=r.data.length;return t})(a,o);else{let e=a.childNodes;o>=e.length?(r="after",o=e.length-1):r="before",a=e[o]}n.push(ds(a));t=(t=>{var r=[];for(let e=a.parentNode;e&&e!==t;e=e.parentNode)r.push(e);return r})(e),t=Ge(t,ce(da));return(n=n.concat(Ye(t,e=>ds(e)))).reverse().join("/")+","+r},us=(e,r)=>{if(!r)return null;var r=r.split(","),n=r[0].split("/"),r=1<r.length?r[1]:"before",n=Xe(n,(e,t)=>{t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(t){"text()"===t[1]&&(t[1]="#text");{var n=t[1],t=parseInt(t[2],10);let r=ls(e);return r=Ge(r,(e,t)=>!ns(e)||!ns(r[t-1])),(r=Ge(r,la([n])))[t]}}return null},e);if(!n)return null;if(!ns(n)&&n.parentNode)return e="after"===r?os(n)+1:os(n),M(n.parentNode,e);{var a=n;var o=parseInt(r,10);let e=a,t=0;for(;ns(e);){var i=e.data.length;if(o>=t&&o<=t+i){a=e,o-=t;break}if(!ns(e.nextSibling)){a=e,o=i;break}t+=i,e=e.nextSibling}return ns(a)&&o>a.data.length&&(o=a.data.length),M(a,o);return}},ms=E,gs=(r,e,n,t,a)=>{var o=a?t.startContainer:t.endContainer;let i=a?t.startOffset:t.endOffset;var l=[],s=r.getRoot();if(D(o))l.push(n?((t,r,e)=>{let n=t(r.data.slice(0,e)).length;for(let e=r.previousSibling;e&&D(e);e=e.previousSibling)n+=t(e.data).length;return n})(e,o,i):i);else{let e=0,t=o.childNodes;i>=t.length&&t.length&&(e=1,i=Math.max(0,t.length-1)),l.push(r.nodeIndex(t[i],n)+e)}for(let e=o;e&&e!==s;e=e.parentNode)l.push(r.nodeIndex(e,n));return l},fs=(e,t,r)=>{let n=0;return oe.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++),n},ps=(e,t)=>{var r,n=t?e.startContainer:e.endContainer,a=t?e.startOffset:e.endOffset;G(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(t?a:a-1,r.length-1)])&&(a=t?0:n.childNodes.length,t?e.setStart(n,a):e.setEnd(n,a))},hs=e=>(ps(e,!0),ps(e,!1),e),vs=(e,t)=>G(e)&&(e=_l(e,t),ms(e))?e:sl(e)&&(t=(e=D(e)&&il(e)?e.parentNode:e).previousSibling,ms(t)||(t=e.nextSibling,ms(t)))?t:void 0,bs=(e,t,r)=>{var n=r.getNode(),a=r.getRng();if("IMG"===n.nodeName||ms(n)){let e=n.nodeName;return{name:e,index:fs(r.dom,e,n)}}n=a;var o,i,l,n=vs(n.startContainer,n.startOffset)||vs(n.endContainer,n.endOffset);if(n){let e=n.tagName;return{name:e,index:fs(r.dom,e,n)}}return n=e,e=t,t=a,r=(a=r).dom,o=gs(r,n,e,t,!0),i=a.isForward(),l=pl(t)?{isFakeCaret:!0}:{},a.isCollapsed()?{start:o,forward:i,...l}:{start:o,end:gs(r,n,e,t,!1),forward:i,...l}},ys=(e,t,r)=>{t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",t,"&#xFEFF;"):e.create("span",t)},Cs=(e,t)=>{var r=e.dom;let n=e.getRng();var a=r.uniqueId(),o=e.isCollapsed(),i=e.getNode(),l=i.nodeName,s=e.isForward();if("IMG"===l)return{name:l,index:fs(r,l,i)};l=hs(n.cloneRange());if(!o){l.collapse(!1);let e=ys(r,a+"_end",t);rs(r,l,e)}(n=hs(n)).collapse(!0);i=ys(r,a+"_start",t);return rs(r,n,i),e.moveToBookmark({id:a,keep:!0,forward:s}),{id:a,forward:s}},ws=C(bs,f,!0),Es=r=>{let e=e=>e(r),t=J(r),n=()=>a,a={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:S,isError:h,map:e=>_s.value(e(r)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(r)},toOptional:()=>ee.some(r)};return a},xs=r=>{let e=()=>t,t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:h,isError:S,map:e,mapError:e=>_s.error(e(r)),bind:e,exists:h,forall:S,getOr:f,or:f,getOrThunk:N,orThunk:N,getOrDie:g(String(r)),each:H,toOptional:ee.none};return t},_s={value:Es,error:xs,fromOption:(e,t)=>e.fold(()=>xs(t),Es)},ks=o=>{if(!Q(o))throw new Error("cases must be an array");if(0===o.length)throw new Error("there must be at least one case");let i=[],l={};return re(o,(e,t)=>{var r=Pe(e);if(1!==r.length)throw new Error("one and only one name per case");let n=r[0],a=e[n];if(void 0!==l[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!Q(a))throw new Error("case arguments must be an array");i.push(n),l[n]=(...r)=>{var e=r.length;if(e!==a.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+a.length+" ("+a+"), got "+e);return{fold:(...e)=>{if(e.length!==o.length)throw new Error("Wrong number of arguments to fold. Expected "+o.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{let t=Pe(e);if(i.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+i.join(",")+"\nActual: "+t.join(","));if(Ee(i,e=>V(t,e)))return e[n].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+i.join(", "))},log:e=>{console.log(e,{constructors:i,constructor:n,params:r})}}}}),l},Ss=(ks([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),e=>"inline-command"===e.type||"inline-format"===e.type),Ns=e=>"block-command"===e.type||"block-format"===e.type,Rs=a=>{let e,o=e=>_s.error({message:e,pattern:a}),t=(t,r,e)=>{if(void 0===a.format)return void 0!==a.cmd?Z(a.cmd)?_s.value(e(a.cmd,a.value)):o(t+" pattern has non-string `cmd` parameter"):o(t+" pattern is missing both `format` and `cmd` parameters");{let e;if(Q(a.format)){if(!Ee(a.format,Z))return o(t+" pattern has non-string items in the `format` array");e=a.format}else{if(!Z(a.format))return o(t+" pattern has non-string `format` parameter");e=[a.format]}return _s.value(r(e))}};if(!le(a))return o("Raw pattern is not an object");if(!Z(a.start))return o("Raw pattern is missing `start` parameter");if(void 0!==a.end){if(!Z(a.end))return o("Inline pattern has non-string `end` parameter");if(0===a.start.length&&0===a.end.length)return o("Inline pattern has empty `start` and `end` parameters");let r=a.start,n=a.end;return 0===n.length&&(n=r,r=""),t("Inline",e=>({type:"inline-format",start:r,end:n,format:e}),(e,t)=>({type:"inline-command",start:r,end:n,cmd:e,value:t}))}if(void 0!==a.replacement)return Z(a.replacement)?0===a.start.length?o("Replacement pattern has empty `start` parameter"):_s.value({type:"inline-command",start:"",end:a.start,cmd:"mceInsertContent",value:a.replacement}):o("Replacement pattern has non-string `replacement` parameter");{let r=null!=(e=a.trigger)?e:"space";return 0===a.start.length?o("Block pattern has empty `start` parameter"):t("Block",e=>({type:"block-format",start:a.start,format:e[0],trigger:r}),(e,t)=>({type:"block-command",start:a.start,cmd:e,value:t,trigger:r}))}},As=e=>B(e,Ns),Ts=e=>B(e,Ss),Os=(e,t)=>({...e,blockPatterns:B(e.blockPatterns,e=>("block-command"===e.type||"block-format"===e.type)&&e.trigger===t)}),Bs=e=>{e=(e=>{let t=[],r=[];return re(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}})(te(e,Rs));return re(e.errors,e=>console.error(e.message,e.pattern)),e.values},Ps=(e,t,r)=>{e.dispatch(t,r)},Ds=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},Ls=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},Ms=(e,t)=>e.dispatch("SetContent",t),Is=(e,t)=>e.dispatch("GetContent",t),Fs=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Us=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),zs=Mt().deviceType,js=zs.isTouch(),Hs=X.DOM,Vs=e=>p(e,RegExp),e=t=>e=>e.options.get(t),$s=e=>Z(e)||le(e),qs=(n,a="")=>e=>{var t,r=Z(e);return r?-1!==e.indexOf("=")?(t=(e=>{e=0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return he(e,(e,t)=>{var t=t.split("="),r=t[0],t=1<t.length?t[1]:r;return e[ct(r)]=ct(t),e},{})})(e),{value:w(t,n.id).getOr(a),valid:r}):{value:e,valid:r}:{valid:!1,message:"Must be a string."}},Ws=e("iframe_attrs"),Ks=e("doctype"),Ys=e("document_base_url"),Gs=e("body_id"),Xs=e("body_class"),Zs=e("content_security_policy"),Qs=e("br_in_pre"),Js=e("forced_root_block"),ed=e("forced_root_block_attrs"),td=e("newline_behavior"),rd=e("br_newline_selector"),nd=e("no_newline_selector"),ad=e("keep_styles"),od=e("end_container_on_empty_block"),id=e("automatic_uploads"),ld=e("images_reuse_filename"),sd=e("images_replace_blob_uris"),dd=e("icons"),cd=e("icons_url"),ud=e("images_upload_url"),md=e("images_upload_base_path"),gd=e("images_upload_credentials"),fd=e("images_upload_handler"),pd=e("content_css_cors"),hd=e("referrer_policy"),vd=e("language"),bd=e("language_url"),yd=e("indent_use_margin"),Cd=e("indentation"),wd=e("content_css"),Ed=e("content_style"),xd=e("font_css"),_d=e("directionality"),kd=e("inline_boundaries_selector"),Sd=e("object_resizing"),Nd=e("resize_img_proportional"),Rd=e("placeholder"),Ad=e("event_root"),Td=e("service_message"),Od=e("theme"),Bd=e("theme_url"),Pd=e("model"),Dd=e("model_url"),Ld=e("inline_boundaries"),Md=e("formats"),Id=e("preview_styles"),Fd=e("format_empty_lines"),Ud=e("format_noneditable_selector"),zd=e("custom_ui_selector"),jd=e("inline"),Hd=e("hidden_input"),Vd=e("submit_patch"),$d=e("add_form_submit_trigger"),qd=e("add_unload_trigger"),Wd=e("custom_undo_redo_levels"),Kd=e("disable_nodechange"),Yd=e("readonly"),Gd=e("editable_root"),Xd=e("content_css_cors"),Zd=e("plugins"),Qd=e("external_plugins"),Jd=e("block_unsupported_drop"),ec=e("visual"),tc=e("visual_table_class"),rc=e("visual_anchor_class"),nc=e("iframe_aria_text"),ac=e("setup"),oc=e("init_instance_callback"),ic=e("urlconverter_callback"),lc=e("auto_focus"),sc=e("browser_spellcheck"),dc=e("protect"),cc=e("paste_block_drop"),uc=e("paste_data_images"),mc=e("paste_preprocess"),gc=e("paste_postprocess"),fc=e("newdocument_content"),pc=e("paste_webkit_styles"),hc=e("paste_remove_styles_if_webkit"),vc=e("paste_merge_formats"),bc=e("smart_paste"),yc=e("paste_as_text"),Cc=e("paste_tab_spaces"),wc=e("allow_html_data_urls"),Ec=e("text_patterns"),xc=e("text_patterns_lookup"),_c=e("noneditable_class"),kc=e("editable_class"),Sc=e("noneditable_regexp"),Nc=e("preserve_cdata"),Rc=e("highlight_on_focus"),Ac=e("xss_sanitization"),Tc=e("init_content_sync"),Oc=e=>oe.explode(e.options.get("images_file_types")),Bc=e("table_tab_navigation"),Pc=e("details_initial_state"),Dc=e("details_serialized_state"),Lc=e("sandbox_iframes"),Mc=e=>e.options.get("sandbox_iframes_exclusions"),Ic=e("convert_unsafe_embeds"),Fc=e("license_key"),Uc=e("api_key"),zc=e("disabled"),jc=G,Hc=D,Vc=e=>{var t=e.parentNode;t&&t.removeChild(e)},$c=e=>{var t=nl(e);return{count:e.length-t.length,text:t}},qc=e=>{for(var t;-1!==(t=e.data.lastIndexOf(tl));)e.deleteData(t,1)},Wc=(e,t)=>(Yc(e),t),Kc=(e,t)=>{return M.isTextPosition(t)?(r=e,n=t,Hc(r)&&n.container()===r?(a=r,o=n,i=$c(a.data.substr(0,o.offset())),l=$c(a.data.substr(o.offset())),0<(i.text+l.text).length?(qc(a),M(a,o.offset()-i.count)):o):Wc(r,n)):(l=e,((a=t).container()===l.parentNode?(e,t)=>{let r=t.container(),n=((e,t)=>{e=me(e,t);return-1===e?ee.none():ee.some(e)})(Te(r.childNodes),e).map(e=>e<t.offset()?M(r,t.offset()-1):t).getOr(t);return Yc(e),n}:Wc)(l,a));var r,n,a,o,i,l},Yc=e=>{jc(e)&&sl(e)&&(dl(e)?e.removeAttribute("data-mce-caret"):Vc(e)),Hc(e)&&(qc(e),0===e.data.length)&&Vc(e)},Gc=E,Xc=xa,Zc=wa,Qc=(t,e,r)=>{var n=bl(e.getBoundingClientRect(),r);let a,o;if("BODY"===t.tagName){let e=t.ownerDocument.documentElement;a=t.scrollLeft||e.scrollLeft,o=t.scrollTop||e.scrollTop}else{let e=t.getBoundingClientRect();a=t.scrollLeft-e.left,o=t.scrollTop-e.top}n.left+=a,n.right+=a,n.top+=o,n.bottom+=o,n.width=1;let i=e.offsetWidth-e.clientWidth;return 0<i&&(r&&(i*=-1),n.left+=i,n.right+=i),n},Jc=(e,d,t,c)=>{let u=Ma(),m,g,f=Js(e),p=e.dom,h=()=>{var r,e=d,n=qn(W(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<n.length;e++){var a=n[e].dom;let t=a.previousSibling;if(gl(t)){let e=t.data;1===e.length?null!=(r=t.parentNode)&&r.removeChild(t):t.deleteData(e.length-1,1)}t=a.nextSibling,ml(t)&&(1===t.data.length?null!=(r=t.parentNode)&&r.removeChild(t):t.deleteData(0,1))}g&&(Yc(g),g=null),u.on(e=>{p.remove(e.caret),u.clear()}),m&&(clearInterval(m),m=void 0)};return{show:(r,n)=>{let a;if(h(),Zc(n))return null;var o,i,l;if(t(n)){o=f,s=r,(l=(null!=(l=(i=n).ownerDocument)?l:document).createElement(o)).setAttribute("data-mce-caret",s?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(Ji().dom),o=i.parentNode,s?null!=o&&o.insertBefore(l,i):i.nextSibling?null!=o&&o.insertBefore(l,i.nextSibling):null!=o&&o.appendChild(l);let e=l,t=Qc(d,n,r);p.setStyle(e,"top",t.top),p.setStyle(e,"caret-color","transparent"),g=e;var s=p.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});p.setStyles(s,{...t}),p.add(d,s),u.set({caret:s,element:n,before:r}),r&&p.addClass(s,"mce-visual-caret-before"),m=setInterval(()=>{u.on(e=>{c()?p.toggleClass(e.caret,"mce-visual-caret-hidden"):p.addClass(e.caret,"mce-visual-caret-hidden")})},500),(a=n.ownerDocument.createRange()).setStart(e,0),a.setEnd(e,0)}else g=((t,e)=>{var r=(null!=(r=t.ownerDocument)?r:document).createTextNode(tl),n=t.parentNode;if(e){let e=t.previousSibling;if(ol(e)){if(sl(e))return e;if(gl(e))return e.splitText(e.data.length-1)}null!=n&&n.insertBefore(r,t)}else{let e=t.nextSibling;if(ol(e)){if(sl(e))return e;if(ml(e))return e.splitText(1),e}t.nextSibling?null!=n&&n.insertBefore(r,t.nextSibling):null!=n&&n.appendChild(r)}return r})(n,r),a=n.ownerDocument.createRange(),tu(g.nextSibling)?(a.setStart(g,0),a.setEnd(g,0)):(a.setStart(g,1),a.setEnd(g,1));return a},hide:h,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{u.on(e=>{var t=Qc(d,e.element,e.before);p.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(m)}},eu=()=>F.browser.isFirefox(),tu=e=>Gc(e)||Xc(e),ru=e=>(tu(e)||ca(e)&&eu())&&Ir(W(e)).exists(un),nu=ya,au=E,ou=xa,iu=sa("display","block table table-cell table-row table-caption list-item"),lu=sl,su=il,du=G,cu=D,uu=Ll,mu=e=>1===e,gu=e=>-1===e,fu=(e,t)=>{for(var r;r=e(t);)if(!su(r))return r;return null},pu=(e,t,r,n,a)=>{var o=new Gn(e,n),n=au(e)||su(e);let i;if(gu(t)){if(n&&r(i=fu(o.prev.bind(o),!0)))return i;for(;i=fu(o.prev.bind(o),a);)if(r(i))return i}if(mu(t)){if(n&&r(i=fu(o.next.bind(o),!0)))return i;for(;i=fu(o.next.bind(o),a);)if(r(i))return i}return null},hu=(e,t)=>{for(;e&&e!==t;){if(iu(e))return e;e=e.parentNode}return null},vu=(e,t,r)=>hu(e.container(),r)===hu(t.container(),r),bu=(e,t)=>{var r;return t&&(r=t.container(),t=t.offset(),du(r))?ee.from(r.childNodes[t+e]):ee.none()},yu=(e,t)=>{var r=(null!=(r=t.ownerDocument)?r:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Cu=(e,t,r)=>hu(t,e)===hu(r,e),wu=(e,t,r)=>{var n=e?"previousSibling":"nextSibling";let a=r;for(;a&&a!==t;){let e=a[n];if(e&&lu(e)&&(e=e[n]),au(e)||ou(e)){if(Cu(t,e,a))return e;break}if(uu(e))break;a=a.parentNode}return null},Eu=C(yu,!0),xu=C(yu,!1),_u=(e,t,r)=>{let n;var a=C(wu,!0,t),t=C(wu,!1,t),o=r.startContainer,i=r.startOffset;if(il(o)){let e=cu(o)?o.parentNode:o,t=e.getAttribute("data-mce-caret");if("before"===t&&(n=e.nextSibling,ru(n)))return Eu(n);if("after"===t&&(n=e.previousSibling,ru(n)))return xu(n)}if(r.collapsed&&D(o)){if(lu(o)){if(1===e){if(n=t(o))return Eu(n);if(n=a(o))return xu(n)}if(-1===e){if(n=a(o))return xu(n);if(n=t(o))return Eu(n)}return r}if(gl(o)&&i>=o.data.length-1)return 1===e&&(n=t(o))?Eu(n):r;if(ml(o)&&i<=1)return-1===e&&(n=a(o))?xu(n):r;if(i===o.data.length)return(n=t(o))?Eu(n):r;if(0===i)return(n=a(o))?xu(n):r}return r},ku=(e,t)=>bu(e?0:-1,t).filter(au),Su=(e,t,r)=>{t=_u(e,t,r);return-1===e?M.fromRangeStart(t):M.fromRangeEnd(t)},Nu=e=>ee.from(e.getNode()).map(W),Ru=(e,t)=>{let r=t;for(;r=e(r);)if(r.isVisible())return r;return r},Au=(e,t)=>{t=vu(e,t);return!(t||!L(e.getNode()))||t},Tu=E,Ou=D,Bu=G,Pu=L,Du=Ll,Lu=e=>Bl(e)||(e=e,!!Ml(e)&&!he(Te(e.getElementsByTagName("*")),(e,t)=>e||Nl(t),!1)),Mu=Il,Iu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Fu=(e,t)=>{if(mu(e)){if(Du(t.previousSibling)&&!Ou(t.previousSibling))return M.before(t);if(Ou(t))return M(t,0)}if(gu(e)){if(Du(t.nextSibling)&&!Ou(t.nextSibling))return M.after(t);if(Ou(t))return M(t,t.data.length)}return!gu(e)||Pu(t)?M.before(t):M.after(t)},Uu=(e,t,r)=>{let n,a,o,i;if(!Bu(r)||!t)return null;if(t.isEqual(M.after(r))&&r.lastChild){if(i=M.after(r.lastChild),gu(e)&&Du(r.lastChild)&&Bu(r.lastChild))return Pu(r.lastChild)?M.before(r.lastChild):i}else i=t;var l,s=i.container();let d=i.offset();if(Ou(s)){if(gu(e)&&0<d)return M(s,--d);if(mu(e)&&d<s.length)return M(s,++d);n=s}else{if(gu(e)&&0<d&&(a=Iu(s,d-1),Du(a)))return!Lu(a)&&(o=pu(a,e,Mu,a))?Ou(o)?M(o,o.data.length):M.after(o):Ou(a)?M(a,a.data.length):M.before(a);if(mu(e)&&d<s.childNodes.length&&(a=Iu(s,d),Du(a)))return Pu(a)?(t=r,l=a,(c=l.nextSibling)&&Du(c)?Ou(c)?M(c,0):M.before(c):Uu(1,M.after(l),t)):!Lu(a)&&(o=pu(a,e,Mu,a))?Ou(o)?M(o,0):M.before(o):Ou(a)?M(a,0):M.after(a);n=a||i.getNode()}if(n&&(mu(e)&&i.isAtEnd()||gu(e)&&i.isAtStart())&&(n=pu(n,e,S,r,!0),Mu(n,r)))return Fu(e,n);a=n&&pu(n,e,Mu,r);var c=Qe(B((e=>{var t=[];let r=s;for(;r&&r!==e;)t.push(r),r=r.parentNode;return t})(r),Tu));return!c||a&&c.contains(a)?a?Fu(e,a):null:i=mu(e)?M.after(c):M.before(c)},zu=t=>({next:e=>Uu(1,e,t),prev:e=>Uu(-1,e,t)}),ju=e=>M.isTextPosition(e)?0===e.offset():Ll(e.getNode()),Hu=e=>{var t;return M.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):Ll(e.getNode(!0))},Vu=(e,t)=>!M.isTextPosition(e)&&!M.isTextPosition(t)&&e.getNode()===t.getNode(!0),$u=(e,t,r)=>{t=zu(t);return ee.from(e?t.next(r):t.prev(r))},qu=(a,o,i)=>$u(a,o,i).bind(e=>{return vu(i,e,o)&&(t=i,r=e,a?!Vu(t,r)&&(n=t,!(!M.isTextPosition(n)&&L(n.getNode())))&&Hu(t)&&ju(r):!Vu(r,t)&&ju(t)&&Hu(r))?$u(a,o,e):ee.some(e);var t,r,n}),Wu=(t,r,e,n)=>qu(t,r,e).bind(e=>n(e)?Wu(t,r,e,n):ee.some(e)),Ku=(e,t)=>{var r=e?t.firstChild:t.lastChild;{var n;return D(r)?ee.some(M(r,e?0:r.data.length)):r?Ll(r)?ee.some(e?M.before(r):L(n=r)?M.before(n):M.after(n)):(n=e,e=t,t=r,t=n?M.before(t):M.after(t),$u(n,e,t)):ee.none()}},Yu=C($u,!0),Gu=C($u,!1),Xu=C(Ku,!0),Zu=C(Ku,!1),Qu="_mce_caret",Ju=e=>G(e)&&e.id===Qu,em=(e,t)=>{let r=t;for(;r&&r!==e;){if(Ju(r))return r;r=r.parentNode}return null},tm=e=>ae(e,"name"),rm=e=>oe.isArray(e.start),nm=e=>!(!tm(e)&&de(e.forward))||e.forward,am=(e,t)=>(G(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),om=(e,t)=>Zu(e).fold(h,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),im=(e,t,r)=>!(t.hasChildNodes()||!em(e,t)||(e=r,t=(null!=(t=(r=t).ownerDocument)?t:document).createTextNode(tl),r.appendChild(t),e.setStart(t,0),e.setEnd(t,0),0)),lm=(e,t,r,n)=>{var a=r[t?"start":"end"],o=e.getRoot();if(a){let r=o,e=a[0];for(let t=a.length-1;r&&1<=t;t--){let e=r.childNodes;if(im(o,r,n))return!0;if(a[t]>e.length-1)return!!im(o,r,n)||om(r,n);r=e[a[t]]}D(r)&&(e=Math.min(a[0],r.data.length)),G(r)&&(e=Math.min(a[0],r.childNodes.length)),t?n.setStart(r,e):n.setEnd(r,e)}return!0},sm=e=>D(e)&&0<e.data.length,dm=(o,e,i)=>{let l=o.get(i.id+"_"+e),t=null==l?void 0:l.parentNode,r=i.keep;if(l&&t){let n,a;if(a="start"===e?r?l.hasChildNodes()?(n=l.firstChild,1):sm(l.nextSibling)?(n=l.nextSibling,0):sm(l.previousSibling)?(n=l.previousSibling,l.previousSibling.data.length):(n=t,o.nodeIndex(l)+1):(n=t,o.nodeIndex(l)):r?l.hasChildNodes()?(n=l.firstChild,1):sm(l.previousSibling)?(n=l.previousSibling,l.previousSibling.data.length):(n=t,o.nodeIndex(l)):(n=t,o.nodeIndex(l)),!r){let t=l.previousSibling,r=l.nextSibling;var s;for(oe.each(oe.grep(l.childNodes),e=>{D(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});s=o.get(i.id+"_"+e);)o.remove(s,!0);if(D(r)&&D(t)&&!F.browser.isOpera()){let e=t.data.length;t.appendData(r.data),o.remove(r),n=t,a=e}}return ee.some(M(n,a))}return ee.none()},cm=(e,t,r)=>{return[e,t,r=!1]=[e,t,r],2===t?bs(nl,r,e):3===t?(n=(r=e).getRng(),{start:cs(r.dom.getRoot(),M.fromRangeStart(n)),end:cs(r.dom.getRoot(),M.fromRangeEnd(n)),forward:r.isForward()}):t?{rng:(n=e).getRng(),forward:n.isForward()}:Cs(e,!1);var n},um=(m,e)=>{(e=>{var r,n,a,t,o,i,l,s,d,c,u=m.dom;if(e){if(rm(e))return d=e,c=(s=u).createRng(),lm(s,!0,d,c)&&lm(s,!1,d,c)?ee.some({range:c,forward:nm(d)}):ee.none();if(s=e,Z(s.start))return i=u,l=e,c=ee.from(us(i.getRoot(),l.start)),d=ee.from(us(i.getRoot(),l.end)),Kt(c,d,(e,t)=>{var r=i.createRng();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),{range:r,forward:nm(l)}});if(o=e,ae(o,"id"))return n=u,a=e,o=dm(n,"start",a),t=dm(n,"end",a),Kt(o,t.or(o),(e,t)=>{var r=n.createRng();return r.setStart(am(n,e.container()),e.offset()),r.setEnd(am(n,t.container()),t.offset()),{range:r,forward:nm(a)}});if(tm(e))return r=u,t=e,ee.from(r.select(t.name)[t.index]).map(e=>{var t=r.createRng();return t.selectNode(e),{range:t,forward:!0}});if(o=e,ae(o,"rng"))return ee.some({range:e.rng,forward:nm(e)})}return ee.none()})(e).each(({range:e,forward:t})=>{m.setRng(e,t)})},mm=e=>G(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),gm=(rn=Zn,e=>rn===e),fm=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),pm=e=>!fm(e)&&!gm(e)&&!Qn(e),hm=t=>{var r=[];if(t)for(let e=0;e<t.rangeCount;e++)r.push(t.getRangeAt(e));return r},vm=(e,t)=>{var t=qn(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:(t=e,B((t=t,we(t,e=>{e=xl(e);return e?[W(e)]:[]})),Zi))},bm=e=>vm(hm(e.selection.getSel()),W(e.getBody())),ym=(e,t)=>sn(e,"table",t),Cm=t=>qr(t).fold(J([t]),e=>[t].concat(Cm(e))),wm=t=>Wr(t).fold(J([t]),e=>"br"===q(e)?Ur(e).map(e=>[t].concat(wm(e))).getOr([]):[t].concat(wm(e))),Em=(r,e)=>{return Kt((t=e.startContainer,n=e.startOffset,D(t)?0===n?ee.some(W(t)):ee.none():ee.from(t.childNodes[n]).map(W)),(t=e.endContainer,n=e.endOffset,D(t)?n===t.data.length?ee.some(W(t)):ee.none():ee.from(t.childNodes[n-1]).map(W)),(e,t)=>{e=be(Cm(r),C(P,e)),t=be(wm(r),C(P,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,n},xm=(e,t,r,n)=>{var a=r,o=new Gn(r,a),i=Ue(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!V(["td","th","table"],t.toLowerCase()));let l=r;do{if(D(l)&&0!==oe.trim(l.data).length)return void(n?t.setStart(l,0):t.setEnd(l,l.data.length));if(i[l.nodeName])return void(n?t.setStartBefore(l):"BR"===l.nodeName?t.setEndBefore(l):t.setEndAfter(l))}while(l=n?o.next():o.prev());"BODY"===a.nodeName&&(n?t.setStart(a,0):t.setEnd(a,a.childNodes.length))},_m=e=>{e=e.selection.getSel();return z(e)&&0<e.rangeCount},km=(r,n)=>{var e=bm(r);0<e.length?re(e,e=>{var e=e.dom,t=r.dom.createRng();t.setStartBefore(e),t.setEndAfter(e),n(t,!0)}):n(r.selection.getRng(),!1)},Sm=(e,t,r)=>{t=Cs(e,t);r(t),e.moveToBookmark(t)},Nm=e=>y(null==e?void 0:e.nodeType),Rm=e=>G(e)&&!mm(e)&&!Ju(e)&&!da(e),Am=(e,t,r)=>{var{selection:n,dom:a}=e,o=n.getNode(),i=E(o);Sm(n,!0,()=>{t()}),i&&E(o)&&a.isChildOf(o,e.getBody())?e.selection.select(o):r(n.getStart())&&Tm(a,n)},Tm=(r,n)=>{var a=n.getRng(),{startContainer:o,startOffset:i}=a;if(l=r,s=n.getNode(),(!Rm(s)||/^(TD|TH)$/.test(s.nodeName)||(l=l.getAttrib(s,"data-mce-selected"),s=parseInt(l,10),isNaN(s))||!(0<s))&&G(o)){var l=o.childNodes,s=r.getRoot();let t;if(i<l.length){let e=l[i];t=new Gn(e,null!=(o=r.getParent(e,r.isBlock))?o:s)}else{let e=l[l.length-1];(t=new Gn(e,null!=(i=r.getParent(e,r.isBlock))?i:s)).next(!0)}for(let e=t.current();e;e=t.next()){if("false"===r.getContentEditable(e))return;if(D(e)&&!Dm(e))return a.setStart(e,0),void n.setRng(a)}}},Om=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(G(e)||!Dm(e))return e}},Bm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ja(e,t),Pm=(e,t,r)=>e.schema.isValidChild(t,r),Dm=(e,t=!1)=>!(!z(e)||!D(e))&&(t=t?e.data.replace(/ /g,""):e.data,ea(t)),Lm=(e,t)=>{var r,n,a=e.dom;return Rm(t)&&"false"===a.getContentEditable(t)&&(e=e,r=t,n="[data-mce-cef-wrappable]",e=Ud(e),n=ft(e)?n:n+","+e,Tr(W(r),n))&&0===a.select('[contenteditable="true"]',t).length},Mm=(e,r)=>j(e)?e(r):e=z(r)?e.replace(/%(\w+)/g,(e,t)=>r[t]||e):e,Im=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Fm=(t,r)=>{if(U(t))return null;{let e=String(t);return"color"!==r&&"backgroundColor"!==r||(e=Go(e)),"fontWeight"===r&&700===t&&(e="bold"),e="fontFamily"===r?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e}},Um=(e,t,r)=>{e=e.getStyle(t,r);return Fm(e,r)},zm=(t,e)=>{let r;return t.getParent(e,e=>!!G(e)&&!!(r=t.getStyle(e,"text-decoration"))&&"none"!==r),r},jm=(e,t,r)=>e.getParents(t,r,e.getRoot()),Hm=(e,t,r)=>{e=e.formatter.get(t);return z(e)&&$(e,r)},Vm=e=>He(e,"block"),$m=e=>He(e,"selector"),qm=e=>He(e,"inline"),Wm=e=>$m(e)&&!1!==e.expand&&!qm(e),Km=r=>0<(()=>{var e=[];let t=r;for(;t;){if(D(t)&&t.data!==tl||1<t.childNodes.length)return[];G(t)&&e.push(t),t=t.firstChild}return e})().length,Ym=e=>Ju(e.dom)&&Km(e.dom),Gm=mm,Xm=jm,Zm=Dm,Qm=Bm,Jm=(e,t)=>{let r=t;for(;r;){if(G(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},eg=(e,t,r,n)=>{var a=t.data;if(e){for(let e=r;0<e;e--)if(n(a.charAt(e-1)))return e}else for(let e=r;e<a.length;e++)if(n(a.charAt(e)))return e;return-1},tg=(e,t,r)=>eg(e,t,r,e=>gm(e)||fm(e)),rg=(e,t,r)=>eg(e,t,r,pm),ng=(a,e,t,r,o,n)=>{let i,l=a.getParent(t,e=>Ca(e)||a.isBlock(e)),s=z(l)?l:e,d=(e,t,r)=>{var n=ji(a),n=o?n.backwards:n.forwards;return ee.from(n(e,t,(e,t)=>Gm(e.parentNode)?-1:(i=e,r(o,e,t)),s))};return d(t,r,tg).bind(e=>n?d(e.container,e.offset+(o?-1:0),rg):ee.some(e)).orThunk(()=>i?ee.some({container:i,offset:o?0:i.length}):ee.none())},ag=(n,a,o,e,t)=>{let r=e[t];D(e)&&ft(e.data)&&r&&(e=r);var i=Xm(n,e);for(let r=0;r<i.length;r++)for(let t=0;t<a.length;t++){let e=a[t];if((!z(e.collapsed)||e.collapsed===o.collapsed)&&$m(e)&&n.is(i[r],e.selector))return i[r]}return e},og=(t,e,r,n)=>{let a,o=r,i=t.getRoot(),l=e[0];if(!(o=Vm(l)?l.wrapper?null:t.getParent(r,l.block,i):o)){let e=null!=(a=t.getParent(r,"LI,TD,TH,SUMMARY"))?a:i;o=t.getParent(D(r)?r.parentNode:r,e=>e!==i&&Qm(t.schema,e),e)}if(!(o=o&&Vm(l)&&l.wrapper?Xm(t,o,"ul,ol").reverse()[0]||o:o))for(o=r;o&&o[n]&&!t.isBlock(o[n])&&(o=o[n],!Im(o,"br")););return o||r},ig=(e,t,r,n)=>{var a=r.parentNode;return!z(r[n])&&(!(a!==t&&!U(a)&&!e.isBlock(a))||ig(e,t,a,n))},lg=(r,e,t,n,a,o)=>{let i=t;var l,s=a?"previousSibling":"nextSibling",d=r.getRoot();if(!D(t)||Zm(t)||!(a?0<n:n<t.data.length))for(;i;){if(Ca(i))return t;if(!e[0].block_expand&&r.isBlock(i))return o?i:t;for(let t=i[s];t;t=t[s]){let e=D(t)&&!ig(r,d,t,s);if(!Gm(t)&&(!L(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Zm(t,e))return i}if(i===d||i.parentNode===d){t=i;break}i=i.parentNode}return t},sg=e=>Gm(e.parentNode)||Gm(e),dg=(e,t,r,n={})=>{var{includeTrailingSpace:n=!1,expandToBlock:a=!0}=n,o=e.getParent(t.commonAncestorContainer,e=>Ca(e)),o=z(o)?o:e.getRoot();let{startContainer:i,startOffset:l,endContainer:s,endOffset:d}=t;var c=r[0];return G(i)&&i.hasChildNodes()&&(i=_l(i,l),D(i))&&(l=0),G(s)&&s.hasChildNodes()&&(s=_l(s,t.collapsed?d:d-1),D(s))&&(d=s.data.length),i=Jm(e,i),s=Jm(e,s),sg(i)&&(i=Gm(i)?i:i.parentNode,i=t.collapsed?i.previousSibling||i:i.nextSibling||i,D(i))&&(l=t.collapsed?i.length:0),sg(s)&&(s=Gm(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,D(s))&&(d=t.collapsed?0:s.length),t.collapsed&&(ng(e,o,i,l,!0,n).each(({container:e,offset:t})=>{i=e,l=t}),ng(e,o,s,d,!1,n).each(({container:e,offset:t})=>{s=e,d=t})),(qm(c)||c.block_expand)&&(qm(c)&&D(i)&&0!==l||(i=lg(e,r,i,l,!0,a)),qm(c)&&D(s)&&d!==s.data.length||(s=lg(e,r,s,d,!1,a))),Wm(c)&&(i=ag(e,r,t,i,"previousSibling"),s=ag(e,r,t,s,"nextSibling")),(Vm(c)||$m(c))&&(i=og(e,r,i,"previousSibling"),s=og(e,r,s,"nextSibling"),Vm(c))&&(e.isBlock(i)||(i=lg(e,r,i,l,!0,a),D(i)&&(l=0)),e.isBlock(s)||(s=lg(e,r,s,d,!1,a),D(s)&&(d=s.data.length))),G(i)&&i.parentNode&&(l=e.nodeIndex(i),i=i.parentNode),G(s)&&s.parentNode&&(d=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:i,startOffset:l,endContainer:s,endOffset:d}},cg=(r,e,i)=>{let t,n=e.startOffset,a=_l(e.startContainer,n),o=e.endOffset,l=_l(e.endContainer,o-1),s=e=>{var t=e[0],t=(D(t)&&t===a&&n>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===o&&0<e.length&&t===l&&D(t)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(e,t)=>r.getParent(e,e=>e.parentNode===t,t),u=(n,e,a)=>{var o=a?"nextSibling":"previousSibling";for(let t=n,r=void t.parentNode;t&&t!==e;t=r){r=t.parentNode;let e=d(t===n?t:t[o],o);e.length&&(a||e.reverse(),i(s(e)))}};var m;return a===l?i(s([a])):(e=null!=(t=r.findCommonAncestor(a,l))?t:r.getRoot(),r.isChildOf(a,l)?u(a,e,!0):r.isChildOf(l,a)?u(l,e):(m=c(a,e)||a,e=c(l,e)||l,u(a,m,!0),(m=d(m===a?m:m.nextSibling,"nextSibling",e===l?e.nextSibling:e)).length&&i(s(m)),void u(l,e)))},ug=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],mg=(t,e,r,n,a,o)=>{let{uid:i=e,...l}=r;Cr(t,xi()),sr(t,""+ki(),i),sr(t,""+_i(),n);var s,{attributes:r={},classes:n=[]}=a(i,l);if(dr(t,r),s=t,e=n,re(e,e=>{Cr(s,e)}),o){0<n.length&&sr(t,""+Ni(),n.join(","));let e=Pe(r);0<e.length&&sr(t,""+Ri(),e.join(","))}},gg=(e,t,r,n,a)=>{e=Sr("span",e);return mg(e,t,r,n,a,!1),e},fg=(e,t,o,i,l,s)=>{let d=[],c=gg(e.getDoc(),o,s,i,l),u=Ma(),m=()=>{u.clear()},g=e=>{re(e,r)},r=t=>{switch(r=e,n=t,a=q(t),Mr(n).fold(()=>"skipping",e=>{return"br"===a||(t=n,nr(t)&&Vi(t)===tl)?"valid":(t=n,rr(t)&&xr(t,xi())?"existing":Ju(n.dom)?"caret":$(ug,e=>Tr(n,e))?"valid-block":Pm(r,"span",a)&&Pm(r,q(e),"span")?"valid":"invalid-child");var t})){case"invalid-child":{m();let e=Vr(t);g(e),m();break}case"valid-block":m(),mg(t,o,s,i,l,!0);break;case"valid":{let e=u.get().getOrThunk(()=>{var e=Fi(c);return d.push(e),u.set(e),e});Sn(t,e);break}}var r,n,a};return cg(e.dom,t,e=>{m();e=te(e,W),g(e)}),d},pg=n=>{let a=(()=>{let r={};return{register:(e,t)=>{r[e]={name:e,settings:t}},lookup:e=>w(r,e).map(e=>e.settings),getNames:()=>Pe(r)}})();{var e=n,o=a;let r=_i();e.serializer.addTempAttr(Si()),e.serializer.addAttributeFilter(r,e=>{for(let n of e)t=n,ee.from(t.attr(r)).bind(o.lookup).each(e=>{var t,r;!1===e.persistent&&("span"===n.name?n.unwrap():((t=n).attr(ki(),null),t.attr(_i(),null),t.attr(Si(),null),e=ee.from(t.attr(Ri())).map(e=>e.split(",")).getOr([]),r=ee.from(t.attr(Ni())).map(e=>e.split(",")).getOr([]),re(e,e=>t.attr(e,null)),e=null!=(e=null==(e=t.attr("class"))?void 0:e.split(" "))?e:[],e=_e(e,[xi()].concat(r)),t.attr("class",0<e.length?e.join(" "):null),t.attr(Ni(),null),t.attr(Ri(),null)))});var t})}let r=((n,t)=>{let a=Da({}),o=()=>({listeners:[],previous:Ma()}),s=(e,t)=>{i(e,e=>(t(e),e))},i=(e,t)=>{var r=a.get(),t=t(w(r,e).getOrThunk(o));r[e]=t,a.set(r)},d=(e,t)=>{re(Bi(n,e),e=>{t?sr(e,Si(),"true"):gr(e,Si())})},e=Ei(()=>{var e=Se(t.getNames());re(e,r=>{i(r,i=>{let l=i.previous.get();return Ti(n,ee.some(r)).fold(()=>{l.each(e=>{var t;t=r,s(t,e=>{re(e.listeners,e=>e(!1,t))}),i.previous.clear(),d(e,!1)})},({uid:e,name:t,elements:r})=>{var n,a,o;qt(l,e)||(l.each(e=>d(e,!1)),n=t,a=e,o=r,s(n,e=>{re(e.listeners,e=>e(!0,n,{uid:a,nodes:te(o,e=>e.dom)}))}),i.previous.set(e),d(e,!0))}),{previous:i.previous,listeners:i.listeners}})})},30);return n.on("remove",()=>{e.cancel()}),n.on("NodeChange",()=>{e.throttle()}),{addListener:(e,t)=>{i(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(n,a),i=ir("span"),l=e=>{re(e,e=>{var t,r,n;i(e)?An(e):(t=e,Er(t,xi()),gr(t,""+ki()),gr(t,""+_i()),gr(t,""+Si()),e=ur(t,""+Ri()).map(e=>e.split(",")).getOr([]),n=ur(t,""+Ni()).map(e=>e.split(",")).getOr([]),re(e,e=>gr(t,e)),r=t,re(n,e=>{Er(r,e)}),gr(t,""+Ni()),gr(t,""+Ri()))})};return{register:(e,t)=>{a.register(e,t)},annotate:(t,r)=>{a.lookup(t).each(e=>{var l,s,d,c;s=t,d=e,c=r,(l=n).undoManager.transact(()=>{let t=l.selection,e=t.getRng(),r=0<bm(l).length,n=Mi("mce-annotation");if(e.collapsed&&!r&&(a=l,o=e,i=dg(a.dom,o,[{inline:"span"}]),o.setStart(i.startContainer,i.startOffset),o.setEnd(i.endContainer,i.endOffset),a.selection.setRng(o)),t.getRng().collapsed&&!r){let e=gg(l.getDoc(),n,c,s,d.decorate);Bn(e,Zn),t.getRng().insertNode(e.dom),t.select(e.dom)}else Sm(t,!1,()=>{km(l,e=>{fg(l,e,n,s,d.decorate,c)})});var a,o,i})})},annotationChanged:(e,t)=>{r.addListener(e,t)},remove:e=>{Ti(n,ee.some(e)).each(({elements:e})=>{var t=n.selection.getBookmark();l(e),n.selection.moveToBookmark(t)})},removeAll:e=>{var t=n.selection.getBookmark();ne(Pi(n,e),(e,t)=>{l(e)}),n.selection.moveToBookmark(t)},getAll:e=>{e=Pi(n,e);return Le(e,e=>te(e,e=>e.dom))}}},hg=e=>({getBookmark:C(cm,e),moveToBookmark:C(um,e)}),vg=(hg.isBookmarkNode=mm,(t,r,e)=>!e.collapsed&&$(e.getClientRects(),e=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)),bg=()=>W(document),yg=(e,t=!1)=>e.dom.focus({preventScroll:t}),Cg=e=>{var t=Gr(e).dom;return e.dom===t.activeElement},wg=(e=bg())=>ee.from(e.dom.activeElement).map(W),Eg=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),xg=ks([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_g={before:xg.before,on:xg.on,after:xg.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(f,f,f)},kg=ks([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Sg={domRange:kg.domRange,relative:kg.relative,exact:kg.exact,exactFromRange:e=>kg.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>W(e.startContainer),relative:(e,t)=>_g.getStart(e),exact:(e,t,r,n)=>e});return Lr(e)},range:Eg},Ng=(e,t)=>{t=nr(t)?Vi(t).length:Vr(t).length+1;return t<e?t:e<0?0:e},Rg=e=>Sg.range(e.start,Ng(e.soffset,e.start),e.finish,Ng(e.foffset,e.finish)),Ag=(e,t)=>!aa(t.dom)&&(Br(e,t)||P(e,t)),Tg=t=>e=>Ag(t,e.start)&&Ag(t,e.finish),Og=e=>Sg.range(W(e.startContainer),e.startOffset,W(e.endContainer),e.endOffset),Bg=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),ee.some(t)}catch(e){return ee.none()}},Pg=e=>{var t,r=e.inline||F.browser.isFirefox()?(t=W(e.getBody()),((r=Lr(t).dom.getSelection())&&0!==r.rangeCount?ee.from(r.getRangeAt(0)):ee.none()).map(Og).filter(Tg(t))):ee.none();e.bookmark=r.isSome()?r:e.bookmark},Dg=r=>(r.bookmark||ee.none()).bind(e=>{return t=W(r.getBody()),e=e,ee.from(e).filter(Tg(t)).map(Rg);var t}).bind(Bg),Lg={isEditorUIElement:e=>{e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Mg={setEditorTimeout:(e,t,r)=>(r=r,y(r)||(r=0),setTimeout(()=>{e.removed||t()},r)),setEditorInterval:(e,t,r)=>{r=r,y(r)||(r=0);let n=setInterval(()=>{e.removed?clearInterval(n):t()},r);return n}},Ig,Fg=X.DOM,Ug=e=>{e=e.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},zg=(r,e)=>{let n=zd(r),t=Fg.getParent(e,e=>{return t=e,G(t)&&Lg.isEditorUIElement(t)||!!n&&r.dom.is(e,n);var t});return null!==t},jg=e=>{try{var t=Gr(W(e.getElement()));return wg(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},Hg=(r,e)=>{let t=e.editor;{var i=t;let o=wi(()=>{Pg(i)},0);i.on("init",()=>{if(i.inline){var t=i,r=o;let e=()=>{r.throttle()};X.DOM.bind(document,"mouseup",e),t.on("remove",()=>{X.DOM.unbind(document,"mouseup",e)})}var n,a;n=i,t=o,a=t,n.on("mouseup touchend",e=>{a.throttle()}),n.on("keyup NodeChange AfterSetSelectionRange",e=>{"nodechange"===e.type&&e.selectionChange||Pg(n)})}),i.on("remove",()=>{o.cancel()})}let n=(e,t)=>{Rc(e)&&!0!==e.inline&&t(W(e.getContainer()),"tox-edit-focus")};t.on("focusin",()=>{var e=r.focusedEditor;Ug(jg(t))&&n(t,Cr),e!==t&&(e&&e.dispatch("blur",{focusedEditor:t}),r.setActive(t),(r.focusedEditor=t).dispatch("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",()=>{Mg.setEditorTimeout(t,()=>{var e=r.focusedEditor;Ug(jg(t))&&e===t||n(t,Er),zg(t,jg(t))||e!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),Ig||(Ig=e=>{let t=r.activeEditor;t&&Qr(e).each(e=>{e.ownerDocument!==document||e===document.body||zg(t,e)||r.focusedEditor!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})},Fg.bind(document,"focusin",Ig))},Vg=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ig&&(Fg.unbind(document,"focusin",Ig),Ig=null)},$g=(t,e)=>{var r;r=W(t.getBody()),((e=e).collapsed?ee.from(_l(e.startContainer,e.startOffset)).map(W):ee.none()).bind(e=>Xi(e)?ee.some(e):Br(r,e)?ee.none():ee.some(r)).bind(e=>Xu(e.dom)).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))},qg=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Wg=e=>{return e.inline?(r=e.getBody())&&(r=W(r),Cg(r)||(t=r,wg(Gr(t)).filter(e=>t.dom.contains(e.dom)).isSome())):(r=e,z(r.iframeElement)&&Cg(W(r.iframeElement)));var t,r},Kg=e=>{return Wg(e)||(t=e,e=Gr(W(t.getElement())),wg(e).filter(e=>!Ug(e.dom)&&zg(t,e.dom)).isSome());var t},Yg=e=>e.editorManager.setActive(e),ie={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ie.metaKeyPressed(e),metaKeyPressed:e=>F.os.isMacOS()||F.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Gg="data-mce-selected",Xg=Math.abs,Zg=Math.round,Qg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Jg=(n,o)=>{let c=o.dom,u=o.getDoc(),m=document,g=o.getBody(),f,p,h,v,b,y,C,w,E,x,i,_,k,S,N,l=e=>z(e)&&(ba(e)||c.is(e,"figure.image")),R=e=>xa(e)||c.hasClass(e,"mce-preview-object"),e=e=>{var t,r,n,a=e.target;t=e,r=o.selection.getRng(),("longpress"===(n=t).type||0===n.type.indexOf("touch")?(n=t.touches[0],!l(t.target)||vg(n.clientX,n.clientY,r)):!l(t.target)||vg(t.clientX,t.clientY,r))||e.isDefaultPrevented()||o.selection.select(a)},A=e=>c.hasClass(e,"mce-preview-object")&&z(e.firstElementChild)?[e,e.firstElementChild]:c.is(e,"figure.image")?[e.querySelector("img")]:[e],a=e=>{var t=Sd(o);return!(!t||o.mode.isReadOnly())&&"false"!==e.getAttribute("data-mce-resize")&&e!==o.getBody()&&(c.hasClass(e,"mce-preview-object")&&z(e.firstElementChild)?Tr(W(e.firstElementChild),t):Tr(W(e),t))},s=(e,t,r)=>{z(r)&&(e=A(e),re(e,e=>{e.style[t]||!o.schema.isValid(e.nodeName.toLowerCase(),t)?c.setStyle(e,t,r):c.setAttrib(e,t,""+r)}))},T=(e,t,r)=>{s(e,"width",t),s(e,"height",r)},O=e=>{var t,r,n=e.screenX-y,a=e.screenY-C;_=n*v[2]+w,k=a*v[3]+E,_=_<5?5:_,k=k<5?5:k,((l(f)||R(f))&&!1!==Nd(o)?!ie.modifierPressed(e):ie.modifierPressed(e))&&(Xg(n)>Xg(a)?(k=Zg(_*x),_=Zg(k/x)):(_=Zg(k/x),k=Zg(_*x))),T(p,_,k),e=0<(e=v.startPos.x+n)?e:0,t=0<(t=v.startPos.y+a)?t:0,c.setStyles(h,{left:e,top:t,display:"block"}),h.innerHTML=_+" &times; "+k,(n=g.scrollWidth-S)+(a=g.scrollHeight-N)!=0&&c.setStyles(h,{left:e-n,top:t-a}),i||(e=o,n=f,t=w,a=E,r="corner-"+v.name,e.dispatch("ObjectResizeStart",{target:n,width:t,height:a,origin:r}),i=!0)},B=()=>{var e,t,r,n,a=i;i=!1,a&&(s(f,"width",_),s(f,"height",k)),c.unbind(u,"mousemove",O),c.unbind(u,"mouseup",B),m!==u&&(c.unbind(m,"mousemove",O),c.unbind(m,"mouseup",B)),c.remove(p),c.remove(h),c.remove(b),d(f),a&&(a=o,e=f,t=_,r=k,n="corner-"+v.name,a.dispatch("ObjectResized",{target:e,width:t,height:r,origin:n}),c.setAttrib(f,"style",c.getAttrib(f,"style"))),o.nodeChanged()},d=e=>{M();let t=c.getPos(e,g),i=t.x,l=t.y,r=e.getBoundingClientRect(),s=r.width||r.right-r.left,d=r.height||r.bottom-r.top;f!==e&&(D(),f=e,_=k=0);var n=o.dispatch("ObjectSelected",{target:e});a(e)&&!n.isDefaultPrevented()?ne(Qg,(a,o)=>{var e=c.get("mceResizeHandle"+o);e&&c.remove(e),e=c.add(g,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"}),c.bind(e,"mousedown",e=>{var r,t,n;e.stopImmediatePropagation(),e.preventDefault(),e=e,n=A(f)[0],y=e.screenX,C=e.screenY,w=n.clientWidth,E=n.clientHeight,x=E/w,(v=a).name=o,v.startPos={x:s*a[0]+i,y:d*a[1]+l},S=g.scrollWidth,N=g.scrollHeight,b=c.add(g,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),c.setStyles(b,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),p=(r=c,e=f,R(e)?r.create("img",{src:F.transparentSrc}):ca(e)?(n=lt(v.name,"n")?Re:Ae,t=e.cloneNode(!0),n(r.select("tr",t)).each(e=>{var t=r.select("td,th",e);r.setStyle(e,"height",null),re(t,e=>r.setStyle(e,"height",null))}),t):e.cloneNode(!0)),c.addClass(p,"mce-clonedresizable"),c.setAttrib(p,"data-mce-bogus","all"),p.contentEditable="false",c.setStyles(p,{left:i,top:l,margin:0}),T(p,s,d),p.removeAttribute(Gg),g.appendChild(p),c.bind(u,"mousemove",O),c.bind(u,"mouseup",B),m!==u&&(c.bind(m,"mousemove",O),c.bind(m,"mouseup",B)),h=c.add(g,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},w+" &times; "+E)}),a.elm=e,c.setStyles(e,{left:s*a[0]+i-e.offsetWidth/2,top:d*a[1]+l-e.offsetHeight/2})}):D(!1)},P=wi(d,0),D=(e=!0)=>{P.cancel(),M(),f&&e&&f.removeAttribute(Gg),ne(Qg,(e,t)=>{t=c.get("mceResizeHandle"+t);t&&(c.unbind(t),c.remove(t))})},L=(e,t)=>c.isChildOf(e,t),t=t=>{if(!(i||o.removed||o.composing)){var t="mousedown"===t.type?t.target:n.getNode(),t=cn(W(t),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>c.isEditable(e.parentElement)||"IMG"===e.nodeName&&c.isEditable(e)).getOrUndefined(),r=z(t)?c.getAttrib(t,Gg,"1"):"1";if(re(c.select(`img[${Gg}],hr[${Gg}]`),e=>{e.removeAttribute(Gg)}),z(t)&&L(t,g)&&Kg(o)){I();let e=n.getStart(!0);if(L(e,t)&&L(n.getEnd(!0),t))return c.setAttrib(t,Gg,r),void P.throttle(t)}D()}},M=()=>{ne(Qg,e=>{e.elm&&(c.unbind(e.elm),delete e.elm)})},I=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return o.on("init",()=>{I(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",t),o.on("keyup compositionend",e=>{f&&"TABLE"===f.nodeName&&t(e)}),o.on("hide blur",D),o.on("contextmenu longpress",e,!0)}),o.on("remove",M),{isResizable:a,showResizeRect:d,hideResizeRect:D,updateResizeRect:t,destroy:()=>{P.cancel(),f=p=b=null}}},ef=(e,t,r)=>{var n,e=e.document.createRange(),a=e;return t.fold(e=>{a.setStartBefore(e.dom)},(e,t)=>{a.setStart(e.dom,t)},e=>{a.setStartAfter(e.dom)}),n=e,r.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)}),e},tf=(e,t,r,n,a)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(n.dom,a),e},rf=ks([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),nf=(e,t,r)=>t(W(r.startContainer),r.startOffset,W(r.endContainer),r.endOffset),af=(rf.ltr,rf,(e,t)=>{var r=q(e);return"input"===r?_g.after(e):V(["br","img"],r)?0===t?_g.before(e):_g.after(e):_g.on(e,t)}),of=(e,t)=>{e=e.fold(_g.before,af,_g.after),t=t.fold(_g.before,af,_g.after);return Sg.relative(e,t)},lf=(e,t,r,n)=>{e=af(e,t),t=af(r,n);return Sg.relative(e,t)},sf=(e,t)=>{let r=(t||document).createDocumentFragment();return re(e,e=>{r.appendChild(e.dom)}),W(r)},df=e=>{let a=Sg.getWin(e).dom,t=(e,t,r,n)=>tf(a,e,t,r,n),r=e.match({domRange:e=>{var t=W(e.startContainer),r=W(e.endContainer);return lf(t,e.startOffset,r,e.endOffset)},relative:of,exact:lf});return((t,r)=>{a=t;var a,t=r.match({domRange:e=>({ltr:J(e),rtl:ee.none}),relative:(e,t)=>({ltr:Je(()=>ef(a,e,t)),rtl:Je(()=>ee.some(ef(a,t,e)))}),exact:(e,t,r,n)=>({ltr:Je(()=>tf(a,e,t,r,n)),rtl:Je(()=>ee.some(tf(a,r,n,e,t)))})});{let e=(r=t).ltr();return e.collapsed?r.rtl().filter(e=>!1===e.collapsed).map(e=>rf.rtl(W(e.endContainer),e.endOffset,W(e.startContainer),e.startOffset)).getOrThunk(()=>nf(0,rf.ltr,e)):nf(0,rf.ltr,e)}})(a,r).match({ltr:t,rtl:t})},cf=(e,t,r)=>{var n,a,o,i,l=Lr(W(r));return l=l.dom,e=e,t=t,l=l.document,e=e,t=t,(l.caretPositionFromPoint?(n=l,a=e,o=t,ee.from(null==(i=n.caretPositionFromPoint)?void 0:i.call(n,a,o)).bind(e=>{var t;return null===e.offsetNode?ee.none():((t=n.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),ee.some(t))})):l.caretRangeFromPoint?(i=l,a=e,o=t,ee.from(null==(l=i.caretRangeFromPoint)?void 0:l.call(i,a,o))):ee.none()).map(e=>Eg(W(e.startContainer),e.startOffset,W(e.endContainer),e.endOffset)).map(e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},uf=(e,t)=>z(e)&&z(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,mf=(n,e,t)=>null!==((e,t)=>{let r=n;for(;r&&r!==e;){if(t(r))return r;r=r.parentNode}return null})(e,t),gf=(e,t,r)=>mf(e,t,e=>e.nodeName===r),ff=(e,t)=>sl(e)&&!mf(e,t,Ju),pf=(e,t,r)=>{var n=t.parentNode;if(n)for(var a,o=new Gn(t,e.getParent(n,e.isBlock)||e.getRoot());a=o[r?"prev":"next"]();)if(L(a))return!0;return!1},hf=(e,t,r,n,a)=>{var o=e.getRoot(),i=e.schema.getNonEmptyElements(),l=a.parentNode;let s,d;if(!l)return ee.none();var c=e.getParent(l,e.isBlock)||o;if(n&&L(a)&&t&&e.isEmpty(c))return ee.some(M(l,e.nodeIndex(a)));for(var u=new Gn(a,c);d=u[n?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||ff(d,o))return ee.none();if(D(d)&&0<d.data.length)return gf(d,o,"A")?ee.none():ee.some(M(d,n?d.data.length:0));if(e.isBlock(d)||i[d.nodeName.toLowerCase()])return ee.none();s=d}return!pa(s)&&r&&s?ee.some(M(s,0)):ee.none()},vf=(t,e,r,n)=>{var a=t.getRoot();let o,i=!1,l=r?n.startContainer:n.endContainer,s=r?n.startOffset:n.endOffset;var n=G(l)&&s===l.childNodes.length,d=t.schema.getNonEmptyElements();let c=r;if(sl(l))return ee.none();if(G(l)&&s>l.childNodes.length-1&&(c=!1),ha(l)&&(l=a,s=0),l===a){if(c&&(o=l.childNodes[0<s?s-1:0])){if(sl(o))return ee.none();if(d[o.nodeName]||ca(o))return ee.none()}if(l.hasChildNodes()){if(s=Math.min(!c&&0<s?s-1:s,l.childNodes.length-1),l=l.childNodes[s],s=D(l)&&n?l.data.length:0,!e&&l===a.lastChild&&ca(l))return ee.none();if((e=>{let t=l;for(;t&&t!==e;){if(E(t))return!0;t=t.parentNode}return!1})(a)||sl(l))return ee.none();if(ka(l))return ee.none();if(l.hasChildNodes()&&!ca(l)){o=l;let e=new Gn(l,a);do{if(E(o)||sl(o)){i=!1;break}if(D(o)&&0<o.data.length){s=c?0:o.data.length,l=o,i=!0;break}if(d[o.nodeName.toLowerCase()]&&!Ea(o)){s=t.nodeIndex(o),l=o.parentNode,c||s++,i=!0;break}}while(o=c?e.next():e.prev())}}}return e&&(D(l)&&0===s&&hf(t,n,e,!0,l).each(e=>{l=e.container(),s=e.offset(),i=!0}),G(l))&&((o=(o=l.childNodes[s])||l.childNodes[s-1])&&L(o)&&"A"!==(null==(r=o.previousSibling)?void 0:r.nodeName)&&!pf(t,o,!1)&&!pf(t,o,!0)&&hf(t,n,e,!0,o).each(e=>{l=e.container(),s=e.offset(),i=!0})),c&&!e&&D(l)&&s===l.data.length&&hf(t,n,e,!1,l).each(e=>{l=e.container(),s=e.offset(),i=!0}),i&&l?ee.some(M(l,s)):ee.none()},bf=(e,t)=>{let r=t.collapsed,n=t.cloneRange(),a=M.fromRangeStart(t);return vf(e,r,!0,n).each(e=>{r&&M.isAbove(a,e)||n.setStart(e.container(),e.offset())}),r||vf(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),uf(t,n)?ee.none():ee.some(n)},yf=(e,t)=>e.splitText(t),Cf=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,a=e.endOffset;if(t===n&&D(t)){if(0<r&&r<t.data.length)if(n=yf(t,r),t=n.previousSibling,a>r){a-=r;let e=yf(n,a).previousSibling;t=n=e,a=e.data.length,r=0}else a=0}else if(D(t)&&0<r&&r<t.data.length&&(t=yf(t,r),r=0),D(n)&&0<a&&a<n.data.length){let e=yf(n,a).previousSibling;n=e,a=e.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:a}},wf=n=>({walk:(e,t)=>cg(n,e,t),split:Cf,expand:(r,e={type:"word"})=>{if("word"!==e.type)return r;{let e=dg(n,r,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),t=n.createRng();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}},normalize:t=>bf(n,t).fold(h,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))}),Ef=(wf.compareRanges=uf,wf.getCaretRangeFromPoint=cf,wf.getSelectedNode=xl,wf.getNode=_l,(a=>{let e=t=>{n=(r=t).dom;let e=en(r)?n.getBoundingClientRect().height:n.offsetHeight;var r,n;if(e<=0||null===e){let e=bn(t,a);return parseFloat(e)||0}return e},n=(r,e)=>he(e,(e,t)=>{t=bn(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!y(t)&&!t.match(/^[0-9]+$/))throw new Error(a+".set accepts only positive integer values. Value was "+t);e=e.dom;fn(e)&&(e.style[a]=t+"px")},get:e,getOuter:e,aggregate:n,max:(e,t,r)=>{e=n(e,r);return e<t?t-e:0}}})("height")),xf=(r,e)=>r.view(e).fold(J([]),e=>{var t=r.owner(e),t=xf(r,t);return[e].concat(t)});var _f,kf=Object.freeze({__proto__:null,view:e=>(e.dom===document?ee.none():ee.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(W),owner:e=>Dr(e)});let Sf=e=>"textarea"===q(e),Nf=(e,t)=>{o=(r=e).dom.ownerDocument,i=o.body,l=o.defaultView,o=o.documentElement;var r,n,a,o,i=i===r.dom?Mn(i.offsetLeft,i.offsetTop):(n=In(null==l?void 0:l.pageYOffset,o.scrollTop),l=In(null==l?void 0:l.pageXOffset,o.scrollLeft),a=In(o.clientTop,i.clientTop),o=In(o.clientLeft,i.clientLeft),Fn(r).translate(l-o,n-a)),l=(r=e,Ef.get(r));return{element:e,bottom:i.top+l,height:l,pos:i,cleanup:t}},Rf=(r,n,a,o)=>{Bf(r,(e,t)=>Tf(r,n,a,o),a)},Af=(e,t,r,n,a)=>{var o={elm:n.element.dom,alignToTop:a};e.dispatch("ScrollIntoView",o).isDefaultPrevented()||(r(e,t,Un(t).top,n,a),e.dispatch("AfterScrollIntoView",o))},Tf=(e,t,r,n)=>{var a=W(e.getBody()),o=W(e.getDoc()),a=(a.dom.offsetWidth,((e,t)=>{e=e,t=t;let r=0===(a=Vr(e)).length||Sf(e)?{element:e,offset:t}:t<a.length&&!Sf(a[t])?{element:a[t],offset:0}:(a=a[a.length-1],Sf(a)?{element:e,offset:t}:"img"===q(a)?{element:a,offset:1}:nr(a)?{element:a,offset:Vi(a).length}:{element:a,offset:Vr(a).length}),n=kr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');var a;return xn(r.element,n),Nf(n,()=>Y(n))})(W(r.startContainer),r.startOffset));Af(e,o,t,a,n),a.cleanup()},Of=(e,t,r,n)=>{var a=W(e.getDoc());Af(e,a,r,(e=t,Nf(W(e),H)),n)},Bf=(e,t,r)=>{var n=r.startContainer,a=r.startOffset,o=r.endContainer,i=r.endOffset,t=(t(W(n),W(o)),e.dom.createRng());t.setStart(n,a),t.setEnd(o,i),e.selection.setRng(r)},Pf=(t,r,n,e,a)=>{var o=r.pos;if(e)zn(o.left,o.top,a);else{let e=o.top-n+r.height;zn(-t.getBody().getBoundingClientRect().left,e,a)}},Df=(e,t,r,n,a,o)=>{var i=n+r,l=a.pos.top,s=a.bottom,d=n<=s-l;l<r?Pf(e,a,n,!1!==o,t):i<l?Pf(e,a,n,d?!1!==o:!0===o,t):i<s&&!d&&Pf(e,a,n,!0===o,t)},Lf=(e,t,r,n,a)=>{var o=Lr(t).dom.innerHeight;Df(e,t,r,o,n,a)},Mf=(e,t,r,n,a)=>{var o=Lr(t).dom.innerHeight,r=(Df(e,t,r,o,n,a),e=n.element,t=bg(),t=Un(t),o=(r=kf).owner(e),r=xf(r,o),o=Fn(e),e=pe(r,(e,t)=>{t=Fn(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0}),Mn(e.left+o.left+t.left,e.top+o.top+t.top)),e=Vn(window);r.top<e.y?jn(n.element,!1!==a):r.top>e.bottom&&jn(n.element,!0===a)},If=(e,t,r)=>Rf(e,Lf,t,r),Ff=(e,t,r)=>Of(e,t,Lf,r),Uf=(e,t,r)=>Rf(e,Mf,t,r),zf=(e,t,r)=>Of(e,t,Mf,r),jf=(e,t,r)=>{(e.inline?If:Uf)(e,t,r)},Hf=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Vf=(e,t,r,n,a)=>{let o=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return ee.from(o).map(W).map(e=>n&&t.collapsed?e:$r(e,a(e,i)).getOr(e)).bind(e=>rr(e)?ee.some(e):Mr(e).filter(rr)).map(e=>e.dom).getOr(e)},$f=(e,t,r=!1)=>Vf(e,t,!0,r,(e,t)=>Math.min(Kr(e),t)),qf=(e,t,r=!1)=>Vf(e,t,!1,r,(e,t)=>0<t?t-1:t),Wf=(e,t)=>{for(var r=e;e&&D(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Kf=(r,e)=>te(e,e=>{var t=r.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e}),Yf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gf=(r,n,e)=>{var t=e?"lastChild":"firstChild",a=e?"prev":"next";if(r[t])return r[t];if(r!==n){let t=r[a];if(t)return t;for(let e=r.parent;e&&e!==n;e=e.parent)if(t=e[a])return t}},Xf=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Zf{static create(e,t){let r=new Zf(e,Yf[e]||1);return t&&ne(t,(e,t)=>{r.attr(t,e)}),r}constructor(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(t,r){let n=this;if(!Z(t))return z(t)&&ne(t,(e,t)=>{n.attr(t,e)}),n;var a=n.attributes;if(a){if(void 0===r)return a.map[t];if(null===r){if(t in a.map){delete a.map[t];let e=a.length;for(;e--;)if(a[e].name===t)return a.splice(e,1),n}}else{if(t in a.map){let e=a.length;for(;e--;)if(a[e].name===t){a[e].value=r;break}}else a.push({name:t,value:r});a.map[t]=r}return n}}clone(){let e=this,t=new Zf(e.name,e.type),n=e.attributes;if(n){let r=[];r.map={};for(let e=0,t=n.length;e<t;e++){var a=n[e];"id"!==a.name&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}t.attributes=r}return t.value=e.value,t}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){var e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):r&&(r.next=t),e.lastChild===this?(e.lastChild=r)&&(r.next=null):t&&(t.prev=r),this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,(e.next=t).prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,(e.prev=t).next=e),e.parent=n,e}getAll(t){var r=[];for(let e=this.firstChild;e;e=Gf(e,this))e.name===t&&r.push(e);return r}children(){var t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){let r=this;if(r.firstChild){var n=[];for(let e=r.firstChild;e;e=Gf(e,r))n.push(e);let t=n.length;for(;t--;){let e=n[t];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return r.firstChild=r.lastChild=null,r}isEmpty(e,t={},r){var n,a;let o=this.firstChild;if(Xf(this))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name])return!1;if(Xf(o))return!1}if(8===o.type)return!1;if(3===o.type&&(n=o,a=void 0,a=null!=(a=n.value)?a:"",!ea(a)||(n=n.parent)&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(a)))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&ea(null!=(n=o.value)?n:""))return!1;if(r&&r(o))return!1}while(o=Gf(o,this));return!0}walk(e){return Gf(this,null,e)}}function Qf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return C0(_f,t)}let Jf=oe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),ep=e=>Z(e.nodeValue)&&e.nodeValue.includes(tl),tp=e=>(0===e.length?"":te(e,e=>`[${e}]`).join(",")+",")+'[data-mce-bogus="all"]',rp=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>ep(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),np=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>ep(e)&&(e=e.parentNode)&&ae(Jf,e.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ap=e=>null!==rp(e).nextNode(),op=e=>null!==np(e).nextNode(),ip=(e,t)=>null!==t.querySelector(tp(e)),lp=(r,e)=>{var t;re((t=r,e.querySelectorAll(tp(t))),e=>{let t=W(e);"all"===cr(t,"data-mce-bogus")?Y(t):re(r,e=>{mr(t,e)&&gr(t,e)})})},sp=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},dp=s(sp,rp),cp=s(sp,np),up=(r,e)=>{e=[{condition:C(ip,e),action:C(lp,e)},{condition:ap,action:dp},{condition:op,action:cp}];let n=r,a=!1;return re(e,({condition:e,action:t})=>{e(n)&&(a||(n=r.cloneNode(!0),a=!0),t(n))}),n},mp=e=>{e=qn(e,"[data-mce-bogus]");re(e,e=>{("all"===cr(e,"data-mce-bogus")?Y:Wi(e)?(xn(e,Nr(Xn)),Y):An)(e)})},gp=e=>{e=qn(e,"input");re(e,e=>{gr(e,"name")})},fp=(e,t,r)=>{var n,a,o="raw"===t.format?oe.trim(nl(up(r,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?(n=r,a=(o=e).getDoc(),o=Gr(W(o.getBody())),a=Sr("div",a),sr(a,"data-mce-bogus","all"),vn(a,{position:"fixed",left:"-9999999px",top:"0"}),Bn(a,n.innerHTML),mp(a),gp(a),n=o,o=Yr(n)?n:W(Dr(n).dom.body),K(o,a),n=nl(a.dom.innerText),Y(a),n):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{e=Js(e),e=new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${e}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(e,"")})(e,e.serializer.serialize(r,t));return"text"!==t.format&&!Qi(W(r))&&Z(o)?oe.trim(o):o},pp=oe.makeMap,hp=e=>{let n=[],a=(e=e||{}).indent,o=pp(e.indent_before||""),i=pp(e.indent_after||""),l=_o.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="xhtml"!==e.element_format;return{start:(e,r,t)=>{if(a&&o[e]&&0<n.length){let e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}if(n.push("<",e),r)for(let t=0,e=r.length;t<e;t++){let e=r[t];n.push(" ",e.name,'="',l(e.value,!0),'"')}if(n[n.length]=!t||s?">":" />",t&&a&&i[e]&&0<n.length){let e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}},end:e=>{n.push("</",e,">"),a&&i[e]&&0<n.length&&0<(e=n[n.length-1]).length&&"\n"!==e&&n.push("\n")},text:(e,t)=>{0<e.length&&(n[n.length]=t?e:l(e))},cdata:e=>{n.push("<![CDATA[",e,"]]>")},comment:e=>{n.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{t?n.push("<?",e," ",l(t),"?>"):n.push("<?",e,"?>"),a&&n.push("\n")},doctype:e=>{n.push("<!DOCTYPE",e,">",a?"\n":"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},vp=(r={},l=jo())=>{let s=hp(r);return r.validate=!("validate"in r)||r.validate,{serialize:e=>{let n=r.validate,t={3:e=>{var t;s.text(null!=(t=e.value)?t:"",e.raw)},8:e=>{s.comment(null!=(e=e.value)?e:"")},7:e=>{s.pi(e.name,e.value)},10:e=>{s.doctype(null!=(e=e.value)?e:"")},4:e=>{s.cdata(null!=(e=e.value)?e:"")},11:e=>{let t=e;if(t=t.firstChild)for(;i(t),t=t.next;);}},i=(s.reset(),o=>{var r;let e=t[o.type];if(e)e(o);else{let t=o.name,e=t in l.getVoidElements(),a=o.attributes;if(n&&a&&1<a.length){let r=[],n=(r.map={},l.getElementRule(o.name));if(n){for(let e=0,t=n.attributesOrder.length;e<t;e++){let t=n.attributesOrder[e];if(t in a.map){let e=a.map[t];r.map[t]=e,r.push({name:t,value:e})}}for(let e=0,t=a.length;e<t;e++){let t=a[e].name;if(!(t in r.map)){let e=a.map[t];r.map[t]=e,r.push({name:t,value:e})}}a=r}}if(s.start(t,a,e),Fa(t))Z(o.value)&&s.text(o.value,!0),s.end(t);else if(!e){let e=o.firstChild;if(e)for("pre"!==t&&"textarea"!==t||3!==e.type||"\n"!==(null==(r=e.value)?void 0:r[0])||s.text("\n",!0);i(e),e=e.next;);s.end(t)}}});return 1!==e.type||r.inner?3===e.type?t[3](e):t[11](e):i(e),s.getContent()}}},bp=new Set,yp=(re(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{bp.add(e)}),new Set),Cp=(re(["background-color"],e=>{yp.add(e)}),["font","text-decoration","text-emphasis"]),wp=(e,t)=>Pe(e.parseStyle(e.getAttrib(t,"style"))),Ep=(e,t)=>$(wp(e,t),e=>(e=e,bp.has(e))),xp=(r,n,a)=>ee.from(a.container()).filter(D).exists(e=>{var t=r?0:-1;return n(e.data.charAt(a.offset()+t))}),_p=C(xp,!0,fm),kp=C(xp,!1,fm),Sp=e=>{e=e.container();return D(e)&&(0===e.data.length||rl(e.data)&&hg.isBookmarkNode(e.parentNode))},Np=(t,r)=>e=>bu(t?0:-1,e).filter(r).isSome(),Rp=e=>ba(e)&&"block"===bn(W(e),"display"),Ap=e=>E(e)&&(e=e,!(G(e)&&"all"===e.getAttribute("data-mce-bogus"))),Tp=Np(!0,Rp),Op=Np(!1,Rp),Bp=Np(!0,xa),Pp=Np(!1,xa),Dp=Np(!0,ca),Lp=Np(!1,ca),Mp=Np(!0,Ap),Ip=Np(!1,Ap),Fp=(e,t)=>{return e=e,r=t,n=h,Br(r,e)?Fr(e,e=>n(e)||P(e,r)).slice(0,-1):[];var r,n},Up=(e,t)=>[e].concat(Fp(e,t)),zp=(e,t,r)=>Wu(e,t,r,Sp),jp=(e,t,r)=>{return be(Up(W(t.container()),e),(n=r,e=>n.isBlock(q(e))));var n},Hp=(e,r,n,a)=>zp(e,r.dom,n).forall(t=>jp(r,n,a).fold(()=>!vu(t,n,r.dom),e=>!vu(t,n,r.dom)&&Br(e,W(t.container())))),Vp=(t,r,n,e)=>jp(r,n,e).fold(()=>zp(t,r.dom,n).forall(e=>!vu(e,n,r.dom)),e=>zp(t,e.dom,n).isNone()),$p=C(Vp,!1),qp=C(Vp,!0),Wp=C(Hp,!1),Kp=C(Hp,!0),Yp=e=>Nu(e).exists(Wi),Gp=(e,t,r,n)=>{var a=B(Up(W(r.container()),t),e=>n.isBlock(q(e))),a=Re(a).getOr(t);return $u(e,a.dom,r).filter(Yp)},Xp=(e,t,r)=>Nu(t).exists(Wi)||Gp(!0,e,t,r).isSome(),Zp=(e,t,r)=>{return n=t,ee.from(n.getNode(!0)).map(W).exists(Wi)||Gp(!1,e,t,r).isSome();var n},Qp=C(Gp,!1),Jp=C(Gp,!0),eh=e=>M.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),th=(e,t,r)=>{t=B(Up(W(t.container()),e),e=>r.isBlock(q(e)));return Re(t).getOr(e)},rh=(e,t,r)=>eh(t)?kp(t):kp(t)||Gu(th(e,t,r).dom,t).exists(kp),nh=(e,t,r)=>eh(t)?_p(t):_p(t)||Yu(th(e,t,r).dom,t).exists(_p),ah=e=>Nu(e).bind(e=>on(e,rr)).exists(e=>(e=bn(e,"white-space"),V(["pre","pre-wrap"],e))),oh=(t,r)=>e=>(e=new Gn(e,t)[r](),z(e)&&E(e)&&iu(e)),ih=(e,t,r)=>{return!ah(t)&&(o=r,i=n=e,l=a=t,Gu(i.dom,l).isNone()||(i=n,l=a,Yu(i.dom,l).isNone())||$p(n,a,o)||qp(n,a,o)||Zp(n,a,o)||Xp(n,a,o)||rh(e,t,r)||nh(e,t,r));var n,a,o,i,l},lh=(e,t,r)=>!ah(t)&&($p(e,t,r)||Wp(e,t,r)||Zp(e,t,r)||rh(e,t,r)||(r=e,e=t,t=Gu(r.dom,e).getOr(e),r=oh(r.dom,"prev"),e.isAtStart()&&(r(e.container())||r(t.container())))),sh=(e,t,r)=>!ah(t)&&(qp(e,t,r)||Kp(e,t,r)||Xp(e,t,r)||nh(e,t,r)||(r=e,e=t,t=Yu(r.dom,e).getOr(e),r=oh(r.dom,"next"),e.isAtEnd()&&(r(e.container())||r(t.container())))),dh=(e,t,r)=>{return lh(e,t,r)||sh(e,(t=(e=t).container(),n=e.offset(),D(t)&&n<t.data.length?M(t,n+1):e),r);var n},ch=(e,t)=>gm(e.charAt(t)),uh=(e,t)=>fm(e.charAt(t)),mh=(e,t,r,n)=>{var a=t.data,o=M(t,0);return r||!ch(a,0)||dh(e,o,n)?!!(r&&uh(a,0)&&lh(e,o,n))&&(t.data=Zn+a.slice(1),!0):(t.data=" "+a.slice(1),!0)},gh=(e,t,r,n)=>{var a=t.data,o=M(t,a.length-1);return r||!ch(a,a.length-1)||dh(e,o,n)?!!(r&&uh(a,a.length-1)&&sh(e,o,n))&&(t.data=a.slice(0,-1)+Zn,!0):(t.data=a.slice(0,-1)+" ",!0)},fh=(e,t,r)=>{var n,a=t.container();return D(a)?(n=t.container(),D(n)&&it(n.data,Zn)?(n=mh(e,a,!1,r)||(e=>{let t=e.data,r=(()=>{let r=t.split("");return te(r,(e,t)=>gm(e)&&0<t&&t<r.length-1&&pm(r[t-1])&&pm(r[t+1])?" ":e).join("")})();return r!==t&&(e.data=r,!0)})(a)||gh(e,a,!1,r),Yt(n,t)):dh(e,t,r)?(n=mh(e,a,!0,r)||gh(e,a,!0,r),Yt(n,t)):ee.none()):ee.none()},ph=(e,t,r,n)=>{var a,o,i;0!==r&&(i=W(e),i=an(i,e=>n.isBlock(q(e))).getOr(i),a=e.data.slice(t,t+r),o=t+r>=e.data.length&&sh(i,M(e,e.data.length),n),i=0===t&&lh(i,M(e,0),n),e.replaceData(t,r,ra(a,4,i,o)))},hh=(e,t,r)=>{var n=e.data.slice(t),n=n.length-ut(n).length;ph(e,t,n,r)},vh=(e,t,r)=>{var n=e.data.slice(0,t),n=n.length-mt(n).length;ph(e,t-n,n,r)},bh=(e,t,r,n,a=!0)=>{var o=mt(e.data).length,i=a?e:t,t=a?t:e;return a?i.appendData(t.data):i.insertData(0,t.data),Y(W(t)),n&&hh(i,o,r),i},yh=(e,t)=>{return e=e,n=(r=t).container(),a=r.offset(),!M.isTextPosition(r)&&n===e.parentNode&&a>M.before(e).offset()?M(t.container(),t.offset()-1):t;var r,n,a},Ch=e=>{return Ll(e.previousSibling)?ee.some((t=e.previousSibling,D(t)?M(t,t.data.length):M.after(t))):e.previousSibling?Zu(e.previousSibling):ee.none();var t},wh=e=>{return Ll(e.nextSibling)?ee.some((t=e.nextSibling,D(t)?M(t,0):M.before(t))):e.nextSibling?Xu(e.nextSibling):ee.none();var t},Eh=(e,t,r)=>{return t=t,n=r,(e?(i=t,l=n,wh(l).orThunk(()=>Ch(l)).orThunk(()=>{return e=i,t=l,Yu(e,M.after(t)).orThunk(()=>Gu(e,M.before(t)));var e,t})):(a=t,o=n,Ch(o).orThunk(()=>wh(o)).orThunk(()=>{return t=a,e=o,ee.from(e.previousSibling||e.parentNode).bind(e=>Gu(t,M.before(e))).orThunk(()=>Yu(t,M.after(e)));var t,e}))).map(C(yh,r));var n,a,o,i,l},xh=(t,r,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),r)})},_h=(e,t)=>t&&ae(e.schema.getBlockElements(),q(t)),kh=(n,t,e,r=!0,a=!1)=>{var o,i=Eh(t,n.getBody(),e.dom),l=an(e,C(_h,n),(o=n.getBody(),e=>e.dom===o));let s=((e,t,a,o)=>{let r=Ur(e).filter(nr),n=zr(e).filter(nr);return Y(e),e=r,i=n,l=t,s=(e,t,r)=>{var e=e.dom,t=t.dom,n=e.data.length;return bh(e,t,a,o),r.container()===t?M(e,n):r},(e.isSome()&&i.isSome()&&l.isSome()?ee.some(s(e.getOrDie(),i.getOrDie(),l.getOrDie())):ee.none()).orThunk(()=>(o&&(r.each(e=>vh(e.dom,e.dom.length,a)),n.each(e=>hh(e.dom,0,a))),t));var i,l,s})(e,i,n.schema,(i=n,e=e,ae(i.schema.getTextInlineElements(),q(e))));n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):l.bind(t=>{var e=n.schema,r=a;if(Ba(e,t)){let e=kr('<br data-mce-bogus="1">');return r?re(Vr(t),e=>{Ym(e)||Y(e)}):Rn(t),K(t,e),ee.some(M.before(e.dom))}return ee.none()}).fold(()=>{r&&xh(n,t,s)},e=>{r&&xh(n,t,ee.some(e))})},Sh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Nh=(e,t)=>Tr(W(t),kd(e))&&!Ja(e.schema,t)&&e.dom.isEditable(t),Rh=e=>"rtl"===X.DOM.getStyle(e,"direction",!0)||(e=null!=(e=e.textContent)?e:"",Sh.test(e)),Ah=(e,t,r)=>{e=e,t=t,r=r;r=B(X.DOM.getParents(r.container(),"*",t),e);return ee.from(r[r.length-1])},Th=(e,t)=>{var r=t.container(),n=t.offset();return e?ll(r)?D(r.nextSibling)?M(r.nextSibling,0):M.after(r):cl(t)?M(r,n+1):t:ll(r)?D(r.previousSibling)?M(r.previousSibling,r.previousSibling.data.length):M.before(r):ul(t)?M(r,n-1):t},Oh=C(Th,!0),Bh=C(Th,!1),Ph=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},Dh=e=>Ph(e,"Delete"),Lh=e=>Ph(e,"ForwardDelete"),Mh=e=>Ki(e)||Gi(e),Ih=(e,t)=>{return Br(e,t)?on(t,Mh,(r=e,e=>qt(Mr(e),r,P))):ee.none();var r},Fh=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Uh=(o,i,l)=>Kt(Xu(l),Zu(l),(e,t)=>{let r=Th(!0,e),n=Th(!1,t),a=Th(!1,i);return o?Yu(l,a).exists(e=>e.isEqual(n)&&i.isEqual(r)):Gu(l,a).exists(e=>e.isEqual(r)&&i.isEqual(n))}).getOr(!0),zh=e=>{var t;return(8===Jt(t=e)||"#comment"===q(t)?Ur:Wr)(e).bind(zh).orThunk(()=>ee.some(e))},jh=(t,e,r,n=!0)=>{var a;e.deleteContents();let o=zh(r).getOr(r),i=W(null!=(e=t.dom.getParent(o.dom,t.dom.isBlock))?e:r.dom);if(i.dom===t.getBody()?Fh(t,n):Ba(t.schema,i,{checkRootAsContent:!1})&&(el(i),n)&&t.selection.setCursorLocation(i.dom,0),!P(r,i)){let e=qt(Mr(i),r)?[]:Mr(a=i).map(Vr).map(e=>B(e,e=>!P(a,e))).getOr([]);re(e.concat(Vr(r)),e=>{P(e,i)||Br(e,i)||!Ba(t.schema,e)||Y(e)})}},Hh=e=>qn(e,"td,th"),Vh=(e,t)=>ym(W(e),t),$h=(e,t)=>({start:e,end:t}),qh=ks([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Wh=(e,t)=>cn(W(e),"td,th",t),Kh=e=>!P(e.start,e.end),Yh=(e,r)=>ym(e.start,r).bind(t=>ym(e.end,r).bind(e=>Yt(P(t,e),t))),Gh=e=>t=>Yh(t,e).map(e=>({rng:t,table:e,cells:Hh(e)})),Xh=(t,e,a,o)=>{if(a.collapsed||!t.forall(Kh))return ee.none();if(e.isSameTable){let e=t.bind(Gh(o));return ee.some({start:e,end:e})}{let e=Wh(a.startContainer,o),t=Wh(a.endContainer,o),r=e.bind((l=o,t=>ym(t,l).bind(e=>Ae(Hh(e)).map(e=>$h(t,e))))).bind(Gh(o)),n=t.bind((i=o,t=>ym(t,i).bind(e=>Re(Hh(e)).map(e=>$h(e,t))))).bind(Gh(o));return ee.some({start:r,end:n})}var i,l},Zh=(e,t)=>ye(e,e=>P(e,t)),Qh=r=>Kt(Zh(r.cells,r.rng.start),Zh(r.cells,r.rng.end),(e,t)=>r.cells.slice(e,t+1)),Jh=(e,t)=>{let{startTable:r,endTable:n}=t,a=e.cloneRange();return r.each(e=>a.setStartAfter(e.dom)),n.each(e=>a.setEndBefore(e.dom)),a},ev=(e,t)=>{r=e;var a,r,n,o,i,l,s,d,c,u,m,g,e=e=>P(r,e),f=(n=t,f=e,s=Wh(n.startContainer,f),n=Wh(n.endContainer,f),Kt(s,n,$h)),p=(s=t,n=e,p=Vh(s.startContainer,n),s=Vh(s.endContainer,n),n=p.isSome(),l=s.isSome(),u=Kt(p,s,P).getOr(!1),a={startTable:p,endTable:s,isStartInTable:n,isEndInTable:l,isSameTable:u,isMultiTable:!u&&n&&l},Kt(a.startTable,a.endTable,(t,r)=>{var e=Yn(t,e=>P(e,r)),n=Yn(r,e=>P(e,t));return e||n?{...a,startTable:e?ee.none():a.startTable,endTable:n?ee.none():a.endTable,isSameTable:!1,isMultiTable:!1}:a}).getOr(a));return m=t,g=e,f.exists(e=>{return t=e,r=g,!Kh(t)&&Yh(t,r).exists(e=>{e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&Em(e.start,m);var t,r})?f.map(e=>qh.singleCellTable(t,e.start)):p.isMultiTable?(s=f,d=p,c=t,u=e,Xh(s,d,c,u).bind(({start:e,end:t})=>{var r=e.bind(Qh).getOr([]),t=t.bind(Qh).getOr([]);if(0<r.length&&0<t.length){let e=Jh(c,d);return ee.some(qh.multiTable(r,t,e))}return ee.none()})):(n=f,o=p,i=t,l=e,Xh(n,o,i,l).bind(({start:e,end:t})=>e.or(t)).bind(e=>{var t=o.isSameTable,r=Qh(e).getOr([]);if(t&&e.cells.length===r.length)return ee.some(qh.fullTable(e.table));if(0<r.length){if(t)return ee.some(qh.partialTable(r,ee.none()));{let e=Jh(i,o);return ee.some(qh.partialTable(r,ee.some({...o,rng:e})))}}return ee.none()}))},tv=e=>re(e,e=>{gr(e,"contenteditable"),el(e)}),rv=(e,t,r,n)=>{var a=r.cloneRange();n?(a.setStart(r.startContainer,r.startOffset),a.setEndAfter(t.dom.lastChild)):(a.setStartBefore(t.dom.firstChild),a.setEnd(r.endContainer,r.endOffset)),iv(e,a,t,!1).each(e=>e())},nv=e=>{let t=bm(e),r=W(e.selection.getNode());wa(r.dom)&&Ba(e.schema,r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),1<t.length&&$(t,e=>P(e,r))&&sr(r,"data-mce-selected","1")},av=(l,s,t)=>ee.some(()=>{let i=l.selection.getRng(),e=t.bind(({rng:e,isStartInTable:t})=>{o=l,a=t?e.endContainer:e.startContainer;var r,n,a=ee.from(o.dom.getParent(a,o.dom.isBlock)).map(W),o=(e.deleteContents(),r=l,n=t,a.filter(C(Ba,l.schema)).each(e=>{n?Y(e):(el(e),r.selection.setCursorLocation(e.dom,0))}),t?s[0]:s[s.length-1]);return rv(l,o,i,t),Ba(l.schema,o)?ee.none():ee.some(t?s.slice(1):s.slice(0,-1))}).getOr(s);tv(e),nv(l)}),ov=(n,a,o,i)=>ee.some(()=>{var e=n.selection.getRng(),t=a[0],r=o[o.length-1],e=(rv(n,t,e,!0),rv(n,r,e,!1),Ba(n.schema,t)?a:a.slice(1)),t=Ba(n.schema,r)?o:o.slice(0,-1);tv(e.concat(t)),i.deleteContents(),nv(n)}),iv=(e,t,r,n=!0)=>ee.some(()=>{jh(e,t,r,n)}),lv=(e,t)=>ee.some(()=>kh(e,!1,t)),sv=(e,t)=>be(Up(t,e),Zi),dv=(e,t)=>be(Up(t,e),ir("caption")),cv=(e,t)=>ee.some(()=>{el(t),e.selection.setCursorLocation(t.dom,0)}),uv=(e,t)=>(e?Dp:Lp)(t),mv=(o,i,e)=>{let l=W(o.getBody());return dv(l,e).fold(()=>((o,i,l,e)=>{let s=M.fromRangeStart(o.selection.getRng());return sv(l,e).bind(e=>{return Ba(o.schema,e,{checkRootAsContent:!1})?cv(o,e):(t=o,r=l,n=i,a=e,e=s,qu(n,t.getBody(),e).bind(e=>sv(r,W(e.getNode())).bind(e=>P(e,a)?ee.none():ee.some(H))));var t,r,n,a})})(o,i,l,e).orThunk(()=>{return Yt((e=o,t=i,r=M.fromRangeStart(e.selection.getRng()),uv(t,r)||$u(t,e.getBody(),r).exists(e=>uv(t,e))),H);var e,t,r}),e=>{return t=o,r=i,n=l,e=e,a=M.fromRangeStart(t.selection.getRng()),Ba(t.schema,e)?cv(t,e):(s=t,d=n,c=r,u=e,m=a,qu(c,s.getBody(),m).fold(()=>ee.some(H),e=>{return a=u,o=c,i=m,l=e,Xu(a.dom).bind(t=>Zu(a.dom).map(e=>o?i.isEqual(t)&&l.isEqual(e):i.isEqual(e)&&l.isEqual(t))).getOr(!0)?(r=s,n=u,cv(r,n)):(r=d,t=u,n=e,dv(r,W(n.getNode())).fold(()=>ee.some(H),e=>Yt(!P(e,t),H)));var t,r,n,a,o,i,l}));var t,r,n,s,d,c,u,m,a})},gv=(e,t)=>{var n,a,o,r,i=W(e.selection.getStart(!0)),l=bm(e);return e.selection.isCollapsed()&&0===l.length?mv(e,t,i):(t=e,e=i,i=l,l=W(t.getBody()),r=t.selection.getRng(),0!==i.length?av(t,i,ee.none()):(n=t,a=l,o=r,i=e,dv(a,i).fold(()=>{return t=n,e=a,r=o,ev(e,r).bind(e=>e.fold(C(iv,t),C(lv,t),C(av,t),C(ov,t)));var t,e,r},e=>{return t=n,e=e,cv(t,e);var t})))},fv=(e,t)=>{let r=t;for(;r&&r!==e;){if(ya(r)||E(r))return r;r=r.parentNode}return null},pv=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],hv=oe.each,vv=e=>{let a=e.dom,r=new Set(e.serializer.getTempAttrs()),o=t=>$(pv,e=>lt(t,e))||r.has(t);return{compare:(e,t)=>{if(e.nodeName!==t.nodeName||e.nodeType!==t.nodeType)return!1;var r=t=>{let r={};return hv(a.getAttribs(t),e=>{e=e.nodeName.toLowerCase();"style"===e||o(e)||(r[e]=a.getAttrib(t,e))}),r},n=(e,t)=>{for(var r in e)if(ae(e,r)){var n=t[r];if(b(n))return!1;if(e[r]!==n)return!1;delete t[r]}for(let e in t)if(ae(t,e))return!1;return!0};if(G(e)&&G(t)){if(!n(r(e),r(t)))return!1;if(!n(a.parseStyle(a.getAttrib(e,"style")),a.parseStyle(a.getAttrib(t,"style"))))return!1}return!mm(e)&&!mm(t)},isAttributeInternal:o}},bv=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),yv=(r,n,a,o)=>{let i=a.name;for(let e=0,t=r.length;e<t;e++){var l=r[e];if(l.name===i){let e=o.nodes[i];e?e.nodes.push(a):o.nodes[i]={filter:l,nodes:[a]}}}if(a.attributes)for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.name;if(r in a.attributes.map){let e=o.attributes[r];e?e.nodes.push(a):o.attributes[r]={filter:t,nodes:[a]}}}},Cv=(e,t)=>{var r=(e,a)=>{ne(e,r=>{let n=Te(r.nodes);re(r.filter.callbacks,e=>{for(let t=n.length-1;0<=t;t--){let e=n[t];(a?void 0!==e.attr(r.filter.name):e.name===r.filter.name)&&!U(e.parent)||n.splice(t,1)}0<n.length&&e(n,r.filter.name,t)})})};r(e.nodes,!1),r(e.attributes,!0)},wv=(e,t,r,n={})=>{e=((t,r,n)=>{let a={nodes:{},attributes:{}};if(n.firstChild){let e=n;for(;e=e.walk();)yv(t,r,e,a)}return a})(e,t,r);Cv(e,n)},Ev=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){let e=new Zf("br",1);t.insert&&e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new Zf("#text",3)).value=Zn},xv=(e,t)=>{var r=null==e?void 0:e.firstChild;return z(r)&&r===e.lastChild&&r.name===t},_v=(t,e,r,n)=>n.isEmpty(e,r,e=>!0===(null==(e=t.getElementRule(e.name))?void 0:e.paddEmpty)),kv=e=>{let r;for(let t=e;t;t=t.parent){let e=t.attr("contenteditable");if("false"===e)break;"true"===e&&(r=t)}return ee.from(r)},Sv=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{var n=e.children();for(let e of n)r&&!t.isValidChild(r.name,e.name)&&Sv(e,t,r);e.unwrap()}},Nv=(o,i,t,l=H)=>{let s=i.getTextBlockElements(),d=i.getNonEmptyElements(),c=i.getWhitespaceElements(),r=oe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),u=new Set,m=e=>e!==t&&!r[e.name];for(let t=0;t<o.length;t++){let r=o[t],e,n,a;if(r.parent&&!u.has(r))if(s[r.name]&&"li"===r.parent.name){let e=r.next;for(;e&&s[e.name];)e.name="li",u.add(e),r.parent.insert(e,r.parent),e=e.next;r.unwrap()}else{var g=[r];for(e=r.parent;e&&!i.isValidChild(e.name,r.name)&&m(e);e=e.parent)g.push(e);if(e&&1<g.length)if(Rv(i,r,e))Sv(r,i);else{g.reverse(),l(n=g[0].clone());let t=n;for(let e=0;e<g.length-1;e++){i.isValidChild(t.name,g[e].name)&&0<e?(l(a=g[e].clone()),t.append(a)):a=t;for(let t=g[e].firstChild;t&&t!==g[e+1];){let e=t.next;a.append(t),t=e}t=a}_v(i,d,c,n)?e.insert(r,g[0],!0):(e.insert(n,g[0],!0),e.insert(r,n)),e=g[0],(_v(i,d,c,e)||xv(e,"br"))&&e.empty().remove()}else if(r.parent)if("li"===r.name){let e=r.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(r);continue}if((e=r.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(r,e.firstChild,!0);continue}let t=new Zf("ul",1);l(t),r.wrap(t)}else if(i.isValidChild(r.parent.name,"div")&&i.isValidChild("div",r.name)){let e=new Zf("div",1);l(e),r.wrap(e)}else Sv(r,i)}}},Rv=(e,t,r=t.parent)=>!(!r||(!e.children[t.name]||e.isValidChild(r.name,t.name))&&("a"!==t.name||!(()=>{let e=r;for(;e;){if("a"===e.name)return!0;e=e.parent}return!1})())&&("summary"!==r.name||!bv(t)||(null==r?void 0:r.firstChild)===t&&(null==r?void 0:r.lastChild)===t)),Av=e=>{if(e.collapsed)return e;{var s=e;let o=M.fromRangeStart(s),i=M.fromRangeEnd(s),l=s.commonAncestorContainer;return $u(!1,l,i).map(e=>{return!vu(o,i,l)&&vu(o,e,l)?(t=o.container(),r=o.offset(),n=e.container(),e=e.offset(),(a=document.createRange()).setStart(t,r),a.setEnd(n,e),a):s;var t,r,n,a}).getOr(s)}},Tv=(e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),t=e,e=n,a=t.getNonEmptyElements(),z(e)&&(e.isEmpty(a)||(a=e,t.getBlockElements()[a.name]&&(e=a,z(e.firstChild))&&e.firstChild===e.lastChild&&("br"===(e=a.firstChild).name||e.value===Zn)))&&(n=null==n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name);var a},Ov=e=>{return 0<e.length&&(!(t=e[e.length-1]).firstChild||z(null==(t=t)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((t=t.firstChild).data===Zn||L(t)))?e.slice(0,-1):e;var t},Bv=(e,t)=>{t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},Pv=(e,t)=>{e=M.after(e),t=zu(t).prev(e);return t?t.toRange():null},Dv=(r,n,a,o)=>{c=n,r=r.serialize(o),c=c.createFragment(r),r=c.firstChild,o=c.lastChild,r&&"META"===r.nodeName&&null!=(t=r.parentNode)&&t.removeChild(r),o&&"mce_marker"===o.id&&null!=(t=o.parentNode)&&t.removeChild(o);let e=c,i=Bv(n,a.startContainer),l=Ov((r=e.firstChild,B(null!=(t=null==r?void 0:r.childNodes)?t:[],e=>"LI"===e.nodeName)));var t,s,d,o=n.getRoot(),c=e=>{var t=M.fromRangeStart(a),r=zu(n.getRoot()),e=1===e?r.prev(t):r.next(t),r=null==e?void 0:e.getNode();return!r||Bv(n,r)!==i};{if(i){if(c(1)){var u=i,r=l,m=o;let t=u.parentNode;return t&&oe.each(r,e=>{t.insertBefore(e,u)}),r=u,r=M.before(r),(m=zu(m).next(r))?m.toRange():null}if(c(2))return r=i,m=l,c=o,n.insertAfter(m.reverse(),r),Pv(m[0],c);{var g=i;r=l,c=o,o=g,d=(s=a).cloneRange(),s=s.cloneRange(),d.setStartBefore(o),s.setEndAfter(o);let e=[d.cloneContents(),s.cloneContents()],t=g.parentNode;return t&&(t.insertBefore(e[0],g),oe.each(r,e=>{t.insertBefore(e,g)}),t.insertBefore(e[1],g),t.removeChild(g)),Pv(r[r.length-1],c)}}return null}},Lv=["pre"],Mv=wa,Iv=(d,c,e)=>{let r,u,m=d.selection,g=d.dom,f=d.parser,n=e.merge,p=vp({validate:!0},d.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',t=(-1===(c=e.preserve_zwsp?c:nl(c)).indexOf("{$caret}")&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,h),m.getRng()),a=t.startContainer,o=d.getBody();var i,l,s,v,b,y,C;a===o&&m.isCollapsed()&&g.isBlock(o.firstChild)&&(i=d,l=o.firstChild,z(l))&&!i.schema.getVoidElements()[l.nodeName]&&g.isEmpty(o.firstChild)&&((t=g.createRng()).setStart(o.firstChild,0),t.setEnd(o.firstChild,0),m.setRng(t)),m.isCollapsed()||(l=(i=d).dom,y=Av(i.selection.getRng()),i.selection.setRng(y),b=l.getParent(y.startContainer,Mv),l=l,v=y,s=b,!!z(s)&&s===l.getParent(v.endContainer,Mv)&&Em(W(s),v)?iv(i,y,W(b)):y.startContainer===y.endContainer&&y.endOffset-y.startOffset==1&&D(y.startContainer.childNodes[y.startOffset])?y.deleteContents():i.getDoc().execCommand("Delete",!1));let w=m.getNode(),E={context:w.nodeName.toLowerCase(),data:e.data,insert:!0},x=f.parse(c,E);if(!0===e.paste&&Tv(d.schema,x)&&(s=g,v=w,!!Bv(s,v)))(t=Dv(p,g,m.getRng(),x))&&m.setRng(t);else{!0===e.paste&&((n,e,a,o)=>{let i,l=e.firstChild,t=e.lastChild,r=l===("bookmark"===t.attr("data-mce-type")?t.prev:t),s=V(Lv,l.name);if(r&&s){let e="false"!==l.attr("contenteditable"),t=(null==(i=n.getParent(a,n.isBlock))?void 0:i.nodeName.toLowerCase())===l.name,r=ee.from(fv(o,a)).forall(ya);return e&&t&&r}return!1})(g,x,w,d.getBody())&&null!=(r=x.firstChild)&&r.unwrap();{let e=x;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}let t=x.lastChild;if(t&&"mce_marker"===t.attr("id")){let e=t;for(t=t.prev;t&&"table"!==t.name;t=t.walk(!0))if(3===t.type||!g.isBlock(t.name)){t.parent&&d.schema.isValidChild(t.parent.name,"span")&&t.parent.insert(e,t,"br"===t.name);break}}if(d._selectionOverrides.showBlockCaretContainer(w),E.invalid||(b=g,y=w,e=x,$(e.children(),bv)&&"SUMMARY"===(null==(e=b.getParent(y,b.isBlock))?void 0:e.nodeName))){d.selection.setContent(h);let e,t=m.getNode(),r=d.getBody();for(ha(t)?t=e=r:e=t;e&&e!==r;)e=(t=e).parentNode;c=t===r?r.innerHTML:g.getOuterHTML(t);let n=f.parse(c),a=(()=>{for(let e=n;e;e=e.walk())if("mce_marker"===e.attr("id"))return ee.some(e);return ee.none()})(),o=a.bind(kv).getOr(n),i=(a.each(e=>e.replace(x)),x.children()),l=null!=(u=x.parent)?u:n,s=(x.unwrap(),B(i,e=>Rv(d.schema,e,l)));Nv(s,d.schema,o),wv(f.getNodeFilters(),f.getAttributeFilters(),n),c=p.serialize(n),t===r?g.setHTML(r,c):g.setOuterHTML(t,c)}else c=p.serialize(x),e=d,A=c,"all"===(R=w).getAttribute("data-mce-bogus")?null!=(_=R.parentNode)&&_.insertBefore(e.dom.createFragment(A),R):((e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){let e=t.childNodes;return 1===e.length&&L(e[0])||0===e.length}return!1})(e.dom,R)?e.dom.setHTML(R,A):e.selection.setContent(A,{no_events:!0});{var _=d;var k=n;let r=_.schema.getTextInlineElements(),m=_.dom;if(k){let d=_.getBody(),c=vv(_),u="*[data-mce-fragment]",e=m.select(u);oe.each(e,i=>{let l=e=>z(r[e.nodeName.toLowerCase()]),s=e=>1===e.childNodes.length;if(!Ep(m,t=i)&&(e=m,t=t,!Ep(e,t)||!$(wp(e,t),e=>(e=e,yp.has(e))))&&l(i)&&s(i)){let t=wp(m,i),r=(e,t)=>Ee(e,e=>V(t,e)),n=e=>s(i)&&m.is(e,u)&&l(e)&&(e.nodeName===i.nodeName&&r(t,wp(m,e))||n(e.children[0])),a=e=>z(e)&&e!==d&&(c.compare(i,e)||a(e.parentElement)),o=e=>z(e)&&e!==d&&m.is(e,u)&&(((r,n,a)=>{let e=wp(r,n),o=wp(r,a),i=e=>{var t=null!=(t=r.getStyle(n,e))?t:"",e=null!=(e=r.getStyle(a,e))?e:"";return gt(t)&&gt(e)&&t!==e};return $(e,t=>{var e=e=>$(e,e=>e===t);if(e(o)||!e(Cp))return i(t);{let e=B(o,t=>$(Cp,e=>lt(t,e)));return $(e,i)}})})(m,i,e)||o(e.parentElement));(n(i.children[0])||a(i.parentElement)&&!o(i.parentElement))&&m.remove(i,!0)}var e,t})}}{var S=d;var N=g.get("mce_marker");let r,n,a,o;var R=S.dom,e=S.selection;if(N){e.scrollIntoView(N);var A=fv(S.getBody(),N);if(A&&"false"===R.getContentEditable(A))R.remove(N),e.select(A);else{let t=R.createRng();A=N.previousSibling;if(D(A)){t.setStart(A,null!=(n=null==(r=A.nodeValue)?void 0:r.length)?n:0);let e=N.nextSibling;D(e)&&(A.appendData(e.data),null!=(a=e.parentNode))&&a.removeChild(e)}else t.setStartBefore(N),t.setEndBefore(N);A=R.getParent(N,R.isBlock);if(R.remove(N),A&&R.isEmpty(A)){let e=Mv(A);Rn(W(A)),t.setStart(A,0),t.setEnd(A,0),e||A.getAttribute("data-mce-fragment")||!(o=(e=>{e=M.fromRangeStart(e);return null==(e=zu(S.getBody()).next(e))?void 0:e.toRange()})(t))?R.add(A,R.create("br",e?{}:{"data-mce-bogus":"1"})):(t=o,R.remove(A))}e.setRng(t)}}}k=d.getBody(),oe.each(k.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),N=g,e=m.getStart(),C=d.schema,ee.from(N.getParent(e,"td,th")).map(W).each(e=>{var r,n;r=e,n=C,Wr(r).each(t=>{Ur(t).each(e=>{n.isBlock(q(r))&&Wi(t)&&n.isBlock(q(e))&&Y(t)})})});var T=d.schema,O=d.getBody(),k=m.getStart();k=Fr(W(k),e=>P(e,W(O))),Ne(k,k.length-2).filter(rr).fold(()=>Ya(T,O),e=>Ya(T,e.dom))}return c},Fv=e=>e instanceof Zf,Uv=(e,t,r)=>{var n;e.dom.setHTML(e.getBody(),t),!0!==r&&(n=e,Wg(n))&&Xu(n.getBody()).each(e=>{var t=e.getNode(),t=ca(t)?Xu(t).getOr(e):e;n.selection.setRng(t.toRange())})},zv=e=>j(e)?e:h,jv=(o,i,e)=>{let t=i(o),l=zv(e);return t.orThunk(()=>{if(l(o))return ee.none();{var e=o,n=i,t=l;let r=e.dom;for(var a=zv(t);r.parentNode;){r=r.parentNode;let e=W(r),t=n(e);if(t.isSome())return t;if(a(e))break}return ee.none()}})},Hv=Im,Vv=(t,r,e)=>{var n=t.formatter.get(e);if(n)for(let e=0;e<n.length;e++){var a=n[e];if($m(a)&&!1===a.inherit&&t.dom.is(r,a.selector))return!0}return!1},$v=(t,e,r,n,a)=>{let o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,e=>!!Vv(t,e,r)||e.parentNode===o||!!Kv(t,e,r,n,!0)),!!Kv(t,e,r,n,a))},qv=(e,t,r)=>!(!qm(r)||!Hv(t,r.inline))||!(!Vm(r)||!Hv(t,r.block))||!!$m(r)&&G(t)&&e.is(t,r.selector),Wv=(t,r,n,e,a,o)=>{var i=n[e],l="attributes"===e;if(j(n.onmatch))return n.onmatch(r,n,e);if(i)if($e(i)){for(let e=0;e<i.length;e++)if(l?t.getAttrib(r,i[e]):Um(t,r,i[e]))return!0}else for(let e in i)if(ae(i,e)){var s=l?t.getAttrib(r,e):Um(t,r,e),d=Mm(i[e],o),c=U(s)||ft(s);if(c&&U(d))continue;if(a&&c&&!n.exact)return!1;if((!a||n.exact)&&!Hv(s,Fm(d,e)))return!1}return!0},Kv=(r,n,e,a,t)=>{var o=r.formatter.get(e),i=r.dom;if(o&&G(n))for(let e=0;e<o.length;e++){var l=o[e];if(qv(r.dom,n,l)&&Wv(i,n,l,"attributes",t,a)&&Wv(i,n,l,"styles",t,a)){let t=l.classes;if(t)for(let e=0;e<t.length;e++)if(!r.dom.hasClass(n,Mm(t[e],a)))return;return l}}},Yv=(e,t,r,n,a)=>{var o;return n?$v(e,n,t,r,a):(n=e.selection.getNode(),!!$v(e,n,t,r,a)||!((o=e.selection.getStart())===n||!$v(e,o,t,r,a)))},Gv=tl,Xv=e=>{if(e){var t=new Gn(e,e);for(let e=t.current();e;e=t.next())if(D(e))return e}return null},Zv=e=>{var t=Sr("span");return dr(t,{id:Qu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&K(t,Nr(Gv)),t},Qv=(e,l,t)=>{var s=e.dom,d=e.selection;if(Km(l))kh(e,!1,W(l),t,!0);else{let e=d.getRng(),t=s.getParent(l,s.isBlock),r=e.startContainer,n=e.startOffset,a=e.endContainer,o=e.endOffset,i=(e=>{e=Xv(e);return e&&e.data.charAt(0)===Gv&&e.deleteData(0,1),e})(l);s.remove(l,!0),r===i&&0<n&&e.setStart(i,n-1),a===i&&0<o&&e.setEnd(i,o-1),t&&s.isEmpty(t)&&el(W(t)),d.setRng(e)}},Jv=(e,t,r)=>{var n=e.dom,a=e.selection;if(t)Qv(e,t,r);else if(!(t=em(e.getBody(),a.getStart())))for(;t=n.get(Qu);)Qv(e,t,r)},eb=(e,t)=>(e.appendChild(t),t),tb=(e,t)=>{e=pe(e,(e,t)=>eb(e,t.cloneNode(!1)),t),t=null!=(t=e.ownerDocument)?t:document;return eb(e,t.createTextNode(Gv))},rb=e=>$i(e,Vi(e).replace(new RegExp(Zn+"$")," ")),nb=(t,e)=>{let r=()=>{null===e||t.dom.isEmpty(e)||Ur(W(e)).each(e=>{nr(e)?rb(e):ln(e,e=>nr(e)).each(e=>{nr(e)&&rb(e)})})};t.once("input",e=>{e.data&&!fm(e.data)&&(e.isComposing?t.once("compositionend",()=>{r()}):r())})},ab=(i,l,s,d)=>{var c=i.dom,u=i.selection;let a=!1,m=i.formatter.get(l);if(m){let t=u.getRng(),e=t.startContainer,r=t.startOffset,n=e;D(e)&&(r!==e.data.length&&(a=!0),n=n.parentNode);var g,f,p,h,v,b=[];let o;for(;n;){if(Kv(i,n,l,s,d)){o=n;break}n.nextSibling&&(a=!0),b.push(n),n=n.parentNode}if(o)if(a){let e=u.getBookmark();t.collapse(!0);var y=dg(c,t,m,{includeTrailingSpace:!0}),y=Cf(y);i.formatter.remove(l,s,y,d),u.moveToBookmark(e)}else{let e=em(i.getBody(),o),t=z(e)?c.getParents(o.parentNode,S,e):[],r=Zv(!1).dom,n=(y=i,g=r,f=null!=e?e:o,v=y.dom,(y=v.getParent(f,C(Bm,y.schema)))&&v.isEmpty(y)?null!=(y=f.parentNode)&&y.replaceChild(g,f):(p=W(f),y=qn(p,"br"),h=B((()=>{var e=[];let t=p.dom;for(;t;)e.push(W(t)),t=t.lastChild;return e})().slice(-1),Wi),y.length===h.length&&re(h,Y),v.isEmpty(f)?null!=(y=f.parentNode)&&y.replaceChild(g,f):v.insertAfter(g,f)),((o,t,r,i,n,a)=>{var l,s,d=o.formatter,c=o.dom,e=B(Pe(d.get()),e=>e!==i&&!it(e,"removeformat")),e=(l=o,s=r,e=e,he(e,(e,t)=>{n=l,r=t;var r,n=Hm(n,r,t=>{let r=e=>j(e)||1<e.length&&"%"===e.charAt(0);return $(["styles","attributes"],e=>w(t,e).exists(e=>{e=Q(e)?e:je(e);return $(e,r)}))});return l.formatter.matchNode(s,t,{},n)?e.concat([t]):e},[]));if(0<B(e,e=>{{var t=o,a=i;let r=["inline","block","selector","attributes","styles","classes"],n=e=>Ue(e,(e,t)=>$(r,e=>e===t));return!Hm(t,e,e=>{let r=n(e);return Hm(t,a,e=>{var t,e=n(e);return t=r,e=e,x(_).eq(t,e)})})}}).length){let e=r.cloneNode(!1);return c.add(t,e),d.remove(i,n,e,a),c.remove(e),ee.some(e)}return ee.none()})(i,r,o,l,s,d)),a=tb([...b,...n.toArray(),...t],r);e&&Qv(i,e,z(e)),u.setCursorLocation(a,1),nb(i,r),c.isEmpty(o)&&c.remove(o)}}},ob=e=>{var t=Zv(!1),e=tb(e,t.dom);return{caretContainer:t,caretPosition:M(e,0)}},ib=(e,t)=>{var{caretContainer:t,caretPosition:r}=ob(t);return xn(W(e),t),Y(W(e)),r},lb=(e,t)=>!Ju(t.dom)&&(e=e.schema.getTextInlineElements(),ae(e,q(t)))&&!Ju(t.dom)&&!da(t.dom),sb={},db=la(["pre"]),cb=(sb.pre||(sb.pre=[]),sb.pre.push(e=>{var t;e.selection.getRng().collapsed||(e=e.selection.getSelectedBlocks(),e=B(B(e,db),(t=e,e=>{e=e.previousSibling;return db(e)&&V(t,e)})),re(e,e=>{var t,r;t=e.previousSibling,e=e,e=W(e),r=Dr(e).dom,Y(e),Nn(W(t),[Sr("br",r),Sr("br",r),...Vr(e)])}))}),["fontWeight","fontStyle","color","fontSize","fontFamily"]),ub=(e,t)=>{e=e.get(t);return Q(e)?be(e,e=>qm(e)&&"span"===e.inline&&(e=e,le(e.styles))&&$(Pe(e.styles),e=>V(cb,e))):ee.none()},mb=(e,t)=>Gu(t,M.fromRangeStart(e)).isNone(),gb=(e,t)=>!1===Yu(t,M.fromRangeEnd(e)).exists(e=>!L(e.getNode())||Yu(t,e).isSome()),fb=t=>e=>_a(e)&&t.isEditable(e),pb=e=>B(e.getSelectedBlocks(),fb(e.dom)),hb=oe.each,vb=e=>G(e)&&!mm(e)&&!Ju(e)&&!da(e),bb=(t,r)=>{for(let e=t;e;e=e[r]){if(D(e)&&gt(e.data))return t;if(G(e)&&!mm(e))return e}return t},yb=(t,n,a)=>{let o=vv(t),e=oa(n)&&t.dom.isEditable(n),r=oa(a)&&t.dom.isEditable(a);if(e&&r){let r=bb(n,"previousSibling"),e=bb(a,"nextSibling");if(o.compare(r,e)){for(let t=r.nextSibling;t&&t!==e;){let e=t;t=t.nextSibling,r.appendChild(e)}return t.dom.remove(e),oe.each(oe.grep(e.childNodes),e=>{r.appendChild(e)}),r}}return a},Cb=(t,e,r,n)=>{var a;if(n&&!1!==e.merge_siblings){let e=null!=(a=yb(t,Om(n),n))?a:n;yb(t,e,Om(e,!0))}},wb=(e,t,r)=>{hb(e.childNodes,e=>{vb(e)&&(t(e)&&r(e),e.hasChildNodes())&&wb(e,t,r)})},Eb=(t,r)=>e=>!(!e||!Um(t,e,r)),xb=(r,n,a)=>e=>{var t;r.setStyle(e,n,a),""===e.getAttribute("style")&&e.removeAttribute("style"),t=r,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},_b=ks([{keep:[]},{rename:["name"]},{removed:[]}]),kb=/^(src|href|style)$/,Sb=oe.each,Nb=Im,Rb=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Ab=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"];if(G(n)){let e=n.childNodes.length-1;!r&&a&&a--,n=n.childNodes[a>e?e:a]}return D(n)&&r&&a>=n.data.length&&(n=new Gn(n,e.getBody()).next()||n),n=D(n)&&!r&&0===a?new Gn(n,e.getBody()).prev()||n:n},Tb=(e,t)=>{var t=t?"firstChild":"lastChild",r=e[t];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[t]||r:e},Ob=(e,t,r,n)=>{e=e.create(r,n);return null!=(r=t.parentNode)&&r.insertBefore(e,t),e.appendChild(t),e},Bb=(e,t,r,n,a)=>{t=W(t),e=W(e.create(n,a)),n=(r?Hr:jr)(t);return Nn(e,n),(r?(xn(t,e),kn):(_n(t,e),K))(e,t),e.dom},Pb=(t,e,r)=>{var n=e.parentNode;let a,o=t.dom,i=Js(t);!Vm(r)||n!==o.getRoot()||r.list_block&&Nb(e,r.list_block)||re(Te(e.childNodes),e=>{Pm(t,i,e.nodeName.toLowerCase())?a?a.appendChild(e):(a=Ob(o,e,i),o.setAttribs(a,ed(t))):a=null}),n=r,$m(n)&&qm(n)&&qt(w(n,"mixed"),!0)&&!Nb(r.inline,e)||o.remove(e,!0)},Db=(e,t,r)=>y(e)?{name:t,value:null}:{name:e,value:Mm(t,r)},Lb=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Mb=(n,a,o,i,l)=>{let s=!1;Sb(o.styles,(e,t)=>{var{name:t,value:e}=Db(t,e,i),r=Fm(e,t);(o.remove_similar||I(e)||!G(l)||Nb(Um(n,l,t),r))&&n.setStyle(a,t,""),s=!0}),s&&Lb(n,a)},Ib=(e,t,n,r,a)=>{let o=e.dom,i=vv(e),l=e.schema;if(qm(t)&&Za(l,t.inline)&&Ja(l,r)&&r.parentElement===e.getBody())return Pb(e,r,t),_b.removed();if(!t.ceFalseOverride&&r&&"false"===o.getContentEditableParent(r))return _b.keep();if(r&&!qv(o,r,t)&&(!t.links||"A"!==r.nodeName))return _b.keep();let s=r,d=t.preserve_attributes;if(qm(t)&&"all"===t.remove&&Q(d)){let e=B(o.getAttribs(s),e=>V(d,e.name.toLowerCase()));if(o.removeAllAttribs(s),re(e,e=>o.setAttrib(s,e.name,e.value)),0<e.length)return _b.rename("span")}if("all"!==t.remove){Mb(o,s,t,n,a),Sb(t.attributes,(e,r)=>{var{name:r,value:e}=Db(r,e,n);if(t.remove_similar||I(e)||!G(a)||Nb(o.getAttrib(a,r),e)){if("class"===r){let e=o.getAttrib(s,r);if(e){let t="";if(re(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void o.setAttrib(s,r,t)}}(kb.test(r)&&s.removeAttribute("data-mce-"+r),"style"===r&&la(["li"])(s)&&"none"===o.getStyle(s,"list-style-type"))?(s.removeAttribute(r),o.setStyle(s,"list-style-type","none")):("class"===r&&s.removeAttribute("className"),s.removeAttribute(r))}}),Sb(t.classes,e=>{e=Mm(e,n),G(a)&&!o.hasClass(a,e)||o.removeClass(s,e)});let r=o.getAttribs(s);for(let t=0;t<r.length;t++){let e=r[t].nodeName;if(!i.isAttributeInternal(e))return _b.keep()}}return"none"!==t.remove?(Pb(e,s,t),_b.removed()):_b.keep()},Fb=(t,e,r,n)=>Ib(t,e,r,n,n).fold(J(n),e=>(t.dom.createFragment().appendChild(n),t.dom.rename(n,e)),J(null)),Ub=(r,n,d,c,u)=>{if(c||r.selection.isEditable()){var m,p,h=r,v=n,b=d,r=c,y=u;let g=h.formatter.get(v),f=g[0],a=h.dom,e=h.selection,o=o=>{var i=((r,e,n,a,o)=>{let i;return e.parentNode&&re(jm(r.dom,e.parentNode).reverse(),e=>{var t;!i&&G(e)&&"_start"!==e.id&&"_end"!==e.id&&(t=Kv(r,e,n,a,o))&&!1!==t.split&&(i=e)}),i})(h,o,v,b,y);{var l=h,s=g,d=o,c=f,u=b;let e,r,n,a;var m=l.dom;if(i){let t=i.parentNode;for(let e=d.parentNode;e&&e!==t;e=e.parentNode){let t=m.clone(e,!1);for(let e=0;e<s.length&&null!==(t=Fb(l,s[e],u,t));e++);t&&(n&&t.appendChild(n),a=a||t,n=t)}c.mixed&&m.isBlock(i)||(d=null!=(e=m.split(i,d))?e:d),n&&a&&(null!=(r=o.parentNode)&&r.insertBefore(n,o),a.appendChild(o),qm(c))&&Cb(l,c,0,n)}return d}},i=t=>$(g,e=>zb(h,e,b,t,t)),l=t=>{var r=Te(t.childNodes),e=i(t)||$(g,e=>qv(a,t,e)),n=t.parentNode;if(!e&&z(n)&&Wm(f)&&i(n),f.deep&&r.length)for(let e=0;e<r.length;e++)l(r[e]);re(["underline","line-through","overline"],e=>{G(t)&&h.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&zm(a,t.parentNode)===e&&zb(h,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},void 0,t)})},s=t=>{var r,n=a.get(t?"_start":"_end");if(n){let e=n[t?"firstChild":"lastChild"];return r=e,mm(r)&&G(r)&&("_start"===r.id||"_end"===r.id)&&(e=e[t?"firstChild":"lastChild"]),D(e)&&0===e.data.length&&(e=t?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),a.remove(n,!0),e}return null},t=e=>{let t,r,n=dg(a,e,g,{includeTrailingSpace:e.collapsed});if(f.split){if(n=Cf(n),t=Ab(h,n,!0),r=Ab(h,n),t!==r){if(t=Tb(t,!0),r=Tb(r,!1),Rb(a,t,r)){let e=ee.from(t.firstChild).getOr(t);return o(Bb(a,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void s(!0)}if(Rb(a,r,t)){let e=ee.from(r.lastChild).getOr(r);return o(Bb(a,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void s(!1)}t=Ob(a,t,"span",{id:"_start","data-mce-type":"bookmark"}),r=Ob(a,r,"span",{id:"_end","data-mce-type":"bookmark"});let e=a.createRng();e.setStartAfter(t),e.setEndBefore(r),cg(a,e,e=>{re(e,e=>{mm(e)||mm(e.parentNode)||o(e)})}),o(t),o(r),t=s(!0),r=s()}else t=r=o(t);n.startContainer=t.parentNode||t,n.startOffset=a.nodeIndex(t),n.endContainer=r.parentNode||r,n.endOffset=a.nodeIndex(r)+1}cg(a,n,e=>{re(e,l)})};if(r)if(Nm(r)){let e=a.createRng();e.setStartBefore(r),e.setEndAfter(r),t(e)}else t(r);else e.isCollapsed()&&qm(f)&&!bm(h).length?ab(h,v,b,y):(Am(h,()=>km(h,t),e=>qm(f)&&Yv(h,v,b,e)),h.nodeChanged()),m=h,p=b,"removeformat"===(n=v)?re(pb(m.selection),t=>{re(cb,e=>m.dom.setStyle(t,e,"")),Lb(m.dom,t)}):ub(m.formatter,n).each(t=>{re(pb(m.selection),e=>Mb(m.dom,e,t,p,null))});Ls(h,v,r,b)}},zb=(t,e,r,n,a)=>Ib(t,e,r,n,a).fold(h,e=>(t.dom.rename(n,e),!0),S),jb=oe.each,Hb=oe.each,Vb=(r,n,e,a)=>{if(Hb(e.styles,(e,t)=>{r.setStyle(n,t,Mm(e,a))}),e.styles){let e=r.getAttrib(n,"style");e&&r.setAttrib(n,"data-mce-style",e)}},$b=(y,C,w,t)=>{let E=y.formatter.get(C),x=E[0],n=!t&&y.selection.isCollapsed(),a=y.dom,e=y.selection,_=(r,e=x)=>{j(e.onformat)&&e.onformat(r,e,w,t),Vb(a,r,e,w),Hb(e.attributes,(e,t)=>{a.setAttrib(r,t,Mm(e,w))}),Hb(e.classes,e=>{e=Mm(e,w);a.hasClass(r,e)||a.addClass(r,e)})},k=(e,t)=>{let r=!1;return Hb(e,e=>!(!$m(e)||("false"!==a.getContentEditable(t)||e.ceFalseOverride)&&(!z(e.collapsed)||e.collapsed===n)&&a.is(t,e.selector)&&!Ju(t)&&(_(t,e),r=!0))),r},r=(v,e,g)=>{let b=[],f=!0,p=x.inline||x.block,h=(t=p,Z(t)?(t=a.create(t),_(t),t):null);var t;cg(v,e,e=>{let u,m=t=>{let e=!1,r=f,n=!1;var a,o,i,l,s=t.parentNode,d=s.nodeName.toLowerCase(),c=v.getContentEditable(t),c=(z(c)&&(r=f,f="true"===c,e=!0,n=Lm(y,t)),f&&!e);if(L(t)&&!((r,e,n,a)=>{if(Fd(r)&&qm(e)&&n.parentNode){let e=Uo(r.schema),t=Kn(W(n),e=>Ju(e.dom));return He(e,a)&&Oa(r.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!t}return!1})(y,x,t,d))u=null,Vm(x)&&v.remove(t);else if(i=t,l=x,Vm(l)&&!0===l.wrapper&&Kv(y,i,C,w))u=null;else if(l=t,i=d,a=c,o=x,o=Vm(o)&&!0!==o.wrapper&&Bm(y.schema,l)&&Pm(y,i,p),a&&o){let e=v.rename(t,p);_(e),b.push(e),void(u=null)}else{if($m(x)){let e=k(E,t);if(!e&&z(s)&&Wm(x)&&(e=k(E,s)),!qm(x)||e)return void(u=null)}z(h)&&(l=t,i=d,a=c,o=n,d=l.nodeName.toLowerCase(),d=Pm(y,p,d)&&Pm(y,i,p),i=!g&&D(l)&&rl(l.data),c=Ju(l),l=!qm(x)||!v.isBlock(l),a||o)&&d&&!i&&!c&&l?(u||(u=v.clone(h,!1),s.insertBefore(u,t),b.push(u)),n&&e&&(f=r),u.appendChild(t)):(u=null,re(Te(t.childNodes),m),e&&(f=r),u=null)}};re(e,m)}),!0===x.links&&re(b,e=>{let t=e=>{"A"===e.nodeName&&_(e,x),re(Te(e.childNodes),t)};t(e)}),re(b,e=>{var r,t,n,a,o,i,l,s,d,c,u=(e=>{let r=0;return re(e.childNodes,e=>{var t;t=e,z(t)&&D(t)&&0===t.length||mm(e)||r++}),r})(e);if(!(1<b.length)&&v.isBlock(e)||0!==u){if(qm(x)||Vm(x)&&x.wrapper){x.exact||1!==u||(c=e,e=be(c.childNodes,Rm).filter(e=>"false"!==v.getContentEditable(e)&&qv(v,e,x)).map(e=>{var t=v.clone(e,!1);return _(t),v.replace(t,c,!0),v.remove(e,!0),t}).getOr(c)),l=y,u=E,s=w,d=e,jb(u,t=>{var n,e,r,a;qm(t)&&jb(l.dom.select(t.inline,d),e=>{vb(e)&&zb(l,t,s,e,t.exact?e:null)}),n=l.dom,r=d,(e=t).clear_child_styles&&(a=e.links?"*:not(a)":"*",hb(n.select(a,r),r=>{vb(r)&&n.isEditable(r)&&hb(e.styles,(e,t)=>{n.setStyle(r,t,"")})}))}),t=y,n=x,a=C,o=w,u=(i=e).parentNode,Kv(t,u,a,o)&&zb(t,n,o,i)||n.merge_with_parents&&u&&t.dom.getParent(u,e=>!!Kv(t,e,a,o)&&(zb(t,n,o,i),!0));var m=v,u=x,g=w,f=e;if(u.styles&&u.styles.backgroundColor){let t=Eb(m,"fontSize");wb(f,e=>t(e)&&m.isEditable(e),xb(m,"backgroundColor",Mm(u.styles.backgroundColor,g)))}r=v,f=x,u=e,g=e=>{var t;oa(e)&&G(e.parentNode)&&r.isEditable(e)&&(t=zm(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},f.styles&&(f.styles.color||f.styles.textDecoration)&&(oe.walk(u,g,"childNodes"),g(u));var p=v,h=(f=x,0);if(g=e,qm(f)&&("sub"===f.inline||"sup"===f.inline)){let t=Eb(p,"fontSize");wb(g,e=>t(e)&&p.isEditable(e),xb(p,"fontSize",""));f=B(p.select("sup"===f.inline?"sub":"sup",g),p.isEditable);p.remove(f,!0)}Cb(y,x,0,e)}}else v.remove(e,!0)})},o=Nm(t)?t:e.getNode();var i;if("false"!==a.getContentEditable(o)||Lm(y,o)){if(x){if(t)if(Nm(t)){if(!k(E,t)){let e=a.createRng();e.setStartBefore(t),e.setEndAfter(t),r(a,dg(a,e,E),!0)}}else r(a,t,!0);else{if(n&&qm(x)&&!bm(y).length){var l=y;var s=C;var d=w;let r;var c=l.selection,u=l.formatter.get(s);if(u){var m=c.getRng();let t=m.startOffset;var g=m.startContainer.nodeValue,f=(r=em(l.getBody(),c.getStart()),/[^\s\u00a0\u00ad\u200b\ufeff]/);if(g&&0<t&&t<g.length&&f.test(g.charAt(t))&&f.test(g.charAt(t-1))){let e=c.getBookmark();m.collapse(!0);f=dg(l.dom,m,u),f=Cf(f);l.formatter.apply(s,d,f),c.moveToBookmark(e)}else{let e=r?Xv(r):null;r&&(null==e?void 0:e.data)===Gv||(g=l.getDoc(),u=Zv(!0).dom,r=g.importNode(u,!0),e=r.firstChild,m.insertNode(r),t=1,nb(l,r)),l.formatter.apply(s,d,r),c.setCursorLocation(e,t)}}}else e.setRng(Av(e.getRng())),Am(y,()=>{km(y,(e,t)=>{t=t?e:dg(a,e,E);r(a,t,!1)})},S),y.nodeChanged();ub(y.formatter,C).each(t=>{var e;re((e=y.selection,B((e=>{let n=e.getSelectedBlocks(),a=e.getRng();if(e.isCollapsed())return[];if(1===n.length)return mb(a,n[0])&&gb(a,n[0])?n:[];{let e=Re(n).filter(e=>mb(a,e)).toArray(),t=Ae(n).filter(e=>gb(a,e)).toArray(),r=n.slice(1,-1);return e.concat(r).concat(t)}})(e),fb(e.dom))),e=>Vb(a,e,t,w))})}f=C,i=y,ae(sb,f)&&re(sb[f],e=>{e(i)})}}else k(E,t=o);Ds(y,C,t,w)},qb=(e,t,r,n)=>{(n||e.selection.isEditable())&&$b(e,t,r,n)},Wb=e=>ae(e,"vars"),Kb=e=>e.selection.getStart(),Yb=(t,e,r,n,a)=>ve(e,e=>{e=t.formatter.matchNode(e,r,null!=a?a:{},n);return!b(e)},e=>!!Vv(t,e,r)||!n&&z(t.formatter.matchNode(e,r,a,!0))),Gb=(e,t)=>{t=null!=t?t:Kb(e);return B(jm(e.dom,t),e=>G(e)&&!da(e))},Xb=(o,i,e)=>{let l=Gb(o,i);ne(e,(e,a)=>{var t=e=>{let r=Yb(o,l,a,e.similar,Wb(e)?e.vars:void 0),n=r.isSome();if(e.state.get()!==n){e.state.set(n);let t=r.getOr(i);Wb(e)?e.callback(n,{node:t,format:a,parents:l}):re(e.callbacks,e=>e(n,{node:t,format:a,parents:l}))}};re([e.withSimilar,e.withoutSimilar],t),re(e.withVars,t)})},Zb=oe.explode,Qb=()=>{let a={};return{addFilter:(e,t)=>{re(Zb(e),e=>{ae(a,e)||(a[e]={name:e,callbacks:[]}),a[e].callbacks.push(t)})},getFilters:()=>je(a),removeFilter:(e,n)=>{re(Zb(e),e=>{var t,r;ae(a,e)&&(z(n)&&(t=a[e],0<(r=B(t.callbacks,e=>e!==n)).length)?t.callbacks=r:delete a[e])})}}},Jb=(e,t,r)=>{var n,a,o,i,l,s=Xo();t.convert_fonts_to_spans&&(o=e,i=s,l=oe.explode(null!=(t=t.font_size_legacy_values)?t:""),o.addNodeFilter("font",e=>{re(e,e=>{let t=i.parse(e.attr("style")),r=e.attr("color"),n=e.attr("face"),a=e.attr("size");var o;r&&(t.color=r),n&&(t["font-family"]=n),a&&pt(a).each(e=>{t["font-size"]=l[e-1]}),e.name="span",e.attr("style",i.serialize(t)),o=e,re(["color","face","size"],e=>{o.attr(e,null)})})})),n=r,a=s,e.addNodeFilter("strike",e=>{let r="html4"!==n.type;re(e,e=>{var t;r?e.name="s":((t=a.parse(e.attr("style")))["text-decoration"]="line-through",e.name="span",e.attr("style",a.serialize(t)))})})},e0=e=>{let[t,...r]=e.split(","),n=r.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(a){let e=";base64"===a[2],t=(t=>{try{return decodeURIComponent(t)}catch(e){return t}})(n),r=e?(e=>{e=/([a-z0-9+\/=\s]+)/i.exec(e);return e?e[1]:""})(t):t;return ee.some({type:a[1],data:r,base64Encoded:e})}return ee.none()},t0=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return ee.none()}var a=new Uint8Array(n.length);for(let e=0;e<a.length;e++)a[e]=n.charCodeAt(e);return ee.some(new Blob([a],{type:e}))},r0=n=>new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var e;t(null==(e=r.error)?void 0:e.message)},r.readAsDataURL(n)}),n0=0,a0=(e,a,o)=>e0(e).bind(({data:t,type:r,base64Encoded:n})=>{if(a&&!n)return ee.none();{let e=n?t:btoa(t);return o(e,r)}}),o0=(e,t,r)=>{t=e.create("blobid"+n0++,t,r);return e.add(t),t},i0=(r,e,t=!1)=>a0(e,t,(t,e)=>ee.from(r.getByData(t,e)).orThunk(()=>t0(e,t).map(e=>o0(r,e,t)))),l0=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,s0=e=>ee.from(e.match(l0)).bind(e=>Ne(e,1)).map(e=>lt(e,"www.")?e.substring(4):e),d0=(e,t)=>{ee.from(e.attr("src")).bind(s0).forall(e=>!V(t,e))&&e.attr("sandbox","")},c0=(e,t)=>lt(e,t+"/"),{entries:u0,setPrototypeOf:m0,isFrozen:g0,getPrototypeOf:f0,getOwnPropertyDescriptor:p0}=Object,{freeze:h0,seal:v0,create:b0}=Object,{apply:y0,construct:C0}="undefined"!=typeof Reflect&&Reflect,w0=(h0=h0||function(e){return e},v0=v0||function(e){return e},y0=y0||function(e,t,r){return e.apply(t,r)},C0=C0||function(e,t){return new e(...t)},B0(Array.prototype.forEach)),E0=B0(Array.prototype.pop),x0=B0(Array.prototype.push),_0=B0(String.prototype.toLowerCase),k0=B0(String.prototype.toString),S0=B0(String.prototype.match),N0=B0(String.prototype.replace),R0=B0(String.prototype.indexOf),A0=B0(String.prototype.trim),T0=B0(Object.prototype.hasOwnProperty),O0=B0(RegExp.prototype.test);function B0(a){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return y0(a,e,r)}}function qe(e,r,t){var n=2<arguments.length&&void 0!==t?t:_0;m0&&m0(e,null);let a=r.length;for(;a--;){let t=r[a];if("string"==typeof t){let e=n(t);e!==t&&(g0(r)||(r[a]=e),t=e)}e[t]=!0}return e}function P0(e){var t,r,n=b0(null);for([t,r]of u0(e))T0(e,t)&&(Array.isArray(r)?n[t]=(t=>{for(let e=0;e<t.length;e++)T0(t,e)||(t[e]=null);return t})(r):r&&"object"==typeof r&&r.constructor===Object?n[t]=P0(r):n[t]=r);return n}function D0(e,t){for(;null!==e;){var r=p0(e,t);if(r){if(r.get)return B0(r.get);if("function"==typeof r.value)return B0(r.value)}e=f0(e)}return function(){return null}}_f=TypeError;let L0=h0(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M0=h0(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I0=h0(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F0=h0(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U0=h0(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z0=h0(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),j0=h0(["#text"]),H0=h0(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),V0=h0(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$0=h0(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q0=h0(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W0=v0(/\{\{[\w\W]*|[\w\W]*\}\}/gm),K0=v0(/<%[\w\W]*|[\w\W]*%>/gm),Y0=v0(/\${[\w\W]*}/gm),G0=v0(/^data-[\-\w.\u00B7-\uFFFF]/),X0=v0(/^aria-[\-\w]+$/),Z0=v0(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q0=v0(/^(?:\w+script|data):/i),J0=v0(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ey=v0(/^html$/i),ty=v0(/^[a-z][.\w]*(-[.\w]+)+$/i);var ry,ny,ay,oy=Object.freeze({__proto__:null,MUSTACHE_EXPR:W0,ERB_EXPR:K0,TMPLIT_EXPR:Y0,DATA_ATTR:G0,ARIA_ATTR:X0,IS_ALLOWED_URI:Z0,IS_SCRIPT_OR_DATA:Q0,ATTR_WHITESPACE:J0,DOCTYPE_NAME:ey,CUSTOM_ELEMENT:ty}),iy=function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;let c=e=>L(e);if(c.version="3.1.7",c.removed=[],!e||!e.document||9!==e.document.nodeType)return c.isSupported=!1,c;let a=e.document,s=a,M=s.currentScript,{DocumentFragment:I,HTMLTemplateElement:F,Node:d,Element:U,NodeFilter:t,NamedNodeMap:z=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:j,DOMParser:H,trustedTypes:u}=e,r=U.prototype,V=D0(r,"cloneNode"),$=D0(r,"remove"),q=D0(r,"nextSibling"),W=D0(r,"childNodes"),o=D0(r,"parentNode");if("function"==typeof F){let e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}function K(e){return e instanceof RegExp||e instanceof Function}function m(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!O||O!==e){if(e=P0(e=e&&"object"==typeof e?e:{}),A=-1===Me.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,T="application/xhtml+xml"===A?k0:_0,p=T0(e,"ALLOWED_TAGS")?qe({},e.ALLOWED_TAGS,T):pe,h=T0(e,"ALLOWED_ATTR")?qe({},e.ALLOWED_ATTR,T):he,De=T0(e,"ALLOWED_NAMESPACES")?qe({},e.ALLOWED_NAMESPACES,k0):Le,Oe=T0(e,"ADD_URI_SAFE_ATTR")?qe(P0(Be),e.ADD_URI_SAFE_ATTR,T):Be,Ae=T0(e,"ADD_DATA_URI_TAGS")?qe(P0(Te),e.ADD_DATA_URI_TAGS,T):Te,_=T0(e,"FORBID_CONTENTS")?qe({},e.FORBID_CONTENTS,T):Re,v=T0(e,"FORBID_TAGS")?qe({},e.FORBID_TAGS,T):{},ve=T0(e,"FORBID_ATTR")?qe({},e.FORBID_ATTR,T):{},l=!!T0(e,"USE_PROFILES")&&e.USE_PROFILES,be=!1!==e.ALLOW_ARIA_ATTR,ye=!1!==e.ALLOW_DATA_ATTR,Ce=e.ALLOW_UNKNOWN_PROTOCOLS||!1,we=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,b=e.SAFE_FOR_TEMPLATES||!1,Ee=!1!==e.SAFE_FOR_XML,y=e.WHOLE_DOCUMENT||!1,C=e.RETURN_DOM||!1,w=e.RETURN_DOM_FRAGMENT||!1,E=e.RETURN_TRUSTED_TYPE||!1,_e=e.FORCE_BODY||!1,ke=!1!==e.SANITIZE_DOM,Se=e.SANITIZE_NAMED_PROPS||!1,Ne=!1!==e.KEEP_CONTENT,x=e.IN_PLACE||!1,fe=e.ALLOWED_URI_REGEXP||Z0,R=e.NAMESPACE||N,i=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&K(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(i.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&K(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(i.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(i.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),b&&(ye=!1),w&&(C=!0),l&&(p=qe({},j0),h=[],!0===l.html&&(qe(p,L0),qe(h,H0)),!0===l.svg&&(qe(p,M0),qe(h,V0),qe(h,q0)),!0===l.svgFilters&&(qe(p,I0),qe(h,V0),qe(h,q0)),!0===l.mathMl)&&(qe(p,U0),qe(h,$0),qe(h,q0)),e.ADD_TAGS&&qe(p=p===pe?P0(p):p,e.ADD_TAGS,T),e.ADD_ATTR&&qe(h=h===he?P0(h):h,e.ADD_ATTR,T),e.ADD_URI_SAFE_ATTR&&qe(Oe,e.ADD_URI_SAFE_ATTR,T),e.FORBID_CONTENTS&&qe(_=_===Re?P0(_):_,e.FORBID_CONTENTS,T),Ne&&(p["#text"]=!0),y&&qe(p,["html","head","body"]),p.table&&(qe(p,["tbody"]),delete v.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Qf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Qf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');g=e.TRUSTED_TYPES_POLICY,f=g.createHTML("")}else null!==(g=void 0===g?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null;var n="data-tt-policy-suffix",t="dompurify"+((r=t&&t.hasAttribute(n)?t.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(u,M):g)&&"string"==typeof f&&(f=g.createHTML(""));h0&&h0(e),O=e}}function Y(t){let e=null,r=null;if(_e)t="<remove></remove>"+t;else{let e=S0(t,/^[\r\n\t ]+/);r=e&&e[0]}"application/xhtml+xml"===A&&R===N&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var n=g?g.createHTML(t):t;if(R===N)try{e=(new H).parseFromString(n,A)}catch(t){}if(!e||!e.documentElement){e=te.createDocument(R,"template",null);try{e.documentElement.innerHTML=Pe?f:n}catch(t){}}return n=e.body||e.documentElement,t&&r&&n.insertBefore(a.createTextNode(r),n.childNodes[0]||null),R===N?ae.call(e,y?"html":"body")[0]:y?e.documentElement:n}function G(e){return re.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null)}function X(e){return"function"==typeof d&&e instanceof d}function Z(n){let t=null;if(D("beforeSanitizeElements",n,null),!Ve(n)){var e=T(n.nodeName);if(D("uponSanitizeElement",n,{tagName:e,allowedTags:p}),(!n.hasChildNodes()||X(n.firstElementChild)||!O0(/<[/\w]/g,n.innerHTML)||!O0(/<[/\w]/g,n.textContent))&&!(7===n.nodeType||Ee&&8===n.nodeType&&O0(/<[/\w]/g,n.data))){if(p[e]&&!v[e])return(!(n instanceof U)||(e=>{let t=o(e);t&&t.tagName||(t={namespaceURI:R,tagName:"template"});var r=_0(e.tagName),n=_0(t.tagName);return De[e.namespaceURI]&&(e.namespaceURI===S?t.namespaceURI===N?"svg"===r:t.namespaceURI===k?"svg"===r&&("annotation-xml"===n||Fe[n]):Boolean(je[r]):e.namespaceURI===k?t.namespaceURI===N?"math"===r:t.namespaceURI===S?"math"===r&&Ue[n]:Boolean(He[r]):e.namespaceURI===N?(t.namespaceURI!==S||Ue[n])&&(t.namespaceURI!==k||Fe[n])&&!He[r]&&(ze[r]||!je[r]):"application/xhtml+xml"===A&&De[e.namespaceURI])})(n))&&("noscript"!==e&&"noembed"!==e&&"noframes"!==e||!O0(/<\/no(script|embed|frames)/i,n.innerHTML))?(b&&3===n.nodeType&&(t=n.textContent,w0([ie,le,se],e=>{t=N0(t,e," ")}),n.textContent!==t)&&(x0(c.removed,{element:n.cloneNode()}),n.textContent=t),D("afterSanitizeElements",n,null),!1):(B(n),!0);if(!v[e]&&Q(e)){if(i.tagNameCheck instanceof RegExp&&O0(i.tagNameCheck,e))return;if(i.tagNameCheck instanceof Function&&i.tagNameCheck(e))return}if(Ne&&!_[e]){let t=o(n)||n.parentNode,r=W(n)||n.childNodes;if(r&&t)for(let e=r.length-1;0<=e;--e){var a=V(r[e],!0);a.__removalCount=(n.__removalCount||0)+1,t.insertBefore(a,q(n))}}}}return B(n),1}function Q(e){return"annotation-xml"!==e&&S0(e,ge)}function J(r){D("beforeSanitizeAttributes",r,null);var n=r.attributes;if(n){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h};let e=n.length;for(;e--;){var{name:o,namespaceURI:i,value:l}=n[e],s=T(o);let t="value"===o?l:A0(l);l=t;if(a.attrName=s,a.attrValue=t,a.keepAttr=!0,a.forceKeepAttr=void 0,D("uponSanitizeAttribute",r,a),t=a.attrValue,!a.forceKeepAttr)if(a.keepAttr)if(!we&&O0(/\/>/i,t))P(o,r);else{b&&w0([ie,le,se],e=>{t=N0(t,e," ")});var d=T(r.nodeName);if($e(d,s,t))if(!Se||"id"!==s&&"name"!==s||(P(o,r),t="user-content-"+t),Ee&&O0(/((--!?|])>)|<\/(style|title)/i,t))P(o,r);else{if(g&&"object"==typeof u&&"function"==typeof u.getAttributeType&&!i)switch(u.getAttributeType(d,s)){case"TrustedHTML":t=g.createHTML(t);break;case"TrustedScriptURL":t=g.createScriptURL(t)}if(t!==l)try{i?r.setAttributeNS(i,o,t):r.setAttribute(o,t),Ve(r)?B(r):E0(c.removed)}catch(r){}}else P(o,r)}else P(o,r)}D("afterSanitizeAttributes",r,null)}}function ee(e){var t,r=G(e);for(D("beforeSanitizeShadowDOM",e,null);t=r.nextNode();)D("uponSanitizeShadowNode",t,null),Z(t)||(t.content instanceof I&&ee(t.content),J(t));D("afterSanitizeShadowDOM",e,null)}let g,f="",{implementation:te,createNodeIterator:re,createDocumentFragment:ne,getElementsByTagName:ae}=a,oe=s.importNode,n={},{MUSTACHE_EXPR:ie,ERB_EXPR:le,TMPLIT_EXPR:se,DATA_ATTR:de,ARIA_ATTR:ce,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:ge}=(c.isSupported="function"==typeof u0&&"function"==typeof o&&te&&void 0!==te.createHTMLDocument,oy),fe=oy.IS_ALLOWED_URI,p=null,pe=qe({},[...L0,...M0,...I0,...U0,...j0]),h=null,he=qe({},[...H0,...V0,...$0,...q0]),i=Object.seal(b0(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),v=null,ve=null,be=!0,ye=!0,Ce=!1,we=!0,b=!1,Ee=!0,y=!1,xe=!1,_e=!1,C=!1,w=!1,E=!1,ke=!0,Se=!1,Ne=!0,x=!1,l={},_=null,Re=qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ae=null,Te=qe({},["audio","video","img","source","image","track"]),Oe=null,Be=qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),k="http://www.w3.org/1998/Math/MathML",S="http://www.w3.org/2000/svg",N="http://www.w3.org/1999/xhtml",R=N,Pe,De=null,Le=qe({},[k,S,N],k0),A=null,Me=["application/xhtml+xml","text/html"],T=null,O=null,Ie=a.createElement("form"),Fe=qe({},["mi","mo","mn","ms","mtext"]),Ue=qe({},["annotation-xml"]),ze=qe({},["title","style","font","a","script"]),je=qe({},[...M0,...I0,...F0]),He=qe({},[...U0,...z0]),B=function(t){x0(c.removed,{element:t});try{o(t).removeChild(t)}catch(e){$(t)}},P=function(e,t){try{x0(c.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){x0(c.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!h[e])if(C||w)try{B(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ve=function(e){return e instanceof j&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof z)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},D=function(e,t,r){n[e]&&w0(n[e],e=>{e.call(c,t,r,O)})},$e=function(e,t,r){if(ke&&("id"===t||"name"===t)&&(r in a||r in Ie))return!1;if((!ye||ve[t]||!O0(de,t))&&(!be||!O0(ce,t)))if(!h[t]||ve[t]){if(!(Q(e)&&(i.tagNameCheck instanceof RegExp&&O0(i.tagNameCheck,e)||i.tagNameCheck instanceof Function&&i.tagNameCheck(e))&&(i.attributeNameCheck instanceof RegExp&&O0(i.attributeNameCheck,t)||i.attributeNameCheck instanceof Function&&i.attributeNameCheck(t))||"is"===t&&i.allowCustomizedBuiltInElements&&(i.tagNameCheck instanceof RegExp&&O0(i.tagNameCheck,r)||i.tagNameCheck instanceof Function&&i.tagNameCheck(r))))return!1}else if(!Oe[t]&&!O0(fe,N0(r,me,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==R0(r,"data:")||!Ae[e])&&(!Ce||O0(ue,N0(r,me,"")))&&r)return!1;return!0};return c.sanitize=function(t){let e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=null,n,a,o=null;if("string"!=typeof(t=(Pe=!t)?"\x3c!--\x3e":t)&&!X(t)){if("function"!=typeof t.toString)throw Qf("toString is not a function");if("string"!=typeof(t=t.toString()))throw Qf("dirty is not a string, aborting")}if(!c.isSupported)return t;if(xe||m(e),c.removed=[],x="string"==typeof t?!1:x){if(t.nodeName){let e=T(t.nodeName);if(!p[e]||v[e])throw Qf("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof d)1===(n=(r=Y("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?r=n:r.appendChild(n);else{if(!C&&!b&&!y&&-1===t.indexOf("<"))return g&&E?g.createHTML(t):t;if(!(r=Y(t)))return C?null:E?f:""}r&&_e&&B(r.firstChild);for(var i=G(x?t:r);a=i.nextNode();)Z(a)||(a.content instanceof I&&ee(a.content),J(a));if(x)return t;if(C){if(w)for(o=ne.call(r.ownerDocument);r.firstChild;)o.appendChild(r.firstChild);else o=r;return o=h.shadowroot||h.shadowrootmode?oe.call(s,o,!0):o}let l=y?r.outerHTML:r.innerHTML;return y&&p["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&O0(ey,r.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+l),b&&w0([ie,le,se],e=>{l=N0(l,e," ")}),g&&E?g.createHTML(l):l},c.setConfig=function(){m(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),xe=!0},c.clearConfig=function(){O=null,xe=!1},c.isValidAttribute=function(e,t,r){O||m({});e=T(e),t=T(t);return $e(e,t,r)},c.addHook=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],x0(n[e],t))},c.removeHook=function(e){if(n[e])return E0(n[e])},c.removeHooks=function(e){n[e]&&(n[e]=[])},c.removeAllHooks=function(){n={}},c}();let ly=oe.each,sy=oe.trim,dy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],cy={ftp:21,http:80,https:443,mailto:25},uy=["img","video"],my=(e,t,r)=>{t=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(t)||!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,r=r,(z(e)?!e:!z(r)||!V(uy,r))&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t)))};class gy{static parseDataUri(e){let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}}static isDomSafe(e,t,r={}){return!!r.allow_script_urls||(e=_o.decode(e).replace(/[\s\u0000-\u001F]+/g,""),!my(r,e,t))}static getDocumentBaseUrl(e){let t,r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!=(t=e.href)?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(r,e={}){this.path="",this.directory="",r=sy(r);let a=(this.settings=e).base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r))o.source=r;else{let e=0===r.indexOf("//");if(0!==r.indexOf("/")||e||(r=(a&&a.protocol||"http")+"://mce_host"+r),!/^[\w\-]*:?\/\//.test(r)){let t=a?a.path:new gy(document.location.href).directory;if(""===(null==a?void 0:a.protocol))r="//mce_host"+o.toAbsPath(t,r);else{let e=/([^#?]*)([#?]?.*)/.exec(r);e&&(r=(a&&a.protocol||"http")+"://mce_host"+o.toAbsPath(t,e[1])+e[2])}}r=r.replace(/@@/g,"(mce_at)");let n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r);n&&ly(dy,(e,t)=>{let r=n[t];r=r&&r.replace(/\(mce_at\)/g,"@@"),o[e]=r}),a&&(o.protocol||(o.protocol=a.protocol),o.userInfo||(o.userInfo=a.userInfo),o.port||"mce_host"!==o.host||(o.port=a.port),o.host&&"mce_host"!==o.host||(o.host=a.host),o.source=""),e&&(o.protocol="")}}setPath(e){e=/^(.*?)\/?(\w+)?$/.exec(e);e&&(this.path=e[0],this.directory=e[1],this.file=e[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;e=new gy(e,{base_uri:this});if("mce_host"!==e.host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),r=e.getURI();if(t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r)return t;let n=this.toRelPath(this.path,e.path);return e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n}toAbsolute(e,t){e=new gy(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?cy[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r,n,a=0,o="";var i=e.substring(0,e.lastIndexOf("/")).split("/"),l=t.split("/");if(i.length>=l.length)for(r=0,n=i.length;r<n;r++)if(r>=l.length||i[r]!==l[r]){a=r+1;break}if(i.length<l.length)for(r=0,n=l.length;r<n;r++)if(r>=i.length||i[r]!==l[r]){a=r+1;break}if(1===a)return t;for(r=0,n=i.length-(a-1);r<n;r++)o+="../";for(r=a-1,n=l.length;r<n;r++)o+=r!==a-1?"/"+l[r]:l[r];return o}toAbsPath(e,t){let r=0,n=/\/$/.test(t)?"/":"",a=e.split("/"),o=t.split("/"),i=[];ly(a,e=>{e&&i.push(e)});var l=[];for(let e=o.length-1;0<=e;e--)0!==o[e].length&&"."!==o[e]&&(".."!==o[e]?0<r?r--:l.push(o[e]):r++);e=i.length-r;let s;return 0!==(s=e<=0?xe(l).join("/"):i.slice(0,e).join("/")+"/"+xe(l).join("/")).indexOf("/")&&(s="/"+s),n&&s.lastIndexOf("/")!==s.length-1&&(s+=n),s}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}let fy=oe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),py="data-mce-type",hy=0,vy=(n,a,o,i,l)=>{var s=a.validate,d=o.getSpecialElements(),a=(8===n.nodeType&&!a.allow_conditional_comments&&/^\[if/i.test(null!=(a=n.nodeValue)?a:"")&&(n.nodeValue=" "+n.nodeValue),null!=(a=null==l?void 0:l.tagName)?a:n.nodeName.toLowerCase());if("html"!==i&&o.isValid(i))z(l)&&(l.allowedTags[a]=!0);else if(1===n.nodeType&&"body"!==a){let t=W(n),e=mr(t,py),r=cr(t,"data-mce-bogus");!e&&Z(r)?("all"===r?Y:An)(t):(i=o.getElementRule(a),!s||i?(z(l)&&(l.allowedTags[a]=!0),s&&i&&!e&&(re(null!=(n=i.attributesForced)?n:[],e=>{sr(t,e.name,"{$uid}"===e.value?"mce_"+hy++:e.value)}),re(null!=(o=i.attributesDefault)?o:[],e=>{mr(t,e.name)||sr(t,e.name,"{$uid}"===e.value?"mce_"+hy++:e.value)}),(!i.attributesRequired||$(i.attributesRequired,e=>mr(t,e)))&&(!i.removeEmptyAttrs||null!=(l=t.dom.attributes)&&0!==l.length)?i.outputName&&i.outputName!==a&&(s=t,n=((e,t)=>{t=Sr(t),e=fr(e);return dr(t,e),t})(s,i.outputName),_n(s,n),o=Vr(s),Nn(n,o),Y(s)):An(t))):(ae(d,a)?Y:An)(t))}},by=(e,t,r,n,a,o)=>"html"!==r&&!Fa(n)||!(a in fy&&my(e,o,n))&&(!e.validate||t.isValid(n,a)||lt(a,"data-")||lt(a,"aria-")),yy=(e,t)=>e.hasAttribute(py)&&("id"===t||"class"===t||"style"===t),Cy=(e,t)=>e in t.getBoolAttrs(),wy=(t,r,n,a)=>{var o=t.attributes;for(let e=o.length-1;0<=e;e--){var i=o[e],l=i.name,i=i.value;by(r,n,a,t.tagName.toLowerCase(),l,i)||yy(t,l)?Cy(l,n)&&t.setAttribute(l,l):t.removeAttribute(l)}},Ey=(s,d,c)=>{var e=iy();return e.addHook("uponSanitizeElement",(e,t)=>{vy(e,s,d,c.track(e),t)}),e.addHook("uponSanitizeAttribute",(e,t)=>{var r=s,n=d,a=c.current(),o=e.tagName.toLowerCase(),{attrName:i,attrValue:l}=t;t.keepAttr=by(r,n,a,o,i,l),t.keepAttr?(t.allowedAttributes[i]=!0,Cy(i,n)&&(t.attrValue=i),r.allow_svg_data_urls&&lt(l,"data:image/svg+xml")&&(t.forceKeepAttr=!0)):yy(e,i)&&(t.forceKeepAttr=!0)}),e},xy=a=>t=>{var r=za(t);if("svg"!==r){if("math"!==r)throw new Error("Not a namespace element");{var r=t,n=a;let e=iy(),o=n.allow_mathml_annotation_encodings,i=Q(o)&&0<o.length;e.addHook("uponSanitizeElement",(t,r)=>{var e,n,a=null!=(e=r.tagName)?e:t.nodeName.toLowerCase();if(i&&"semantics"===a&&(r.allowedTags[a]=!0),"annotation"===a){n=t.getAttribute("encoding");let e=i&&Z(n)&&V(o,n);(r.allowedTags[a]=e)||t.remove()}}),e.sanitize(r,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})}}else n=t,r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>"xlink:"+e)},iy().sanitize(n,r)},_y=oe.makeMap,ky=oe.extend,Sy=(r,e,a,o)=>{let t=r.name,i=t in a&&"title"!==t&&"textarea"!==t&&"noscript"!==t,l=e.childNodes;for(let t=0,e=l.length;t<e;t++){let e=l[t],n=new Zf(e.nodeName.toLowerCase(),e.nodeType);if(G(e)){let r=e.attributes;for(let t=0,e=r.length;t<e;t++){let e=r[t];n.attr(e.name,e.value)}Fa(n.name)&&(o(e),n.value=e.innerHTML)}else D(e)?(n.value=e.data,i&&(n.raw=!0)):(pa(e)||ga(e)||fa(e))&&(n.value=e.data);Fa(n.name)||Sy(n,e,a,o),r.append(n)}},Ny=(e={},E=jo())=>{let t=Qb(),r=Qb(),x={validate:!0,root_name:"body",sanitize:!0,...e},_=new DOMParser,k=((a,o)=>{let i=(()=>{let e=Ma(),r=()=>e.get().map(za).getOr("html");return{track:t=>(Ua(t)?e.set(t):e.get().exists(e=>!e.contains(t))&&e.clear(),r()),current:r,reset:()=>{e.clear()}}})();if(a.sanitize){let n=Ey(a,o,i);return{sanitizeHtmlElement:(e,t)=>{var r;n.sanitize(e,(e=a,(r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}).PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r)),n.removed=[],i.reset()},sanitizeNamespaceElement:xy(a)}}return{sanitizeHtmlElement:(e,t)=>{for(var r,n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);r=n.nextNode();){let e=i.track(r);vy(r,a,o,e),G(r)&&wy(r,a,o,e)}i.reset()},sanitizeNamespaceElement:H}})(x,E),n=t.addFilter,S=t.getFilters,a=t.removeFilter,o=r.addFilter,N=r.getFilters,i=r.removeFilter,R=(e,t)=>{var r=Z(t.attr(py)),e=1===t.type&&!ae(e,t.name)&&!to(E,t)&&!Fa(t.name);return 3===t.type||e&&!r},c={schema:E,addAttributeFilter:o,getAttributeFilters:N,removeAttributeFilter:i,addNodeFilter:n,getNodeFilters:S,removeNodeFilter:a,parse:(e,r={})=>{var t,n=x.validate,a=null!=(a=r.context)?a:x.root_name,e=([e,h,t="html"]=[e,a,r.format],v="xhtml"===t?"application/xhtml+xml":"text/html",h=(b=ae(E.getSpecialElements(),h.toLowerCase()))?`<${h}>${e}</${h}>`:e,t=_.parseFromString("xhtml"===t?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${h}</body></html>`:/^[\s]*<head/i.test(e)||/^[\s]*<html/i.test(e)||/^[\s]*<!DOCTYPE/i.test(e)?`<html>${h}</html>`:`<body>${h}</body>`,v).body,k.sanitizeHtmlElement(t,v),b?t.firstChild:t);Ya(E,e);let i=new Zf(a,11),[o,l]=(Sy(i,e,E.getSpecialElements(),k.sanitizeNamespaceElement),e.innerHTML="",((r,a,o,i)=>{let e=o.validate,l=a.getNonEmptyElements(),s=a.getWhitespaceElements(),t=ky(_y("script,style,head,html,body,title,meta,param"),a.getBlockElements()),d=Uo(a),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,g=e=>{let t=e.parent;for(;z(t);){if(t.name in s)return!0;t=t.parent}return!1},f=e=>e.name in t||to(a,e)||Fa(e.name)&&e.parent===r,p=(e,t)=>{t=t?e.prev:e.next;return!z(t)&&!U(e.parent)&&f(e.parent)&&(e.parent!==r||!0===i.isRootContent)};return[t=>{var r,n;if(3===t.type&&!g(t)){let e=null!=(r=t.value)?r:"";e=e.replace(c," "),r=t.prev,n=f,0===(e=z(r)&&(n(r)||"br"===r.name)||p(t,!0)?e.replace(u,""):e).length||" "===e&&t.prev&&8===t.prev.type&&t.next&&8===t.next.type?t.remove():t.value=e}},r=>{var t,n;if(1===r.type){let t=a.getElementRule(r.name);if(e&&t){let e=_v(a,l,s,r);t.paddInEmptyBlock&&e&&(()=>{let e=r;for(;z(e);){if(e.name in d)return _v(a,l,s,e);e=e.parent}return!1})()?Ev(o,i,f,r):t.removeEmpty&&e?f(r)?r.remove():r.unwrap():t.paddEmpty&&(e||(n=r,xv(n,"#text")&&(null==(n=null==n?void 0:n.firstChild)?void 0:n.value)===Zn))&&Ev(o,i,f,r)}}else if(3===r.type&&!g(r)){let e=null!=(t=r.value)?t:"";0===(e=r.next&&f(r.next)||p(r,!1)?e.replace(m,""):e).length?r.remove():r.value=e}}]})(i,E,x,r)),s=[],d=n?e=>{var t;e=e,t=s,Rv(E,e)&&t.push(e)}:H,c={nodes:{},attributes:{}},u=e=>yv(S(),N(),e,c);var m=i,g=[o,u],f=[l,d],p=[];for(let e=m,r=e;e;e=(r=e).walk()){let t=e;re(g,e=>e(t)),U(t.parent)&&t!==m?e=r:p.push(t)}for(let e=p.length-1;0<=e;e--){let t=p[e];re(f,e=>e(t))}if(s.reverse(),n&&0<s.length)if(r.context){let{pass:e,fail:t}=fe(s,e=>e.parent===i);Nv(t,E,i,u),r.invalid=0<e.length}else Nv(s,E,i,u);h=x;var h,v,b=!1===(v=null!=(v=r.forced_root_block)?v:h.forced_root_block)?"":!0===v?"p":v;if(b&&("body"===i.name||r.isRootContent)){var y=i,C=b;let t=ky(_y("script,style,head,html,body,title,meta,param"),E.getBlockElements()),r=/^[ \t\r\n]+/,n=/[ \t\r\n]+$/,a=y.firstChild,o=null;var w=e=>{var t;e&&((a=e.firstChild)&&3===a.type&&(a.value=null==(t=a.value)?void 0:t.replace(r,"")),a=e.lastChild)&&3===a.type&&(a.value=null==(t=a.value)?void 0:t.replace(n,""))};if(E.isValidChild(y.name,C.toLowerCase())){for(;a;){let e=a.next;R(t,a)?(o||((o=new Zf(C,1)).attr(x.forced_root_block_attrs),y.insert(o,a)),o.append(a)):(w(o),o=null),a=e}w(o)}}return r.invalid||Cv(c,r),i}};{var u=x,m=(e=c).schema;e.addAttributeFilter("href",t=>{let r=t.length;if(!u.allow_unsafe_link_target)for(;r--;){let e=t[r];"a"===e.name&&"_blank"===e.attr("target")&&e.attr("rel",(e=>{e=e?oe.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(e=>0<e.length).concat(["noopener"]).sort().join(" ")})(e.attr("rel")))}}),u.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,r,n,a,o=e.length;for(;o--;)if("a"===(a=e[o]).name&&a.firstChild&&!a.attr("href"))for(n=a.parent,t=a.lastChild;t&&n;)r=t.prev,n.insert(t,a),t=r}),u.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,r,n=e.length;for(;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{let e=new Zf("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});let l=m.getValidClasses();u.validate&&l&&e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var o=e[t],r=null!=(r=o.attr("class"))?r:"",i=oe.explode(r," ");let a="";for(let n=0;n<i.length;n++){let e=i[n],t=!1,r=l["*"];r&&r[e]&&(t=!0),r=l[o.name],(t=!t&&r&&r[e]?!0:t)&&(a&&(a+=" "),a+=e)}a.length||(a=null),o.attr("class",a)}});{var g=u;let n=g.blob_cache;if(n){let t=t=>{var e,r=t.attr("src");(e=t).attr("src")===F.transparentSrc||z(e.attr("data-mce-placeholder"))||(e=t,z(e.attr("data-mce-bogus")))||U(r)||i0(n,r,!0).each(e=>{t.attr("src",e.blobUri())})};e.addAttributeFilter("src",e=>re(e,t))}}let s=null!=(m=u.sandbox_iframes)&&m,d=Be(null!=(g=u.sandbox_iframes_exclusions)?g:[]);u.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>re(e,e=>{var t,r,n,a,o,i;e.replace(([{type:e,src:t,width:r,height:n},a,o]=[{type:e.attr("type"),src:"object"===e.name?e.attr("data"):e.attr("src"),width:e.attr("width"),height:e.attr("height")},s,d],e=e,e=b(e)?"iframe":c0(e,"image")?"img":c0(e,"video")?"video":c0(e,"audio")?"audio":"iframe",(i=new Zf(e,1)).attr("audio"==e?{src:t}:{src:t,width:r,height:n}),"audio"!=e&&"video"!=e||i.attr("controls",""),"iframe"==e&&a&&d0(i,o),i))})),s&&e.addNodeFilter("iframe",e=>re(e,e=>d0(e,d)))}return m=c,g=x,e=E,g.inline_styles&&Jb(m,g,e),c},Ry=(t,e,r)=>{n=t;var n=Fv(n)?vp({validate:!1}).serialize(n):n,a=e(n);if(a.isDefaultPrevented()||!Fv(t))return a;if(a.content===n)return{...a,content:t};{let e=Ny({validate:!1,forced_root_block:!1,...r}).parse(a.content,{context:t.name});return{...a,content:e}}},Ay=e=>({sanitize:Ac(e),sandbox_iframes:Lc(e),sandbox_iframes_exclusions:Mc(e)}),Ty=(e,t)=>!t.no_events&&(t=e.dispatch("BeforeGetContent",t)).isDefaultPrevented()?_s.error(Is(e,{content:"",...t}).content):_s.value(t),Oy=(t,e,r)=>r.no_events?e:Ry(e,e=>Is(t,{...r,content:e}),Ay(t)).content,By=(r,n)=>{var e;return n.no_events?_s.value(n):(e=Ry(n.content,e=>{return t=r,e={...n,content:e},t.dispatch("BeforeSetContent",e);var t},Ay(r))).isDefaultPrevented()?(Ms(r,e),_s.error(void 0)):_s.value(e)},Py=(e,t,r)=>{r.no_events||Ms(e,{...r,content:t})},Dy=(e,t,r)=>({element:e,width:t,rows:r}),Ly=(e,t)=>({element:e,cells:t}),My=(e,t)=>({x:e,y:t}),Iy=(e,t)=>ur(e,t).bind(pt).getOr(1),Fy=(e,t,r)=>{e=e.rows;return!!(e[r]?e[r].cells:[])[t]},Uy=e=>he(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),zy=(e,r)=>{var n=e.rows;for(let t=0;t<n.length;t++){var a=n[t].cells;for(let e=0;e<a.length;e++)if(P(a[e],r))return ee.some(My(e,t))}return ee.none()},jy=(e,n,t,a,o)=>{var i=[],l=e.rows;for(let r=t;r<=o;r++){let e=l[r].cells,t=n<a?e.slice(n,a+1):e.slice(a,n+1);i.push(Ly(l[r].element,t))}return i},Hy=e=>{return r=e=e,r=te(r.rows,e=>{var t=te(e.cells,e=>{e=Ui(e);return gr(e,"colspan"),gr(e,"rowspan"),e}),e=Fi(e.element);return Nn(e,t),e}),e=Fi(e.element),t=Sr("tbody"),Nn(t,r),K(e,t),e;var t,r},Vy=(e,t,r)=>{var n,a,o,i=W(t.commonAncestorContainer),e=Up(i,e),l=B(e,e=>r.isWrapper(q(e))),e=(a=e,o=t,be(a,e=>"li"===q(e)&&Em(e,o)).fold(J([]),e=>{return t=a,be(t,e=>"ul"===q(e)||"ol"===q(e)).map(e=>{var t=Sr(q(e)),e=Ue(wn(e),(e,t)=>lt(t,"list-style"));return vn(t,e),[Sr("li"),t]}).getOr([]);var t})),t=l.concat(e.length?e:(n=i,Gi(n)?Mr(n).filter(Yi).fold(J([]),e=>[n,e]):Yi(n)?[n]:[]));return te(t,Fi)},$y=()=>sf([]),qy=(e,a)=>{return e=e,t=a[0],sn(t,"table",C(P,e)).bind(e=>{var i,t,r=a[0],n=a[a.length-1],e=(e=>{let m=Dy(Fi(e),0,[]);return re(qn(e,"tr"),(c,u)=>{re(qn(c,"td,th"),(e,t)=>{var r=m,n=((e,t,r)=>{for(;Fy(e,t,r);)t++;return t})(m,t,u),a=u,o=c,i=e,l=Iy(i,"rowspan"),s=Iy(i,"colspan"),d=r.rows;for(let t=a;t<a+l;t++){d[t]||(d[t]=Ly(Ui(o),[]));for(let e=n;e<n+s;e++)d[t].cells[e]=t===a&&e===n?i:Fi(i)}})}),Dy(m.element,Uy(m.rows),m.rows)})(e);return i=e,e=r,t=n,zy(i,e).bind(o=>zy(i,t).map(e=>{return t=i,r=o.x,n=o.y,a=e.x,e=e.y,r=n<e?jy(t,r,n,a,e):jy(t,r,e,a,n),Dy(t.element,Uy(r),r);var t,r,n,a})).map(e=>sf([Hy(e)]))}).getOrThunk($y);var t},Wy=(e,t,r)=>{var n=vm(t,e);return 0<n.length?qy(e,n):(n=e,e=r,0<(r=t).length&&r[0].collapsed?$y():(n=n,r=r[0],e=e,t=W(r.cloneContents()),n=Vy(n,r,e),t=he(n,(e,t)=>(K(t,e),t),t),0<n.length?sf([t]):t))},Ky=(e,t)=>0<=t&&t<e.length&&fm(e.charAt(t)),Yy=e=>nl(e.innerText),Gy=e=>G(e)?e.outerHTML:D(e)?_o.encodeRaw(e.data,!1):pa(e)?"\x3c!--"+e.data+"--\x3e":"",Xy=(e,t)=>{{e=((g,f)=>{let e=g.length+f.length+2,p=new Array(e),h=new Array(e),l=(r,n,a,o,i)=>{var t=s(r,n,a,o);if(null===t||t.start===n&&t.diag===n-o||t.end===r&&t.diag===r-a){let e=r,t=a;for(;e<n||t<o;)e<n&&t<o&&g[e]===f[t]?(i.push([0,g[e]]),++e,++t):o-a<n-r?(i.push([2,g[e]]),++e):(i.push([1,f[t]]),++t)}else{l(r,t.start,a,t.start-t.diag,i);for(let e=t.start;e<t.end;++e)i.push([0,g[e]]);l(t.end,n,t.end-t.diag,o,i)}},v=(e,t,r,n)=>{let a=e;for(;a-t<n&&a<r&&g[a]===f[a-t];)++a;return{start:e,end:a,diag:t}},s=(o,i,l,s)=>{var d=i-o,c=s-l;if(0!=d&&0!=c){var u=d-c,c=c+d,m=(c%2==0?c:1+c)/2;let e,t,r,n,a;for(p[1+m]=o,h[1+m]=i+1,e=0;e<=m;++e){for(t=-e;t<=e;t+=2){for(r=t+m,t===-e||t!==e&&p[r-1]<p[r+1]?p[r]=p[r+1]:p[r]=p[r-1]+1,n=p[r],a=n-o+l-t;n<i&&a<s&&g[n]===f[a];)p[r]=++n,++a;if(u%2!=0&&u-e<=t&&t<=u+e&&h[r-u]<=p[r])return v(h[r-u],t+o-l,i,s)}for(t=u-e;t<=u+e;t+=2){for(r=t+m-u,t===u-e||t!==u+e&&h[r+1]<=h[r-1]?h[r]=h[r+1]-1:h[r]=h[r-1],n=h[r]-1,a=n-o+l-t;n>=o&&a>=l&&g[n]===f[a];)h[r]=n--,a--;if(u%2==0&&-e<=t&&t<=e&&h[r]<=p[r+u])return v(h[r],t+o-l,i,s)}}}return null},t=[];return l(0,g.length,0,f.length,t),t})(te(Te(t.childNodes),Gy),e);var i=t;let o=0;re(e,e=>{if(0===e[0])o++;else if(1===e[0]){var t=i,r=e[1],n=o,a=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(r);if(t.hasChildNodes()&&n<t.childNodes.length){let e=t.childNodes[n];t.insertBefore(a,e)}else t.appendChild(a);o++}else 2===e[0]&&(r=i,n=o,r.hasChildNodes())&&n<r.childNodes.length&&(n=r.childNodes[n],r.removeChild(n))})}return t},Zy=Je(()=>document.implementation.createHTMLDocument("undo")),Qy=e=>{var t=e.serializer.getTempAttrs(),e=up(e.getBody(),t);return null!==e.querySelector("iframe")?{type:"fragmented",fragments:B(te(Te(e.childNodes),s(nl,Gy)),e=>0<e.length),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:nl(e.innerHTML),bookmark:null,beforeBookmark:null}},Jy=(e,t,r)=>{r=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Xy(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!z(r)||!rm(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},eC=e=>"fragmented"===e.type?e.fragments.join(""):e.content,tC=e=>{var t=Sr("body",Zy());return Bn(t,eC(e)),re(qn(t,"*[data-mce-bogus]"),An),On(t)},rC=(e,t)=>{return!(!e||!t||(r=e,n=t,eC(r)!==eC(n)&&(r=e,n=t,tC(r)!==tC(n))));var r,n},nC=e=>0===e.get(),aC=(e,t,r)=>{nC(r)&&(e.typing=t)},oC=(e,t)=>{e.typing&&(aC(e,!1,t),e.add())},iC=g=>({init:{bindEvents:H},undoManager:{beforeChange:(e,t)=>{var r;r=g,e=e,t=t,nC(e)&&t.set(ws(r.selection))},add:(e,t,r,n,a,o)=>{var i=g,l=e,s=t,e=r,t=n,r=a,n=o,a=Qy(i),r=oe.extend(r||{},a);if(!nC(e)||i.removed)return null;if(a=l.data[s.get()],i.dispatch("BeforeAddUndo",{level:r,lastLevel:a,originalEvent:n}).isDefaultPrevented())return null;if(a&&rC(a,r))return null;if(l.data[s.get()]&&t.get().each(e=>{l.data[s.get()].beforeBookmark=e}),(e=Wd(i))&&l.data.length>e){for(let e=0;e<l.data.length-1;e++)l.data[e]=l.data[e+1];l.data.length--,s.set(l.data.length)}return r.bookmark=ws(i.selection),s.get()<l.data.length-1&&(l.data.length=s.get()+1),l.data.push(r),s.set(l.data.length-1),t={level:r,lastLevel:a,originalEvent:n},0<s.get()?(i.setDirty(!0),i.dispatch("AddUndo",t),i.dispatch("change",t)):i.dispatch("AddUndo",t),r},undo:(t,r,n)=>{{var a=g;let e;return t.typing&&(t.add(),t.typing=!1,aC(t,!1,r)),0<n.get()&&(n.set(n.get()-1),e=t.data[n.get()],Jy(a,e,!0),a.setDirty(!0),a.dispatch("Undo",{level:e})),e}},redo:(t,r)=>{{var n=g;let e;return t.get()<r.length-1&&(t.set(t.get()+1),e=r[t.get()],Jy(n,e,!1),n.setDirty(!0),n.dispatch("Redo",{level:e})),e}},clear:(e,t)=>{return r=g,t=t,(e=e).data=[],t.set(0),e.typing=!1,void r.dispatch("ClearUndos");var r},reset:e=>{(e=e).clear(),e.add()},hasUndo:(e,t)=>{return r=g,e=e,0<t.get()||e.typing&&e.data[0]&&!rC(Qy(r),e.data[0]);var r},hasRedo:(e,t)=>(e=e,t.get()<e.data.length-1&&!e.typing),transact:(e,t,r)=>(e=e,t=t,r=r,oC(e,t),e.beforeChange(),e.ignore(r),e.add()),ignore:(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:(r,n,a,e)=>{var o=g,t=a,a=e;if(r.transact(t)){let e=r.data[n.get()].bookmark,t=r.data[n.get()-1];Jy(o,t,!0),r.transact(a)&&(r.data[n.get()-1].beforeBookmark=e)}}},formatter:{match:(e,t,r,n)=>Yv(g,e,t,r,n),matchAll:(t,r)=>{{var o=g,i=t,l=r;let n=[],a={},e=o.selection.getStart();return o.dom.getParent(e,t=>{for(let e=0;e<i.length;e++){var r=i[e];!a[r]&&Kv(o,t,r,l)&&(a[r]=!0,n.push(r))}},o.dom.getRoot()),n}},matchNode:(e,t,r,n)=>Kv(g,e,t,r,n),canApply:e=>{var t=g,r=e,n=t.formatter.get(r),a=t.dom;if(n&&t.selection.isEditable()){let e=t.selection.getStart(),r=jm(a,e);for(let e=n.length-1;0<=e;e--){let t=n[e];if(!$m(t))return!0;for(let e=r.length-1;0<=e;e--)if(a.is(r[e],t.selector))return!0}}return!1},closest:e=>{{var n=g,a=e;let t=e=>P(e,W(n.getBody()));return ee.from(n.selection.getStart(!0)).bind(e=>jv(W(e),r=>Oe(a,e=>{return t=r,e=e,Kv(n,t.dom,e)?ee.some(e):ee.none();var t}),t)).getOrNull()}},apply:(e,t,r)=>qb(g,e,t,r),remove:(e,t,r,n)=>Ub(g,e,t,r,n),toggle:(e,t,r)=>{var n,a;e=e,t=t,r=r,(a=(n=g).formatter.get(e))&&(!Yv(n,e,t,r)||"toggle"in a[0]&&!a[0].toggle?qb:Ub)(n,e,t,r)},formatChanged:(e,t,r,n,a)=>{var o=g,i=e,l=t,s=r,e=n,t=a;{var d=o,r=l,c=s,u=e,m=t;let a=(o=i).get();re(r.split(","),t=>{var r=w(a,t).getOrThunk(()=>{var e={withSimilar:{state:Da(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Da(!1),similar:!1,callbacks:[]},withVars:[]};return a[t]=e}),n=()=>{var e=Gb(d);return Yb(d,e,t,u,m).isSome()};if(b(m)){let e=u?r.withSimilar:r.withoutSimilar;e.callbacks.push(c),1===e.callbacks.length&&e.state.set(n())}else r.withVars.push({state:Da(n()),similar:u,vars:m,callback:c})}),o.set(a)}return{unbind:()=>{{var e=i,t=l,n=s;let r=e.get();re(t.split(","),t=>w(r,t).each(e=>{r[t]={withSimilar:{...e.withSimilar,callbacks:B(e.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...e.withoutSimilar,callbacks:B(e.withoutSimilar.callbacks,e=>e!==n)},withVars:B(e.withVars,e=>e.callback!==n)}})),e.set(r)}}}}},editor:{getContent:e=>{return t=g,r=e,ee.from(t.getBody()).fold(J("tree"===r.format?new Zf("body",11):""),e=>fp(t,r,e));var t,r},setContent:(e,t)=>{return l=g,s=e,d=t,ee.from(l.getBody()).map(e=>{if(Fv(s))return t=l,r=e,n=s,a=d,wv(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n),o=vp({validate:!1},t.schema).serialize(n),r=nl(Qi(W(r))?o:oe.trim(o)),Uv(t,r,a.no_selection),{content:n,html:r};o=l,t=e,a=s,n=d;if(0===(a=nl(a)).length||/^\s+$/.test(a))return r='<br data-mce-bogus="1">',"TABLE"===t.nodeName?a="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(a="<li>"+r+"</li>"),i=Js(o),a=o.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(a=r,o.dom.createHTML(i,ed(o),a)):a||r,Uv(o,a,n.no_selection),{content:a,html:a};"raw"!==n.format&&(a=vp({validate:!1},o.schema).serialize(o.parser.parse(a,{isRootContent:!0,insert:!0})));var t,r,n,a,o,i=Qi(W(t))?a:oe.trim(a);return Uv(o,i,n.no_selection),{content:i,html:i}}).getOr({content:s,html:Fv(d.content)?"":d.content});var l,s,d},insertContent:(e,t)=>Iv(g,e,t),addVisual:t=>{{var a=g;let n=a.dom,e=z(t)?t:a.getBody();re(n.select("table,a",e),e=>{switch(e.nodeName){case"TABLE":var t=tc(a),r=n.getAttrib(e,"border");r&&"0"!==r||!a.hasVisual?n.removeClass(e,t):n.addClass(e,t);break;case"A":n.getAttrib(e,"href")||(r=n.getAttrib(e,"name")||e.id,t=rc(a),r&&a.hasVisual?n.addClass(e,t):n.removeClass(e,t))}}),a.dispatch("VisualAid",{element:t,hasVisual:a.hasVisual})}}},selection:{getContent:(e,t)=>{return[d,t={}]=[g,t],e=e,t={...t,format:e,get:!0,selection:!0,getInner:!0},Ty(d,t).fold(f,e=>{t=d;var t,r,l,n,a,o,i,s="text"===(r=e).format?(l=t,ee.from(l.selection.getRng()).map(e=>{let n=ee.from(l.dom.getParent(e.commonAncestorContainer,l.dom.isBlock)),a=l.getBody(),t=n.map(e=>e.nodeName).getOr("div").toLowerCase(),r=W(e.cloneContents());mp(r),gp(r);var e=l.dom.add(a,t,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},r.dom),o=Yy(e),i=nl(null!=(i=e.textContent)?i:"");if(l.dom.remove(e),Ky(i,0)||Ky(i,i.length-1)){let e=n.getOr(a),t=Yy(e),r=t.indexOf(o);return-1===r?o:(Ky(t,r-1)?" ":"")+o+(Ky(t,r+o.length)?" ":"")}return o}).getOr("")):(a=r,o=(n=t).selection.getRng(),i=n.dom.create("body"),s=n.selection.getSel(),s=Kf(n,hm(s)),(s=a.contextual?Wy(W(n.getBody()),s,n.schema).dom:o.cloneContents())&&i.appendChild(s),o=n.selection.serializer.serialize(i,a),"tree"!==r.format&&t.selection.isCollapsed()?"":o);return Oy(d,s,e)});var d}},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:()=>ee.none()}}),lC=e=>ae(e.plugins,"rtc"),sC=e=>e.rtcInstance||iC(e),dC=e=>{e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},cC=e=>dC(e).init.bindEvents(),uC=e=>0===e.dom.length?(Y(e),ee.none()):ee.some(e),mC=(e,t,l,s,d)=>{e.bind(i=>((s?vh:hh)(i.dom,s?i.dom.length:0,d),t.filter(nr).map(e=>{var t,r,n,a,o;t=l,r=s,n=d,a=i.dom,e=e.dom,o=(r?a:e).length,r?(bh(a,e,n,!1,!r),t.setStart(e,o)):(bh(e,a,n,!1,!r),t.setEnd(e,o))}))).orThunk(()=>{var e;return e=s,t.filter(e=>hg.isBookmarkNode(e.dom)).bind(e?zr:Ur).or(t).filter(nr).map(e=>{var r,n,a;r=e,n=s,a=d,Mr(r).each(e=>{var t=r.dom;n&&lh(e,M(t,0),a)?hh(t,0,a):!n&&sh(e,M(t,t.length),a)&&vh(t,t.length,a)})})})},gC=(e,t,r)=>{var n;ae(e,t)&&(0===(n=B(e[t],e=>e!==r)).length?delete e[t]:e[t]=n)},fC=e=>!(!e||!e.ownerDocument)&&Br(W(e.ownerDocument),W(e)),pC=(d,n,e,l)=>{let a,o,r=((r,n)=>{let o,i,l=(t,e)=>be(e,e=>r.is(e,t)),s=e=>r.getParents(e,void 0,r.getRoot());return{selectorChangedWithUnbind:(e,t)=>(o||(o={},i={},n.on("NodeChange",e=>{let r=e.element,n=s(r),a={};ne(o,(e,r)=>{l(r,n).each(t=>{i[r]||(re(e,e=>{e(!0,{node:t,selector:r,parents:n})}),i[r]=e),a[r]=e})}),ne(i,(e,t)=>{a[t]||(delete i[t],re(e,e=>{e(!1,{node:r,selector:t,parents:n})}))})})),o[e]||(o[e]=[]),o[e].push(t),l(e,s(n.selection.getStart())).each(()=>{i[e]=o[e]}),{unbind:()=>{gC(o,e,t),gC(i,e,t)}})}})(d,l).selectorChangedWithUnbind,t=(e,t)=>{var d;[d,t={}]=[l,t],e=e,t={format:"html",...t,set:!0,selection:!0,content:e},By(d,t).each(e=>{l=d;var t,r,n,a,o,i,l="raw"!==(t=e).format?(s=l.selection.getRng(),s=(s=l.dom.getParent(s.commonAncestorContainer,l.dom.isBlock))?{context:s.nodeName.toLowerCase()}:{},s=l.parser.parse(t.content,{forced_root_block:!1,...s,...t}),vp({validate:!1},l.schema).serialize(s)):t.content,s=d.selection.getRng();r=(t=s).createContextualFragment(l),n=d.schema,a=ee.from(r.firstChild).map(W),o=ee.from(r.lastChild).map(W),t.deleteContents(),t.insertNode(r),r=a.bind(Ur).filter(nr).bind(uC),i=o.bind(zr).filter(nr).bind(uC),mC(r,a,t,!0,n),mC(i,o,t,!1,n),t.collapse(!1),d.selection.setRng(s),jf(d,s),Py(d,l,e)})},i=e=>{var t=c();t.collapse(!!e),u(t)},s=()=>n.getSelection?n.getSelection():n.document.selection,c=()=>{let t;var e=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},r=n.document;if(z(l.bookmark)&&!Wg(l)){let e=Dg(l);if(e.isSome())return e.map(e=>Kf(l,[e])[0]).getOr(r.createRange())}try{let e=s();e&&!aa(e.anchorNode)&&(t=0<e.rangeCount?e.getRangeAt(0):r.createRange(),t=Kf(l,[t])[0])}catch(e){}if(t=t||r.createRange(),ha(t.startContainer)&&t.collapsed){let e=d.getRoot();t.setStart(e,0),t.setEnd(e,0)}return a&&o&&(0===e(t.START_TO_START,t,a)&&0===e(t.END_TO_END,t,a)?t=o:(a=null,o=null)),t},u=(t,e)=>{if((r=t)&&fC(r.startContainer)&&fC(r.endContainer)){var r=s();if(t=l.dispatch("SetSelectionRange",{range:t,forward:e}).range,r){o=t;try{r.removeAllRanges(),r.addRange(t)}catch(t){}!1===e&&r.extend&&(r.collapse(t.endContainer,t.endOffset),r.extend(t.startContainer,t.startOffset)),a=0<r.rangeCount?r.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&null!=r&&r.setBaseAndExtent&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){let e=t.startContainer.childNodes[t.startOffset];e&&"IMG"===e.nodeName&&(r.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),r.anchorNode===t.startContainer&&r.focusNode===t.endContainer||r.setBaseAndExtent(e,0,e,1))}l.dispatch("AfterSetSelectionRange",{range:t,forward:e})}},m=()=>{var e=s(),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!t||!r||aa(t)||aa(r))return!0;var n=d.createRng(),a=d.createRng();try{n.setStart(t,e.anchorOffset),n.collapse(!0),a.setStart(r,e.focusOffset),a.collapse(!0)}catch(e){return!0}return n.compareBoundaryPoints(n.START_TO_START,a)<=0},g={dom:d,win:n,serializer:e,editor:l,expand:(e={type:"word"})=>u(wf(d).expand(c(),e)),collapse:i,setCursorLocation:(e,t)=>{var r=d.createRng();z(e)&&z(t)?(r.setStart(e,t),r.setEnd(e,t),u(r),i(!1)):(xm(d,r,l.getBody(),!0),u(r))},getContent:e=>{return[e={}]=[e],t=l,r=e.format||"html",e=e,dC(t).selection.getContent(r,e);var t,r},setContent:t,getBookmark:(e,t)=>f.getBookmark(e,t),moveToBookmark:e=>f.moveToBookmark(e),select:(e,t)=>{return a=d,r=e,o=t,ee.from(r).bind(n=>ee.from(n.parentNode).map(e=>{var t=a.nodeIndex(n),r=a.createRng();return r.setStart(e,t),r.setEnd(e,t+1),o&&(xm(a,r,n,!0),xm(a,r,n,!1)),r})).each(u),e;var a,r,o},isCollapsed:()=>{var e=c(),t=s();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var e,t;return!l.mode.isReadOnly()&&(e=c(),0<(t=l.getBody().querySelectorAll('[data-mce-selected="1"]')).length?Ee(t,e=>d.isEditable(e.parentElement)):Hf(d,e))},isForward:m,setNode:e=>(t(d.getOuterHTML(e)),e),getNode:()=>{{var n=l.getBody(),a=c();if(!a)return n;let e=a.startContainer,t=a.endContainer;var o=a.startOffset,i=a.endOffset;let r=a.commonAncestorContainer;return a.collapsed||(e===t&&i-o<2&&e.hasChildNodes()&&(r=e.childNodes[o]),D(e)&&D(t)&&(e=e.length===o?Wf(e.nextSibling,!0):e.parentNode,t=0===i?Wf(t.previousSibling,!1):t.parentNode,e)&&e===t&&(r=e)),a=D(r)?r.parentNode:r,oa(a)?a:n}},getSel:s,setRng:u,getRng:c,getStart:e=>$f(l.getBody(),c(),e),getEnd:e=>qf(l.getBody(),c(),e),getSelectedBlocks:(e,t)=>{var r,n=d,a=c(),o=e,e=t,i=[],t=n.getRoot(),l=n.getParent(o||$f(t,a,a.collapsed),n.isBlock),s=n.getParent(e||qf(t,a,a.collapsed),n.isBlock);if(l&&l!==t&&i.push(l),l&&s&&l!==s){let e=new Gn(l,t);for(;(r=e.next())&&r!==s;)n.isBlock(r)&&i.push(r)}return s&&l!==s&&s!==t&&i.push(s),i},normalize:()=>{let t=c(),e=s();if(1<hm(e).length||!_m(l))return t;{let e=bf(d,t);return e.each(e=>{u(e,m())}),e.getOr(t)}},selectorChanged:(e,t)=>(r(e,t),g),selectorChangedWithUnbind:r,getScrollContainer:()=>{let e,t=d.getRoot();for(;t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:(e,t)=>{var r,n;z(e)?(e=e,n=t,((r=l).inline?Ff:zf)(r,e,n)):jf(l,c(),t)},placeCaretAt:(e,t)=>u(cf(e,t,l.getDoc())),getBoundingClientRect:()=>{var e=c();return e.collapsed?M.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{n=a=o=null,p.destroy()}},f=hg(g),p=Jg(g,l);return g.bookmarkManager=f,g.controlSelection=p,g},hC=(e,t,r)=>{-1===oe.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},vC=(e,o)=>{let t=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},l=o&&o.dom?o.dom:X.DOM,s=o&&o.schema?o.schema:jo(i),d=Ny(i,s);return r=d,c=i,u=l,r.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),r.addAttributeFilter("src,href,style",(r,n)=>{var a="data-mce-"+n,o=c.url_converter,i=c.url_converter_scope;let l=r.length;for(;l--;){let e=r[l],t=e.attr(a);void 0!==t?(e.attr(n,0<t.length?t:null),e.attr(a,null)):(t=e.attr(n),"style"===n?t=u.serializeStyle(u.parseStyle(t),e.name):o&&(t=o.call(i,t,n,e.name)),e.attr(n,0<t.length?t:null))}}),r.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){var n=t[r];let e=n.attr("class");e&&(e=e.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<e.length?e:null))}}),r.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){let t=e[n];if("bookmark"===t.attr("data-mce-type")&&!r.cleanup){let e=ee.from(t.firstChild).exists(e=>!rl(null!=(e=e.value)?e:""));e?t.unwrap():t.remove()}}}),r.addNodeFilter("script,style",(e,t)=>{var r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let n=e.length;for(;n--;){var a=e[n],o=a.firstChild,i=null!=(i=null==o?void 0:o.value)?i:"";if("script"===t){let e=a.attr("type");e&&a.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===c.element_format&&o&&0<i.length&&(o.value="// <![CDATA[\n"+r(i)+"\n// ]]>")}else"xhtml"===c.element_format&&o&&0<i.length&&(o.value="\x3c!--\n"+r(i)+"\n--\x3e")}}),r.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.value;c.preserve_cdata&&0===(null==n?void 0:n.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=u.decode(n.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==n?void 0:n.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(n).substr(14))}}),r.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),r.addAttributeFilter("data-mce-type",e=>{re(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(r.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),c.remove_trailing_brs&&(m=c,g=r.schema,r.addNodeFilter("br",(a,e,o)=>{let i=oe.extend({},g.getBlockElements()),l=g.getNonEmptyElements(),s=g.getWhitespaceElements();i.body=1;var d=e=>e.name in i||to(g,e);for(let e=0,t=a.length;e<t;e++){let r=a[e],n=r.parent;if(n&&d(n)&&r===n.lastChild){let t=r.prev;for(;t;){let e=t.name;if("span"!==e||"bookmark"!==t.attr("data-mce-type")){"br"===e&&(r=null);break}t=t.prev}if(r&&(r.remove(),_v(g,l,s,n))){let e=g.getElementRule(n.name);e&&(e.removeEmpty?n.remove():e.paddEmpty&&Ev(m,o,d,n))}}else{let e=r;for(;n&&n.firstChild===e&&n.lastChild===e&&(e=n,!i[n.name]);)n=n.parent;if(e===n){let e=new Zf("#text",3);e.value=Zn,r.replace(e)}}}})),{schema:s,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(e,t={})=>{var r,n,a,t={format:"html",...t},e=((n,t,a)=>{if(i=n,l=a,z(i)&&i.hasEventListeners("PreProcess")&&!l.no_events){var o=n,i=t,l=a;let e;n=o.dom;let r=i.cloneNode(!0);if((i=document.implementation).createHTMLDocument){let t=i.createHTMLDocument("");oe.each("BODY"===r.nodeName?r.childNodes:[r],e=>{t.body.appendChild(t.importNode(e,!0))}),r="BODY"!==r.nodeName?t.body.firstChild:t.body,e=n.doc,n.doc=t}return i=o,o={...l,node:r},i.dispatch("PreProcess",o),e&&(n.doc=e),r}return t;var i,l})(o,e,t),e=((e,t,r)=>{e=nl(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||Qi(W(t))?e:oe.trim(e)})(l,e,t),e=((e,t,r)=>{var r=r.selection?{forced_root_block:!1,...r}:r,e=e.parse(t,r),n=e,t=e=>"br"===(null==e?void 0:e.name),r=n.lastChild;if(t(r)){let e=r.prev;t(e)&&(r.remove(),e.remove())}return e})(d,e,t);return"tree"===t.format?e:(r=o,n=i,a=s,t=t,n=n,a=a,e=e,n=vp(n,a).serialize(e),a=n,!t.no_events&&r?(e=r,n={...t,content:a},e.dispatch("PostProcess",n).content):a)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:C(hC,d,t),getTempAttrs:J(t),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var r,c,u,m,g},bC=(e,t)=>{e=vC(e,t);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs,getNodeFilters:e.getNodeFilters,getAttributeFilters:e.getAttributeFilters,removeNodeFilter:e.removeNodeFilter,removeAttributeFilter:e.removeAttributeFilter}},yC=(a,e,t={})=>{r=e;var r,t={format:"html",...t,set:!0,content:r};return By(a,t).map(e=>{n=a,t=e.content,r=e;var t,r,n=sC(n).editor.setContent(t,r);return Py(a,n.html,e),n.content}).getOr(e)},CC="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),wC=[],EC="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),xC=[],_C=(t,e)=>{e=B(e,e=>ae(t,e));return Se(e)},kC=(e,t)=>{let r=oe.makeMap(e.plugins," "),n=B(t,e=>ae(r,e));return Se(n)},SC=t=>be(xC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?t+", replaced by "+e.replacedWith:t),NC=X.DOM,RC=e=>ee.from(e).each(e=>e.destroy()),AC=(()=>{let r={};return{add:(e,t)=>{r[e]=t},get:e=>r[e]||{icons:{}},has:e=>ae(r,e)}})(),TC=Ci.ModelManager,OC=(e,t)=>t.dom[e],BC=(e,t)=>parseInt(bn(t,e),10),PC=C(OC,"clientWidth"),DC=C(OC,"clientHeight"),LC=C(BC,"margin-top"),MC=C(BC,"margin-left"),IC=n=>{let a=[],o=()=>{var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,getArgs:e}},r=()=>ee.from(a[0]),i=()=>{r().each(e=>{e.reposition()})},l=t=>{ye(a,e=>e===t).each(e=>{a.splice(e,1)})},t=(r,e=!0)=>{return n.removed||(t=(t=n).inline?t.getBody():t.getContentAreaContainer(),!ee.from(t).map(W).map(en).getOr(!1))?{}:(e&&n.dispatch("BeforeOpenNotification",{notification:r}),be(a,e=>!((e=o().getArgs(e)).type!==r.type||e.text!==r.text||e.progressBar||e.timeout||r.progressBar||r.timeout)).getOrThunk(()=>{n.editorManager.setActive(n);let e=o().open(r,()=>{l(e)},()=>Kg(n));return t=e,a.push(t),i(),n.dispatch("OpenNotification",{notification:{...e}}),e;var t}));var t},e=J(a);return(s=n).on("SkinLoaded",()=>{var e=Td(s);e&&t({text:e,type:"warning",timeout:0},!1),i()}),s.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(i)}),s.on("remove",()=>{re(a.slice(),e=>{o().close(e)})}),s.on("keydown",e=>{var t="f12"===(null==(t=e.key)?void 0:t.toLowerCase())||123===e.keyCode;e.altKey&&t&&(e.preventDefault(),r().map(e=>W(e.getEl())).each(e=>yg(e)))}),{open:t,close:()=>{r().each(e=>{o().close(e),l(e),i()})},getNotifications:e};var s},FC=Ci.PluginManager,UC=Ci.ThemeManager,zC=r=>{let n=[],a=()=>{var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e}},o=(t,r)=>(...e)=>r?r.apply(t,e):void 0,i=t=>{r.dispatch("CloseWindow",{dialog:t}),0===(n=B(n,e=>e!==t)).length&&r.focus()},l=e=>{r.editorManager.setActive(r),Pg(r),r.ui.show();var t,e=e();return t=e,n.push(t),r.dispatch("OpenWindow",{dialog:t}),e};return r.on("remove",()=>{re(n,e=>{a().close(e)})}),{open:(e,t)=>l(()=>a().open(e,t,i)),openUrl:e=>l(()=>a().openUrl(e,i)),alert:(e,t,r)=>{var n=a();n.alert(e,o(r||n,t))},confirm:(e,t,r)=>{var n=a();n.confirm(e,o(r||n,t))},close:()=>{ee.from(n[n.length-1]).each(e=>{a().close(e),i(e)})}}},jC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},HC=(e,t)=>{e._skinLoaded?jC(e,t):e.on("SkinLoaded",()=>{jC(e,t)})},VC=(e,t,r)=>{Ps(e,t,{message:r}),console.error(r)},$C=(e,t,r)=>r?`Failed to load ${e}: ${r} from url `+t:`Failed to load ${e} url: `+t,qC=(e,...t)=>{var r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},WC=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},KC=(e,t,r)=>{xr(e,t)&&!r?Er(e,t):r&&Cr(e,t)},YC=e=>{var t=W(e.getBody());KC(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),t=e,ee.from(t.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})},GC=e=>{var t=W(e.getBody());KC(t,"mce-content-readonly",!1),e.hasEditableRoot()&&gn(t,!0),t=e,WC(t,"StyleWithCSS",!1),WC(t,"enableInlineTableEditing",!1),WC(t,"enableObjectResizing",!1),Kg(e)&&e.focus(),e.selection.setRng(e.selection.getRng()),e.nodeChanged()},XC=e=>zc(e),ZC="data-mce-contenteditable",QC=(e,t)=>{var r=W(e.getBody());t?(YC(e),gn(r,!1),re(qn(r,'*[contenteditable="true"]'),e=>{sr(e,ZC,"true"),gn(e,!1)})):(re(qn(r,`*[${ZC}="true"]`),e=>{gr(e,ZC),gn(e,!0)}),GC(e))},JC=t=>{t.parser.addAttributeFilter("contenteditable",e=>{XC(t)&&re(e,e=>{e.attr(ZC,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(ZC,e=>{XC(t)&&re(e,e=>{e.attr("contenteditable",e.attr(ZC))})}),t.serializer.addTempAttr(ZC)},e1=["copy"],t1=e=>"content/"+e+"/content.css",r1=(r,e)=>{let n=r.editorManager.baseURL+"/skins/content",a=`content${r.editorManager.suffix}.css`;return te(e,e=>{return t=e,tinymce.Resource.has(t1(t))?e:/^[a-z0-9\-]+$/i.test(e)&&!r.inline?n+`/${e}/`+a:r.documentBaseURI.toAbsolute(e);var t})},n1=(n,a)=>{let o={};return{findAll:(e,r=S)=>{e=B((e=e)?Te(e.getElementsByTagName("img")):[],e=>{var t=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===F.transparentSrc)&&(lt(t,"blob:")?!n.isUploaded(t)&&r(e):!!lt(t,"data:")&&r(e))}),e=te(e,t=>{let r=t.src;var e;return ae(o,r)?o[r].then(e=>Z(e)?e:{image:t,blobInfo:e.blobInfo}):(e=((r,e)=>{let n=()=>Promise.reject("Invalid data URI");var t,a,o;return lt(e,"blob:")?(a=r.getByUri(e),z(a)?Promise.resolve(a):(a=e,(lt(a,"blob:")?(t=a,fetch(t).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):lt(a,"data:")?(o=a,new Promise((e,t)=>{e0(o).bind(({type:e,data:t,base64Encoded:r})=>t0(e,t,r)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format")).then(t=>r0(t).then(e=>a0(e,!1,e=>ee.some(o0(r,t,e))).getOrThunk(n))))):lt(e,"data:")?i0(r,e).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(a,r).then(e=>(delete o[r],{image:t,blobInfo:e})).catch(e=>(delete o[r],e)),o[r]=e)});return Promise.all(e)}}},a1=()=>{let r={},n=(e,t)=>({status:e,resultUri:t}),t=e=>e in r;return{hasBlobUri:t,getResultUri:e=>{e=r[e];return e?e.resultUri:null},isPending:e=>!!t(e)&&1===r[e].status,isUploaded:e=>!!t(e)&&2===r[e].status,markPending:e=>{r[e]=n(1,null)},markUploaded:(e,t)=>{r[e]=n(2,t)},removeFailed:e=>{delete r[e]},destroy:()=>{r={}}}},o1=0,i1=(s,i)=>{let n={},a=(t,o)=>new Promise((r,n)=>{let a=new XMLHttpRequest;a.open("POST",i.url),a.withCredentials=i.credentials,a.upload.onprogress=e=>{o(e.loaded/e.total*100)},a.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{var e,t;a.status<200||300<=a.status?n("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&Z(t.location)?r((e=i.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):n("Invalid JSON: "+a.responseText)};var e=new FormData;e.append("file",t.blob(),t.filename()),a.send(e)}),d=j(i.handler)?i.handler:a,c=(e,t)=>({url:t,blobInfo:e,status:!0}),u=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),m=(e,t)=>{oe.each(n[e],e=>{e(t)}),delete n[e]};return{upload:(e,t)=>{return i.url||d!==a?(e=e,r=t,e=oe.grep(e,e=>!s.isUploaded(e.blobUri())),Promise.all(oe.map(e,e=>{if(s.isPending(e.blobUri())){let t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})}return o=e,i=d,l=r,s.markPending(o.blobUri()),new Promise(r=>{let n,a;try{let t=()=>{n&&(n.close(),a=H)},e=e=>{t(),s.markUploaded(o.blobUri(),e),m(o.blobUri(),c(o,e)),r(c(o,e))};a=t=>{t<0||100<t||ee.from(n).orThunk(()=>ee.from(l).map(N)).each(e=>{(n=e).progressBar.value(t)})},i(o,a).then(e,e=>{e=Z(e)?{message:e}:e,t(),s.removeFailed(o.blobUri()),m(o.blobUri(),u(o,e)),r(u(o,e))})}catch(e){r(u(o,e))}});var o,i,l}))):new Promise(e=>{e([])});var r}}},l1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),s1=(e,t)=>i1(t,{url:ud(e),basePath:md(e),credentials:gd(e),handler:fd(e)}),d1=c=>{let u=(()=>{let r=[],o=e=>{var t,r,n;if(e.blob&&e.base64)return n=e.id||"blobid"+o1+++(n=()=>Math.round(4294967295*Di()).toString(36),"s")+(new Date).getTime().toString(36)+n()+n()+n(),t=e.name||n,r=e.blob,{id:J(n),name:J(t),filename:J(e.filename||t+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:J(r),base64:J(e.base64),blobUri:J(e.blobUri||URL.createObjectURL(r)),uri:J(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")},e=e=>be(r,e).getOrUndefined(),t=t=>e(e=>e.id()===t);return{create:(e,t,r,n,a)=>{if(Z(e))return o({id:e,name:n,filename:a,blob:t,base64:r});if(le(e))return o(e);throw new Error("Unknown input type")},add:e=>{t(e.id())||r.push(e)},get:t,getByUri:t=>e(e=>e.blobUri()===t),getByData:(t,r)=>e(e=>e.base64()===t&&e.blob().type===r),findFirst:e,removeByUri:t=>{r=B(r,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{re(r,e=>{URL.revokeObjectURL(e.blobUri())}),r=[]}}})(),t,e,a=a1(),r=[],n=t=>e=>c.selection?t(e):[],o=(e,t,r)=>{let n=0;for(;-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1),-1!==n;);return e},i=(e,t,r)=>{var n=`src="${r}"`+(r===F.transparentSrc?' data-mce-placeholder="1"':"");return e=o(e,`src="${t}"`,n),o(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},m=(t,r)=>{re(c.undoManager.data,e=>{"fragmented"===e.type?e.fragments=te(e.fragments,e=>i(e,t,r)):e.content=i(e.content,t,r)})},l=()=>(t=t||s1(c,a),g().then(n(d=>{var e=te(d,e=>e.blobInfo);return t.upload(e,l1(c)).then(n(e=>{let l=[],s=!1;e=te(e,(e,t)=>{var r,n,a,{blobInfo:t,image:o}=d[t];let i=!1;return e.status&&sd(c)?(e.url&&!it(o.src,e.url)&&(s=!0),u.removeByUri(o.src),lC(c)||(r=o,n=e.url,a=c.convertURL(n,"src"),m(r.src,n),dr(W(r),{src:ld(c)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":a}))):e.error&&(e.error.remove&&(m(o.src,F.transparentSrc),l.push(o),i=!0),r=c,n=e.error.message,HC(r,yi.translate(["Failed to upload image: {0}",n]))),{element:o,status:e.status,uploadUri:e.url,blobInfo:t,removed:i}});return 0<l.length&&!lC(c)?c.undoManager.transact(()=>{re(Tn(l),e=>{var n,t=Mr(e);Y(e),t.each((n=c,e=>{var t,r;r=e,(t=n).dom.isEmpty(r.dom)&&z(t.schema.getTextBlockElements()[q(r)])&&K(e,kr('<br data-mce-bogus="1" />'))})),u.removeByUri(e.dom.src)})}):s&&c.undoManager.dispatchChange(),e}))}))),s=()=>id(c)?l():Promise.resolve([]),d=t=>Ee(r,e=>e(t)),g=()=>(e=e||n1(a,u)).findAll(c.getBody(),d).then(n(e=>{e=B(e,e=>Z(e)?(HC(c,e),!1):"blob"!==e.uriType);return lC(c)||re(e,e=>{m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e})),f=e=>e.replace(/src="(blob:[^"]+)"/g,(e,r)=>{var t=a.getResultUri(r);if(t)return'src="'+t+'"';let n=u.getByUri(r);return(n=n||he(c.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0))?'src="data:'+n.blob().type+";base64,"+n.base64()+'"':e});return c.on("SetContent",()=>{(id(c)?s:g)()}),c.on("RawSaveContent",e=>{e.content=f(e.content)}),c.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=f(e.content))}),c.on("PostRender",()=>{c.parser.addNodeFilter("img",e=>{re(e,e=>{var t=e.attr("src");t&&!u.getByUri(t)&&(t=a.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:u,addFilter:e=>{r.push(e)},uploadImages:l,uploadImagesAuto:s,scanForImages:g,destroy:()=>{u.destroy(),a.destroy(),e=t=null}}},c1={remove_similar:!0,inherit:!1},u1={selector:"td,th",...c1},m1={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...u1},tablecellverticalalign:{styles:{"vertical-align":"%value"},...u1},tablecellbordercolor:{styles:{borderColor:"%value"},...u1},tablecellclass:{classes:["%value"],...u1},tableclass:{selector:"table",classes:["%value"],...c1},tablecellborderstyle:{styles:{borderStyle:"%value"},...u1},tablecellborderwidth:{styles:{borderWidth:"%value"},...u1}},g1=J(m1),f1=oe.each,p1=X.DOM,h1=e=>z(e)&&le(e),v1=(n,e)=>{let s=e&&e.schema||jo({}),d=e=>{var t,e=Z(e)?{name:e,classes:[],attrs:{}}:e,r=p1.create(e.name);return t=r,0<(e=e).classes.length&&p1.addClass(t,e.classes.join(" ")),p1.setAttribs(t,e.attrs),r},c=(t,e,r)=>{let n;var a=e[0],o=h1(a)?a.name:void 0,i=((e,t)=>{e=s.getElementRule(e.nodeName.toLowerCase()),e=null==e?void 0:e.parentsRequired;return!(!e||!e.length)&&(t&&V(e,t)?t:e[0])})(t,o);if(i)o===i?(n=a,e=e.slice(1)):n=i;else if(a)n=a,e=e.slice(1);else if(!r)return t;let l=n?d(n):p1.create("div");l.appendChild(t),r&&oe.each(r,e=>{e=d(e);l.insertBefore(e,t)});o=h1(n)?n.siblings:void 0;return c(l,e,o)},a=p1.create("div");if(0<n.length){let e=n[0],t=d(e),r=h1(e)?e.siblings:void 0;a.appendChild(c(t,n.slice(1),r))}return a},b1=e=>{let t="div",o={name:t,classes:[],attrs:{},selector:e=oe.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,n,a)=>{switch(t){case"#":o.attrs.id=r;break;case".":o.classes.push(r);break;case":":-1!==oe.inArray("checked disabled enabled read-only required".split(" "),r)&&(o.attrs[r]=r)}if("["===n){let e=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(o.attrs[e[1]]=e[2])}return""})),o.name=t||"div",o},y1=(r,t)=>{let n="",a=Id(r);if(""===a)return"";let o=e=>Z(e)?e.replace(/%(\w+)/g,""):"",i=(e,t)=>p1.getStyle(null!=t?t:r.getBody(),e,!0);if(Z(t)){let e=r.formatter.get(t);if(!e)return"";t=e[0]}if("preview"in t){let e=t.preview;if(!1===e)return"";a=e||a}let e,l=t.block||t.inline||"span";s=t.selector;var s=Z(s)?(s=(s=s.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),oe.map(s.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{var e=oe.map(e.split(/(?:~\+|~|\+)/),b1),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[];e=0<s.length?(s[0].name||(s[0].name=l),l=t.selector,v1(s,r)):v1([l],r);let d=p1.select(l,e)[0]||e.firstChild,c=(f1(t.styles,(e,t)=>{e=o(e);e&&p1.setStyle(d,t,e)}),f1(t.attributes,(e,t)=>{e=o(e);e&&p1.setAttrib(d,t,e)}),f1(t.classes,e=>{e=o(e);p1.hasClass(d,e)||p1.addClass(d,e)}),r.dispatch("PreviewFormats"),p1.setStyles(e,{position:"absolute",left:-65535}),r.getBody().appendChild(e),i("fontSize")),u=/px$/.test(c)?parseInt(c,10):0;return f1(a.split(" "),e=>{let t=i(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=i(e),"#ffffff"===Go(t).toLowerCase())||"color"===e&&"#000000"===Go(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===u)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*u+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),r.dispatch("AfterPreviewFormats"),p1.remove(e),n},C1=i=>{let e=(i=>{let r={},n=(e,t)=>{e&&(Z(e)?(Q(t)||(t=[t]),re(t,e=>{b(e.deep)&&(e.deep=!$m(e)),b(e.split)&&(e.split=!$m(e)||qm(e)),b(e.remove)&&$m(e)&&!qm(e)&&(e.remove="none"),$m(e)&&qm(e)&&(e.mixed=!0,e.block_expand=!0),Z(e.classes)&&(e.classes=e.classes.split(/\s+/))}),r[e]=t):ne(e,(e,t)=>{n(t,e)}))};return n((()=>{let n=i.dom,e=i.schema.type,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(r={inline:"span",styles:{textDecoration:"line-through"},exact:!0},a={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==e?[o,r,a]:[r,o,a]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>G(e)&&e.hasAttribute("href"),onformat:(r,e,t)=>{oe.each(t,(e,t)=>{n.setAttrib(r,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>null!=(e=null==e?void 0:e.customValue)?e:null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};var r,a,o;return oe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),e=>{t[e]={block:e,remove:"all"}}),t})()),n(g1()),n(Md(i)),{get:e=>z(e)?r[e]:r,has:e=>ae(r,e),register:n,unregister:e=>(e&&r[e]&&delete r[e],r)}})(i),l=Da({});var t,r,o,n=i;n.addShortcut("meta+b","","Bold"),n.addShortcut("meta+i","","Italic"),n.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)n.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);return n.addShortcut("access+7","",["FormatBlock",!1,"p"]),n.addShortcut("access+8","",["FormatBlock",!1,"div"]),n.addShortcut("access+9","",["FormatBlock",!1,"address"]),(o=i).on("mouseup keydown",e=>{var t,r,n,a;t=o,e=e.keyCode,r=o.selection.getRng().endContainer,r=D(r)&&st(r.data,Zn),n=t.selection,a=t.getBody(),Jv(t,null,r),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==Gv||Jv(t,em(a,n.getStart()),!0),37!==e&&39!==e||Jv(t,em(a,n.getStart()),!0)}),lC(i)||(t=l,r=i,t.set({}),r.on("NodeChange",e=>{Xb(r,e.element,t.get())}),r.on("FormatApply FormatRemove",e=>{e=ee.from(e.node).map(e=>Nm(e)?e:e.startContainer).bind(e=>G(e)?ee.some(e):ee.from(e.parentElement)).getOrThunk(()=>Kb(r));Xb(r,e,t.get())})),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,r)=>{var n;n=i,e=e,t=t,r=r,dC(n).formatter.apply(e,t,r)},remove:(e,t,r,n)=>{var a;a=i,e=e,t=t,r=r,n=n,dC(a).formatter.remove(e,t,r,n)},toggle:(e,t,r)=>{var n;n=i,e=e,t=t,r=r,dC(n).formatter.toggle(e,t,r)},match:(e,t,r,n)=>{return a=i,e=e,t=t,r=r,n=n,dC(a).formatter.match(e,t,r,n);var a},closest:e=>{return t=i,e=e,dC(t).formatter.closest(e);var t},matchAll:(e,t)=>{return r=i,e=e,t=t,dC(r).formatter.matchAll(e,t);var r},matchNode:(e,t,r,n)=>{return a=i,e=e,t=t,r=r,n=n,dC(a).formatter.matchNode(e,t,r,n);var a},canApply:e=>{return t=i,e=e,dC(t).formatter.canApply(e);var t},formatChanged:(e,t,r,n)=>{return a=i,o=l,e=e,t=t,r=r,n=n,dC(a).formatter.formatChanged(o,e,t,r,n);var a,o},getCssText:C(y1,i)}},w1=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},E1=l=>{let s=Ma(),d=Da(0),c=Da(0),u={data:[],typing:!1,beforeChange:()=>{var e,t,r;e=l,t=d,r=s,dC(e).undoManager.beforeChange(t,r)},add:(e,t)=>{return r=l,n=u,a=c,o=d,i=s,e=e,t=t,dC(r).undoManager.add(n,a,o,i,e,t);var r,n,a,o,i},dispatchChange:()=>{l.setDirty(!0);var e=Qy(l);e.bookmark=ws(l.selection),l.dispatch("change",{level:e,lastLevel:Ne(u.data,c.get()).getOrUndefined()})},undo:()=>{return e=l,t=u,r=d,n=c,dC(e).undoManager.undo(t,r,n);var e,t,r,n},redo:()=>{return e=l,t=c,r=u.data,dC(e).undoManager.redo(t,r);var e,t,r},clear:()=>{var e,t,r;e=l,t=u,r=c,dC(e).undoManager.clear(t,r)},reset:()=>{var e,t;e=l,t=u,dC(e).undoManager.reset(t)},hasUndo:()=>{return e=l,t=u,r=c,dC(e).undoManager.hasUndo(t,r);var e,t,r},hasRedo:()=>{return e=l,t=u,r=c,dC(e).undoManager.hasRedo(t,r);var e,t,r},transact:e=>{return t=l,r=u,n=d,e=e,dC(t).undoManager.transact(r,n,e);var t,r,n},ignore:e=>{var t,r;t=l,r=d,e=e,dC(t).undoManager.ignore(r,e)},extra:(e,t)=>{var r,n,a;r=l,n=u,a=c,e=e,t=t,dC(r).undoManager.extra(n,a,e,t)}};if(!lC(l)){var o=l,i=u,m=d;let n=Da(!1),a=e=>{aC(i,!1,m),i.add({},e)};o.on("init",()=>{i.add()}),o.on("BeforeExecCommand",e=>{e=e.command;w1(e)||(oC(i,m),i.beforeChange())}),o.on("ExecCommand",e=>{var t=e.command;w1(t)||a(e)}),o.on("ObjectResizeStart cut",()=>{i.beforeChange()}),o.on("SaveContent ObjectResized blur",a),o.on("dragend",a),o.on("keyup",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(t=F.os.isMacOS()&&"Meta"===e.key,(33<=r&&r<=36||37<=r&&r<=40||45===r||e.ctrlKey||t)&&(a(),o.nodeChanged()),46!==r&&8!==r||o.nodeChanged(),n.get()&&i.typing&&!rC(Qy(o),i.data[0])&&(o.isDirty()||o.setDirty(!0),o.dispatch("TypingUndo"),n.set(!1),o.nodeChanged()))}),o.on("keydown",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(33<=r&&r<=36||37<=r&&r<=40||45===r?i.typing&&a(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(r<16||20<r)||224===r||91===r||i.typing||t?(F.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&i.beforeChange():(i.beforeChange(),aC(i,!0,m),i.add({},e),n.set(!0))))}),o.on("mousedown",e=>{i.typing&&a(e)}),o.on("input",e=>{e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)&&a(e)}),o.on("AddUndo Undo Redo ClearUndos",e=>{e.isDefaultPrevented()||o.nodeChanged()})}return(e=l).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),u;var e},x1=[9,27,ie.HOME,ie.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ie.DOWN,ie.UP,ie.LEFT,ie.RIGHT].concat(F.browser.isFirefox()?[224]:[]),_1="data-mce-placeholder",k1=e=>"keydown"===e.type||"keyup"===e.type,S1=e=>{e=e.keyCode;return e===ie.BACKSPACE||e===ie.DELETE},N1=(e,t)=>({from:e,to:t}),R1=(e,t)=>{var e=W(e),r=W(t.container());return Ih(e,r).map(e=>({block:e,position:t}))},A1=(t,e)=>on(e,e=>Zi(e)||ya(e.dom),e=>P(e,t)).filter(rr).getOr(t),T1=(e,t)=>{e=((e,t)=>{let r=Vr(e);return ye(r,e=>t.isBlock(q(e))).fold(J(r),e=>r.slice(0,e))})(e,t);return re(e,Y),e},O1=(t,e,r)=>{r=Up(r,e);return be(r.reverse(),e=>Ba(t,e)).each(Y)},B1=(e,t,r,n,a)=>{var o,i;return Ba(n,r)?(el(r),Xu(r.dom)):(o=n,i=a,0===B(jr(i),e=>!Ba(o,e)).length&&Ba(n,t)&&xn(a,Sr("br")),i=Gu(r.dom,M.before(a.dom)),re(T1(t,n),e=>{xn(a,e)}),O1(n,e,t),i)},P1=(e,r,n,a)=>{if(Ba(a,n)){if(Ba(a,r)){let e=e=>{let n=(e,r)=>qr(e).fold(()=>r,e=>{return t=e,a.isInline(q(t))?n(e,r.concat(Fi(e))):r;var t});return n(e,[])},t=pe(e(n),(e,t)=>(Sn(e,t),t),Ji());Rn(r),K(r,t)}return Y(n),Xu(r.dom)}let t=Zu(n.dom);return re(T1(r,a),e=>{K(n,e)}),O1(a,e,r),t},D1=(e,t)=>{Ku(e,t.dom).bind(e=>ee.from(e.getNode())).map(W).filter(Wi).each(Y)},L1=(e,t,r,n)=>{return D1(!0,t),D1(!1,r),a=t,o=r,(Br(o,a)?(o=o,a=a,a=Up(a,o),ee.from(a[a.length-1])):ee.none()).fold(C(P1,e,t,r,n),C(B1,e,t,r,n));var a,o},M1=(e,t,r,n,a)=>t?L1(e,n,r,a):L1(e,r,n,a),I1=(t,r)=>{let n=W(t.getBody()),e=(a=t.schema,o=n.dom,i=r,((l=t.selection.getRng()).collapsed?(s=a,d=o,c=i,a=l,a=R1(d,M.fromRangeStart(a)),o=a.bind(e=>$u(c,d,e.position).bind(e=>R1(d,e).map(e=>{return t=s,r=d,n=c,a=e,L(a.position.getNode())&&!Ba(t,a.block)?Ku(!1,a.block.dom).bind(e=>e.isEqual(a.position)?$u(n,r,e).bind(e=>R1(r,e)):ee.some(a)).getOr(a):a;var t,r,n,a}))),Kt(a,o,N1).filter(e=>{return r=e,!P(r.from.block,r.to.block)&&((e,t)=>{e=W(e);return P(A1(e,t.from.block),A1(e,t.to.block))})(d,e)&&(r=e,!1===E(r.from.block.dom))&&!1===E(r.to.block.dom)&&(r=e=>Ki(e)||Xa(e.dom)||Gi(e))((t=e).from.block)&&r(t.to.block)&&(r=e,!(Br(r.to.block,r.from.block)||Br(r.from.block,r.to.block)));var t,r})):ee.none()).map(e=>()=>{M1(n,r,e.from.block,e.to.block,t.schema).each(e=>{t.selection.setRng(e.toRange())})}));var a,o,i,l,s,d,c;return e},F1=(e,t)=>{t=W(t),e=C(P,e);return an(t,Zi,e).isSome()},U1=e=>{var t,r,n,a,o,i=W(e.getBody());if(r=i,n=e.selection.getRng(),a=Gu(r.dom,M.fromRangeStart(n)).isNone(),o=Yu(r.dom,M.fromRangeEnd(n)).isNone(),r=r,n=n,!F1(r,n.startContainer)&&!F1(r,n.endContainer)&&a&&o)return t=e,ee.some(()=>{t.setContent(""),t.selection.setCursorLocation()});{var l=i,s=e.selection,d=e.schema;let r=s.getRng();return Kt(Ih(l,W(r.startContainer)),Ih(l,W(r.endContainer)),(e,t)=>P(e,t)?ee.none():ee.some(()=>{r.deleteContents(),M1(l,!0,e,t,d).each(e=>{s.setRng(e.toRange())})})).getOr(ee.none())}},z1=(e,t)=>e.selection.isCollapsed()?ee.none():U1(e),j1=(e,t,r,n,a)=>ee.from(t._selectionOverrides.showCaret(e,r,n,a)),H1=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?ee.none():ee.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t)),V1=(e,t,r)=>{return t.collapsed?(e=e,n=t,r=r,n=_u(1,e.getBody(),n),n=M.fromRangeStart(n),a=n.getNode(),(tu(a)?j1(1,e,a,!n.isAtEnd(),!1):(a=n.getNode(!0),tu(a)?j1(1,e,a,!1,!1):(a=fv(e.dom.getRoot(),n.getNode()),tu(a)?j1(1,e,a,!1,r):ee.none()))).getOr(t)):t;var n,a},$1=e=>Mp(e)||Bp(e),q1=e=>Ip(e)||Pp(e),W1=(e,r,t,n,a,o)=>{j1(n,e,o.getNode(!a),a,!0).each(t=>{if(r.collapsed){let e=r.cloneRange();a?e.setEnd(t.startContainer,t.startOffset):e.setStart(t.endContainer,t.endOffset),e.deleteContents()}else r.deleteContents();e.selection.setRng(t)}),n=e.dom,o=t,D(o)&&0===o.data.length&&n.remove(o)},K1=(d,c)=>{{var u=d,m=c;let e=u.selection.getRng();if(!D(e.commonAncestorContainer))return ee.none();let t=m?1:-1,r=zu(u.getBody()),n=C(Ru,m?r.next:r.prev),a=m?$1:q1,o=Su(t,u.getBody(),e),i=n(o),l=i&&Th(m,i);if(!l||!Au(o,l))return ee.none();if(a(l))return ee.some(()=>W1(u,e,o.getNode(),t,m,l));let s=n(l);return s&&a(s)&&Au(l,s)?ee.some(()=>W1(u,e,o.getNode(),t,m,s)):ee.none()}},Y1=(e,t)=>{e=e.getBody();return t?Xu(e).filter(Mp):Zu(e).filter(Ip)},G1=e=>{let t=e.selection.getRng();return!t.collapsed&&(Y1(e,!0).exists(e=>e.isEqual(M.fromRangeStart(t)))||Y1(e,!1).exists(e=>e.isEqual(M.fromRangeEnd(t))))},X1=ks([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Z1=(o,i,l,s)=>$u(i,o,l).bind(e=>{{if(a=e.getNode(),z(a)&&(Zi(W(a))||Gi(W(a)))||((t,e,r,n,a)=>{let o=e=>a.isInline(e.nodeName.toLowerCase())&&!vu(r,n,t);return ku(!e,r).fold(()=>ku(e,n).fold(h,o),o)})(o,i,l,e,s))return ee.none();if(i&&E(e.getNode())||!i&&E(e.getNode(!0))){var r=s,n=(a=o,l);let t=e.getNode(!i);return Ih(W(a),W(n.getNode())).map(e=>Ba(r,e)?X1.remove(e.dom):X1.moveToElement(t)).orThunk(()=>ee.some(X1.moveToElement(t)))}return i&&Ip(l)||!i&&Mp(l)?ee.some(X1.moveToPosition(e)):ee.none()}var a}),Q1=(e,t)=>ee.from(fv(e.getBody(),t)),J1=(d,c)=>{var e=d.selection.getNode();return Q1(d,e).filter(E).fold(()=>{return e=d.getBody(),t=c,r=d.selection.getRng(),n=d.schema,r=_u(t?1:-1,e,r),r=M.fromRangeStart(r),s=W(e),(!t&&Ip(r)?ee.some(X1.remove(r.getNode(!0))):t&&Mp(r)?ee.some(X1.remove(r.getNode())):!t&&Mp(r)&&Zp(s,r,n)?Qp(s,r,n).map(e=>X1.remove(e.getNode())):t&&Ip(r)&&Xp(s,r,n)?Jp(s,r,n).map(e=>X1.remove(e.getNode())):(a=e,l=n,s=o=t,e=(i=r).getNode(!s),s=s?"after":"before",G(e)&&e.getAttribute("data-mce-caret")===s?(e=o,s=i.getNode(!o),(U(s)?ee.none():e&&E(s.nextSibling)?ee.some(X1.moveToElement(s.nextSibling)):!e&&E(s.previousSibling)?ee.some(X1.moveToElement(s.previousSibling)):ee.none()).orThunk(()=>Z1(a,o,i,l))):Z1(a,o,i,l).bind(e=>{return t=a,r=i,e.fold(e=>ee.some(X1.remove(e)),e=>ee.some(X1.moveToElement(e)),e=>vu(r,e,t)?ee.none():ee.some(X1.moveToPosition(e)));var t,r}))).map(e=>()=>{return e.fold(e=>(a._selectionOverrides.hideFakeCaret(),kh(a,o,W(e)),!0),(n=o=c,e=>{e=n?M.before(e):M.after(e);return r.selection.setRng(e.toRange()),!0}),(t=r=a=d,e=>(t.selection.setRng(e.toRange()),!0)));var t,r,n,a,o});var e,t,r,n,a,o,i,l,s},()=>ee.some(H))},ew=e=>{var t=e.dom,r=e.selection,n=fv(e.getBody(),r.getNode());if(ya(n)&&t.isBlock(n)&&t.isEmpty(n)){let e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(M.before(e).toRange())}return!0},tw=(e,t)=>{return e.selection.isCollapsed()?J1(e,t):(n=t,t=(r=e).selection.getNode(),E(t)&&!wa(t)?Q1(r,t.parentNode).filter(E).fold(()=>ee.some(()=>{var e=W(r.getBody());re(qn(e,".mce-offscreen-selection"),Y),kh(r,n,W(r.selection.getNode())),Fh(r)}),()=>ee.some(H)):G1(r)?ee.some(()=>{jh(r,r.selection.getRng(),W(r.getBody()))}):ee.none());var r,n},rw=e=>e.hasOwnProperty("text"),nw=e=>e.hasOwnProperty("marker"),aw=(e,a)=>{var t=(e,t)=>{var r,n;return D(e)?{text:e,offset:t}:(r=a(),t<(n=e.childNodes).length?(e.insertBefore(r,n[t]),{marker:r,before:!0}):(e.appendChild(r),{marker:r,before:!1}))},r=t(e.endContainer,e.endOffset);return{start:t(e.startContainer,e.startOffset),end:r}},ow=e=>{var t,{start:e,end:r}=e,n=new window.Range;return rw(e)?n.setStart(e.text,e.offset):nw(e)&&(e.before?n.setStartBefore(e.marker):n.setStartAfter(e.marker),null!=(t=e.marker.parentNode)&&t.removeChild(e.marker)),rw(r)?n.setEnd(r.text,r.offset):nw(r)&&(r.before?n.setEndBefore(r.marker):n.setEndAfter(r.marker),null!=(t=r.marker.parentNode)&&t.removeChild(r.marker)),n},iw=(r,n)=>{var e;let t=r.dom,a=t.getParent(r.selection.getStart(),t.isBlock),o=t.getParent(r.selection.getEnd(),t.isBlock),i=r.getBody();if("div"===(null==(e=null==a?void 0:a.nodeName)?void 0:e.toLowerCase())&&a&&o&&a===i.firstChild&&o===i.lastChild&&!t.isEmpty(i)){let t=a.cloneNode(!1),e=()=>{if((n?Lh:Dh)(r),i.firstChild!==a){let e=aw(r.selection.getRng(),()=>document.createElement("span"));Array.from(i.childNodes).forEach(e=>t.appendChild(e)),i.appendChild(t),r.selection.setRng(ow(e))}};return ee.some(e)}return ee.none()},lw=(e,t)=>{return e.selection.isCollapsed()?(r=e,n=t,e=M.fromRangeStart(r.selection.getRng()),$u(n,r.getBody(),e).filter(e=>(n?Tp:Op)(e)).bind(e=>bu(n?0:-1,e)).map(e=>()=>r.selection.select(e))):ee.none();var r,n},sw=D,dw=e=>sw(e)&&e.data[0]===tl,cw=e=>sw(e)&&e.data[e.data.length-1]===tl,uw=e=>(null!=(e=e.ownerDocument)?e:document).createTextNode(tl),mw=(e,t)=>{return e?(e=t,sw(e.previousSibling)?(cw(e.previousSibling)||e.previousSibling.appendData(tl),e.previousSibling):sw(e)?(dw(e)||e.insertData(0,tl),e):(a=uw(e),null!=(n=e.parentNode)&&n.insertBefore(a,e),a)):(n=t,sw(n.nextSibling)?(dw(n.nextSibling)||n.nextSibling.insertData(0,tl),n.nextSibling):sw(n)?(cw(n)||n.appendData(tl),n):(e=uw(n),n.nextSibling?null!=(r=n.parentNode)&&r.insertBefore(e,n.nextSibling):null!=(r=n.parentNode)&&r.appendChild(e),e));var r,n,a},gw=C(mw,!0),fw=C(mw,!1),pw=(e,t)=>D(e.container())?mw(t,e.container()):mw(t,e.getNode()),hw=(e,t)=>{t=t.get();return t&&e.container()===t&&ll(t)},vw=(t,e)=>e.fold(e=>{Yc(t.get());e=gw(e);return t.set(e),ee.some(M(e,e.length-1))},e=>Xu(e).map(e=>{if(hw(e,t)){let e=t.get();return M(e,1)}Yc(t.get());e=pw(e,!0);return t.set(e),M(e,1)}),e=>Zu(e).map(e=>{if(hw(e,t)){let e=t.get();return M(e,e.length-1)}Yc(t.get());e=pw(e,!1);return t.set(e),M(e,e.length-1)}),e=>{Yc(t.get());e=fw(e);return t.set(e),ee.some(M(e,1))}),bw=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e].apply(null,r);if(n.isSome())return n}return ee.none()},yw=ks([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Cw=(e,t)=>hu(t,e)||e,ww=(e,t,r)=>{let n=Oh(r),a=Cw(t,n.container());return Ah(e,a,n).fold(()=>Yu(a,n).bind(C(Ah,e,a)).map(e=>yw.before(e)),ee.none)},Ew=(e,t)=>null===em(e,t),xw=(e,t,r)=>Ah(e,t,r).filter(C(Ew,t)),_w=(e,t,r)=>{let n=Bh(r);return xw(e,t,n).bind(e=>Gu(e,n).isNone()?ee.some(yw.start(e)):ee.none())},kw=(e,t,r)=>{let n=Oh(r);return xw(e,t,n).bind(e=>Yu(e,n).isNone()?ee.some(yw.end(e)):ee.none())},Sw=(e,t,r)=>{let n=Bh(r),a=Cw(t,n.container());return Ah(e,a,n).fold(()=>Gu(a,n).bind(C(Ah,e,a)).map(e=>yw.after(e)),ee.none)},Nw=e=>!Rh(Aw(e)),Rw=(e,t,r)=>bw([ww,_w,kw,Sw],[e,t,r]).filter(Nw),Aw=e=>e.fold(f,f,f,f),Tw=e=>e.fold(J("before"),J("start"),J("end"),J("after")),Ow=e=>e.fold(yw.before,yw.before,yw.after,yw.after),Bw=e=>e.fold(yw.start,yw.start,yw.end,yw.end),Pw=(r,e,n,t,a,o)=>Kt(Ah(e,n,t),Ah(e,n,a),(e,t)=>e!==t&&((e,t,r)=>{t=hu(t,e),r=hu(r,e);return z(t)&&t===r})(n,e,t)?yw.after(r?e:t):o).getOr(o),Dw=(e,r)=>e.fold(S,e=>{return t=r,!(Tw(e=e)===Tw(t)&&Aw(e)===Aw(t));var t}),Lw=(e,t)=>e?t.fold(s(ee.some,yw.start),ee.none,s(ee.some,yw.after),ee.none):t.fold(ee.none,s(ee.some,yw.before),ee.none,s(ee.some,yw.end)),Mw=(e,t,r)=>{var n=e?1:-1;return t.setRng(M(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Iw=((dk=ry=ry||{})[dk.Br=0]="Br",dk[dk.Block=1]="Block",dk[dk.Wrap=2]="Wrap",dk[dk.Eol=3]="Eol",(e,t)=>-1===e?xe(t):t),Fw=(e,r,t,n)=>{var a=zu(t);let o=n;for(var i,l,s,d=[];o;){l=a,s=o;let t=1===r?l.next(s):l.prev(s);if(!t)break;if(L(t.getNode(!1)))return 1===r?{positions:Iw(r,d).concat([t]),breakType:ry.Br,breakAt:ee.some(t)}:{positions:Iw(r,d),breakType:ry.Br,breakAt:ee.some(t)};if(t.isVisible()){if(e(o,t)){l=r,s=o,i=t;let e=L(i.getNode(1===l))?ry.Br:!1===vu(s,i)?ry.Block:ry.Wrap;return{positions:Iw(r,d),breakType:e,breakAt:ee.some(t)}}d.push(t)}o=t}return{positions:Iw(r,d),breakType:ry.Eol,breakAt:ee.none()}},Uw=(r,n,a,e)=>n(a,e).breakAt.map(e=>{var t=n(a,e).positions;return-1===r?t.concat(e):[e].concat(t)}).getOr([]),zw=(e,a)=>he(e,(e,n)=>e.fold(()=>ee.some(n),r=>Kt(Re(r.getClientRects()),Re(n.getClientRects()),(e,t)=>{e=Math.abs(a-e.left);return Math.abs(a-t.left)<=e?n:r}).or(e)),ee.none()),jw=(t,e)=>Re(e.getClientRects()).bind(e=>zw(t,e.left)),Hw=C(Fw,M.isAbove,-1),Vw=C(Fw,M.isBelow,1),$w=C(Uw,-1,Hw),qw=C(Uw,1,Vw),Ww=(e,t)=>Hw(e,t).breakAt.isNone(),Kw=(e,t)=>Vw(e,t).breakAt.isNone(),Yw=(e,t)=>jw($w(e,t),t),Gw=(e,t)=>jw(qw(e,t),t),Xw=E,Zw=(e,t)=>Math.abs(e.left-t),Qw=(e,t)=>Math.abs(e.right-t),Jw=(e,a)=>Xe(e,(e,t)=>{var r=Math.min(Zw(e,a),Qw(e,a)),n=Math.min(Zw(t,a),Qw(t,a));return n===r&&He(t,"node")&&Xw(t.node)||n<r?t:e}),eE=t=>{var e,r=e=>te(e,e=>{e=vl(e);return e.node=t,e});return G(t)?r(t.getClientRects()):D(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),r(e.getClientRects())):[]},tE=e=>we(e,eE),rE=((dk=ny=ny||{})[dk.Up=-1]="Up",dk[dk.Down=1]="Down",(t,n,a,e,o,r)=>{let i=0,l=[],s=e=>{let r=tE([e]);t===ny.Up&&(r=r.reverse());for(let t=0;t<r.length;t++){let e=r[t];if(!a(e,d)){if(0<l.length&&n(e,Qe(l))&&i++,e.line=i,o(e))return!0;l.push(e)}}return!1},d=Qe(r.getClientRects());var c;return d&&(c=r.getNode())&&(s(c),((e,t,r)=>{let n=c;for(;n=pu(n,e,Il,t);)if(r(n))return})(t,e,s)),l}),nE=C(rE,ny.Up,Cl,wl),aE=C(rE,ny.Down,wl,Cl),oE=e=>Qe(e.getClientRects()),iE=t=>e=>e.line>t,lE=t=>e=>e.line===t,sE=(e,t)=>{e.selection.setRng(t),jf(e,e.selection.getRng())},dE=(e,t,r)=>ee.some(V1(e,t,r)),cE=(t,r,n,e,a,o)=>{var i=1===r,l=zu(t.getBody()),l=C(Ru,i?l.next:l.prev),e=i?e:a;if(!n.collapsed){let e=xl(n);if(o(e))return j1(r,t,e,-1===r,!1);if(G1(t)){let e=n.cloneRange();return e.collapse(-1===r),ee.from(e)}}var a=Su(r,t.getBody(),n);return e(a)?H1(t,a.getNode(!i)):(o=l(a),a=pl(n),o?e(o=Th(i,o))?j1(r,t,o.getNode(!i),i,!1):(l=l(o))&&e(l)&&Au(o,l)?j1(r,t,l.getNode(!i),i,!1):a?dE(t,o.toRange(),!1):ee.none():a?ee.some(n):ee.none())},uE=(r,n,t,e,a,o)=>{var i=Su(n,r.getBody(),t),l=Qe(i.getClientRects()),s=n===ny.Down,d=r.getBody();if(!l)return ee.none();if(G1(r)){let e=s?M.fromRangeEnd(t):M.fromRangeStart(t);return(s?Gw:Yw)(d,e).orThunk(()=>ee.from(e)).map(e=>e.toRange())}var c=(s?aE:nE)(d,iE(1),i),c=B(c,lE(1)),l=l.left,u=Jw(c,l);if(u&&o(u.node)){let e=Math.abs(l-u.left),t=Math.abs(l-u.right);return j1(n,r,u.node,e<t,!1)}if(o=e(i)?i.getNode():a(i)?i.getNode(!0):xl(t)){let e=((e,t,r,n)=>{t=zu(t);let a,o,i,l;var s=[];let d=0;l=e===ny.Down?(a=t.next,o=wl,i=Cl,M.after(n)):(a=t.prev,o=Cl,i=wl,M.before(n));var c=oE(l);do{if(l.isVisible()){let t=oE(l);if(!i(t,c)){0<s.length&&o(t,Qe(s))&&d++;let e=vl(t);if(e.position=l,e.line=d,r(e))return s;s.push(e)}}}while(l=a(l));return s})(n,d,iE(1),o),t=Jw(B(e,lE(1)),l);if(t)return dE(r,t.position.toRange(),!1);if(t=Qe(B(e,lE(0))))return dE(r,t.position.toRange(),!1)}return 0===c.length?mE(r,s).filter(s?a:e).map(e=>V1(r,e.toRange(),!1)):ee.none()},mE=(e,t)=>{var r,n=e.selection.getRng(),n=t?M.fromRangeEnd(n):M.fromRangeStart(n),a=(a=n.container(),r=e.getBody(),an(W(a),e=>nu(e.dom),e=>e.dom===r).map(e=>e.dom).getOr(r));if(t){let e=Vw(a,n);return Ae(e.positions)}{let e=Hw(a,n);return Re(e.positions)}},gE=(t,e,r)=>mE(t,e).filter(r).exists(e=>(t.selection.setRng(e.toRange()),!0)),fE=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},pE=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},hE=(t,e,r)=>vw(e,r).map(e=>(fE(t,e),r)),vE=(t,r,e)=>{var n,a,o,i=t.getBody(),l=(n=t.selection.getRng(),a=i,l=e,o=M.fromRangeStart(n),n.collapsed?o:(n=M.fromRangeEnd(n),l?Gu(a,n).getOr(n):Yu(a,o).getOr(o)));return((i,l,s,d)=>{let e=Th(i,d),c=Rw(l,s,e);return Rw(l,s,e).bind(C(Lw,i)).orThunk(()=>{{var r=i,n=l,a=s,o=c,e=d;let t=Th(r,e);return $u(r,a,t).map(C(Th,r)).fold(()=>o.map(Ow),e=>Rw(n,a,e).map(C(Pw,r,n,a,t,e)).filter(C(Dw,o))).filter(Nw)}})})(e,C(Nh,t),i,l).bind(e=>hE(t,r,e))},bE=(e,t,r)=>!!Ld(e)&&vE(e,t,r).isSome(),yE=(e,t,r)=>{return!!Ld(t)&&(e=e,a=(t=t).selection.getRng(),a=e?M.fromRangeEnd(a):M.fromRangeStart(a),n=t,!!j(n.selection.getSel().modify))&&(e&&cl(a)?Mw(!0,t.selection,a):!(e||!ul(a))&&Mw(!1,t.selection,a));var n,a},CE=d=>{let c=Da(null),u=C(Nh,d);return d.on("NodeChange",e=>{var r,n,a,t,o,i,l,s;Ld(d)&&(((e,t,r)=>{t=te(qn(W(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),t=B(t,e),r=B(r,e);re(_e(t,r),C(pE,!1)),re(_e(r,t),C(pE,!0))})(u,d.dom,e.parents),t=d,o=c,s=o.get(),t.selection.isCollapsed()&&!t.composing&&s&&(i=M.fromRangeStart(t.selection.getRng()),!M.isTextPosition(i)||(l=i,cl(l))||ul(l)||(fE(t,Kc(s,i)),o.set(null))),r=u,n=d,a=c,l=e.parents,n.selection.isCollapsed())&&(l=B(l,r),re(l,e=>{var t=M.fromRangeStart(n.selection.getRng());Rw(r,n.getBody(),t).bind(e=>hE(n,a,e))}))}),c},wE=C(yE,!0),EE=C(yE,!1),xE=(t,r,n)=>{var e;return!!Ld(t)&&(e=mE(t,r).getOrThunk(()=>{var e=t.selection.getRng();return r?M.fromRangeEnd(e):M.fromRangeStart(e)}),Rw(C(Nh,t),t.getBody(),e).exists(e=>{e=Ow(e);return vw(n,e).exists(e=>(fE(t,e),!0))}))},_E=(t,r)=>e=>vw(r,e).map(e=>()=>fE(t,e)),kE=(n,a,o,i)=>{let l=n.getBody(),s=C(Nh,n);n.undoManager.ignore(()=>{var e,t,r;n.selection.setRng((e=o,t=i,(r=document.createRange()).setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r)),Dh(n),Rw(s,l,M.fromRangeStart(n.selection.getRng())).map(Bw).bind(_E(n,a)).each(R)}),n.nodeChanged()},SE=(e,t,o)=>{if(e.selection.isCollapsed()&&Ld(e)){var i=M.fromRangeStart(e.selection.getRng());{var l=e,s=t,d=o,c=i;e=l.getBody(),t=c.container();let r=hu(t,e)||e,n=C(Nh,l),a=Rw(n,r,c);return a.bind(e=>d?e.fold(J(ee.some(Bw(e))),ee.none,J(ee.some(Ow(e))),ee.none):e.fold(ee.none,J(ee.some(Ow(e))),ee.none,J(ee.some(Bw(e))))).map(_E(l,s)).getOrThunk(()=>{let e=qu(d,r,c),t=e.bind(e=>Rw(n,r,e));return Kt(a,t,()=>Ah(n,r,c).bind(e=>{return a=e,Kt(Xu(a),Zu(a),(e,t)=>{let r=Th(!0,e),n=Th(!1,t);return Yu(a,r).forall(e=>e.isEqual(n))}).getOr(!0)?ee.some(()=>{kh(l,d,W(e))}):ee.none();var a})).getOrThunk(()=>t.bind(()=>e.map(e=>()=>{d?kE(l,s,c,e):kE(l,s,e,c)})))})}}return ee.none()},NE=(e,t)=>{let r=W(e.getBody()),n=W(e.selection.getStart()),a=Up(n,r);return ye(a,t).fold(J(a),e=>a.slice(0,e))},RE=e=>1===Kr(e),AE=(e,t)=>{let r=C(lb,e);return we(t,e=>r(e)?[e.dom]:[])},TE=e=>{t=e;var t,r=NE(t,e=>t.schema.isBlock(q(e)));return AE(e,r)},OE=(o,i)=>{let l=B((t=o,NE(t,e=>t.schema.isBlock(q(e))||(e=e,1<Kr(e)))),RE);var t;return Ae(l).bind(a=>{var e=M.fromRangeStart(o.selection.getRng());return Uh(i,e,a.dom)&&!Ym(a)?ee.some(()=>{var e=i,t=o,r=a,n=l;if(0===(n=AE(t,n)).length)kh(t,e,r);else{let e=ib(r.dom,n);t.selection.setRng(e.toRange())}}):ee.none()})},BE=(e,t)=>{var r,n,a=e.selection.getStart(),o=(r=e,n=(o=a).parentElement,L(o)&&!I(n)&&r.dom.isEmpty(n)||Ym(W(a))?ib(a,t):((e,t)=>{var{caretContainer:t,caretPosition:r}=ob(t);return e.insertNode(t.dom),r})(e.selection.getRng(),t));e.selection.setRng(o.toRange())},PE=e=>D(e.startContainer),DE=e=>{var t,r,n=e.selection.getRng();return 0===(r=n).startOffset&&PE(r)&&(r=e,e=n.startContainer.parentElement,!I(e))&&lb(r,W(e))&&(n=(e=r=n).startContainer.parentNode,t=e.endContainer.parentNode,!I(n)&&!I(t)&&n.isEqualNode(t)&&(n=e.endContainer,e.endOffset===(D(n)?n:n.childNodes).length)||!r.endContainer.isEqualNode(r.commonAncestorContainer))},LE=(e,t)=>{if(e.selection.isCollapsed())return OE(e,t);var n=e;if(DE(n)){let r=TE(n);return ee.some(()=>{Dh(n);var e=n,t=r;0<(t=_e(t,TE(e))).length&&BE(e,t)})}return ee.none()},ME=e=>{return(n=(t=e).selection.getRng()).collapsed&&(PE(n)||t.dom.isEmpty(n.startContainer))&&(n=t,t=W(n.selection.getStart()),r=n.schema,!Wn(t,e=>Ju(e.dom),e=>r.isBlock(q(e))))&&BE(e,[]),!0;var t,r,n},IE=(e,t,r)=>z(r)?ee.some(()=>{e._selectionOverrides.hideFakeCaret(),kh(e,t,W(r))}):ee.none(),FE=(e,n)=>{if(e.selection.isCollapsed()){var a=e,o=n;let t=o?Bp:Pp,r=Su(o?1:-1,a.getBody(),a.selection.getRng());return t(r)?IE(a,o,r.getNode(!o)):ee.from(Th(o,r)).filter(e=>t(e)&&Au(r,e)).bind(e=>IE(a,o,e.getNode(!o)))}return n=n,t=(e=e).selection.getNode(),xa(t)?IE(e,n,t):ee.none();var t},UE=e=>pt(null!=e?e:"").getOr(0),zE=(e,t)=>(e||"table"===q(t)?"margin":"padding")+("rtl"===bn(t,"direction")?"-right":"-left"),jE=e=>{var r,t=VE(e);return!e.mode.isReadOnly()&&(1<t.length||(r=e,e=t,Ee(e,e=>{var t=zE(yd(r),e),t=Cn(e,t).map(UE).getOr(0);return"false"!==r.dom.getContentEditable(e.dom)&&0<t})))},HE=e=>Yi(e)||Gi(e),VE=e=>B(Tn(e.selection.getSelectedBlocks()),e=>{return!HE(e)&&(t=e,!Mr(t).exists(HE))&&on(e,e=>ya(e.dom)||E(e.dom)).exists(e=>ya(e.dom));var t}),$E=(t,u)=>{var r;if(!t.mode.isReadOnly()){let l=t.dom,e=Cd(t),s=null!=(r=null==(r=/[a-z%]+$/i.exec(e))?void 0:r[0])?r:"px",d=UE(e),c=yd(t);re(VE(t),t=>{var r=l,e=u,n=c,a=d,o=s,t=t.dom,n=zE(n,W(t)),i=UE(r.getStyle(t,n));if("outdent"===e){let e=Math.max(0,i-a);r.setStyle(t,n,e?e+o:"")}else{let e=i+a+o;r.setStyle(t,n,e)}})}},qE=e=>$E(e,"outdent"),WE=e=>{if(e.selection.isCollapsed()&&jE(e)){var t=e.dom,r=e.selection.getRng(),n=M.fromRangeStart(r),r=t.getParent(r.startContainer,t.isBlock);if(null!==r&&$p(W(r),n,e.schema))return ee.some(()=>qE(e))}return ee.none()},KE=(t,r,n)=>Oe([WE,tw,K1,(e,t)=>SE(e,r,t),I1,gv,lw,FE,z1,LE,iw],e=>e(t,n)).filter(e=>t.selection.isEditable()),YE=e=>void 0===e.touches||1!==e.touches.length?ee.none():ee.some(e.touches[0]),GE=(e,t)=>ae(e,t.nodeName),XE=(e,t)=>!!D(t)||!!G(t)&&!(GE(e.getBlockElements(),t)||mm(t)||Ja(e,t)||Ua(t)),ZE=(e,t)=>{if(D(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||GE(e,t.nextSibling)||Ua(t.nextSibling)}return!1},QE=e=>e.dom.create(Js(e),ed(e)),JE=(e,t,r)=>{var e=W(QE(e)),n=Ji(),r=(K(e,n),r(t,e),document.createRange());return r.setStartBefore(n.dom),r.setEndBefore(n.dom),r},ex=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),tx=(a,o,i)=>function(t){var e=arguments,r=e[e.length-2],n=0<r?o.charAt(r-1):"";if('"'===n)return t;if(">"===n){let e=o.lastIndexOf("<",r);if(-1!==e&&-1!==o.substring(e,r).indexOf('contenteditable="false"'))return t}return'<span class="'+i+'" data-mce-content="'+a.dom.encode(e[0])+'">'+a.dom.encode("string"==typeof e[1]?e[1]:e[0])+"</span>"},rx=(e,t)=>Ee(e,e=>{e=t.match(e);return null!==e&&e[0].length===t.length}),nx=(e,t)=>{t.hasAttribute("data-mce-caret")&&(fl(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},ax=(e,t)=>{r=e;var r=dn(W(r.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void nx(e,r)):void(dl(r)&&(nx(e,r),e.undoManager.add()))},ox=E,ix=(r,n,e)=>{let t=zu(r.getBody()),a=C(Ru,1===n?t.next:t.prev);if(e.collapsed){let t=r.dom.getParent(e.startContainer,"PRE");if(t&&!a(M.fromRangeStart(e))){let e=W((e=>{e=e.dom.create(Js(e));return e.innerHTML='<br data-mce-bogus="1">',e})(r));(1===n?_n:xn)(W(t),e),r.selection.select(e.dom,!0),r.selection.collapse()}}},lx=(i,l)=>(e=>{let t=((e,t)=>{const r=t?e.getEnd(!0):e.getStart(!0);return Rh(r)?!t:t})(i.selection,l)?1:-1,r=e.selection.getRng();return n=t,a=e,o=r,cE(a,n,o,Mp,Ip,ox).orThunk(()=>(ix(e,t,r),ee.none()));var n,a,o})(i).exists(e=>(sE(i,e),!0)),sx=(t,i)=>(e=>{let t=i?1:-1,r=e.selection.getRng();return n=t,a=e,o=r,uE(a,n,o,e=>Mp(e)||Dp(e),e=>Ip(e)||Lp(e),ox).orThunk(()=>(ix(e,t,r),ee.none()));var n,a,o})(t).exists(e=>(sE(t,e),!0)),dx=(e,t)=>gE(e,t,t?Ip:Mp),cx=(r,n)=>Y1(r,!n).map(e=>{var e=e.toRange(),t=r.selection.getRng();return n?e.setStart(t.startContainer,t.startOffset):e.setEnd(t.endContainer,t.endOffset),e}).exists(e=>(sE(r,e),!0)),ux=e=>V(["figcaption"],q(e)),mx=(e,t)=>!!e.selection.isCollapsed()&&((n,a)=>{let o=W(n.getBody()),i=M.fromRangeStart(n.selection.getRng());return((e,t,r)=>{t=C(P,t);return on(W(e.container()),e=>r.isBlock(q(e)),t).filter(ux)})(i,o,n.schema).exists(()=>{if(e=o,t=a,r=i,(t?Kw:Ww)(e.dom,r)){let e=JE(n,o,a?K:kn);return n.selection.setRng(e),!0}var e,t,r;return!1})})(e,t),gx=(e,t)=>{return o=e,(t?ee.from(o.dom.getParent(o.selection.getNode(),"details")).map(e=>{return e=e,r=(t=o).selection.getRng(),r=M.fromRangeStart(r),!(t.getBody().lastChild!==e||!Kw(e,r)||(t.execCommand("InsertNewBlockAfter"),0));var t,r}):ee.from(o.dom.getParent(o.selection.getNode(),"summary")).bind(a=>ee.from(o.dom.getParent(a,"details")).map(e=>{return e=e,r=a,n=(t=o).selection.getRng(),n=M.fromRangeStart(n),!(t.getBody().firstChild!==e||!Ww(r,n)||(t.execCommand("InsertNewBlockBefore"),0));var t,r,n}))).getOr(!1);var o},fx={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},px=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,v=(e,...t)=>()=>e.apply(null,t),hx=(e,t)=>{return be((e=e,r=t,we((e=e,te(e,e=>({...fx,...e}))),e=>px(e,r)?[e]:[])),e=>e.action());var r},vx=(e,t)=>{return Oe((e=e,r=t,we((e=e,te(e,e=>({...fx,...e}))),e=>px(e,r)?[e]:[])),e=>e.action());var r},bx=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return cE(t,e,r,Bp,Pp,xa).exists(e=>(sE(t,e),!0))},yx=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return uE(t,e,r,Bp,Pp,xa).exists(e=>(sE(t,e),!0))},Cx=(e,t)=>gE(e,t,t?Pp:Bp),wx=ks([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ex={...wx,none:e=>wx.none(e)},xx=(e,t,r)=>we(Vr(e),e=>Tr(e,t)?r(e)?[e]:[]:xx(e,t,r)),_x=(e,t)=>cn(e,"table",t),kx=(r,n,a,o,i=S)=>{let e=1===o;if(!e&&a<=0)return Ex.first(r[0]);if(e&&a>=r.length-1)return Ex.last(r[r.length-1]);{let e=a+o,t=r[e];return i(t)?Ex.middle(n,t):kx(r,n,e,o,i)}},Sx=(r,e)=>_x(r,e).bind(e=>{let t=xx(e,"th,td",S);return ye(t,e=>P(r,e)).map(e=>({index:e,all:t}))}),Nx=["img","br"],Rx=e=>{return t=e,Hi.getOption(t).filter(e=>0!==e.trim().length||-1<e.indexOf(Zn)).isSome()||V(Nx,q(e))||(t=e,tr(t)&&"false"===cr(t,"contenteditable"));var t},Ax=(e,t,r,n,a)=>{var o,i,l,r=qn(W(r),"td,th,caption").map(e=>e.dom),r=B((o=e,e=r,we(e,e=>{var t={left:(t=vl(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:t.left,y:o(t),cell:e},{x:t.right,y:o(t),cell:e}]})),e=>t(e,a));return e=r,i=n,l=a,he(e,(e,n)=>e.fold(()=>ee.some(n),e=>{var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-l)),r=Math.sqrt(Math.abs(n.x-i)+Math.abs(n.y-l));return ee.some(r<t?n:e)}),ee.none()).map(e=>e.cell)},Tx=C(Ax,e=>e.bottom,(e,t)=>e.y<t),Ox=C(Ax,e=>e.top,(e,t)=>e.y>t),Bx=(e,t,r)=>{var n,a,o=e(t,r);return o.breakType===ry.Wrap&&0===o.positions.length||!L(r.getNode())&&o.breakType===ry.Br&&1===o.positions.length?(n=e,a=t,!o.breakAt.exists(e=>n(a,e).breakAt.isSome())):o.breakAt.isNone()},Px=C(Bx,Hw),Dx=C(Bx,Vw),Lx=(t,e,r,n)=>{var a=t.selection.getRng(),o=e?1:-1;return!(!eu()||!((e,t,r)=>{let n=M.fromRangeStart(t);return Ku(!e,r).exists(e=>e.isEqual(n))})(e,a,r)||(j1(o,t,r,!e,!1).each(e=>{sE(t,e)}),0))},Mx=(o,i,t)=>{n=t.getNode(!!i);let e=ca(n)?ee.some(n):ee.none(),r=!1===i;var n;e.fold(()=>sE(o,t.toRange()),a=>Ku(r,o.getBody()).filter(e=>e.isEqual(t)).fold(()=>sE(o,t.toRange()),e=>{var t,r,n;t=i,n=a,(r=o).undoManager.transact(()=>{var e=t?_n:xn,e=JE(r,W(n),e);sE(r,e)})}))},Ix=(t,r,n,e)=>{var a,o,i,l,s,d,c,u,m,g,f=t.selection.getRng(),f=M.fromRangeStart(f),p=t.getBody();if(!r&&Px(e,f)){a=p,l=o=n,s=i=f;let e=Re(s.getClientRects()).bind(e=>Tx(l,e.left,e.top)).bind(e=>{return jw(Zu(t=e).map(e=>Hw(t,e).positions.concat(e)).getOr([]),s);var t}).orThunk(()=>Re(i.getClientRects()).bind(e=>zw($w(a,M.before(o)),e.left))).getOr(M.before(o));return Mx(t,r,e),!0}if(r&&Dx(e,f)){d=p,m=c=n,g=u=f;let e=Ae(g.getClientRects()).bind(e=>Ox(m,e.left,e.top)).bind(e=>{return jw(Xu(t=e).map(e=>[e].concat(Vw(t,e).positions)).getOr([]),g);var t}).orThunk(()=>Re(u.getClientRects()).bind(e=>zw(qw(d,M.after(c)),e.left))).getOr(M.after(c));return Mx(t,r,e),!0}return!1},Fx=(r,n,a)=>ee.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(t=>ee.from(r.dom.getParent(t,"table")).map(e=>a(r,n,e,t))).getOr(!1),Ux=(e,t)=>Fx(e,t,Lx),zx=(e,t)=>Fx(e,t,Ix),jx=(t,r,e)=>e.fold(ee.none,ee.none,(e,t)=>(t=t,ln(t,Rx).map(e=>(e=Sg.exact(e,0,e,0),df(e)))),e=>t.mode.isReadOnly()?ee.none():(t.execCommand("mceTableInsertRowAfter"),Hx(t,r,e))),Hx=(e,t,r)=>{return jx(e,t,(a=un,Sx(n=r,void 0).fold(()=>Ex.none(n),e=>kx(e.all,n,e.index,1,a))));var n,a},Vx=(e,t,r)=>{return jx(e,t,(a=un,Sx(n=r,void 0).fold(()=>Ex.none(),e=>kx(e.all,n,e.index,-1,a))));var n,a},$x=(t,r)=>{let n=["table","li","dl"],a=W(t.getBody()),o=e=>{var t=q(e);return P(e,a)||V(n,t)},e=t.selection.getRng();return i=W(r?e.endContainer:e.startContainer),l=o,s=["td","th"],((d=l)(l=i)?ee.none():V(s,q(l))?ee.some(l):sn(l,s.join(","),e=>Tr(e,"table")||d(e))).map(e=>(_x(e,o).each(e=>{t.model.table.clearSelectedCells(e.dom)}),t.selection.collapse(!r),(r?Hx:Vx)(t,o,e).each(e=>{t.selection.setRng(e)}),!0)).getOr(!1);var i,l,s,d},qx=(e,t)=>({container:e,offset:t}),Wx=X.DOM,Kx=t=>e=>t===e?-1:0,Yx=(e,t,r)=>{var n;return D(e)&&0<=t?ee.some(qx(e,t)):(n=ji(Wx),ee.from(n.backwards(e,t,Kx(e),r)).map(e=>qx(e.container,e.container.data.length)))},Gx=(t,r,n)=>{if(!D(t))return ee.none();let e=t.data;if(0<=r&&r<=e.length)return ee.some(qx(t,r));{let e=ji(Wx);return ee.from(e.backwards(t,r,Kx(t),n)).bind(e=>{var t=e.container.data;return Gx(e.container,r+t.length,n)})}},Xx=(e,t,r)=>{if(!D(e))return ee.none();let n=e.data;var a;return t<=n.length?ee.some(qx(e,t)):(a=ji(Wx),ee.from(a.forwards(e,t,Kx(e),r)).bind(e=>Xx(e.container,t-n.length,r)))},Zx=(e,t,r,n,a)=>{var o,e=ji(e,(o=e,e=>o.isBlock(e)||V(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===o.getContentEditable(e)));return ee.from(e.backwards(t,r,n,a))},Qx=e=>""!==e&&-1!==" \ufeff\f\n\r\t\v".indexOf(e),Jx=(e,t)=>e.substring(t.length),e_=(e,r,n,a=!1)=>{if(!(t=r).collapsed||!D(t.startContainer))return ee.none();var t;let o={text:"",offset:0},i=e.getParent(r.startContainer,e.isBlock)||e.getRoot();return Zx(e,r.startContainer,r.startOffset,(e,t,r)=>(o.text=r+o.text,o.offset+=t,((e,t,r,n=!1)=>{let a;var o=r.charAt(0);for(a=t-1;0<=a;a--){var i=e.charAt(a);if(!n&&Qx(i))return ee.none();if(o===i&&it(e,r,a,t))break}return ee.some(a)})(o.text,o.offset,n,a).getOr(t)),i).bind(e=>{var t=r.cloneRange();return t.setStart(e.container,e.offset),t.setEnd(r.endContainer,r.endOffset),t.collapsed||(e=t,0!==(e=nl(e.toString().replace(/\u00A0/g," "))).lastIndexOf(n))?ee.none():ee.some({text:Jx(e,n),range:t,trigger:n})})},t_=e=>{var t;return 3===e.nodeType?qx(e,e.data.length):0<(t=e.childNodes).length?t_(t[t.length-1]):qx(e,t.length)},r_=(e,t)=>{var r=e.childNodes;return 0<r.length&&t<r.length?r_(r[t],0):0<r.length&&1===e.nodeType&&r.length===t?t_(r[r.length-1]):qx(e,t)},n_=(t,e,r,n={})=>{let a,o=e(),i=null!=(a=t.selection.getRng().startContainer.nodeValue)?a:"",l=B(o.lookupByTrigger(r.trigger),e=>r.text.length>=e.minChars&&e.matches.getOrThunk(()=>{return n=t.dom,e=>{var t,r,e=r_(e.startContainer,e.startOffset);return e=e,r=null!=(r=(t=n).getParent(e.container,t.isBlock))?r:t.getRoot(),!Zx(t,e.container,e.offset,(e,t)=>0===t?-1:t,r).filter(e=>{e=e.container.data.charAt(e.offset-1);return!Qx(e)}).isSome()};var n})(r.range,i,r.text));return 0===l.length?ee.none():(e=Promise.all(te(l,t=>t.fetch(r.text,t.maxResults,n).then(e=>({matchText:r.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn})))),ee.some({lookupData:e,context:r}))},a_=((dk=ay=ay||{})[dk.Error=0]="Error",dk[dk.Value=1]="Value",(e,t,r)=>e.stype===ay.Error?t(e.serror):r(e.svalue)),o_=e=>({stype:ay.Value,svalue:e}),i_=e=>({stype:ay.Error,serror:e}),l_=a_,s_=e=>le(e)&&100<Pe(e).length?" removed due to size":JSON.stringify(e,null,2),d_=(e,t)=>i_([{path:e,getErrorInfo:t}]),c_=(n,l)=>({extract:(r,i)=>w(i,n).fold(()=>{return e=r,t=n,d_(e,()=>'Choice schema did not contain choice key: "'+t+'"');var e,t},e=>{return n=r,t=i,a=l,o=e,w(a,o).fold(()=>{return e=n,t=a,r=o,d_(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+s_(t));var e,t,r},e=>e.extract(n.concat(["branch: "+o]),t));var n,t,a,o}),toString:()=>"chooseOn("+n+"). Possible values: "+Pe(l)}),u_=a=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");var r={};for(let e=0;e<t.length;e++){var n=t[e];for(let e in n)ae(n,e)&&(r[e]=a(r[e],n[e]))}return r},m_=u_((e,t)=>se(e)&&se(t)?m_(e,t):t),g_=u_((e,t)=>t),f_=e=>({tag:"defaultedThunk",process:J(e)}),p_=e=>{var t,e=(e=>{let t=[],r=[];return re(e,e=>{a_(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}})(e);return 0<e.errors.length?(t=e.errors,s(i_,Ce)(t)):o_(e.values)},h_=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},v_=t=>({extract:(r,e)=>(e=t(e)).stype===ay.Error?(e=>{return t=r,e=e,d_(t,J(e));var t})(e.serror):e,toString:J("val")}),b_=v_(o_),y_=(e,t,r,n)=>n(w(e,t).getOrThunk(()=>r(e))),C_=(t,r,n,a,o)=>{let i=e=>o.extract(r.concat([a]),e),e=e=>e.fold(()=>o_(ee.none()),e=>{var e=o.extract(r.concat([a]),e),t=ee.some;return e.stype===ay.Value?{stype:ay.Value,svalue:t(e.svalue)}:e});switch(t.tag){case"required":return c=r,u=n,m=a,g=i,w(u,m).fold(()=>{return e=c,t=m,r=u,d_(e,()=>'Could not find valid *required* value for "'+t+'" in '+s_(r));var e,t,r},g);case"defaultedThunk":return y_(n,a,t.process,i);case"option":return g=n,d=a,e(w(g,d));case"defaultedOptionThunk":return l=n,d=a,s=t.process,e(w(l,d).map(e=>!0===e?s(l):e));case"mergeWithThunk":return y_(n,a,J({}),e=>{e=m_(t.process(n),e);return i(e)})}var l,s,d,c,u,m,g},w_=n=>({extract:(e,t)=>{{var i=e,l=t,r;let a={},o=[];for(r of n)h_(r,(e,t,r,n)=>{r=C_(r,i,l,e,n);l_(r,e=>{o.push(...e)},e=>{a[t]=e})},(e,t)=>{a[e]=t(l)});return 0<o.length?i_(o):o_(a)}},toString:()=>"obj{\n"+te(n,e=>h_(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}),E_=n=>({extract:(r,e)=>{e=te(e,(e,t)=>n.extract(r.concat(["["+t+"]"]),e));return p_(e)},toString:()=>"array("+n.toString()+")"}),x_=s(E_,w_),__=(e,t,r)=>(r=r,r=(t=t.extract([e],r)).stype===ay.Error?{stype:ay.Error,serror:(e=t.serror,{input:r,errors:e})}:t,a_(r,_s.error,_s.value)),k_=(e,t)=>c_(e,Le(t,w_)),S_=J(b_),N_=(r,n)=>v_(e=>{var t=typeof e;return r(e)?o_(e):i_(`Expected type: ${n} but got: `+t)}),R_=N_(y,"number"),A_=N_(Z,"string"),T_=N_(de,"boolean"),O_=N_(j,"function"),B_=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),P_=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),D_=t=>{return r=e=>V(t,e)?_s.value(e):_s.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`),v_(e=>r(e).fold(i_,o_));var r},L_=(e,t)=>B_(e,e,{tag:"required",process:{}},t),M_=e=>L_(e,A_),I_=(e,t)=>B_(e,e,{tag:"required",process:{}},D_(t)),F_=e=>L_(e,O_),U_=(e,t)=>B_(e,e,{tag:"required",process:{}},E_(t)),z_=(e,t)=>B_(e,e,{tag:"option",process:{}},t),j_=e=>z_(e,A_),H_=(e,t,r)=>B_(e,e,f_(t),r),V_=(e,t)=>H_(e,t,R_),$_=(e,t)=>H_(e,t,A_),q_=(e,t,r)=>H_(e,t,D_(r)),W_=(e,t)=>H_(e,t,T_),K_=(e,t)=>H_(e,t,O_),Y_=M_("type"),G_=F_("fetch"),X_=F_("onAction"),Z_=K_("onSetup",()=>H),Q_=j_("text"),J_=j_("icon"),ek=j_("tooltip"),tk=j_("label"),rk=W_("active",!1),nk=W_("enabled",!0),ak=W_("primary",!1),ok=e=>$_("type",e),ik=w_([Y_,M_("trigger"),V_("minChars",1),B_("columns","columns",f_(1),S_()),V_("maxResults",10),z_("matches",O_),G_,X_,(dk=A_,H_("highlightOn",[],E_(dk)))]);var lk,sk,dk=[nk,ek,J_,Q_,Z_,$_("context","mode:design")],ck=[rk].concat(dk),uk=[K_("predicate",h),q_("scope","node",["node","editor"]),q_("position","selection",["node","selection","line"])],mk=dk.concat([ok("contextformbutton"),$_("align","end"),ak,X_,P_("original",f)]),gk=ck.concat([ok("contextformbutton"),$_("align","end"),ak,X_,P_("original",f)]),dk=dk.concat([ok("contextformbutton")]),ck=ck.concat([ok("contextformtogglebutton")]),mk=[tk,U_("commands",k_("type",{contextformbutton:mk,contextformtogglebutton:gk})),z_("launch",k_("type",{contextformbutton:dk,contextformtogglebutton:ck})),K_("onInput",H),K_("onSetup",H)];k_("type",{contextform:[...uk,...mk,I_("type",["contextform"]),K_("initValue",J("")),j_("placeholder")],contextsliderform:[...uk,...mk,I_("type",["contextsliderform"]),K_("initValue",J(0)),K_("min",J(0)),K_("max",J(100))],contextsizeinputform:[...uk,...mk,I_("type",["contextsizeinputform"]),K_("initValue",J({width:"",height:""}))]}),w_([ok("contexttoolbar"),L_("items",(e=>{let o=f;return{extract:(t,r)=>{var n,a=[];for(n of e){let e=n.extract(t,r);if(e.stype===ay.Value)return{stype:ay.Value,svalue:o(e.svalue)};a.push(e)}return p_(a)},toString:()=>"oneOf("+te(e,e=>e.toString()).join(", ")+")"}})([A_,x_([j_("name"),j_("label"),U_("items",A_)])]))].concat(uk));let fk=e=>{let t=e.ui.registry.getAll().popups,r=Le(t,e=>(e=e,__("Autocompleter",ik,e).fold(e=>{throw new Error("Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):e;return te(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})((e=e).errors).join("\n")+"\n\nInput object: "+s_(e.input))},f))),n=Ve(ze(r,e=>e.trigger)),a=je(r);return{dataset:r,triggers:n,lookupByTrigger:t=>B(a,e=>e.trigger===t)}},pk=i=>{let a=Ma(),o=Da(!1),r=a.isSet,n=()=>{r()&&(i.dispatch("AutocompleterEnd"),o.set(!1),a.clear())},l=Je(()=>fk(i)),s=e=>{var t;t=e,a.get().map(e=>e_(i.dom,i.selection.getRng(),e.trigger,!0).bind(e=>n_(i,l,e,t))).getOrThunk(()=>{return t=i,r=l,e=r(),o=t.selection.getRng(),n=t.dom,a=o,o=e,Oe(o.triggers,e=>e_(n,a,e)).bind(e=>n_(t,r,e));var t,r,n,a,e,o}).fold(n,n=>{var e;e=n.context,r()||a.set({trigger:e.trigger,matchLength:e.text.length}),n.lookupData.then(r=>{a.get().map(e=>{var t=n.context;e.trigger===t.trigger&&(a.set({...e,matchLength:t.text.length}),o.get()?(Fs(i,{range:t.range}),i.dispatch("AutocompleterUpdate",{lookupData:r})):(o.set(!0),Fs(i,{range:t.range}),i.dispatch("AutocompleterStart",{lookupData:r})))})})})},e=()=>a.get().bind(({trigger:e})=>{let n=i.selection.getRng();return e_(i.dom,n,e,o.get()).filter(({range:e})=>{return t=n,e=e,r=t.compareBoundaryPoints(window.Range.START_TO_START,e),t=t.compareBoundaryPoints(window.Range.END_TO_END,e),0<=r&&t<=0;var t,r}).map(({range:e})=>e)});i.addCommand("mceAutocompleterReload",(e,t)=>{t=le(t)?t.fetchOptions:{};s(t)}),i.addCommand("mceAutocompleterClose",n),i.addCommand("mceAutocompleterRefreshActiveRange",()=>{e().each(e=>{Fs(i,{range:e})})}),i.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>e().isSome());{var d=i,c={cancelIfNecessary:n,load:s};let t=Ei(c.load,50);d.on("input",e=>{"insertCompositionText"===e.inputType&&!d.composing||t.throttle()}),d.on("keydown",e=>{e=e.which;8===e?t.throttle():27===e?(t.cancel(),c.cancelIfNecessary()):38!==e&&40!==e||t.cancel()},!0),d.on("remove",t.cancel)}},hk=Mt().browser.isSafari(),vk=e=>el(W(e)),bk=(e,t)=>0===e.startOffset&&e.endOffset===(null==(e=t.textContent)?void 0:e.length),yk=(e,t)=>ee.from(e.getParent(t.container(),"details")),Ck=(e,t)=>yk(e,t).isSome(),wk=(e,t)=>{var r=t.getNode();b(r)||e.selection.setCursorLocation(r,t.offset())},Ek=(t,e,r)=>{var n=t.dom.getParent(e.container(),"details");if(n&&!n.open){let e=t.dom.select("summary",n)[0];e&&(r?Xu:Zu)(e).each(e=>wk(t,e))}else wk(t,e)},xk=(l,s,e)=>{let{dom:d,selection:t}=l,c=l.getBody();if("character"!==e)return!1;{let e=M.fromRangeStart(t.getRng()),r=d.getParent(e.container(),d.isBlock),n=yk(d,e),a=r&&d.isEmpty(r),o=I(null==r?void 0:r.previousSibling),i=I(null==r?void 0:r.nextSibling);return!!(a&&(s?i:o)&&qu(!s,c,e).exists(e=>Ck(d,e)&&!Wt(n,yk(d,e))))||qu(s,c,e).fold(h,e=>{var t=yk(d,e);if(!Ck(d,e)||Wt(n,t))return!1;if(s||Ek(l,e,!1),r&&a){if(s&&o)return!0;if(!s&&i)return!0;Ek(l,e,s),l.dom.remove(r)}return!0})}},_k=(e,t,r,n)=>{var a,o,i,l,s,d,c,u,m,g=e.selection.getRng(),f=M.fromRangeStart(g),e=e.getBody();return"selection"===n?(c=g,n=(u=t).startSummary.exists(e=>e.contains(c.startContainer)),g=u.startSummary.exists(e=>e.contains(c.endContainer)),m=u.startDetails.forall(t=>u.endDetails.forall(e=>t!==e)),(n||g)&&!(n&&g)||m):r?(d=f,t.startSummary.exists(e=>{return t=d,r=e,Zu(r).exists(e=>L(e.getNode())&&Gu(r,e).exists(e=>e.isEqual(t))||e.isEqual(t));var t,r})||(l=e,s=f,t.startDetails.exists(t=>Yu(l,s).forall(e=>!t.contains(e.container()))))):(i=f,t.startSummary.exists(e=>{return t=i,e=e,Xu(e).exists(e=>e.isEqual(t));var t})||(a=f,(o=t).startDetails.exists(e=>Gu(e,a).forall(t=>o.startSummary.exists(e=>!e.contains(a.container())&&e.contains(t.container()))))))},kk=(e,t,r)=>{return a=t,o=r,((t,e)=>{var r=ee.from(t.getParent(e.startContainer,"details")),n=ee.from(t.getParent(e.endContainer,"details"));if(r.isSome()||n.isSome()){let e=r.bind(e=>ee.from(t.select("summary",e)[0]));return ee.some({startSummary:e,startDetails:r,endDetails:n})}return ee.none()})((n=e).dom,n.selection.getRng()).fold(()=>xk(n,a,o),e=>_k(n,e,a,o)||xk(n,a,o))||hk&&((s,d,c)=>{let u=s.selection,m=u.getNode(),e=u.getRng(),t=M.fromRangeStart(e);return!!Sa(m)&&("selection"===c&&bk(e,m)||Uh(d,t,m)?vk(m):s.undoManager.transact(()=>{let e=u.getSel(),{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:a}=null!=e?e:{};var o=()=>{z(t)&&z(r)&&z(n)&&z(a)&&null!=e&&e.setBaseAndExtent(t,r,n,a)},i=(e,t)=>{re(e.childNodes,e=>{Nm(e)&&t.appendChild(e)})},l=s.dom.create("span",{"data-mce-bogus":"1"});i(m,l),m.appendChild(l),o(),"word"!==c&&"line"!==c||null==e||e.modify("extend",d?"right":"left",c),!u.isCollapsed()&&bk(u.getRng(),l)?vk(m):(s.execCommand(d?"ForwardDelete":"Delete"),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.anchorOffset,n=null==e?void 0:e.focusNode,a=null==e?void 0:e.focusOffset,i(l,m),o()),s.dom.remove(l)}),!0)})(e,t,r)?ee.some(H):ee.none();var n,a,o},Sk=a=>(e,t,r={})=>{var n=e.getBody(),n={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:n,currentTarget:n,eventPhase:Event.AT_TARGET,originalTarget:n,explicitOriginalTarget:n,isTrusted:!1,srcElement:n,cancelable:!1,preventDefault:H,inputType:t},t=Qo(new InputEvent(a));return e.dispatch(a,{...t,...n,...r})},Nk=Sk("input"),Rk=Sk("beforeinput"),Ak=Mt(),Tk=Ak.os,Ok=Tk.isMacOS()||Tk.isiOS(),Bk=Ak.browser.isFirefox(),Pk=(e,n)=>{var t=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(n){if(/^(LI|DT|DD)$/.test(n.nodeName)){let e=(e=>{for(;e;){if(G(e)||D(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(n.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&n.insertBefore(t.doc.createTextNode(Zn),n.firstChild)}var o=t.createRng();if(n.normalize(),n.hasChildNodes()){let e=new Gn(n,n),t,r=n;for(;t=e.current();){if(D(t)){o.setStart(t,0),o.setEnd(t,0);break}if(a[t.nodeName.toLowerCase()]){o.setStartBefore(t),o.setEndBefore(t);break}r=t,t=e.next()}t||(o.setStart(r,0),o.setEnd(r,0))}else L(n)?n.nextSibling&&t.isBlock(n.nextSibling)?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)):(o.setStart(n,0),o.setEnd(n,0));e.selection.setRng(o),jf(e,o)}},Dk=(e,t)=>{var r=e.getRoot();let n,a=t;for(;a!==r&&a&&"false"!==e.getContentEditable(a);){if("true"===e.getContentEditable(a)){n=a;break}a=a.parentNode}return a!==r?n:r},Lk=e=>ee.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Mk=e=>{e.innerHTML='<br data-mce-bogus="1">'},Ik=(t,a)=>{if(Js(t).toLowerCase()===a.tagName.toLowerCase()){var o=t,i=a,a=ed(t);let r=o.dom;ee.from(a.style).map(r.parseStyle).each(e=>{e={...wn(W(i)),...e};r.setStyles(i,e)});o=ee.from(a.class).map(e=>e.split(/\s+/)),t=ee.from(i.className).map(e=>B(e.split(/\s+/),e=>""!==e));Kt(o,t,(t,e)=>{e=B(e,e=>!V(t,e)),e=[...t,...e];r.setAttrib(i,"class",e.join(" "))});let n=["style","class"],e=Ue(a,(e,t)=>!V(n,t));r.setAttribs(i,e)}},Fk=(e,t,r,n,a=!0,o,i)=>{var l=e.dom,s=e.schema,d=Js(e),c=r?r.nodeName.toUpperCase():"";let u=t;var m=s.getTextInlineElements(),g=o||"TABLE"===c||"HR"===c?l.create(o||d,i||{}):r.cloneNode(!1);let f=g;if(a){do{if(m[u.nodeName]&&!Ju(u)&&!mm(u)){let e=u.cloneNode(!1);l.setAttrib(e,"id",""),g.hasChildNodes()?e.appendChild(g.firstChild):f=e,g.appendChild(e)}}while((u=u.parentNode)&&u!==n)}else l.setAttrib(g,"style",null),l.setAttrib(g,"class",null);return Ik(e,g),Mk(f),g},Uk=(e,t)=>{e=null==e?void 0:e.parentNode;return z(e)&&e.nodeName===t},zk=e=>z(e)&&/^(OL|UL|LI)$/.test(e.nodeName),jk=e=>z(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Hk=e=>{var t=e.parentNode;return jk(t)?t:e},Vk=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!G(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},$k=e=>he(ze(wn(W(e)),(e,t)=>t+`: ${e};`),(e,t)=>e+t,""),qk=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Wk=(e,t)=>z(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Kk=(e,t,r)=>D(t)?e?1===r&&t.data.charAt(r-1)===tl?0:r:r===t.data.length-1&&t.data.charAt(r)===tl?t.data.length:r:r,Yk={insert:(i,n)=>{let o,l,t,r,s=!1,a=i.dom,d=i.schema.getNonEmptyElements(),c=i.selection.getRng(),u=Js(i),e=W(c.startContainer),m=$r(e,c.startOffset),g=m.exists(e=>tr(e)&&!un(e)),f=c.collapsed&&g,p=(e,t)=>Fk(i,o,E,w,ad(i),e,t),h=e=>{var t=Kk(e,o,l);if(D(o)&&(e?0<t:t<o.data.length))return!1;if((o.parentNode!==E&&o!==E||!s||e)&&(!e||!G(o)||o!==E.firstChild)){if(qk(o,"TABLE")||qk(o,"HR"))return"BR"===(r=o).nodeName||r.nextSibling&&"BR"===r.nextSibling.nodeName?!e:s&&!e||!s&&e;var r,n,a=new Gn(o,E);for(D(o)&&(e&&0===t?a.prev():e||t!==o.data.length||a.next());n=a.current();){if(G(n)){if(!n.getAttribute("data-mce-bogus")){let e=n.nodeName.toLowerCase();if(d[e]&&"br"!==e)return!1}}else if(D(n)&&!ea(n.data))return!1;e?a.prev():a.next()}}return!0},v=()=>{let e;return e=/^(H[1-6]|PRE|FIGURE)$/.test(t)&&"HGROUP"!==x?p(u):p(),((e,t)=>{e=od(e);return!U(t)&&(Z(e)?V(oe.explode(e),t.nodeName.toLowerCase()):e)})(i,r)&&Wk(a,r)&&a.isEmpty(E,void 0,{includeZwsp:!0})?e=a.split(r,E):a.insertAfter(e,E),Pk(i,e),e};bf(a,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),o=c.startContainer,l=c.startOffset;var b,y,C=!(!n||!n.shiftKey),n=!(!n||!n.ctrlKey);G(o)&&o.hasChildNodes()&&!f&&(s=l>o.childNodes.length-1,o=o.childNodes[Math.min(l,o.childNodes.length-1)]||o,l=s&&D(o)?o.data.length:0);let w=Dk(a,o);if(!w||((e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return null!==t&&"false"===e.dom.getContentEditableParent(t)})(i,o))return;C||(o=((a,o,i,l,s)=>{var e;let d=a.dom,t=null!=(u=Dk(d,l))?u:d.getRoot();var c=d.getParent(l,d.isBlock);if(!c||!Wk(d,c)){if(!(c=c||t).hasChildNodes()){let e=d.create(o);return Ik(a,e),c.appendChild(e),i.setStart(e,0),i.setEnd(e,0),e}let r,n=l;for(;n&&n.parentNode!==c;)n=n.parentNode;for(;n&&!d.isBlock(n);)n=(r=n).previousSibling;var u=null==(e=null==r?void 0:r.parentElement)?void 0:e.nodeName;if(r&&u&&a.schema.isValidChild(u,o.toLowerCase())){let e=r.parentNode,t=d.create(o);for(Ik(a,t),e.insertBefore(t,r),n=r;n&&!d.isBlock(n);){let e=n.nextSibling;t.appendChild(n),n=e}i.setStart(l,s),i.setEnd(l,s)}}return l})(i,u,c,o,l));let E=a.getParent(o,a.isBlock)||a.getRoot(),x=(r=z(null==E?void 0:E.parentNode)?a.getParent(E.parentNode,a.isBlock):null,t=E?E.nodeName.toUpperCase():"",r?r.nodeName.toUpperCase():"");if("LI"!==x||n||(r=(E=r).parentNode,t=x),G(r)&&(b=i,y=E,!C)&&y.nodeName.toLowerCase()===Js(b)&&b.dom.isEmpty(y)&&(e=>{let t=y;for(;t&&t!==e&&I(t.nextSibling);){let e=t.parentElement;if(!e||(r=e,!ae(b.schema.getTextBlockElements(),r.nodeName.toLowerCase())))return ka(e);t=e}var r;return!1})(b.getBody()))n=i,C=p,N=E,C=C(Js(n)),(S=n.dom.getParent(N,ka))&&(n.dom.insertAfter(C,S),Pk(n,C),1<(null!=(S=null==(C=null==(S=N.parentElement)?void 0:S.childNodes)?void 0:C.length)?S:0))&&n.dom.remove(N);else if(/^(LI|DT|DD)$/.test(t)&&G(r)&&a.isEmpty(E)){var _=i,k=p,C=r,S=E,n=u,N=_.dom,R=_.selection.getRng(),A=C.parentNode;if(C!==_.getBody()&&A){zk(T=C)&&zk(T.parentNode)&&(n="LI");var T=jk(S)?$k(S):void 0;let r=jk(S)&&T?k(n,{style:$k(S)}):k(n);if(Vk(C,S,!0)&&Vk(C,S,!1))if(Uk(C,"LI")){let e=Hk(C);N.insertAfter(r,e),(null==(k=C.parentNode)?void 0:k.firstChild)===C?N.remove(e):N.remove(C)}else N.replace(r,C);else{if(Vk(C,S,!0))Uk(C,"LI")?(N.insertAfter(r,Hk(C)),r.appendChild(N.doc.createTextNode(" ")),r.appendChild(C)):A.insertBefore(r,C);else if(Vk(C,S,!1))N.insertAfter(r,Hk(C));else{C=Hk(C);let e=R.cloneRange(),t=(e.setStartAfter(S),e.setEndAfter(C),e.extractContents());if("LI"===n&&(A=t).firstChild&&"LI"===A.firstChild.nodeName){let e=B(te(r.children,W),ce(ir("br")));r=t.firstChild,N.insertAfter(t,C),re(e,e=>kn(W(r),e)),T&&r.setAttribute("style",T)}else N.insertAfter(t,C),N.insertAfter(r,C)}N.remove(S)}Pk(_,r)}}else if(f||E!==i.getBody()&&Wk(a,E)){var O,k=E.parentNode;let o;if(f)o=p(u),m.fold(()=>{K(e,W(o))},e=>{xn(e,W(o))}),i.selection.setCursorLocation(o,0);else if(il(E))o=fl(E),a.isEmpty(E)&&Mk(E),Ik(i,o),Pk(i,o);else if(h(!1))o=v();else if(h(!0)&&k){let e=M.fromRangeStart(c),t=Lp(e),r=W(E),n=Zp(r,e,i.schema)?Qp(r,e,i.schema).bind(e=>ee.from(e.getNode())):ee.none(),a=(o=k.insertBefore(p(),E),qk(E,"HR")||t?o:n.getOr(E));Pk(i,a)}else{R=c,(A=R.cloneRange()).setStart(R.startContainer,Kk(!0,R.startContainer,R.startOffset)),A.setEnd(R.endContainer,Kk(!1,R.endContainer,R.endOffset));let e=A.cloneRange(),t=(e.setEndAfter(E),e.extractContents());T=t,re($n(W(T),nr),e=>{e=e.dom;e.nodeValue=nl(e.data)});{let e=t;for(;D(e)&&(e.data=e.data.replace(/^[\r\n]+/,"")),e=e.firstChild;);}o=t.firstChild,a.insertAfter(t,E),((r,n,a)=>{var o,i,l=[];if(a){let e=a;for(;e=e.firstChild;){if(r.isBlock(e))return;G(e)&&!n[e.nodeName.toLowerCase()]&&l.push(e)}let t=l.length;for(;t--;)(!(e=l[t]).hasChildNodes()||e.firstChild===e.lastChild&&""===(null==(o=e.firstChild)?void 0:o.nodeValue)||(o=r,(i=e)&&"A"===i.nodeName&&o.isEmpty(i)))&&r.remove(e)}})(a,d,o),C=a,(_=E).normalize(),(!(O=_.lastChild)||G(O)&&/^(left|right)$/gi.test(C.getStyle(O,"float",!0)))&&C.add(_,"br"),a.isEmpty(E)&&Mk(E),o.normalize(),a.isEmpty(o)?(a.remove(o),v()):(Ik(i,o),Pk(i,o))}a.setAttrib(o,"id",""),i.dispatch("NewBlock",{newBlock:o})}},fakeEventName:"insertParagraph"},Gk=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),jf(e,n)},Xk=(e,t)=>{var r=Sr("br");xn(W(t),r),e.undoManager.add()},Zk=(e,t)=>{Qk(e.getBody(),t)||_n(W(t),Sr("br"));var r=Sr("br");_n(W(t),r),Gk(e,r.dom,!1),e.undoManager.add()},Qk=(e,t)=>{return r=M.after(t),!!L(r.getNode())||Yu(e,M.after(t)).map(e=>L(e.getNode())).getOr(!1);var r},Jk=e=>e&&"A"===e.nodeName&&"href"in e,eS=e=>e.fold(h,Jk,Jk,h),tS=(e,t)=>{t.fold(H,C(Xk,e),C(Zk,e),H)},rS={insert:(s,d)=>{m=s,c=C(Nh,m),g=M.fromRangeStart(m.selection.getRng());var c=Rw(c,m.getBody(),g).filter(eS);if(c.isSome())c.each(C(tS,s));else{var u=s,m=d;let e=u.selection,t=u.dom,r=e.getRng(),n,a=!1,o=(bf(t,r).each(e=>{r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset)}),r.startOffset),i=r.startContainer;if(G(i)&&i.hasChildNodes()){let e=o>i.childNodes.length-1;i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=e&&D(i)?i.data.length:0}let l=t.getParent(i,t.isBlock);var g=l&&l.parentNode?t.getParent(l.parentNode,t.isBlock):null,c=g?g.nodeName.toUpperCase():"",m=!(!m||!m.ctrlKey);"LI"!==c||m||(l=g),D(i)&&o>=i.data.length&&(((e,t,r)=>{for(var n,a=new Gn(t,r),o=e.getNonEmptyElements();n=a.next();)if(o[n.nodeName.toLowerCase()]||D(n)&&0<n.length)return!0;return!1})(u.schema,i,l||t.getRoot())||(n=t.create("br"),r.insertNode(n),r.setStartAfter(n),r.setEndAfter(n),a=!0)),n=t.create("br"),rs(t,r,n),Gk(u,n,a),u.undoManager.add()}},fakeEventName:"insertLineBreak"},nS=(e,t)=>Lk(e).filter(e=>0<t.length&&Tr(W(e),t)).isSome(),aS=ks([{br:[]},{block:[]},{none:[]}]),oS=(e,t)=>(e=e,nS(e,nd(e))),iS=r=>(e,t)=>(e=e,Lk(e).filter(e=>Gi(W(e))).isSome()===r),lS=(r,n)=>(e,t)=>(e=e,Lk(e).fold(J(""),e=>e.nodeName.toUpperCase())===r.toUpperCase()===n),sS=e=>{e=Dk(e.dom,e.selection.getStart());return U(e)},dS=e=>lS("pre",e),cS=r=>(e,t)=>Qs(e)===r,uS=(e,t)=>(e=e,nS(e,rd(e))),mS=(e,t)=>t,gS=e=>{var t=Js(e),r=Dk(e.dom,e.selection.getStart());return z(r)&&e.schema.isValidChild(r.nodeName,t)},fS=e=>{var e=e.selection.getRng(),t=W(e.startContainer),t=$r(t,e.startOffset).map(e=>tr(e)&&!un(e));return e.collapsed&&t.getOr(!0)},pS=(e,t)=>(r,n)=>he(e,(e,t)=>e&&t(r,n),!0)?ee.some(t):ee.none(),hS=(e,t,r)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||t.execCommand("delete"),z(r)&&Rk(t,e.fakeEventName).isDefaultPrevented())||(e.insert(t,r),z(r)&&Nk(t,e.fakeEventName))},vS=(e,t)=>{if(!e.mode.isReadOnly()){var r,n,a=()=>hS(rS,e,t),o=()=>hS(Yk,e,t),i=(r=e,n=t,bw([pS([oS],aS.none()),pS([dS(!0),sS],aS.none()),pS([lS("summary",!0)],aS.br()),pS([dS(!0),cS(!1),mS],aS.br()),pS([dS(!0),cS(!1)],aS.block()),pS([dS(!0),cS(!0),mS],aS.block()),pS([dS(!0),cS(!0)],aS.br()),pS([iS(!0),mS],aS.br()),pS([iS(!0)],aS.block()),pS([uS],aS.br()),pS([mS],aS.br()),pS([gS],aS.block()),pS([fS],aS.block())],[r,!(!n||!n.shiftKey)]).getOr(aS.none()));switch(td(e)){case"linebreak":i.fold(a,a,H);break;case"block":i.fold(o,o,H);break;case"invert":i.fold(o,a,H);break;default:i.fold(a,o,H)}}},bS=Mt(),yS=bS.os.isiOS()&&bS.browser.isSafari(),CS=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact(()=>{vS(e,t)}))},wS=Mt(),ES=e=>e.stopImmediatePropagation(),xS=e=>e.keyCode===ie.PAGE_UP||e.keyCode===ie.PAGE_DOWN,_S=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",ES,!0):!r&&e.get()&&t.off("NodeChange",ES),e.set(r)},kS=(e,t)=>e===t||e.contains(t),SS=(r,n)=>{var e=n.container(),t=n.offset();return D(e)?(e.insertData(t,r),ee.some(M(e,t+r.length))):Nu(n).map(e=>{var t=Nr(r);return(n.isAtEnd()?_n:xn)(e,t),M(t.dom,r.length)})},NS=C(SS,Zn),RS=C(SS," "),AS=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},TS=a=>{let o=M.fromRangeStart(a.selection.getRng()),i=W(a.getBody());var e,t,r;return a.selection.isCollapsed()?(e=C(Nh,a),t=M.fromRangeStart(a.selection.getRng()),Rw(e,a.getBody(),t).bind((r=i,e=>e.fold(e=>Gu(r.dom,M.before(e)),e=>Xu(e),e=>Zu(e),e=>Yu(r.dom,M.after(e))))).map(e=>()=>{return t=i,r=o,n=a.schema,(e=>(ih(t,e,n)?NS:RS)(r))(e).each(AS(a));var t,r,n})):ee.none()},OS=n=>{return Yt(F.browser.isFirefox()&&n.selection.isEditable()&&(e=n.dom,t=n.selection.getRng().startContainer,e.isEditable(e.getParent(t,"summary"))),()=>{var e,t,r=W(n.getBody());n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),r=r,e=M.fromRangeStart(n.selection.getRng()),t=n.schema,(ih(r,e,t)?NS:RS)(e).each(AS(n))});var e,t},BS=e=>Bc(e)?[{keyCode:ie.TAB,action:v($x,e,!0)},{keyCode:ie.TAB,shiftKey:!0,action:v($x,e,!1)}]:[],PS=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pk(e),lC(e))return Da(null);var t=CE(e);(g=e).on("beforeinput",e=>{g.selection.isEditable()&&!$(e.getTargetRanges(),e=>{return t=g,e=e,!(!kS(t.getBody(),e.startContainer)||!kS(t.getBody(),e.endContainer)||Hf(t.dom,e));var t})||e.preventDefault()}),(m=e).on("keyup compositionstart",C(ax,m)),u=t,(c=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=c,r=u,n=e,e=F.os.isMacOS()||F.os.isiOS(),hx([{keyCode:ie.RIGHT,action:v(lx,t,!0)},{keyCode:ie.LEFT,action:v(lx,t,!1)},{keyCode:ie.UP,action:v(sx,t,!1)},{keyCode:ie.DOWN,action:v(sx,t,!0)},...e?[{keyCode:ie.UP,action:v(cx,t,!1),metaKey:!0,shiftKey:!0},{keyCode:ie.DOWN,action:v(cx,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ie.RIGHT,action:v(Ux,t,!0)},{keyCode:ie.LEFT,action:v(Ux,t,!1)},{keyCode:ie.UP,action:v(zx,t,!1)},{keyCode:ie.DOWN,action:v(zx,t,!0)},{keyCode:ie.UP,action:v(zx,t,!1)},{keyCode:ie.UP,action:v(gx,t,!1)},{keyCode:ie.DOWN,action:v(gx,t,!0)},{keyCode:ie.RIGHT,action:v(bx,t,!0)},{keyCode:ie.LEFT,action:v(bx,t,!1)},{keyCode:ie.UP,action:v(yx,t,!1)},{keyCode:ie.DOWN,action:v(yx,t,!0)},{keyCode:ie.RIGHT,action:v(bE,t,r,!0)},{keyCode:ie.LEFT,action:v(bE,t,r,!1)},{keyCode:ie.RIGHT,ctrlKey:!e,altKey:e,action:v(wE,t,r)},{keyCode:ie.LEFT,ctrlKey:!e,altKey:e,action:v(EE,t,r)},{keyCode:ie.UP,action:v(mx,t,!1)},{keyCode:ie.DOWN,action:v(mx,t,!0)}],n).each(e=>{n.preventDefault()}))});{var s=e,d=t;let n=!1;s.on("keydown",a=>{if(n=a.keyCode===ie.BACKSPACE,!a.isDefaultPrevented()){var o=s,i=d,l=a;let t=l.keyCode===ie.BACKSPACE?"deleteContentBackward":"deleteContentForward",r=o.selection.isCollapsed(),e=r?"character":"selection",n=e=>r?e?"word":"line":"selection";vx([{keyCode:ie.BACKSPACE,action:v(WE,o)},{keyCode:ie.BACKSPACE,action:v(tw,o,!1)},{keyCode:ie.DELETE,action:v(tw,o,!0)},{keyCode:ie.BACKSPACE,action:v(K1,o,!1)},{keyCode:ie.DELETE,action:v(K1,o,!0)},{keyCode:ie.BACKSPACE,action:v(SE,o,i,!1)},{keyCode:ie.DELETE,action:v(SE,o,i,!0)},{keyCode:ie.BACKSPACE,action:v(gv,o,!1)},{keyCode:ie.DELETE,action:v(gv,o,!0)},{keyCode:ie.BACKSPACE,action:v(kk,o,!1,e)},{keyCode:ie.DELETE,action:v(kk,o,!0,e)},...Ok?[{keyCode:ie.BACKSPACE,altKey:!0,action:v(kk,o,!1,n(!0))},{keyCode:ie.DELETE,altKey:!0,action:v(kk,o,!0,n(!0))},{keyCode:ie.BACKSPACE,metaKey:!0,action:v(kk,o,!1,n(!1))}]:[{keyCode:ie.BACKSPACE,ctrlKey:!0,action:v(kk,o,!1,n(!0))},{keyCode:ie.DELETE,ctrlKey:!0,action:v(kk,o,!0,n(!0))}],{keyCode:ie.BACKSPACE,action:v(lw,o,!1)},{keyCode:ie.DELETE,action:v(lw,o,!0)},{keyCode:ie.BACKSPACE,action:v(FE,o,!1)},{keyCode:ie.DELETE,action:v(FE,o,!0)},{keyCode:ie.BACKSPACE,action:v(z1,o,!1)},{keyCode:ie.DELETE,action:v(z1,o,!0)},{keyCode:ie.BACKSPACE,action:v(I1,o,!1)},{keyCode:ie.DELETE,action:v(I1,o,!0)},{keyCode:ie.BACKSPACE,action:v(LE,o,!1)},{keyCode:ie.DELETE,action:v(LE,o,!0)},{keyCode:ie.BACKSPACE,action:v(iw,o,!1)},{keyCode:ie.DELETE,action:v(iw,o,!0)}],l).filter(e=>o.selection.isEditable()).each(e=>{l.preventDefault(),Rk(o,t).isDefaultPrevented()||(e(),Nk(o,t))})}}),s.on("keyup",e=>{var t,r;e.isDefaultPrevented()||(t=s,e=e,r=n,hx([{keyCode:ie.BACKSPACE,action:v(ew,t)},{keyCode:ie.DELETE,action:v(ew,t)},...Ok?[{keyCode:ie.BACKSPACE,altKey:!0,action:v(ME,t)},{keyCode:ie.DELETE,altKey:!0,action:v(ME,t)},...r?[{keyCode:Bk?224:91,action:v(ME,t)}]:[]]:[{keyCode:ie.BACKSPACE,ctrlKey:!0,action:v(ME,t)},{keyCode:ie.DELETE,ctrlKey:!0,action:v(ME,t)}]],e)),n=!1})}{var o=e;let a=ee.none();o.on("keydown",e=>{var t,r,n;e.keyCode===ie.ENTER&&(yS&&!!(t=o.selection.getRng()).collapsed&&(n=t.startContainer,!!D(n))&&(r=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,n=n.data.charAt(t.startOffset-1),r.test(n))?(t=o,a=ee.some(t.selection.getBookmark()),t.undoManager.add()):CS(o,e))}),o.on("keyup",r=>{r.keyCode===ie.ENTER&&a.each(()=>{return e=r,(t=o).undoManager.undo(),a.fold(H,e=>t.selection.moveToBookmark(e)),CS(t,e),void(a=ee.none());var t,e})})}(l=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=l,r=e,vx([{keyCode:ie.SPACEBAR,action:v(TS,t)},{keyCode:ie.SPACEBAR,action:v(OS,t)}],r).each(e=>{r.preventDefault(),Rk(t,"insertText",{data:" "}).isDefaultPrevented()||(e(),Nk(t,"insertText",{data:" "}))}))}),(r=e).on("input",e=>{var t;e.isComposing||(t=r,e=W(t.getBody()),t.selection.isCollapsed()&&fh(e,M.fromRangeStart(t.selection.getRng()),t.schema).each(e=>{t.selection.setRng(e.toRange())}))}),(n=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=n,r=e,hx([...BS(t)],r).each(e=>{r.preventDefault()}))}),i=t,(a=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=a,r=i,n=e,e=F.os.isMacOS()||F.os.isiOS(),hx([{keyCode:ie.END,action:v(dx,t,!0)},{keyCode:ie.HOME,action:v(dx,t,!1)},...e?[]:[{keyCode:ie.HOME,action:v(cx,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ie.END,action:v(cx,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ie.END,action:v(Cx,t,!0)},{keyCode:ie.HOME,action:v(Cx,t,!1)},{keyCode:ie.END,action:v(xE,t,!0,r)},{keyCode:ie.HOME,action:v(xE,t,!1,r)}],n).each(e=>{n.preventDefault()}))});var a,i,n,r,l,c,u,m,g,f=e,p=t;if(!wS.os.isMacOS()){let a=Da(!1);f.on("keydown",e=>{xS(e)&&_S(a,f,!0)}),f.on("keyup",e=>{var t,r,n;e.isDefaultPrevented()||(t=f,r=p,n=e,hx([{keyCode:ie.PAGE_UP,action:v(xE,t,!1,r)},{keyCode:ie.PAGE_DOWN,action:v(xE,t,!0,r)}],n)),xS(e)&&a.get()&&(_S(a,f,!1),f.nodeChanged())})}return t};class DS{constructor(r){let n,t=(this.lastPath=[],this.editor=r,this);"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",e=>{var t=r.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&uf(t,n)||r.dispatch("SelectionChange"),n=t}),r.on("contextmenu",()=>{Pg(r),r.dispatch("SelectionChange")}),r.on("SelectionChange",()=>{var e=r.selection.getStart(!0);e&&_m(r)&&!t.isSameElementPath(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",e=>{!e.isDefaultPrevented()&&_m(r)&&("IMG"===r.selection.getNode().nodeName?Mg.setEditorTimeout(r,()=>{r.nodeChanged()}):r.nodeChanged())})}nodeChanged(e={}){var n=this.editor,a=n.selection;let o;if(n.initialized&&a&&!Kd(n)&&!zc(n)){let t=n.getBody(),r=((o=a.getStart(!0)||t).ownerDocument===n.getDoc()&&n.dom.isChildOf(o,t)||(o=t),[]);n.dom.getParent(o,e=>e===t||(r.push(e),!1)),n.dispatch("NodeChange",{...e,element:o,parents:r})}}isSameElementPath(e){let t;var r=this.editor,n=xe(r.dom.getParents(e,S,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}let LS=Mi("image"),MS=Mi("event"),IS=t=>e=>{e[MS]=t},FS=IS(0),US=IS(2),zS=IS(1),jS=e=>ee.from(e[MS]).exists(e=>0===e),HS=Mi("mode"),VS=t=>e=>{e[HS]=t},$S=(e,t)=>VS(t)(e),qS=VS(0),WS=VS(2),KS=VS(1),YS=t=>e=>ee.from(e[HS]).exists(e=>e===t),GS=YS(0),XS=YS(1),ZS=["none","copy","link","move"],QS=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],JS=()=>{let a=new window.DataTransfer,t="move",r="all",o={get dropEffect(){return t},set dropEffect(e){V(ZS,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){jS(o)&&V(QS,e)&&(r=e)},get items(){return r=o,{...n=a.items,get length(){return n.length},add:(e,t)=>{if(GS(r)){if(!Z(e))return n.add(e);if(!b(t))return n.add(e,t)}return null},remove:e=>{GS(r)&&n.remove(e)},clear:()=>{GS(r)&&n.clear()}};var r,n},get files(){return XS(o)?Object.freeze({length:0,item:e=>null}):a.files},get types(){return a.types},setDragImage:(e,t,r)=>{var n;GS(o)&&(n={image:e,x:t,y:r},o[LS]=n,a.setDragImage(e,t,r))},getData:e=>XS(o)?"":a.getData(e),setData:(e,t)=>{GS(o)&&a.setData(e,t)},clearData:e=>{GS(o)&&a.clearData(e)}};return qS(o),o},eN=(e,t)=>e.setData("text/html",t),tN="x-tinymce/html",rN=J(tN),nN="\x3c!-- "+tN+" --\x3e",aN=e=>nN+e,oN=e=>-1!==e.indexOf(nN),iN="%MCEPASTEBIN%",lN=e=>e.dom.get("mcepastebin"),sN=e=>z(e)&&"mcepastebin"===e.id,dN=e=>e===iN,cN=(t,e)=>(oe.each(e,e=>{t=p(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])}),t),uN=e=>cN(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?Zn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),mN=(e,t)=>({content:e,cancelled:t}),gN=(e,t)=>(e.insertContent(t,{merge:vc(e),paste:!0}),!0),fN=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),pN=(e,t,r)=>{return!(e.selection.isCollapsed()||!fN(t)||(a=t,o=r,(n=e).undoManager.extra(()=>{o(n,a)},()=>{n.execCommand("mceInsertLink",!1,a)}),0));var n,a,o},hN=(e,t,r)=>{return i=e,l=t,!(!fN(l)||!$(Oc(i),e=>st(l.toLowerCase(),"."+e.toLowerCase()))||(a=t,o=r,(n=e).undoManager.extra(()=>{o(n,a)},()=>{n.insertContent('<img src="'+a+'">')}),0));var n,a,o,i,l},vN=(()=>{let e=0;return()=>"mceclip"+e++})(),bN=e=>{var t=JS();return eN(t,e),WS(t),t},yN=(l,t,s,o,r)=>{var n=(()=>{var r=l,e=t,n=s,e=r.dispatch("PastePreProcess",{content:e,internal:n}),a=(o=r,a=e.content,(i=Ny({sanitize:Ac(o),sandbox_iframes:Lc(o),sandbox_iframes_exclusions:Mc(o),convert_unsafe_embeds:Ic(o)},o.schema)).addNodeFilter("meta",e=>{oe.each(e,e=>{e.remove()})}),i=i.parse(a,{forced_root_block:!1,isRootContent:!0}),vp({validate:!0},o.schema).serialize(i));if(!r.hasEventListeners("PastePostProcess")||e.isDefaultPrevented())return mN(a,e.isDefaultPrevented());{var o=r,i=n;let e=o.dom.create("div",{style:"display:none"},a),t=o.dispatch("PastePostProcess",{node:e,internal:i});return mN(t.node.innerHTML,t.isDefaultPrevented())}})();if(!n.cancelled){let a=n.content,e=()=>{var e,t,r,n;e=l,t=a,o||!bc(e)?gN(e,t):(r=e,n=t,oe.each([pN,hN,gN],e=>!e(r,n,gN)))};r?Rk(l,"insertFromPaste",{dataTransfer:bN(a)}).isDefaultPrevented()||(e(),Nk(l,"insertFromPaste")):e()}},CN=(e,t,r,n)=>{r=r||oN(t);yN(e,t.replace(nN,""),r,!1,n)},wN=(e,t,r)=>{t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=((e,r,t)=>{let n=e.split(/\n\n/),a=(e=>{let t="<"+r;e=ze(e,(e,t)=>t+'="'+_o.encodeAllRaw(e)+'"');return e.length&&(t+=" "+e.join(" ")),t+">"})(t),o="</"+r+">",i=te(n,e=>e.split(/\n/).join("<br />"));return 1===i.length?i[0]:te(i,e=>a+e+o).join("")})(ra(t,Cc(e)),Js(e),ed(e));yN(e,t,!1,!0,r)},EN=t=>{var r={};if(t&&t.types)for(let e=0;e<t.types.length;e++){var n=t.types[e];try{r[n]=t.getData(n)}catch(t){r[n]=""}}return r},xN=(e,t)=>t in e&&0<e[t].length,_N=e=>xN(e,"text/html")||xN(e,"text/plain"),kN=(t,e,r)=>{var n,a="paste"===e.type?e.clipboardData:e.dataTransfer;if(uc(t)&&a){n=t,o=(a=a).items?we(Te(a.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],a=a.files?Te(a.files):[];var o=B(0<o.length?o:a,(e=>{let t=Oc(e);return r=>lt(r.type,"image/")&&$(t,e=>{return e=e.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(oe.hasOwn(t,e)?"image/"+t[e]:"image/"+e)===r.type;var t})})(n));if(0<o.length)return e.preventDefault(),a=o,Promise.all(te(a,t=>r0(t).then(e=>({file:t,uri:e})))).then(e=>{r&&t.selection.setRng(r),re(e,e=>{var l,s;l=t,s=e,e0(s.uri).each(({data:e,type:t,base64Encoded:r})=>{var n,a,r=r?e:btoa(e),e=s.file,o=l.editorUpload.blobCache,t=o.getByData(r,t),i=null!=t?t:(t=l,o=o,e=e,r=r,i=vN(),n=ld(t)&&z(e.name),t=n?(t=t,a=e.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i),z(a)?t.dom.encode(a[1]):void 0):i,a=n?e.name:void 0,n=o.create(i,e,r,t,a),o.add(n),n);CN(l,`<img src="${i.blobUri()}">`,!1,!0)})})}),!0}return!1},SN=(e,t,r,n,a)=>{let o=uN(r);var r=xN(t,rN())||oN(r),i=!r&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(o),l=fN(o);((n=dN(o)||!o.length||i&&!l?!0:n)||l)&&(o=xN(t,"text/plain")&&i?t["text/plain"]:(e=>{let n=jo(),t=Ny({},n),a="",o=n.getVoidElements(),i=oe.makeMap("script noscript style textarea video audio iframe object"," "),l=n.getBlockElements(),s=t=>{var e=t.name,r=t;if("br"!==e){if("wbr"!==e)if(o[e]&&(a+=" "),i[e])a+=" ";else{if(3===t.type&&(a+=t.value),!(t.name in n.getVoidElements())){let e=t.firstChild;if(e)for(;s(e),e=e.next;);}l[e]&&r.next&&(a+="\n","p"===e)&&(a+="\n")}}else a+="\n"};return e=cN(e,[/<!\[[^\]]+\]>/g]),s(t.parse(e)),a})(o)),dN(o)||(n?wN(e,o,a):CN(e,o,r,a))},NN=(e,t,r)=>{{var o=e,i=t,l=r;let a;o.on("keydown",e=>{var t;t=e,(ie.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!e.isDefaultPrevented()&&(a=e.shiftKey&&86===e.keyCode)}),o.on("paste",e=>{if(!e.isDefaultPrevented()&&(n=e,!F.os.isAndroid()||0!==(null==(n=null==(n=n.clipboardData)?void 0:n.items)?void 0:n.length))){var n;let t="text"===l.get()||a,r=(a=!1,EN(e.clipboardData));!_N(r)&&kN(o,e,i.getLastRng()||o.selection.getRng())||(xN(r,"text/html")?(e.preventDefault(),SN(o,r,r["text/html"],t,!0)):xN(r,"text/plain")&&xN(r,"text/uri-list")?(e.preventDefault(),SN(o,r,r["text/plain"],t,!0)):(i.create(),Mg.setEditorTimeout(o,()=>{var e=i.getHtml();i.remove(),SN(o,r,e,t,!1)},0)))}})}var a;(a=e).parser.addNodeFilter("img",(e,t,r)=>{if(!uc(a)&&!0===(null==(r=r.data)?void 0:r.paste))for(let t of e){let e=t.attr("src");Z(e)&&!t.attr("data-mce-object")&&e!==F.transparentSrc&&(n=e,lt(n,"webkit-fake-url")||!wc(a)&&(n=e,lt(n,"data:")))&&t.remove()}var n})},RN=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(rN(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},AN=l=>(e,t)=>{let{dom:r,selection:n}=l,a=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=r.create("div",{contenteditable:"true"},e),i=(r.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(o),r.add(l.getBody(),a),n.getRng());o.focus();e=r.createRng();e.selectNodeContents(o),n.setRng(e),Mg.setEditorTimeout(l,()=>{n.setRng(i),r.remove(a),t()},0)},TN=e=>({html:aN(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),ON=e=>!e.selection.isCollapsed()||!!(e=e).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),BN=(e,t)=>{var r;return wf.getCaretRangeFromPoint(null!=(r=t.clientX)?r:0,null!=(r=t.clientY)?r:0,e.getDoc())},PN=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},DN=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,LN=e=>oe.trim(e).replace(DN,Go).toLowerCase(),MN=(e,t,r)=>{let n=pc(e);if(!r&&"all"!==n&&hc(e)){let s=n?n.split(/[, ]/):[];if(s&&"none"!==n){let i=e.dom,l=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,r,n)=>{var a=i.parseStyle(i.decode(r)),o={};for(let n=0;n<s.length;n++){let e=a[s[n]],t=e,r=i.getStyle(l,s[n],!0);/color/.test(s[n])&&(t=LN(t),r=LN(r)),r!==t&&(o[s[n]]=e)}r=i.serializeStyle(o,"span");return r?t+' style="'+r+'"'+n:t+n})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)}return t},IN=a=>{let o=Da(!1),i=Da(yc(a)?"text":"html"),l=(i=>{let o=Da(null);return{create:()=>{var e=i,t=o,{dom:r,selection:n}=e,a=e.getBody(),t=(t.set(n.getRng()),r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},iN));F.browser.isFirefox()&&r.setStyle(t,"left","rtl"===r.getStyle(a,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),t.focus(),n.select(t,!0)},remove:()=>{var e=i,t=o,r=e.dom;if(lN(e)){for(var n,a=t.get();n=lN(e);)r.remove(n),r.unbind(n);a&&e.selection.setRng(a)}t.set(null)},getEl:()=>lN(i),getHtml:()=>{{var t=i;let r=t.dom,n=(e,t)=>{e.appendChild(t),r.remove(t,!0)},[a,...e]=B(t.getBody().childNodes,sN);re(e,e=>{n(a,e)});var o=r.select("div[id=mcepastebin]",a);for(let t=o.length-1;0<=t;t--){let e=r.create("div");a.insertBefore(e,o[t]),n(e,o[t])}return a?a.innerHTML:""}},getLastRng:o.get}})(a);var r,e,n,s,t,d,c;t=a,(F.browser.isChromium()||F.browser.isSafari())&&(d=t,c=MN,d.on("PastePreProcess",e=>{e.content=c(d,e.content,e.internal)})),n=a,s=i,n.addCommand("mceTogglePlainTextPaste",()=>{var e,t;e=n,"text"===(t=s).get()?(t.set("html"),Us(e,!1)):(t.set("text"),Us(e,!0)),e.focus()}),n.addCommand("mceInsertClipboardContent",(e,t)=>{t.html&&CN(n,t.html,t.internal,!1),t.text&&wN(n,t.text,!1)}),r=a,t=t=>e=>{t(r,e)},e=mc(r),j(e)&&r.on("PastePreProcess",t(e)),e=gc(r),j(e)&&r.on("PastePostProcess",t(e)),a.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===i.get()),a.on("PreInit",()=>{var d,c,r,e,t,n;(e=a).on("cut",(n=e,e=>{!e.isDefaultPrevented()&&ON(n)&&n.selection.isEditable()&&RN(e,TN(n),AN(n),()=>{if(F.browser.isChromium()||F.browser.isFirefox()){let e=n.selection.getRng();Mg.setEditorTimeout(n,()=>{n.selection.setRng(e),n.execCommand("Delete")},0)}else n.execCommand("Delete")})})),e.on("copy",(t=e,e=>{!e.isDefaultPrevented()&&ON(t)&&RN(e,TN(t),AN(t),H)})),d=a,c=o,cc(d)&&d.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),uc(d)||d.on("drop",e=>{var t=e.dataTransfer;t&&(t=t,$(t.files,e=>/^image\//.test(e.type)))&&e.preventDefault()}),d.on("drop",e=>{if(!e.isDefaultPrevented()){let l=BN(d,e);if(!U(l)){let o=EN(e.dataTransfer),i=xN(o,rN());if(_N(o)&&(!(s=o["text/plain"])||0!==s.indexOf("file://"))||!kN(d,e,l)){var s;let t=o[rN()],r=t||o["text/html"]||o["text/plain"],n=((e,t,r,n)=>{var a=e.getParent(r,e=>Ja(t,e));if(!I(e.getParent(r,"summary")))return!0;if(a&&ae(n,"text/html")){let e=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!I(e.querySelector(a.nodeName.toLowerCase()))}return!1})(d.dom,d.schema,l.startContainer,o),a=c.get();a&&!n||r&&(e.preventDefault(),Mg.setEditorTimeout(d,()=>{d.undoManager.transact(()=>{(t||a&&n)&&d.execCommand("Delete"),PN(d,l);var e=uN(r);o["text/html"]?CN(d,e,i,!0):wN(d,e,!0)})}))}}}}),d.on("dragstart",e=>{c.set(!0)}),d.on("dragover dragend",e=>{uc(d)&&!c.get()&&(e.preventDefault(),PN(d,BN(d,e))),"dragend"===e.type&&c.set(!1)}),(r=d).on("input",e=>{if("deleteByDrag"===e.inputType){let e=B(r.dom.select("details"),e=>I(e.querySelector("summary")));re(e,e=>{L(e.firstChild)&&e.firstChild.remove();var t=r.dom.create("summary");t.appendChild(Ji().dom),e.prepend(t)})}}),NN(a,l,i)})},FN=L,UN=D,zN=e=>E(e.dom),jN=t=>e=>P(W(t),e),HN=(e,t)=>on(W(e),zN,jN(t)),VN=(t,e,r)=>{var e=new Gn(t,e),n=(r?e.next:e.prev).bind(e);let a=t;for(let e=r?t:n();e&&!FN(e);e=n())Ll(e)&&(a=e);return a},$N=e=>{var t=((e,t,r)=>{let n=M.fromRangeStart(e).getNode(),a=(e=n,t=t,s=r,on(W(e),e=>{return t=e,ya(t.dom)||s.isBlock(q(e));var t},jN(t)).getOr(W(t)).dom),o=VN(n,a,!1),i=VN(n,a,!0),l=document.createRange();var s;return HN(o,a).fold(()=>{UN(o)?l.setStart(o,0):l.setStartBefore(o)},e=>l.setStartBefore(e.dom)),HN(i,a).fold(()=>{UN(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},e=>l.setEndAfter(e.dom)),l})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Av(t))},qN=((gk=lk=lk||{}).Before="before",gk.After="after",(e,t)=>Math.abs(e.left-t)),WN=(e,t)=>Math.abs(e.right-t),KN=(r,t)=>{return e=B(r,e=>t>=e.top&&t<=e.bottom),he(e,(e,a)=>e.fold(()=>ee.some(a),e=>{var t=Math.min(a.left,e.left),r=Math.min(a.top,e.top),n=Math.max(a.right,e.right),e=Math.max(a.bottom,e.bottom);return ee.some({top:r,right:n,bottom:e,left:t,width:n-t,height:e-r})}),ee.none()).fold(()=>[[],r],a=>{var{pass:e,fail:t}=fe(r,e=>{return n=e=e,r=t=a,n=Math.max(0,Math.min(n.bottom,r.bottom)-Math.max(n.top,r.top))/Math.min(e.height,t.height),e.top<t.bottom&&e.bottom>t.top&&.5<n;var t,r,n});return[e,t]});var e},YN=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),GN=(e,i,l,s)=>{let d=e=>Ll(e.node)?ee.some(e):G(e.node)?GN(Te(e.node.childNodes),i,l,!1):ee.none(),t=(e,a)=>{let o=Se(e,(e,t)=>a(e,i,l)-a(t,i,l));return Oe(o,d).map(e=>{return s&&!D(e.node)&&1<o.length?(t=e,r=o[1],n=a,d(r).filter(e=>Math.abs(n(t,i,l)-n(e,i,l))<2&&D(e.node)).getOr(e)):e;var t,r,n})},[r,n]=KN(tE(e),l),{pass:a,fail:o}=fe(n,e=>e.top<l);return t(r,YN).orThunk(()=>t(o,El)).orThunk(()=>t(a,El))},XN=(e,r,t)=>((e,t,r)=>{let a=W(e),n=Dr(a),o=Rr(n,t,r).filter(e=>Br(a,e)).getOr(a);{var i=a,l=t,s=r;let n=(t,e)=>{let r=B(t.dom.childNodes,ce(e=>G(e)&&e.classList.contains("mce-drag-container")));return e.fold(()=>GN(r,l,s,!0),t=>{var e=B(r,e=>e!==t.dom);return GN(e,l,s,!0)}).orThunk(()=>(P(t,i)?ee.none():Ir(t)).bind(e=>n(e,ee.some(t))))};return n(o,ee.none())}})(e,r,t).filter(e=>ru(e.node)).map(e=>{return t=r,{node:(e=e).node,position:qN(e,t)<WN(e,t)?lk.Before:lk.After};var t}),ZN=e=>{var t,r=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:r.top+(null!=(t=null==e?void 0:e.scrollY)?t:0)-n.clientTop,left:r.left+(null!=(t=null==e?void 0:e.scrollX)?t:0)-n.clientLeft}},QN=e=>({target:e,srcElement:e}),JN=(e,t,r,n)=>{l=e,r=(t=>{let r=JS(),e=(n=t,ee.from(n[HS]));var n;return WS(t),FS(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,n=t,ee.from(n[LS]).each(e=>r.setDragImage(e.image,e.x,e.y)),re(t.types,e=>{"Files"!==e&&r.setData(e,t.getData(e))}),re(t.files,e=>r.items.add(e)),n=t,ee.from(n[MS]).each(e=>{var t;t=r,e=e,IS(e)(t)}),e.each(e=>{$S(t,e),$S(r,e)}),r})(r),("dragstart"===l?(FS(r),qS):"drop"===l?(US(r),WS):(zS(r),KS))(r);var a,o,i,l=r;return b(n)?(r=e,a=t,o=l,i=g("Function not supported on simulated event."),{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:r,composedPath:i,initEvent:i,preventDefault:H,stopImmediatePropagation:H,stopPropagation:H,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:o,...QN(a)}):(r=e,i=t,o=l,{...n,dataTransfer:o,type:r,...QN(i)})},eR=E,tR=(sk=[eR,ya],t=>{for(let e=0;e<sk.length;e++)if(sk[e](t))return!0;return!1}),rR=(e,t,r,n)=>{var e=e.dom,t=t.cloneNode(!0),a=(e.setStyles(t,{width:r,height:n}),e.setAttrib(t,"data-mce-selected",null),e.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}));return e.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),e.setStyles(t,{margin:0,boxSizing:"border-box"}),a.appendChild(t),a},nR=(r,n)=>t=>()=>{var e="left"===r?t.scrollX:t.scrollY;t.scroll({[r]:e+n,behavior:"smooth"})},aR=nR("left",-32),oR=nR("left",32),iR=nR("top",-32),lR=nR("top",32),sR=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},dR=(e,t,r,n,a)=>{"dragstart"===t&&eN(n,e.dom.getOuterHTML(r));r=JN(t,r,n,a);return e.dispatch(t,r)},cR=(e,w)=>{let n=wi((e,t)=>{return n=e,a=t,(r=w)._selectionOverrides.hideFakeCaret(),void XN(r.getBody(),n,a).fold(()=>r.selection.placeCaretAt(n,a),e=>{e=r._selectionOverrides.showCaret(1,e.node,e.position===lk.Before,!1);e?r.selection.setRng(e):r.selection.placeCaretAt(n,a)});var r,n,a},0),E=(w.on("remove",n.cancel),e);return C=>e.on(s=>{let e=Math.max(Math.abs(C.screenX-s.screenX),Math.abs(C.screenY-s.screenY));if(!s.dragging&&10<e){let e=dR(w,"dragstart",s.element,s.dataTransfer,C);if(z(e.dataTransfer)&&(s.dataTransfer=e.dataTransfer),e.isDefaultPrevented())return;s.dragging=!0,w.focus()}if(s.dragging){let i=C.currentTarget===w.getDoc().documentElement,l=(g=s,y=C,h=(h=f=w).inline?ZN(h.getBody()):{left:0,top:0},b=(v=f).getBody(),v=v.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0},b=f,{pageX:(t={pageX:(b=(f=y).target.ownerDocument!==b.getDoc()?(y=ZN(b.getContentAreaContainer()),r=(b=b).getBody(),p=b.getDoc().documentElement,t={left:r.scrollLeft,top:r.scrollTop},r={left:r.scrollLeft||p.scrollLeft,top:r.scrollTop||p.scrollTop},p=b.inline?t:r,{left:f.pageX-y.left+p.left,top:f.pageY-y.top+p.top}):{left:f.pageX,top:f.pageY}).left-h.left+v.left,pageY:b.top-h.top+v.top}).pageX-g.relX,pageY:t.pageY+5});r=s.ghost,y=w.getBody(),r.parentNode!==y&&y.appendChild(r);{p=s.ghost;f=l;b=s.width;h=s.height;v=s.maxX;g=s.maxY;var d=C.clientY;var c=C.clientX;y=w.getContentAreaContainer();var u=w.getWin();s=E;var m=i;let e=0,t=0,r=(p.style.left=f.pageX+"px",p.style.top=f.pageY+"px",v<f.pageX+b&&(e=f.pageX+b-v),g<f.pageY+h&&(t=f.pageY+h-g),p.style.width=b-e+"px",p.style.height=h-t+"px",y.clientHeight),n=y.clientWidth,a=d+y.getBoundingClientRect().top,o=c+y.getBoundingClientRect().left;s.on(e=>{e.intervalId.clear(),e.dragging&&m&&(d+8>=r?e.intervalId.set(lR(u)):d-8<=0?e.intervalId.set(iR(u)):c+8>=n?e.intervalId.set(oR(u)):c-8<=0?e.intervalId.set(aR(u)):a+16>=window.innerHeight?e.intervalId.set(lR(window)):a-16<=0?e.intervalId.set(iR(window)):o+16>=window.innerWidth?e.intervalId.set(oR(window)):o-16<=0&&e.intervalId.set(aR(window)))})}n.throttle(C.clientX,C.clientY)}var g,f,p,t,h,v,b,r,y})},uR=(e,r,n)=>{e.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>dR(r,"dragend",t.element,t.dataTransfer),e=>dR(r,"dragend",t.element,t.dataTransfer,e))}),mR(e)},mR=e=>{e.on(e=>{e.intervalId.clear(),sR(e.ghost)}),e.clear()},gR=t=>{let r=Ma(),e=X.DOM,n=document,a=(m=r,g=t,e=>{var t,r,n,a;0===e.button&&(t=be(g.dom.getParents(e.target),tR).getOr(null),z(t))&&(r=g.dom,n=g.getBody(),a=t,eR(a))&&a!==n&&r.isEditable(a.parentElement)&&(n=g.dom.getPos(t),r=g.getBody(),a=g.getDoc().documentElement,m.set({element:t,dataTransfer:JS(),dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(g.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(g.inline?r.scrollHeight:a.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:rR(g,t,t.offsetWidth,t.offsetHeight),intervalId:La(100)}))}),o=cR(r,t),i=(c=r,a=>{c.on(n=>{var e,t,r;n.intervalId.clear(),n.dragging&&(t=(e=>{var t=e.getSel();if(z(t)){let e=t.getRangeAt(0).startContainer;return D(e)?e.parentNode:e}return null})((e=u).selection),r=n.element,U(t)||t===r||e.dom.isChildOf(t,r)||!e.dom.isEditable(t)||(e=null!=(r=u.getDoc().elementFromPoint(a.clientX,a.clientY))?r:u.getBody(),dR(u,"drop",e,n.dataTransfer,a).isDefaultPrevented())||u.undoManager.transact(()=>{var e,t,r;e=u.dom,t=n.element,r=e.getParent(t.parentNode,e.isBlock),sR(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&el(W(r)),(""===(t=n.dataTransfer.getData("text/html"))?ee.none():ee.some(t)).each(e=>u.insertContent(e)),u._selectionOverrides.hideFakeCaret()}),dR(u,"dragend",u.getBody(),n.dataTransfer,a))}),mR(c)}),l=(s=r,e=>uR(s,d,ee.some(e)));var s,d,c,u,m,g;(d=u=t).on("mousedown",a),t.on("mousemove",o),t.on("mouseup",i),e.bind(n,"mousemove",o),e.bind(n,"mouseup",l),t.on("remove",()=>{e.unbind(n,"mousemove",o),e.unbind(n,"mouseup",l)}),t.on("keydown",e=>{e.keyCode===ie.ESC&&uR(r,t,ee.none())})},fR=E,pR=(e,t)=>fv(e.getBody(),t),hR=s=>{let d=s.selection,c=s.dom,u=s.getBody(),a=Jc(s,u,c.isBlock,()=>Wg(s)),i="sel-"+c.uniqueId(),n="data-mce-selected",l,m=e=>e!==u&&(fR(e)||xa(e))&&c.isChildOf(e,u)&&c.isEditable(e.parentNode),g=(e,t,r,n=!0)=>s.dispatch("ShowCaret",{target:t,direction:e,before:r}).isDefaultPrevented()?null:(n&&d.scrollIntoView(t,-1===e),a.show(r,t)),t=e=>sl(e)||ml(e)||gl(e),r=e=>t(e.startContainer)||t(e.endContainer),f=(a,o)=>{if(a)if(a.collapsed){if(!r(a)){let e=o?1:-1,t=Su(e,u,a),r=t.getNode(!o);if(z(r)){if(ru(r))return g(e,r,!!o&&!t.isAtEnd(),!1);if(ll(r)&&E(r.nextSibling)){let e=c.createRng();return e.setStart(r,0),e.setEnd(r,0),e}}let n=t.getNode(o);if(z(n)){if(ru(n))return g(e,n,!o&&!t.isAtEnd(),!1);if(ll(n)&&E(n.previousSibling)){let e=c.createRng();return e.setStart(n,1),e.setEnd(n,1),e}}}}else{let e=a.startContainer,t=a.startOffset;o=a.endOffset;if(D(e)&&0===t&&fR(e.parentNode)&&(e=e.parentNode,t=c.nodeIndex(e),e=e.parentNode),G(e)&&o===t+1&&e===a.endContainer){let r=e.childNodes[t];if(m(r)){o=r;a=o.cloneNode(!0),a=s.dispatch("ObjectSelected",{target:o,targetClone:a});if(a.isDefaultPrevented())return null;let e=((e,t)=>{let r=W(s.getBody()),n=s.getDoc(),a=dn(r,"#"+i).getOrThunk(()=>{var e=kr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',n);return sr(e,"id",i),K(r,e),e}),o=c.createRng();Rn(a),Nn(a,[Nr(Zn,n),W(t),Nr(Zn,n)]),o.setStart(a.dom.firstChild,1),o.setEnd(a.dom.lastChild,0),vn(a,{top:c.getPos(e,s.getBody()).y+"px"}),yg(a);t=d.getSel();return t&&(t.removeAllRanges(),t.addRange(o)),o})(o,a.targetClone),t=W(o);return re(qn(W(s.getBody()),`*[${n}]`),e=>{P(t,e)||gr(e,n)}),c.getAttrib(o,n)||o.setAttribute(n,"1"),l=o,h(),e;return}}}return null},p=()=>{l&&l.removeAttribute(n),dn(W(s.getBody()),"#"+i).each(Y),l=null},h=()=>{a.hide()};if(!lC(s)){s.on("click",e=>{c.isEditable(e.target)||(e.preventDefault(),s.focus())}),s.on("blur NewBlock",p),s.on("ResizeWindow FullscreenStateChanged",a.reposition),s.on("tap",e=>{var t=e.target,r=pR(s,t);fR(r)?(e.preventDefault(),H1(s,r).each(f)):m(t)&&H1(s,t).each(f)},!0),s.on("mousedown",r=>{var e,t,n,a,o,i,l=r.target;if((l===u||"HTML"===l.nodeName||c.isChildOf(l,u))&&(e=s,t=r.clientX,n=r.clientY,i=W(e.getBody()),i=e.inline?i:W(Dr(i).dom.documentElement),e=e.inline,t=t,n=n,a=(o=i).dom.getBoundingClientRect(),t={x:t-(e?a.left+o.dom.clientLeft+MC(o):0),y:n-(e?a.top+o.dom.clientTop+LC(o):0)},n=i,e=t.x,a=t.y,o=PC(n),n=DC(n),0<=e)&&0<=a&&e<=o&&a<=n){p(),h();let t=pR(s,l);fR(t)?(r.preventDefault(),H1(s,t).each(f)):XN(u,r.clientX,r.clientY).each(e=>{r.preventDefault(),(e=g(1,e.node,e.position===lk.Before,!1))&&d.setRng(e),(oa(t)?t:s.getBody()).focus()})}}),s.on("keypress",e=>{ie.modifierPressed(e)||fR(d.getNode())&&e.preventDefault()}),s.on("GetSelectionRange",e=>{let t=e.range;l&&(l.parentNode?((t=t.cloneRange()).selectNode(l),e.range=t):l=null)}),s.on("SetSelectionRange",e=>{e.range=(t=e.range,r=s.schema.getVoidElements(),n=c.createRng(),i=t.startContainer,a=t.startOffset,o=t.endContainer,t=t.endOffset,ae(r,i.nodeName.toLowerCase())?0===a?n.setStartBefore(i):n.setStartAfter(i):n.setStart(i,a),ae(r,o.nodeName.toLowerCase())?0===t?n.setEndBefore(o):n.setEndAfter(o):n.setEnd(o,t),n);var t,r,n,a,o,i=f(e.range,e.forward);i&&(e.range=i)}),s.on("AfterSetSelectionRange",e=>{var e=e.range,t=e.startContainer.parentElement;r(e)||G(e=t)&&"mcepastebin"===e.id||h(),e=t,z(e)&&c.hasClass(e,"mce-offscreen-selection")||p()});var v=s;if(gR(v),Jd(v)){var b=v;let o=e=>{var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(V(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type)&&HC(b,"Dropped file type is not supported")},i=e=>{zg(b,e.target)&&o(e)},e=()=>{let t=X.DOM,r=b.dom,n=document,a=b.inline?b.getBody():b.getDoc(),e=["drop","dragover"];re(e,e=>{t.bind(n,e,i),r.bind(a,e,o)}),b.on("remove",()=>{re(e,e=>{t.unbind(n,e,i),r.unbind(a,e,o)})})};b.on("init",()=>{Mg.setEditorTimeout(b,e,0)})}{var o=s;let e=wi(()=>{var e;!o.removed&&o.getBody().contains(document.activeElement)&&(e=o.selection.getRng()).collapsed&&(e=V1(o,e,!1),o.selection.setRng(e))},0);o.on("focus",()=>{e.throttle()}),o.on("blur",()=>{e.cancel()})}(y=s).on("init",()=>{y.on("focusin",e=>{var r=e.target;if(xa(r)){let e=fv(y.getBody(),r),t=E(e)?e:r;y.selection.getNode()!==t&&H1(y,t).each(e=>y.selection.setRng(e))}})})}return{showCaret:g,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(fl(e),d.scrollIntoView(e))},hideFakeCaret:h,destroy:()=>{a.destroy(),l=null}};var y},vR=(t,e)=>{let r=e;for(let e=t.previousSibling;D(e);e=e.previousSibling)r+=e.data.length;return r},bR=(e,t,r,n,a)=>{if(D(r)&&(n<0||n>r.data.length))return[];var o=a&&D(r)?[vR(r,n)]:[n];let i=r;for(;i!==t&&i.parentNode;)o.push(e.nodeIndex(i,a)),i=i.parentNode;return i===t?o.reverse():[]},yR=(e,t,r,n,a,o,i=!1)=>({start:bR(e,t,r,n,i),end:bR(e,t,a,o,i)}),CR=(e,t)=>{let r=t.slice(),n=r.pop();return y(n)?he(r,(e,t)=>e.bind(e=>ee.from(e.childNodes[t])),ee.some(e)).bind(e=>D(e)&&(n<0||n>e.data.length)?ee.none():ee.some({node:e,offset:n})):ee.none()},wR=(e,t)=>CR(e,t.start).bind(({node:n,offset:a})=>CR(e,t.end).map(({node:e,offset:t})=>{var r=document.createRange();return r.setStart(n,a),r.setEnd(e,t),r})),ER=(e,t,r)=>{var n;t&&e.isEmpty(t)&&!r(t)&&(n=t.parentNode,e.remove(t,D(t.firstChild)&&ea(t.firstChild.data)),ER(e,n,r))},xR=(e,t,r,n=!0)=>{var a=t.startContainer.parentNode,o=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(D(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),D(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),ER(e,a,r),a!==o)&&ER(e,o,r)},_R=(e,t)=>ee.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),kR=(e,t,r)=>{r=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:As(r).concat(e.blockPatterns),inlinePatterns:Ts(r).concat(e.inlinePatterns)}},SR=(e,t,r,n)=>{e=e.createRng();return e.setStart(t,0),e.setEnd(r,n),e.toString()},NR=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),RR=(e,t)=>{e=e.createRng();return e.setStartAfter(t.start),e.setEndBefore(t.end),e},AR=(e,t,r)=>{var r=wR(e.getRoot(),r).getOrDie("Unable to resolve path range"),n=r.startContainer,a=r.endContainer,a=0===r.endOffset?a:a.splitText(r.endOffset),n=0===r.startOffset?n:n.splitText(r.startOffset),r=n.parentNode;return{prefix:t,end:a.parentNode.insertBefore(NR(e,t+"-end"),a),start:r.insertBefore(NR(e,t+"-start"),n)}},TR=(e,t,r)=>{ER(e,e.get(t.prefix+"-end"),r),ER(e,e.get(t.prefix+"-start"),r)},OR=e=>0===e.start.length,BR=(n,t,a,e)=>{let o=t.start;var r;return Zx(n,e.container,e.offset,(r=o,(e,t)=>{e=e.data.substring(0,t),t=e.lastIndexOf(r.charAt(r.length-1)),e=e.lastIndexOf(r);return-1!==e?e+r.length:-1!==t?t+1:-1}),a).bind(r=>{var e=null!=(e=null==(e=a.textContent)?void 0:e.indexOf(o))?e:-1;if(-1!==e&&r.offset>=e+o.length){let e=n.createRng();return e.setStart(r.container,r.offset-o.length),e.setEnd(r.container,r.offset),ee.some(e)}{let e=r.offset-o.length;return Gx(r.container,e,a).map(e=>{var t=n.createRng();return t.setStart(e.container,e.offset),t.setEnd(r.container,r.offset),t}).filter(e=>e.toString()===o).orThunk(()=>BR(n,t,a,qx(r.container,0)))}})},PR=(a,l,s,d)=>{let c=a.dom,u=c.getRoot(),m=s.pattern,e=s.position.container,t=s.position.offset;return Gx(e,t-s.pattern.end.length,l).bind(n=>{let i=yR(c,u,n.container,n.offset,e,t,d);if(OR(m))return ee.some({matches:[{pattern:m,startRng:i,endRng:i}],position:n});{let e=DR(a,s.remainingPatterns,n.container,n.offset,l,d),o=e.getOr({matches:[],position:n}),t=o.position,r=((t,e,r,n,a,o=!1)=>{if(0!==e.start.length||o)return Yx(r,n,a).bind(r=>BR(t,e,a,r).bind(e=>{var t;if(o){if(e.endContainer===r.container&&e.endOffset===r.offset)return ee.none();if(0===r.offset&&(null==(t=e.endContainer.textContent)?void 0:t.length)===e.endOffset)return ee.none()}return ee.some(e)}));{let e=t.createRng();return e.setStart(r,n),e.setEnd(r,n),ee.some(e)}})(c,m,t.container,t.offset,l,e.isNone());return r.map(e=>{[a,t,r,n=!1]=[c,u,e,d];var t,r,n,a=yR(a,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n);return{matches:o.matches.concat([{pattern:m,startRng:a,endRng:i}]),position:qx(e.startContainer,e.startOffset)}})}})},DR=(o,i,l,s,d,c)=>{let e=o.dom;return Yx(l,s,e.getRoot()).bind(t=>{var r=SR(e,d,l,s);for(let e=0;e<i.length;e++){var n=i[e];if(st(r,n.end)){var a=i.slice(),n=(a.splice(e,1),PR(o,d,{pattern:n,remainingPatterns:a,position:t},c));if(n.isNone()&&0<s)return DR(o,i,l,s-1,d,c);if(n.isSome())return n}}return ee.none()})},LR=(t,e,r)=>{t.selection.setRng(r),"inline-format"===e.type?re(e.format,e=>{t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},MR=(e,t,r,n,a,o)=>{var i,l;return i=DR(e,a.inlinePatterns,r,n,t,o).fold(()=>[],e=>e.matches),l=DR(e,(e=a.inlinePatterns,Se(e,(e,t)=>t.end.length-e.end.length)),r,n,t,o).fold(()=>[],e=>e.matches),a=Ee(i,t=>$(l,e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end)),i.length===l.length?a?i:l:i.length>l.length?i:l},IR=(m,r)=>{if(0!==r.length){let u=m.dom,e=m.selection.getBookmark(),t=((n,e)=>{let a=Mi("mce_textpattern"),o=pe(e,(e,t)=>{var r=AR(n,a+("_end"+e.length),t.endRng);return e.concat([{...t,endMarker:r}])},[]);return pe(o,(e,t)=>{var r=o.length-e.length-1,r=OR(t.pattern)?t.endMarker:AR(n,a+"_start"+r,t.startRng);return e.concat([{...t,startMarker:r}])},[])})(u,r);re(t,e=>{let t=u.getParent(e.startMarker.start,u.isBlock),r=e=>e===t;{var n,a,o,i;OR(e.pattern)?(n=m,a=e.pattern,o=e.endMarker,i=r,o=RR(n.dom,o),xR(n.dom,o,i),LR(n,a,o)):(i=m,n=e.pattern,a=e.startMarker,o=e.endMarker,l=r,s=i.dom,d=RR(s,o),c=RR(s,a),xR(s,c,l),xR(s,d,l),c={prefix:a.prefix,start:a.end,end:o.start},d=RR(s,c),LR(i,n,d))}var l,s,d,c;TR(u,e.endMarker,r),TR(u,e.startMarker,r)}),m.selection.moveToBookmark(e)}},FR=(n,a,t)=>((t,r)=>{if(D(t)&&t.length<=0)return ee.some(qx(t,0));{let e=ji(Wx);return ee.from(e.forwards(t,0,Kx(t),r)).map(e=>qx(e.container,0))}})(a,a).map(e=>{let r=e.container;return Xx(r,t.start.length,a).each(e=>{var t=n.createRng();t.setStart(r,0),t.setEnd(e.container,e.offset),xR(n,t,e=>e===a)}),r}),UR=o=>(t,e)=>{let r=t.dom,n=e.pattern,a=wR(r.getRoot(),e.range).getOrDie("Unable to resolve path range");return _R(t,a).each(e=>{"block-format"===n.type?(e=>{e=t.formatter.get(e);return Q(e)&&Re(e).exists(e=>ae(e,"block"))})(n.format)&&t.undoManager.transact(()=>{o(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(()=>{o(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),!0},zR=a=>(e,t)=>{e=e;let r=Se(e,(e,t)=>t.start.length-e.start.length),n=t.replace(Zn," ");return be(r,e=>a(e,t,n))},jR=(s,d)=>(e,t,r,n,a)=>{var o;void 0===a&&(a=null!=(o=t.textContent)?o:"");let i=e.dom,l=Js(e);return i.is(t,l)?s(r.blockPatterns,a).map(e=>d&&oe.trim(a).length===e.start.length?[]:[{pattern:e,range:yR(i,i.getRoot(),t,0,t,0,n)}]).getOr([]):[]},HR=UR((e,t,r)=>{FR(e,t,r).each(e=>{var e=W(e),t=Vi(e);/^\s[^\s]/.test(t)&&$i(e,t.slice(1))})}),VR=zR((e,t,r)=>0===t.indexOf(e.start)||0===r.indexOf(e.start)),$R=jR(VR,!0),qR=UR(FR),WR=zR((e,t,r)=>t===e.start||r===e.start),KR=jR(WR,!1),YR=(t,r,n)=>{for(let e=0;e<t.length;e++)if(n(t[e],r))return!0;return!1},GR=r=>{let t=[",",".",";",":","!","?"],n=[32],a=()=>{return e=Ec(r).filter(e=>"inline-command"!==e.type&&"block-command"!==e.type||r.queryCommandSupported(e.cmd)),t=xc(r),{inlinePatterns:Ts(e),blockPatterns:As(e),dynamicPatternsLookup:t};var e,t},s=()=>r.options.isSet("text_patterns_lookup"),o=(r.on("keydown",e=>{var t,o;13===e.keyCode&&!ie.modifierPressed(e)&&r.selection.isCollapsed()&&r.selection.isEditable()&&(0<(t=Os(a(),"enter")).inlinePatterns.length||0<t.blockPatterns.length||s())&&((n,a)=>{let o=n.selection.getRng();return _R(n,o).map(e=>{var t=Math.max(0,o.startOffset),r=kR(a,e,null!=(r=e.textContent)?r:"");return{inlineMatches:MR(n,e,o.startContainer,t,r,!0),blockMatches:$R(n,e,r,!0)}}).filter(({inlineMatches:e,blockMatches:t})=>0<t.length||0<e.length)})(o=r,t).fold(h,({inlineMatches:n,blockMatches:a})=>(o.undoManager.add(),o.undoManager.extra(()=>{o.execCommand("mceInsertNewLine")},()=>{o.insertContent(tl,{preserve_zwsp:!0}),IR(o,n),t=o,0!==(e=a).length&&(r=t.selection.getBookmark(),re(e,e=>HR(t,e)),t.selection.moveToBookmark(r));var t,e=o.selection.getRng(),r=Yx(e.startContainer,e.startOffset,o.dom.getRoot());o.execCommand("mceInsertNewLine"),r.each(e=>{var t=e.container;t.data.charAt(e.offset-1)===Xn&&(t.deleteData(e.offset-1,1),ER(o.dom,t.parentNode,e=>e===o.dom.getRoot()))})}),!0))&&e.preventDefault()},!0),r.on("keydown",e=>{var t,n;32===e.keyCode&&r.selection.isCollapsed()&&r.selection.isEditable()&&(0<(t=Os(a(),"space")).blockPatterns.length||s())&&((n,a)=>{let o=n.selection.getRng();return _R(n,o).map(e=>{var t=Math.max(0,o.startOffset),t=SR(n.dom,e,o.startContainer,t),r=kR(a,e,t);return KR(n,e,r,!1,t)}).filter(e=>0<e.length)})(n=r,t).fold(h,r=>(n.undoManager.transact(()=>{var t,e;t=n,e=r,re(e,e=>qR(t,e))}),!0))&&e.preventDefault()},!0),()=>{if(r.selection.isCollapsed()&&r.selection.isEditable()){var e=Os(a(),"space");if(0<e.inlinePatterns.length||s()){var i=r,l=e;let o=i.selection.getRng();_R(i,o).map(e=>{let t=Math.max(0,o.startOffset-1),r=SR(i.dom,e,o.startContainer,t),n=kR(l,e,r),a=MR(i,e,o.startContainer,t,n,!1);0<a.length&&i.undoManager.transact(()=>{IR(i,a)})})}}});r.on("keyup",e=>{YR(n,e,(e,t)=>e===t.keyCode&&!ie.modifierPressed(t))&&o()}),r.on("keypress",e=>{YR(t,e,(e,t)=>e.charCodeAt(0)===t.charCode)&&Mg.setEditorTimeout(r,o)})},XR=i=>{let a=oe.each,l=ie.BACKSPACE,e=ie.DELETE,s=i.dom,d=i.selection,t=i.parser,r=F.browser,n=r.isFirefox(),o=r.isChromium()||r.isSafari(),c=F.deviceType.isiPhone()||F.deviceType.isiPad(),u=F.os.isMacOS()||F.os.isiOS(),m=(e,t)=>{try{i.getDoc().execCommand(e,!1,String(t))}catch(e){}},g=e=>e.isDefaultPrevented(),f=()=>{i.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{i.inline||s.bind(i.getDoc(),"mousedown mouseup",e=>{var t;e.target===i.getDoc().documentElement&&(t=d.getRng(),i.getBody().focus(),"mousedown"===e.type?sl(t.startContainer)||d.placeCaretAt(e.clientX,e.clientY):d.setRng(t))})},h=()=>{Range.prototype.getClientRects||i.on("mousedown",e=>{if(!g(e)&&"HTML"===e.target.nodeName){let e=i.getBody();e.blur(),Mg.setEditorTimeout(i,()=>{e.focus()})}})},v=()=>{let r=rc(i);i.on("click",e=>{var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&s.isEditable(t)&&(e.preventDefault(),i.selection.select(t),i.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,r)&&0===t.childNodes.length&&s.isEditable(t.parentNode)&&(e.preventDefault(),d.select(t))})},b=()=>{i.on("keydown",e=>{if(!g(e)&&e.keyCode===l&&d.isCollapsed()&&0===d.getRng().startOffset){var t=d.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{Yd(i)||i.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Sd(i)||m("enableObjectResizing",!1)})},C=()=>{i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{i.inline||i.on("keydown",()=>{document.activeElement===document.body&&i.getWin().focus()})},E=()=>{i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",e=>{"HTML"===e.target.nodeName&&(e=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(e),i.selection.normalize(),i.nodeChanged())}))},x=()=>{u&&i.on("keydown",e=>{!ie.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},_=()=>{i.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{i.on("init",()=>{i.dom.bind(i.getBody(),"submit",e=>{e.preventDefault()})})},S=H;if(lC(i))o&&(p(),v(),k(),f(),c)&&(w(),E(),_()),n&&(h(),y(),C(),x());else{i.on("keydown",t=>{if(!g(t)&&t.keyCode===ie.BACKSPACE){var t=d.getRng(),r=t.startContainer,n=t.startOffset,a=s.getRoot();let e=r;if(t.collapsed&&0===n){for(;e.parentNode&&e.parentNode.firstChild===e&&e.parentNode!==a;)e=e.parentNode;"BLOCKQUOTE"===e.nodeName&&(i.formatter.toggle("blockquote",void 0,e),(t=s.createRng()).setStart(r,0),t.setEnd(r,0),d.setRng(t))}}});{let o=e=>{var t=s.create("body"),e=e.cloneContents();return t.appendChild(e),d.serializer.serialize(t,{format:"html"})};i.on("keydown",r=>{var n,a=r.keyCode;if(!g(r)&&(a===e||a===l)&&i.selection.isEditable()){let e=i.selection.isCollapsed(),t=i.getBody();e&&!Oa(i.schema,t)||!e&&(a=i.selection.getRng(),a=o(a),(n=s.createRng()).selectNode(i.getBody()),a!==o(n))||(r.preventDefault(),i.setContent(""),t.firstChild&&s.isBlock(t.firstChild)?i.selection.setCursorLocation(t.firstChild,0):i.selection.setCursorLocation(t,0),i.nodeChanged())}})}if(F.windowsPhone||i.on("keyup focusin mouseup",e=>{var t;ie.modifierPressed(e)||(t=(e=i).getBody(),(e=e.selection.getRng()).startContainer===e.endContainer&&e.startContainer===t&&0===e.startOffset&&e.endOffset===t.childNodes.length)||d.normalize()},!0),o&&(p(),v(),i.on("init",()=>{m("DefaultParagraphSeparator",Js(i))}),k(),b(),t.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),(c?(w(),E(),_):f)()),n){i.on("keydown",r=>{if(!g(r)&&r.keyCode===l&&i.getBody().getElementsByTagName("hr").length&&d.isCollapsed()&&0===d.getRng().startOffset){let e=d.getNode(),t=e.previousSibling;"HR"===e.nodeName?(s.remove(e),r.preventDefault()):t&&t.nodeName&&"hr"===t.nodeName.toLowerCase()&&(s.remove(t),r.preventDefault())}}),h();{let r=()=>{let e=s.getAttribs(d.getStart().cloneNode(!1));return()=>{let t=d.getStart();t!==i.getBody()&&(s.setAttrib(t,"style",null),a(e,e=>{t.setAttributeNode(e.cloneNode(!0))}))}},n=()=>!d.isCollapsed()&&s.getParent(d.getStart(),s.isBlock)!==s.getParent(d.getEnd(),s.isBlock);i.on("keypress",e=>{var t;return!(!(g(e)||8!==e.keyCode&&46!==e.keyCode)&&n()&&(t=r(),i.getDoc().execCommand("delete",!1),t(),e.preventDefault(),1))}),s.bind(i.getDoc(),"cut",e=>{if(!g(e)&&n()){let e=r();Mg.setEditorTimeout(i,()=>{e()})}})}y(),i.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||a(s.select("a:not([data-mce-block])"),e=>{let t,r=e.parentNode;var n=s.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!s.isBlock(r);){if((null==(t=r.parentNode)?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}s.add(r,"br",{"data-mce-bogus":1})}})}),C(),x(),b()}}return{refreshContentEditable:S,isHidden:()=>{var e;return!(!n||i.removed||(e=i.selection.getSel())&&e.rangeCount&&0!==e.rangeCount)}}},ZR=X.DOM,QR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,JR=e=>Ue(e,e=>!1===b(e)),eA=e=>{var t=e.options.get,r=e.editorUpload.blobCache;return JR({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:QR(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Mc(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},tA=e=>{e=e.options.get;return JR({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},rA=e=>(e.inline?e.ui:e.dom).styleSheetLoader,nA=n=>{let e=rA(n),t=xd(n),r=n.contentCSS,a=()=>{e.unloadAll(r),n.inline||n.ui.styleSheetLoader.unloadAll(t)},o=()=>{n.removed?a():n.on("remove",a)};if(0<n.contentStyles.length){let t="";oe.each(n.contentStyles,e=>{t+=e+"\r\n"}),n.dom.addStyle(t)}var i=Promise.all(((r,e,t)=>{var{pass:e,fail:n}=fe(e,e=>tinymce.Resource.has(t1(e))),e=[...e.map(e=>{var t=tinymce.Resource.get(t1(e));return Z(t)?Promise.resolve(rA(r).loadRawCss(e,t)):Promise.resolve()}),rA(r).loadAll(n)];return r.inline?e:e.concat([r.ui.styleSheetLoader.loadAll(t)])})(n,r,t)).then(o).catch(o),l=Ed(n);if(l){var s=n;let e=W(s.getBody()),t=Xr(Gr(e)),r=Sr("style");sr(r,"type","text/css"),K(r,Nr(l)),K(t,r),s.on("remove",()=>{Y(r)})}return i},aA=e=>{if(!0!==e.removed){a=e,lC(a)||a.load({initial:!0,format:"html"}),a.startContent=a.getContent({format:"raw"}),(a=e).bindPendingEventDelegates(),a.initialized=!0,a.dispatch("Init"),a.focus(!0),e=(r=a).dom.getRoot(),r.inline||_m(r)&&r.selection.getStart(!0)!==e||Xu(e).each(e=>{var t=e.getNode(),t=ca(t)?Xu(t).getOr(e):e;r.selection.setRng(t.toRange())}),a.nodeChanged({initial:!0});var r,e=oc(a);j(e)&&e.call(a,a);{var n=a;let t=lc(n);t&&Mg.setEditorTimeout(n,()=>{var e=!0===t?n:n.editorManager.get(t);e&&!e.destroyed&&(e.focus(),e.selection.scrollIntoView())},100)}XC(a)&&QC(a,!0)}var a},oA=n=>{var t=n.getElement();let e=n.getDoc();n.inline&&(ZR.addClass(t,"mce-content-body"),n.contentDocument=e=document,n.contentWindow=window,n.bodyElement=t,n.contentAreaContainer=t);var r,a,o,l,t=n.getBody();t.disabled=!0,n.readonly=Yd(n),n._editableRoot=Gd(n),!zc(n)&&n.hasEditableRoot()&&(n.inline&&"static"===ZR.getStyle(t,"position",!0)&&(t.style.position="relative"),t.contentEditable="true"),t.disabled=!1,n.editorUpload=d1(n),n.schema=jo(tA(n)),n.dom=X(e,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,update_styles:!0,root_element:n.inline?n.getBody():null,collect:n.inline,schema:n.schema,contentCssCors:pd(n),referrerPolicy:hd(n),onSetAttrib:e=>{n.dispatch("SetAttrib",e)}}),n.parser=(l=n,(t=Ny(eA(l),l.schema)).addAttributeFilter("src,href,style,tabindex",(t,r)=>{var n=l.dom,a="data-mce-"+r;let o=t.length;for(;o--;){var i=t[o];let e=i.attr(r);e&&!i.attr(a)&&0!==e.indexOf("data:")&&0!==e.indexOf("blob:")&&("style"===r?((e=n.serializeStyle(n.parseStyle(e),i.name)).length||(e=null),i.attr(a,e),i.attr(r,e)):"tabindex"===r?(i.attr(a,e),i.attr(r,null)):i.attr(a,l.convertURL(e,r,i.name)))}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),Nc(l)&&t.addNodeFilter("#cdata",e=>{let t,r=e.length;for(;r--;){var n=e[r];n.type=8,n.name="#comment",n.value="[CDATA["+l.dom.encode(null!=(t=n.value)?t:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let r=t.length;for(var n=l.schema.getNonEmptyElements();r--;){let e=t[r];e.isEmpty(n)&&0===e.getAll("br").length&&e.append(new Zf("br",1))}}),t),n.serializer=bC((g=(t=n).options.get,{...eA(t),...tA(t),...JR({remove_trailing_brs:g("remove_trailing_brs"),pad_empty_with_br:g("pad_empty_with_br"),url_converter:g("url_converter"),url_converter_scope:g("url_converter_scope"),element_format:g("element_format"),entities:g("entities"),entity_encoding:g("entity_encoding"),indent:g("indent"),indent_after:g("indent_after"),indent_before:g("indent_before")})}),n),n.selection=pC(n.dom,n.getWin(),n.serializer,n),n.annotator=pg(n),n.formatter=C1(n),n.undoManager=E1(n),n._nodeChangeDispatcher=new DS(n),n._selectionOverrides=hR(n);{var i=n;let a=Ma(),o=Da(!1),r=Ei(e=>{i.dispatch("longpress",{...e,type:"longpress"}),o.set(!0)},400);i.on("touchstart",t=>{YE(t).each(e=>{r.cancel();e={x:e.clientX,y:e.clientY,target:t.target};r.throttle(t),o.set(!1),a.set(e)})},!0),i.on("touchmove",e=>{r.cancel(),YE(e).each(n=>{a.on(e=>{var t,r;t=n,e=e,r=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<r||5<t)&&(a.clear(),o.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",t=>{r.cancel(),"touchcancel"!==t.type&&a.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{o.get()?t.preventDefault():i.dispatch("tap",{...t,type:"tap"})})},!0)}(o=t=n).on("click",e=>{o.dom.getParent(e.target,"details")&&e.preventDefault()}),(a=t).parser.addNodeFilter("details",e=>{let t=Pc(a);re(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})}),a.serializer.addNodeFilter("details",e=>{let t=Dc(a);re(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})});{var s=n;let a="contenteditable",e=" "+oe.trim(kc(s))+" ",t=" "+oe.trim(_c(s))+" ",o=ex(e),i=ex(t),l=Sc(s);0<l.length&&s.on("BeforeSetContent",r=>{{var n=s,a=l;let e=a.length,t=r.content;if("raw"!==r.format){for(;e--;)t=t.replace(a[e],tx(n,t,_c(n)));r.content=t}}}),s.parser.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var r=e[t];o(r)?r.attr(a,"true"):i(r)&&r.attr(a,"false")}}),s.serializer.addAttributeFilter(a,e=>{let t=e.length;for(;t--;){var r,n=e[t];(o(n)||i(n))&&(r=n.attr("data-mce-content"),0<l.length&&r?rx(l,r)?(n.name="#text",n.type=3,n.raw=!0,n.value=r):n.remove():n.attr(a,null))}})}lC(n)||((r=n).on("mousedown",e=>{3<=e.detail&&(e.preventDefault(),$N(r))}),g=n,GR(g));var m,d,c,t=PS(n);c=t,(d=n).addCommand("delete",()=>{var e,t;e=d,t=c,KE(e,t,!1).fold(()=>{e.selection.isEditable()&&(Dh(e),Fh(e))},R)}),d.addCommand("forwardDelete",()=>{var e,t;e=d,t=c,KE(e,t,!0).fold(()=>{e.selection.isEditable()&&Lh(e)},R)}),(m=n).on("NodeChange",()=>{{var a=m,o=a.dom,e=a.selection,i=a.schema,l=i.getBlockElements(),e=e.getStart(),s=a.getBody();let t,r,n=null;var d=Js(a);if(e&&G(e)){var c,u=s.nodeName.toLowerCase();if(i.isValidChild(u,d.toLowerCase())&&(c=l,u=s,d=e,!$(Fp(W(d),W(u)),e=>GE(c,e.dom))))if(s.firstChild===s.lastChild&&L(s.firstChild))(t=QE(a)).appendChild(Ji().dom),s.replaceChild(t,s.firstChild),a.selection.setCursorLocation(t,0),a.nodeChanged();else{let e=s.firstChild;for(;e;)if(G(e)&&Ga(i,e),XE(i,e)){if(ZE(l,e)){e=(r=e).nextSibling,o.remove(r);continue}if(!t){if(!n&&a.hasFocus()&&(n=aw(a.selection.getRng(),()=>document.createElement("span"))),!e.parentNode){e=null;break}t=QE(a),s.insertBefore(t,e)}e=(r=e).nextSibling,t.appendChild(r)}else t=null,e=e.nextSibling;n&&(a.selection.setRng(ow(n)),a.nodeChanged())}}}});{var u=n;let e,l=u.dom,s=Js(u),d=null!=(e=Rd(u))?e:"",c=(e,t)=>{var r,n,a,o,i;r=e,k1(r)&&(i=r.keyCode,!S1(r))&&(ie.metaKeyPressed(r)||r.altKey||112<=i&&i<=123||V(x1,i))||(r=u.getBody(),i=e,e=!(k1(i)&&!(S1(i)||"keyup"===i.type&&229===i.keyCode)||(e=l,n=r,a=s,!e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0}))||(o=n.firstElementChild)&&(e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")||a!==o.nodeName.toLowerCase())),""!==l.getAttrib(r,_1)==e&&!t)||(l.setAttrib(r,_1,e?d:null),u.dispatch("PlaceholderToggle",{state:e}),u.on(e?"keydown":"keyup",c),u.off(e?"keyup":"keydown",c))};gt(d)&&u.on("init",e=>{c(e,!0),u.on("change SetContent ExecCommand",c),u.on("paste",e=>Mg.setEditorTimeout(u,()=>c(e)))})}IN(n);var g=(e=>{let n=e;return t=e,w(t.plugins,"rtc").bind(e=>ee.from(e.setup)).fold(()=>(n.rtcInstance=iC(e),ee.none()),e=>{return n.rtcInstance=(t=J(null),r=J(""),{init:{bindEvents:H},undoManager:{beforeChange:H,add:t,undo:t,redo:t,clear:H,reset:H,hasUndo:h,hasRedo:h,transact:t,ignore:H,extra:H},formatter:{match:h,matchAll:J([]),matchNode:J(void 0),canApply:h,closest:r,apply:H,remove:H,toggle:H,formatChanged:J({unbind:H})},editor:{getContent:r,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:H},selection:{getContent:r},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:J(ee.none())}}),ee.some(()=>e().then(s=>(n.rtcInstance=(()=>{let a=e=>le(e)?e:{},{init:e,undoManager:o,formatter:i,editor:r,selection:n,autocompleter:t,raw:l}=s;return{init:{bindEvents:e.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(e,t,r)=>o.transact(r),ignore:(e,t)=>o.ignore(t),extra:(e,t,r,n)=>o.extra(r,n)},formatter:{match:(e,t,r,n)=>i.match(e,a(t),n),matchAll:i.matchAll,matchNode:i.matchNode,canApply:e=>i.canApply(e),closest:e=>i.closest(e),apply:(e,t,r)=>i.apply(e,a(t)),remove:(e,t,r,n)=>i.remove(e,a(t)),toggle:(e,t,r)=>i.toggle(e,a(t)),formatChanged:(e,t,r,n,a)=>i.formatChanged(t,r,n,a)},editor:{getContent:e=>r.getContent(e),setContent:(e,t)=>({content:r.setContent(e,t),html:""}),insertContent:(e,t)=>(r.insertContent(e),""),addVisual:r.addVisual},selection:{getContent:(e,t)=>n.getContent(t)},autocompleter:{addDecoration:t.addDecoration,removeDecoration:t.removeDecoration},raw:{getModel:()=>ee.some(l.getRawModel())}}})(),s.rtc.isRemote)));var t,r});var t})(n);{var f=n,t=f.getDoc(),p=f.getBody(),t;f.dispatch("PreInit"),sc(f)||(t.body.spellcheck=!1,ZR.setAttrib(p,"spellcheck","false")),f.quirks=XR(f),f.dispatch("PostRender"),void 0!==(t=_d(f))&&(p.dir=t);let e=dc(f);e&&f.on("BeforeSetContent",t=>{oe.each(e,e=>{t.content=t.content.replace(e,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),f.on("SetContent",()=>{f.addVisual(f.getBody())}),f.on("compositionstart compositionend",e=>{f.composing="compositionstart"===e.type})}p=n,t=Fc(p),Z(Uc(p))||!b(t)&&"INVALID"!=("gpl"===(p=t).toLowerCase()||64<=p.length&&p.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/"),g.fold(()=>{let e=(e=>{let t=!1,r=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(n);nA(n).then(()=>{aA(n),e()})},e=>{n.setProgressState(!0),nA(n).then(()=>{e().then(e=>{n.setProgressState(!1),aA(n),cC(n)},e=>{n.notificationManager.open({type:"error",text:String(e)}),aA(n),cC(n)})})})},iA=S,lA=X.DOM,sA=X.DOM,dA=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),cA=e=>{var t=e.getElement();return e.inline?dA(null):(e=t,t=sA.create("div"),sA.insertAfter(t,e),dA(t,t))},uA=async a=>{a.dispatch("ScriptsLoaded");{var n=a;let e=oe.trim(dd(n)),r=n.ui.registry.getAll().icons,t={...AC.get("default").icons,...AC.get(e).icons};ne(t,(e,t)=>{ae(r,t)||n.ui.registry.addIcon(t,e)})}d=a,s=Od(d),Z(s)?(e=UC.get(s),d.theme=e(d,UC.urls[s])||{},j(d.theme.init)&&d.theme.init(d,UC.urls[s]||d.documentBaseUrl.replace(/\/$/,""))):d.theme={},e=a,s=Pd(e),d=TC.get(s),e.model=d(e,TC.urls[s]);{var l=a;let i=[];re(Zd(l),e=>{var t=l,r=i,e=e.replace(/^\-/,""),n=FC.get(e),a=FC.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=oe.trim(e),n&&-1===oe.inArray(r,e)&&!t.plugins[e])try{var o=n(t,a)||{};t.plugins[e]=o,j(o.init)&&(o.init(t,a),r.push(e))}catch(r){n=t,o=e,a=r;o=yi.translate(["Failed to initialize plugin: {0}",o]),Ps(n,"PluginLoadError",{message:o}),qC(o,a),HC(n,o)}})}s=(d=a).getElement(),d.orgDisplay=s.style.display;var e,t,r,o,i,s=await(Z(Od(d))?(t=(s=d).theme.renderUI)?t():cA(s):j(Od(d))?(s=(t=d).getElement(),(i=Od(t)(t,s)).editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||t.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||t.id+"_iframecontainer"),i.height=i.iframeHeight||s.offsetHeight,i):cA(d));if(r=a,o=ee.from(s.api).getOr({}),i={show:ee.from(o.show).getOr(H),hide:ee.from(o.hide).getOr(H),isEnabled:ee.from(o.isEnabled).getOr(S),setEnabled:t=>{t&&("readonly"===r.mode.get()||XC(r))||ee.from(o.setEnabled).each(e=>e(t))}},r.ui={...r.ui,...i},a.editorContainer=s.editorContainer,(d=a).contentCSS=d.contentCSS.concat((c=d,r1(c,wd(c))),(c=d,r1(c,xd(c)))),a.inline)oA(a);else{var d=a,c={editorContainer:s.editorContainer,iframeContainer:s.iframeContainer};{var u=d,a=c;let e=F.browser.isFirefox()?nc(u):"Rich Text Area",t=u.translate(e),r=ur(W(u.getElement()),"tabindex").bind(pt),n=((e,t,r,n)=>{let a=Sr("iframe");return n.each(e=>sr(a,"tabindex",e)),dr(a,r),dr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Cr(a,"tox-edit-area__iframe"),a})(u.id,t,Ws(u),r).dom;n.onload=()=>{n.onload=null,u.dispatch("load")},u.contentAreaContainer=a.iframeContainer,u.iframeElement=n,u.iframeHTML=(e=>{let t=Ks(e)+"<html><head>";Ys(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=Gs(e),n=Xs(e),a=e.translate(nc(e));return Zs(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Zs(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${a}"><br></body></html>`})(u),lA.add(a.iframeContainer,n)}c.editorContainer&&(c.editorContainer.style.display=d.orgDisplay,d.hidden=lA.isHidden(c.editorContainer)),d.getElement().style.display="none",lA.setAttrib(d.id,"aria-hidden","true"),d.getElement().style.visibility=d.orgVisibility;{var m=d;let t=m.iframeElement,r=()=>{m.contentDocument=t.contentDocument,oA(m)};if(Tc(m)||F.browser.isFirefox()){let e=m.getDoc();e.open(),e.write(m.iframeHTML),e.close(),r()}else{a=W(t);let e=Pn(a,"load",iA,()=>{e.unbind(),r()});t.srcdoc=m.iframeHTML}}}},mA=X.DOM,gA=e=>"-"===e.charAt(0),fA=(t,e,r)=>ee.from(e).filter(e=>gt(e)&&!AC.has(e)).map(e=>({url:t.editorManager.baseURL+`/icons/${e}/icons${r}.js`,name:ee.some(e)})),pA=(t,e)=>{var r,a,n,o=pi.ScriptLoader,i=()=>{!t.removed&&(e=>{e=Od(e);return!Z(e)||z(UC.get(e))})(t)&&(e=>{e=Pd(e);return z(TC.get(e))})(t)&&uA(t)};{var l=t,s=e;let a=Od(l);if(Z(a)&&!gA(a)&&!ae(UC.urls,a)){let e=Bd(l),n=e?l.documentBaseURI.toAbsolute(e):`themes/${a}/theme${s}.js`;UC.load(a,n).catch(()=>{var e,t,r;e=l,t=n,r=a,VC(e,"ThemeLoadError",$C("theme",t,r))})}}{var d=t,s=e;let a=Pd(d);if("plugin"!==a&&!ae(TC.urls,a)){let e=Dd(d),n=Z(e)?d.documentBaseURI.toAbsolute(e):`models/${a}/model${s}.js`;TC.load(a,n).catch(()=>{var e,t,r;e=d,t=n,r=a,VC(e,"ModelLoadError",$C("model",t,r))})}}{s=o;var c=t;let a=vd(c),e=bd(c);if(!yi.hasCode(a)&&"en"!==a){let n=gt(e)?e:`${c.editorManager.baseURL}/langs/${a}.js`;s.add(n).catch(()=>{var e,t,r;e=c,t=n,r=a,VC(e,"LanguageLoadError",$C("language",t,r))})}}r=o,a=t,s=e,s=fA(a,"default",s),n=a,n=ee.from(cd(n)).filter(gt).map(e=>({url:e,name:ee.none()})).orThunk(()=>fA(a,dd(a),"")),re((t=>{let r=[],n=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return r})([s,n]),n=>{r.add(n.url).catch(()=>{var e,t,r;e=a,t=n.url,r=n.name.getOrUndefined(),VC(e,"IconsLoadError",$C("icons",t,r))})});{var u=t,m=e;let r=(n,a)=>{FC.load(n,a).catch(()=>{var e,t,r;e=u,t=a,r=n,VC(e,"PluginLoadError",$C("plugin",t,r))})};ne(Qd(u),(e,t)=>{r(t,e),u.options.set("plugins",Zd(u).concat(t))}),re(Zd(u),e=>{!(e=oe.trim(e))||FC.urls[e]||gA(e)||r(e,`plugins/${e}/plugin${m}.js`)})}o.loadQueue().then(i,i)},hA=Mt().deviceType,vA=hA.isPhone(),bA=hA.isTablet(),yA=e=>U(e)?[]:(e=Q(e)?e:e.split(/[ ,]/),e=te(e,ct),B(e,gt)),CA=(e,t)=>ae(e.sections(),t),wA=(e,t,r,n,a)=>{let o,i=e?{mobile:(c=null!=(o=a.mobile)?o:{},t=t,{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:w(c,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}})}:{},l=(d=["mobile"],c=c=m_(i,a),t={},a={},Fe(c,(e,t)=>V(d,t),Ie(t),Ie(a)),t=(c={t:t,f:a}).t,a=c.f,{sections:J(t),options:J(a)}),s=oe.extend(r,n,l.options(),(t=l,e&&CA(t,"mobile")?(a=l.sections(),a=w(a,"mobile").getOr({}),oe.extend({},{},a)):{}),{external_plugins:((e,t)=>{t=null!=(t=t.external_plugins)?t:{};return e&&e.external_plugins?oe.extend({},e.external_plugins,t):t})(n,l.options())});var d,c,u,m;return r=e,t=l,a=n,e=s,a=yA(a.forced_plugins),n=yA(e.plugins),m=t,m=CA(m,"mobile")?m.sections().mobile:{},r=r,t=t,u=n,m=m.plugins?yA(m.plugins):n,n=r&&CA(t,"mobile")?m:u,r=a,t=n,m=[...yA(r),...yA(t)],oe.extend(e,{forced_plugins:a,plugins:m})},EA=(e,t)=>{var r,n=e.selection,a=e.dom;return/^ | $/.test(t)?(a=a,n=n.getRng(),r=t,e=e.schema,a=W(a.getRoot()),r=lh(a,M.fromRangeStart(n),e)?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),sh(a,M.fromRangeEnd(n),e)?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")):t},xA=(o,t)=>{if(o.selection.isEditable()){let{content:e,details:a}="string"!=typeof(t=t)?(r=oe.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:r}):{content:t,details:{}};By(o,{...a,content:EA(o,e),format:"html",set:!1,selection:!0}).each(e=>{n=o,t=e.content,r=a;var t,r,n=sC(n).editor.insertContent(t,r);Py(o,n,e),o.addVisual()})}var r},_A={"font-size":"size","font-family":"face"},kA=ir("font"),SA=o=>(a,e)=>ee.from(e).map(W).filter(rr).bind(e=>{return r=o,t=a,n=e.dom,jv(W(n),e=>{return t=e,Cn(t,r).orThunk(()=>kA(t)?w(_A,r).bind(e=>ur(t,e)):ee.none());var t},e=>P(W(t),e)).or((n=o,e=e.dom,ee.from(X.DOM.getStyle(e,n,!0))));var r,t,n}).getOr(""),NA=SA("font-size"),RA=s(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),SA("font-family")),AA=e=>Xu(e.getBody()).bind(e=>{e=e.container();return ee.from(D(e)?e.parentNode:e)}),TA=(e,t)=>{return e=e,t=l(ee.some,t),r=e,ee.from(r.selection.getRng()).bind(e=>{var t=r.getBody();return e.startContainer===t&&0===e.startOffset?ee.none():ee.from(r.selection.getStart(!0))}).orThunk(C(AA,e)).map(W).filter(rr).bind(t);var r},OA=(e,t)=>{var r,n;return/^[0-9.]+$/.test(t)&&1<=(r=parseInt(t,10))&&r<=7?(n=e,n=oe.explode(n.options.get("font_size_style_values")),e=e,0<(e=oe.explode(e.options.get("font_size_classes"))).length?e[r-1]||t:n[r-1]||t):t},BA=(l,s)=>{if(!l.mode.isReadOnly()){let e=l.dom,t=l.selection.getRng(),a=s?l.selection.getStart():l.selection.getEnd(),o=s?t.startContainer:t.endContainer,i=Dk(e,o);if(i&&i.isContentEditable){let r=s?xn:_n,n=Js(l);((e,t,r,n)=>{let a=e.dom,o=e=>a.isBlock(e)&&e.parentElement===r,i=o(t)?t:a.getParent(n,o,r);return ee.from(i).map(W)})(l,a,i,o).each(e=>{var t=Fk(l,o,e.dom,i,!1,n);r(e,W(t)),l.selection.setCursorLocation(t,0),l.dispatch("NewBlock",{newBlock:t}),Nk(l,"insertParagraph")})}}},PA=e=>{g=t=>()=>{re("left,center,right,justify".split(","),e=>{t!==e&&m.formatter.remove("align"+e)}),"none"!==t&&(m.formatter.toggle("align"+t,void 0),m.nodeChanged())},(m=c=e).editorCommands.addCommands({JustifyLeft:g("left"),JustifyCenter:g("center"),JustifyRight:g("right"),JustifyFull:g("justify"),JustifyNone:g("none")}),g=t=>()=>{var e=u.selection,e=e.isCollapsed()?[u.dom.getParent(e.getNode(),u.dom.isBlock)]:e.getSelectedBlocks();return $(e,e=>z(u.formatter.matchNode(e,t)))},(u=c).editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state"),(d=e).editorCommands.addCommands({"Cut,Copy,Paste":e=>{var t=d.getDoc();let r;try{t.execCommand(e)}catch(e){r=!0}if((r="paste"!==e||t.queryCommandEnabled(e)?r:!0)||!t.queryCommandSupported(e)){let e=d.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(F.os.isMacOS()||F.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"+")),d.notificationManager.open({text:e,type:"error"})}}}),(s=e).editorCommands.addCommands({mceAddUndoLevel:()=>{s.undoManager.add()},mceEndUndoLevel:()=>{s.undoManager.add()},Undo:()=>{s.undoManager.undo()},Redo:()=>{s.undoManager.redo()}}),(l=e).editorCommands.addCommands({mceSelectNodeDepth:(e,t,r)=>{let n=0;l.dom.getParent(l.selection.getNode(),e=>!G(e)||n++!==r||(l.selection.select(e),!1),l.getBody())},mceSelectNode:(e,t,r)=>{l.selection.select(r)},selectAll:()=>{var e,t=l.dom.getParent(l.selection.getStart(),ya);t&&((e=l.dom.createRng()).selectNodeContents(t),l.selection.setRng(e))}}),(i=e).editorCommands.addCommands({mceCleanup:()=>{var e=i.selection.getBookmark();i.setContent(i.getContent()),i.selection.moveToBookmark(e)},insertImage:(e,t,r)=>{xA(i,i.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{i.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,t,r)=>{xA(i,i.dom.encode(r))},insertHTML:(e,t,r)=>{xA(i,r)},mceInsertContent:(e,t,r)=>{xA(i,r)},mceSetContent:(e,t,r)=>{i.setContent(r)},mceReplaceContent:(e,t,r)=>{i.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,i.selection.getContent({format:"text"})))},mceNewDocument:()=>{i.setContent(fc(i))}}),c=(e,t,r)=>{var n;o.mode.isReadOnly()||(r=Z(r)?{href:r}:r,n=o.dom.getParent(o.selection.getNode(),"a"),le(r)&&Z(r.href)&&(r.href=r.href.replace(/ /g,"%20"),n&&r.href||o.formatter.remove("link"),r.href)&&o.formatter.apply("link",r,n))},(o=e).editorCommands.addCommands({unlink:()=>{var e;o.selection.isEditable()&&(o.selection.isCollapsed()?(e=o.dom.getParent(o.selection.getStart(),"a"))&&o.dom.remove(e,!0):o.formatter.remove("link"))},mceInsertLink:c,createLink:c}),(r=e).editorCommands.addCommands({Indent:()=>{var e;e=r,$E(e,"indent")},Outdent:()=>{qE(r)}}),r.editorCommands.addCommands({Outdent:()=>jE(r)},"state"),(t=e).editorCommands.addCommands({InsertNewBlockBefore:()=>{var e;e=t,BA(e,!0)},InsertNewBlockAfter:()=>{var e;e=t,BA(e,!1)}}),(n=e).editorCommands.addCommands({insertParagraph:()=>{hS(Yk,n)},mceInsertNewLine:(e,t,r)=>{vS(n,r)},InsertLineBreak:(e,t,r)=>{hS(rS,n)}});var a,n,t,r,o,i,l,s,d,c,u,m,g=e;{var f=g;let n=(e,t)=>{f.formatter.toggle(e,t),f.nodeChanged()};f.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{n(e)},"ForeColor,HiliteColor":(e,t,r)=>{n(e,{value:r})},BackColor:(e,t,r)=>{n("hilitecolor",{value:r})},FontName:(e,t,r)=>{var n=f;r=OA(n,r),n.formatter.toggle("fontname",{value:(e=>{e=e.split(/\s*,\s*/);return te(e,e=>-1===e.indexOf(" ")||lt(e,'"')||lt(e,"'")?e:`'${e}'`).join(",")})(r)}),n.nodeChanged()},FontSize:(e,t,r)=>{var n;r=r,(n=f).formatter.toggle("fontsize",{value:OA(n,r)}),n.nodeChanged()},LineHeight:(e,t,r)=>{var n;(n=f).formatter.toggle("lineheight",{value:String(r)}),n.nodeChanged()},Lang:(e,t,r)=>{n(e,{value:r.code,customValue:null!=(e=r.customCode)?e:null})},RemoveFormat:e=>{f.formatter.remove(e)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(e,t,r)=>{n(Z(r)?r:"p")},mceToggleFormat:(e,t,r)=>{n(r)}})}{var p=g;let t=e=>p.formatter.match(e);p.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),p.editorCommands.addQueryValueHandler("FontName",()=>{return t=p,TA(t,e=>RA(t.getBody(),e.dom)).getOr("");var t}),p.editorCommands.addQueryValueHandler("FontSize",()=>{return t=p,TA(t,e=>NA(t.getBody(),e.dom)).getOr("");var t}),p.editorCommands.addQueryValueHandler("LineHeight",()=>{return t=p,TA(t,r=>{var e=W(t.getBody());return jv(r,e=>Cn(e,"line-height"),C(P,e)).getOrThunk(()=>{var e=parseFloat(bn(r,"line-height")),t=parseFloat(bn(r,"font-size"));return String(e/t)})}).getOr("");var t})}(a=e).editorCommands.addCommands({mceRemoveNode:(e,t,r)=>{r=null!=r?r:a.selection.getNode();if(r!==a.getBody()){let e=a.selection.getBookmark();a.dom.remove(r,!0),a.selection.moveToBookmark(e)}},mcePrint:()=>{a.getWin().print()},mceFocus:(e,t,r)=>{var n;(n=a).removed||(!0===r?Yg:e=>{var t=e.selection,r=e.getBody();let n=t.getRng();e.quirks.refreshContentEditable();var a,o,i=t=>{Dg(t).each(e=>{t.selection.setRng(e),n=e})},t=(!Wg(e)&&e.hasEditableRoot()&&i(e),a=e,t=t.getNode(),a.dom.getParent(t,e=>"true"===a.dom.getContentEditable(e)));t&&e.dom.isChildOf(t,r)?(null===(o=e).dom.getParent(t,e=>"false"===o.dom.getContentEditable(e))&&qg(r),qg(t),e.hasEditableRoot()||i(e),$g(e,n)):(e.inline||(F.browser.isOpera()||qg(r),e.getWin().focus()),(F.browser.isFirefox()||e.inline)&&(qg(r),$g(e,n))),Yg(e)})(n)},mceToggleVisualAid:()=>{a.hasVisual=!a.hasVisual,a.addVisual()}})},DA=["toggleview"],LA=e=>V(DA,e.toLowerCase());class MA{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){var a,o=this.editor,i=e.toLowerCase(),n=null==n?void 0:n.skip_focus;return!(o.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||n?(a=o,Dg(a).each(e=>a.selection.setRng(e))):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())||(n=this.commands.exec[i],!j(n))||(n(i,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),0))}queryCommandState(e){var t;return!(!LA(e)&&this.editor.quirks.isHidden()||this.editor.removed||(e=e.toLowerCase(),t=this.commands.state[e],!j(t)))&&t(e)}queryCommandValue(e){var t;return!(!LA(e)&&this.editor.quirks.isHidden()||this.editor.removed)&&(e=e.toLowerCase(),t=this.commands.value[e],j(t))?t(e):""}addCommands(e,r="exec"){let n=this.commands;ne(e,(t,e)=>{re(e.toLowerCase().split(","),e=>{n[r][e]=t})})}addCommand(e,n,a){e=e.toLowerCase();this.commands.exec[e]=(e,t,r)=>n.call(null!=a?a:this.editor,t,r)}queryCommandSupported(e){e=e.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}let IA=oe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class FA{static isNative(e){return!!IA[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||h}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){var r=e.toLowerCase(),n=Jo(r,null!=t?t:{},this.scope),a=(this.settings.beforeFire&&this.settings.beforeFire(n),this.bindings[r]);if(a)for(let t=0,e=a.length;t<e;t++){let e=a[t];if(!e.removed){if(e.once&&this.off(r,e.func),n.isImmediatePropagationStopped())return n;if(!1===e.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,n,a){if(t=!1===t?h:t){var o={func:t,removed:!1},i=(a&&oe.extend(o,a),e.toLowerCase().split(" "));let r=i.length;for(;r--;){let e=i[r],t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[o,...t]:[...t,o],this.bindings[e]=t}}return this}off(r,n){if(r){var a=r.toLowerCase().split(" ");let e=a.length;for(;e--;){var o=a[e];let t=this.bindings[o];if(!o)return ne(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(t){if(n){let e=fe(t,e=>e.func===n);t=e.fail,this.bindings[o]=t,re(e.pass,e=>{e.removed=!0})}else t.length=0;t.length||(this.toggleEvent(r,!1),delete this.bindings[o])}}}else ne(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();e=this.bindings[e];return!(!e||0===e.length)}}let UA=r=>(r._eventDispatcher||(r._eventDispatcher=new FA({scope:r,toggleEvent:(e,t)=>{FA.isNative(e)&&r.toggleNativeEvent&&r.toggleNativeEvent(e,t)}})),r._eventDispatcher),zA={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(t,e,r){if(this.removed&&"remove"!==t&&"detach"!==t)return Jo(t.toLowerCase(),null!=e?e:{},this);var n=UA(this).dispatch(t,e);if(!1!==r&&this.parent){let e=this.parent();for(;e&&!n.isPropagationStopped();)e.dispatch(t,n,!1),e=e.parent?e.parent():void 0}return n},on(e,t,r){return UA(this).on(e,t,r)},off(e,t){return UA(this).off(e,t)},once(e,t){return UA(this).once(e,t)},hasEventListeners(e){return UA(this).has(e)}},jA=X.DOM,HA,VA=(e,t)=>"selectionchange"===t?e.getDoc():!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)?e.getDoc().documentElement:(t=Ad(e))?(e.eventRoot||(e.eventRoot=jA.select(t)[0]),e.eventRoot):e.getBody(),$A=(e,t,r)=>{var n,a,o,i,l;(l=e).hidden||XC(l)?XC(e)&&(n=e,"click"!==(a=r).type||ie.metaKeyPressed(a)?(o=a,V(e1,o.type)&&n.dispatch(a.type,a)):(o=W(a.target),i=n,l=o,cn(l,"a",e=>P(e,W(i.getBody()))).bind(e=>ur(e,"href")).each(t=>{if(a.preventDefault(),/^#/.test(t)){let e=n.dom.select(`${t},[name="${ot(t,"#")}"]`);e.length&&n.selection.scrollIntoView(e[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):e.dispatch(t,r)},qA=(o,i)=>{var e,t;o.delegates||(o.delegates={}),o.delegates[i]||o.removed||(e=VA(o,i),Ad(o)?(HA||(HA={},o.editorManager.on("removeEditor",()=>{o.editorManager.activeEditor||HA&&(ne(HA,(e,t)=>{o.dom.unbind(VA(o,t))}),HA=null)})),HA[i]||(t=t=>{var r=t.target,n=o.editorManager.get();let a=n.length;for(;a--;){let e=n[a].getBody();e!==r&&!jA.isChildOf(r,e)||$A(n[a],i,t)}},HA[i]=t,jA.bind(e,i,t))):(t=e=>{$A(o,i,e)},jA.bind(e,i,t),o.delegates[i]=t))},WA={...zA,bindPendingEventDelegates(){let t=this;oe.each(t._pendingNativeEvents,e=>{qA(t,e)})},toggleNativeEvent(e,t){var r=this;"focus"===e||"blur"===e||r.removed||(t?r.initialized?qA(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(VA(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){let r=this,e=r.getBody(),t=r.dom;r.delegates&&(ne(r.delegates,(e,t)=>{r.dom.unbind(VA(r,t),t,e)}),delete r.delegates),!r.inline&&e&&t&&(e.onload=null,t.unbind(r.getWin()),t.unbind(r.getDoc())),t&&(t.unbind(e),t.unbind(r.getContainer()))}},KA=e=>Z(e)?{value:e.split(/[ ,]/),valid:!0}:k(e,Z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},YA=(e,t)=>e+(ft(t.message)?"":". "+t.message),GA=e=>e.valid,XA=(e,t,r="")=>{t=t(e);return de(t)?t?{value:e,valid:!0}:{valid:!1,message:r}:t},ZA=e=>e.readonly,QA=["design","readonly"],JA=(e,t,r,n)=>{var a,o=r[t.get()],r=r[n];try{r.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&(o=e,r=r.editorReadOnly,a=W(o.getBody()),(r?(o.readonly=!0,o.hasEditableRoot()&&(a.dom.contentEditable="true"),YC):(o.readonly=!1,GC))(o)),t.set(n),e.dispatch("SwitchMode",{mode:n})},eT=o=>{let i=Da("design"),l=Da({design:{activate:H,deactivate:H,editorReadOnly:!1},readonly:{activate:H,deactivate:H,editorReadOnly:!0}});return(n=o).on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",e=>{ZA(n)&&e.preventDefault()}),n.on("BeforeExecCommand",e=>{"Undo"!==e.command&&"Redo"!==e.command||!ZA(n)||e.preventDefault()}),n.on("input",e=>{if(!e.isComposing&&ZA(n)){let e=n.undoManager.add();z(e)&&n.undoManager.undo()}}),n.on("compositionend",()=>{var e;ZA(n)&&(e=n.undoManager.add(),z(e))&&n.undoManager.undo()}),(r=e=o).serializer?JC(r):r.on("PreInit",()=>{JC(r)}),(t=e).on("ShowCaret ObjectSelected",e=>{XC(t)&&e.preventDefault()}),t.on("DisabledStateChange",e=>{e.isDefaultPrevented()||QC(t,e.state)}),{isReadOnly:()=>ZA(o),set:e=>{var t=o,r=l.get(),n=i,a=e;if(!(a===n.get()||t.initialized&&XC(t))){if(!ae(r,a))throw new Error(`Editor mode '${a}' is invalid`);t.initialized?JA(t,n,r,a):t.on("init",()=>JA(t,n,r,a))}},get:()=>i.get(),register:(e,t)=>{l.set(((e,t,r)=>{if(V(QA,t))throw new Error("Cannot override default mode "+t);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(l.get(),e,t))}};var e,t,r,n},tT=oe.each,rT=oe.explode,nT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},aT=oe.makeMap("alt,ctrl,shift,meta,access"),oT=e=>{let t={},r=F.os.isMacOS()||F.os.isiOS();tT(rT(e.toLowerCase(),"+"),e=>{e in aT?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=nT[e]||e.toUpperCase().charCodeAt(0))});var n=[t.keyCode];let a;for(a in aT)t[a]?n.push(a):t[a]=!1;return t.id=n.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class iT{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;let r=this;e.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(tT(r.shortcuts,e=>{r.matchShortcut(t,e)&&(r.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type)&&r.executeShortcutAction(e)}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(e,t,r,n){let a=this,o=a.normalizeCommandFunc(r);return tT(rT(oe.trim(e)),e=>{e=a.createShortcut(e,t,o,n);a.shortcuts[e.id]=e}),!0}remove(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(e){let t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:oe.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){e=oe.map(rT(e,">"),oT);return e[e.length-1]=oe.extend(e[e.length-1],{func:r,scope:n||this.editor}),oe.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}let lT=X.DOM,sT=oe.extend,dT=oe.each;class cT{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,sT(this,WA);var n=this,e=(this.id=e,this.hidden=!1,((e,t)=>{t=g_(t);return wA(vA||bA,vA,t,e,t)})(r.defaultOptions,t));this.options=((o,e=o)=>{let i={},l={},s=(e,t,r)=>{t=XA(t,r);return GA(t)?(l[e]=t.value,!0):(console.warn(YA(`Invalid value passed for the ${e} option`,t)),!1)},n=e=>ae(i,e);return{register:(t,e)=>{a=e;let r=Z(a.processor)?(t=>{let r=(()=>{switch(t){case"array":return Q;case"boolean":return de;case"function":return j;case"number":return y;case"object":return le;case"string":return Z;case"string[]":return KA;case"object[]":return e=>k(e,le);case"regexp":return e=>p(e,RegExp);default:return S}})();return e=>XA(e,r,`The value must be a ${t}.`)})(e.processor):e.processor,n=((e,t,r)=>{if(!b(t)){t=XA(t,r);if(GA(t))return t.value;console.error(YA(`Invalid default value passed for the "${e}" option`,t))}})(t,e.default,r);var a;i[t]={...e,default:n,processor:r},w(l,t).orThunk(()=>w(o,t)).each(e=>s(t,e,r))},isRegistered:n,get:e=>w(l,e).orThunk(()=>w(i,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{var r;return n(e)?(r=i[e]).immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):s(e,t,r.processor):(console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1)},unset:e=>{var t=n(e);return t&&delete l[e],t},isSet:e=>ae(l,e),debug:()=>{try{console.log(JSON.parse(JSON.stringify(e,(e,t)=>de(t)||y(t)||Z(t)||I(t)||Q(t)||se(t)?t:Object.prototype.toString.call(t))))}catch(e){console.error(e)}}}})(e,t);{var a=n;let e=a.options.register;e("id",{processor:"string",default:a.id}),e("selector",{processor:"string"}),e("target",{processor:"object"}),e("suffix",{processor:"string"}),e("cache_suffix",{processor:"string"}),e("base_url",{processor:"string"}),e("referrer_policy",{processor:"string",default:""}),e("language_load",{processor:"boolean",default:!0}),e("inline",{processor:"boolean",default:!1}),e("iframe_attrs",{processor:"object",default:{}}),e("doctype",{processor:"string",default:"<!DOCTYPE html>"}),e("document_base_url",{processor:"string",default:a.documentBaseUrl}),e("body_id",{processor:qs(a,"tinymce"),default:"tinymce"}),e("body_class",{processor:qs(a),default:""}),e("content_security_policy",{processor:"string",default:""}),e("br_in_pre",{processor:"boolean",default:!0}),e("forced_root_block",{processor:e=>{var t=Z(e)&&gt(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),e("forced_root_block_attrs",{processor:"object",default:{}}),e("newline_behavior",{processor:e=>{var t=V(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),e("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),e("no_newline_selector",{processor:"string",default:""}),e("keep_styles",{processor:"boolean",default:!0}),e("end_container_on_empty_block",{processor:e=>de(e)||Z(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),e("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),e("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),e("font_size_classes",{processor:"string",default:""}),e("automatic_uploads",{processor:"boolean",default:!0}),e("images_reuse_filename",{processor:"boolean",default:!1}),e("images_replace_blob_uris",{processor:"boolean",default:!0}),e("icons",{processor:"string",default:""}),e("icons_url",{processor:"string",default:""}),e("images_upload_url",{processor:"string",default:""}),e("images_upload_base_path",{processor:"string",default:""}),e("images_upload_credentials",{processor:"boolean",default:!1}),e("images_upload_handler",{processor:"function"}),e("language",{processor:"string",default:"en"}),e("language_url",{processor:"string",default:""}),e("entity_encoding",{processor:"string",default:"named"}),e("indent",{processor:"boolean",default:!0}),e("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_use_margin",{processor:"boolean",default:!1}),e("indentation",{processor:"string",default:"40px"}),e("content_css",{processor:e=>{var t=!1===e||Z(e)||k(e,Z);return t?Z(e)?{value:te(e.split(","),ct),valid:t}:!Q(e)&&!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:jd(a)?[]:["default"]}),e("content_style",{processor:"string"}),e("content_css_cors",{processor:"boolean",default:!1}),e("font_css",{processor:e=>{var t=Z(e)||k(e,Z);return t?{value:Q(e)?e:te(e.split(","),ct),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),e("inline_boundaries",{processor:"boolean",default:!0}),e("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),e("object_resizing",{processor:e=>{var t=de(e)||Z(e);return t?!1===e||zs.isiPhone()||zs.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!js}),e("resize_img_proportional",{processor:"boolean",default:!0}),e("event_root",{processor:"string"}),e("service_message",{processor:"string"}),e("theme",{processor:e=>!1===e||Z(e)||j(e),default:"silver"}),e("theme_url",{processor:"string"}),e("formats",{processor:"object"}),e("format_empty_lines",{processor:"boolean",default:!1}),e("format_noneditable_selector",{processor:"string",default:""}),e("preview_styles",{processor:e=>{var t=!1===e||Z(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),e("custom_ui_selector",{processor:"string",default:""}),e("hidden_input",{processor:"boolean",default:!0}),e("submit_patch",{processor:"boolean",default:!0}),e("encoding",{processor:"string"}),e("add_form_submit_trigger",{processor:"boolean",default:!0}),e("add_unload_trigger",{processor:"boolean",default:!0}),e("custom_undo_redo_levels",{processor:"number",default:0}),e("disable_nodechange",{processor:"boolean",default:!1}),e("disabled",{processor:e=>de(e)?(a.initialized&&zc(a)!==e&&Promise.resolve().then(()=>{a.dispatch("DisabledStateChange",{state:e})}),{valid:!0,value:e}):{valid:!1,message:"The value must be a boolean."},default:!1}),e("readonly",{processor:"boolean",default:!1}),e("editable_root",{processor:"boolean",default:!0}),e("plugins",{processor:"string[]",default:[]}),e("external_plugins",{processor:"object"}),e("forced_plugins",{processor:"string[]"}),e("model",{processor:"string",default:a.hasPlugin("rtc")?"plugin":"dom"}),e("model_url",{processor:"string"}),e("block_unsupported_drop",{processor:"boolean",default:!0}),e("visual",{processor:"boolean",default:!0}),e("visual_table_class",{processor:"string",default:"mce-item-table"}),e("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),e("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(a.hasPlugin("help")?". Press ALT-0 for help.":"")}),e("setup",{processor:"function"}),e("init_instance_callback",{processor:"function"}),e("url_converter",{processor:"function",default:a.convertURL}),e("url_converter_scope",{processor:"object",default:a}),e("urlconverter_callback",{processor:"function"}),e("allow_conditional_comments",{processor:"boolean",default:!1}),e("allow_html_data_urls",{processor:"boolean",default:!1}),e("allow_svg_data_urls",{processor:"boolean"}),e("allow_html_in_named_anchor",{processor:"boolean",default:!1}),e("allow_script_urls",{processor:"boolean",default:!1}),e("allow_unsafe_link_target",{processor:"boolean",default:!1}),e("allow_mathml_annotation_encodings",{processor:e=>{var t=k(e,Z);return t?{value:e,valid:t}:{valid:!1,message:"Must be an array of strings."}},default:[]}),e("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),e("fix_list_elements",{processor:"boolean",default:!1}),e("preserve_cdata",{processor:"boolean",default:!1}),e("remove_trailing_brs",{processor:"boolean",default:!0}),e("pad_empty_with_br",{processor:"boolean",default:!1}),e("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),e("element_format",{processor:"string",default:"html"}),e("entities",{processor:"string"}),e("schema",{processor:"string",default:"html5"}),e("convert_urls",{processor:"boolean",default:!0}),e("relative_urls",{processor:"boolean",default:!0}),e("remove_script_host",{processor:"boolean",default:!0}),e("custom_elements",{processor:$s}),e("extended_valid_elements",{processor:"string"}),e("invalid_elements",{processor:"string"}),e("invalid_styles",{processor:$s}),e("valid_children",{processor:"string"}),e("valid_classes",{processor:$s}),e("valid_elements",{processor:"string"}),e("valid_styles",{processor:$s}),e("verify_html",{processor:"boolean",default:!0}),e("auto_focus",{processor:e=>Z(e)||!0===e}),e("browser_spellcheck",{processor:"boolean",default:!1}),e("protect",{processor:"array"}),e("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),e("deprecation_warnings",{processor:"boolean",default:!0}),e("a11y_advanced_options",{processor:"boolean",default:!1}),e("api_key",{processor:"string"}),e("license_key",{processor:"string"}),e("paste_block_drop",{processor:"boolean",default:!1}),e("paste_data_images",{processor:"boolean",default:!0}),e("paste_preprocess",{processor:"function"}),e("paste_postprocess",{processor:"function"}),e("paste_webkit_styles",{processor:"string",default:"none"}),e("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),e("paste_merge_formats",{processor:"boolean",default:!0}),e("smart_paste",{processor:"boolean",default:!0}),e("paste_as_text",{processor:"boolean",default:!1}),e("paste_tab_spaces",{processor:"number",default:4}),e("text_patterns",{processor:e=>k(e,le)||!1===e?{value:Bs(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),e("text_patterns_lookup",{processor:e=>{return j(e)?{value:(t=e,e=>{e=t(e);return Bs(e)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),e("noneditable_class",{processor:"string",default:"mceNonEditable"}),e("editable_class",{processor:"string",default:"mceEditable"}),e("noneditable_regexp",{processor:e=>k(e,Vs)?{value:e,valid:!0}:Vs(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),e("table_tab_navigation",{processor:"boolean",default:!0}),e("highlight_on_focus",{processor:"boolean",default:!0}),e("xss_sanitization",{processor:"boolean",default:!0}),e("details_initial_state",{processor:e=>{var t=V(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),e("details_serialized_state",{processor:e=>{var t=V(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),e("init_content_sync",{processor:"boolean",default:!1}),e("newdocument_content",{processor:"string",default:""}),e("sandbox_iframes",{processor:"boolean",default:!0}),e("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),e("convert_unsafe_embeds",{processor:"boolean",default:!0}),a.on("ScriptsLoaded",()=>{e("directionality",{processor:"string",default:yi.isRtl()?"rtl":void 0}),e("placeholder",{processor:"string",default:Hs.getAttrib(a.getElement(),"placeholder")})})}var o=this.options.get;if(o("deprecation_warnings")){var i=t,l=e,s=(i=i,s=_C(i,CC),!1!==(i=i.forced_root_block)&&""!==i||s.push("forced_root_block (false only)"),Se(s)),d=(i=l,kC(i,EC)),c=0<d.length,u=0<s.length,m="mobile"===l.theme;if(c||u||m){let e="\n- ",t=m?`

Themes:
- mobile`:"",r=c?`

Plugins:
- `+d.join(e):"",n=u?`

Options:
- `+s.join(e):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+t+r+n)}var g=t,f=e,i=(g=g,_C(g,wC)),l=(g=f,kC(g,xC.map(e=>e.name))),m=0<l.length,c=0<i.length;if(m||c){let e="\n- ",t=m?`

Plugins:
- `+l.map(SC).join(e):"",r=c?`

Options:
- `+i.join(e):"";console.warn("The following deprecated features are currently enabled but will be removed soon."+t+r)}}d=o("suffix"),d&&(r.suffix=d),this.suffix=r.suffix,u=o("base_url"),u&&r._setBaseUrl(u),this.baseUri=r.baseURI,s=hd(n),s&&(pi.ScriptLoader._setReferrerPolicy(s),X.DOM.styleSheetLoader._setReferrerPolicy(s)),t=Xd(n),z(t)&&X.DOM.styleSheetLoader._setContentCssCors(t),Ci.languageLoad=o("language_load"),Ci.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new gy(Ys(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=jd(n),this.hasVisual=ec(n),this.shortcuts=new iT(this),this.editorCommands=new MA(this),PA(this),e=o("cache_suffix"),e&&(F.cacheSuffix=e.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(f=(()=>{let e={},t={},r={},n={},a={},o={},i={},l={},s={},d=(r,n)=>(e,t)=>{r[e.toLowerCase()]={...t,type:n}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(t,"menuitem"),addNestedMenuItem:d(t,"nestedmenuitem"),addToggleMenuItem:d(t,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(o,"contexttoolbar"),addContextForm:(c=o,(e,t)=>{c[e.toLowerCase()]={type:"contextform",...t}}),addSidebar:d(l,"sidebar"),addView:d(s,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,addContext:(e,t)=>i[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:a,contextToolbars:o,sidebars:l,views:s,contexts:i})};var c})()).addAutocompleter,addButton:f.addButton,addContextForm:f.addContextForm,addContextMenu:f.addContextMenu,addContextToolbar:f.addContextToolbar,addIcon:f.addIcon,addMenuButton:f.addMenuButton,addMenuItem:f.addMenuItem,addNestedMenuItem:f.addNestedMenuItem,addSidebar:f.addSidebar,addSplitButton:f.addSplitButton,addToggleButton:f.addToggleButton,addGroupToolbarButton:f.addGroupToolbarButton,addToggleMenuItem:f.addToggleMenuItem,addView:f.addView,addContext:f.addContext,getAll:f.getAll},styleSheetLoader:void 0,show:H,hide:H,setEnabled:H,isEnabled:S},this.mode=eT(n),r.dispatch("SetupEditor",{editor:this}),g=ac(n);j(g)&&g.call(n,n)}render(){{var n=this,a,o,i=n.id;yi.setCode(vd(n));let e=()=>{mA.unbind(window,"ready",e),n.render()};if(ai.Event.domLoaded){if(n.getElement()){let t=W(n.getElement()),e=fr(t);n.on("remove",()=>{ge(t.dom.attributes,e=>gr(t,e.name)),dr(t,e)}),n.ui.styleSheetLoader=(a=t,o=n,io.forElement(a,{contentCssCors:Xd(o),referrerPolicy:hd(o)})),jd(n)?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");let r=n.getElement().form||mA.getParent(i,"form");r&&(n.formElement=r,Hd(n)&&!ma(n.getElement())&&(mA.insertAfter(mA.create("input",{type:"hidden",name:i}),i),n.hasHiddenInput=!0),n.formEventDelegate=e=>{n.dispatch(e.type,e)},mA.bind(r,"submit reset",n.formEventDelegate),n.on("reset",()=>{n.resetContent()}),!Vd(n)||r.submit.nodeType||r.submit.length||r._mceOldSubmit||(r._mceOldSubmit=r.submit,r.submit=()=>(n.editorManager.triggerSave(),n.setDirty(!1),r._mceOldSubmit(r)))),n.windowManager=zC(n),n.notificationManager=IC(n),"xml"===n.options.get("encoding")&&n.on("GetContent",e=>{e.save&&(e.content=mA.encode(e.content))}),$d(n)&&n.on("submit",()=>{n.initialized&&n.save()}),qd(n)&&(n._beforeUnload=()=>{!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),pA(n,n.suffix)}}else mA.bind(window,"ready",e)}}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Wg(this)}translate(e){return yi.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(z(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:S,default:t})),n.isSet(e)||b(t)?n.get(e):t}hasPlugin(e,t){return!(!V(Zd(this),e)||t&&void 0===FC.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(lT.show(this.getContainer()),lT.hide(this.id)),this.load(),this.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(lT.hide(e.getContainer()),lT.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){var t,r=this.getElement();return!this.removed&&r?(e={...e,load:!0},t=ma(r)?r.value:r.innerHTML,t=this.setContent(t,e),e.no_events||this.dispatch("LoadContent",{...e,element:r}),t):""}save(t={}){let r=this,n=r.getElement();if(!n||!r.initialized||r.removed)return"";let e={...t,save:!0,element:n},a=r.getContent(e);var o={...e,content:a};if(o.no_events||r.dispatch("SaveContent",o),"raw"===o.format&&r.dispatch("RawSaveContent",o),a=o.content,ma(n))n.value=a;else{!t.is_removing&&r.inline||(n.innerHTML=a);let e=lT.getParent(r.id,"form");e&&dT(e.elements,e=>e.name!==r.id||(e.value=a,!1))}return o.element=e.element=n=null,!1!==o.set_dirty&&r.setDirty(!1),a}setContent(e,t){return yC(this,e,t)}getContent(e){return[n,e={}]=[this,e],t=e.format||"html",e={...e,format:t,get:!0,getInner:!0},Ty(n,e).fold(f,e=>{r=n,t=e;var t,r=sC(r).editor.getContent(t);return Oy(n,r,e)});var n,t}insertContent(e,t){t&&(e=sT({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?yC(this,this.startContent,{format:"raw"}):yC(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||lT.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=lT.get(this.id)),this.targetElm}getWin(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow}getDoc(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument}getBody(){var e,t=this.getDoc();return null!=(e=null!=(e=this.bodyElement)?e:null==t?void 0:t.body)?e:null}convertURL(e,t,r){var n=this.options.get,a=ic(this);return j(a)?a.call(this,e,r,!0,t):!n("convert_urls")||"link"===r||le(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length||"http"!==(a=new gy(e)).protocol&&"https"!==a.protocol&&""!==a.protocol?e:n("relative_urls")?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){var t;t=t=this,e=e,dC(t).editor.addVisual(e)}setEditableRoot(e){var t;e=e,(t=this)._editableRoot!==e&&(t._editableRoot=e,XC(t)||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),t.dispatch("EditableRootStateChange",{state:e}))}hasEditableRoot(){return this._editableRoot}remove(){var e,t,r,n,a;(e=this).removed||({_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),a=e.getElement(),n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&z(null==a?void 0:a.nextSibling)&&NC.remove(a.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&n&&(a=e,NC.setStyle(a.id,"display",a.orgDisplay)),e.dispatch("detach"),NC.remove(e.getContainer()),RC(t),RC(r),e.destroy())}destroy(e){var t=this,{selection:r,dom:n}=t;if(!t.destroyed)if(e||t.removed){e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),RC(r),RC(n)),(r=(e=t).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),NC.unbind(r,"submit reset",e.formEventDelegate));var a=t;if((n=a).contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,r=a.selection){let e=r.dom;n.selection=r.win=r.dom=e.doc=null}t.destroyed=!0}else t.remove()}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let uT=X.DOM,mT=oe.each,gT,fT=!1,pT=[],hT=t=>{let r=t.type;mT(CT.get(),e=>{switch(r){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t)}})},vT=e=>{var t;e!==fT&&(t=X.DOM,e?(t.bind(window,"resize",hT),t.bind(window,"scroll",hT)):(t.unbind(window,"resize",hT),t.unbind(window,"scroll",hT)),fT=e)},bT=t=>{var e=pT;return pT=B(pT,e=>t!==e),CT.activeEditor===t&&(CT.activeEditor=0<pT.length?pT[0]:null),CT.focusedEditor===t&&(CT.focusedEditor=null),e.length!==pT.length},yT="CSS1Compat"!==document.compatMode,CT={...zA,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"7.0",releaseDate:"TBD",i18n:yi,activeEditor:null,focusedEditor:null,setup(){let e=this,n="",a="",t=gy.getDocumentBaseUrl(document.location),r=(/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),window.tinymce||window.tinyMCEPreInit);if(r)n=r.base||r.baseURL,a=r.suffix;else{let r=document.getElementsByTagName("script");for(let e=0;e<r.length;e++){let t=r[e].src||"";if(""!==t){let e=t.substring(t.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(t)){-1!==e.indexOf(".min")&&(a=".min"),n=t.substring(0,t.lastIndexOf("/"));break}}}if(!n&&document.currentScript){let e=document.currentScript.src;-1!==e.indexOf(".min")&&(a=".min"),n=e.substring(0,e.lastIndexOf("/"))}}var o;e.baseURL=new gy(t).toAbsolute(n),e.documentBaseURL=t,e.baseURI=new gy(e.baseURL),e.suffix=a,(o=e).on("AddEditor",C(Hg,o)),o.on("RemoveEditor",C(Vg,o))},overrideDefaults(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(t&&(this.suffix=t),(this.defaultOptions=e).plugin_base_urls);void 0!==t&&ne(t,(e,t)=>{Ci.PluginManager.urls[t]=e})},init(i){let l=this,r,s=oe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),d=e=>{r=e},t=()=>{let n=0,a=[],o;var e;uT.unbind(window,"ready",t),(e=i.onpageload)&&e.apply(l,[]),o=Be((e=i,F.browser.isIE()||F.browser.isEdge()?(qC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):yT?(qC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Z(e.selector)?uT.select(e.selector):z(e.target)?[e.target]:[])),oe.each(o,e=>{(e=l.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(bT(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(o=oe.grep(o,e=>!l.get(e.id))).length?d([]):mT(o,e=>{{var t;(r=e,i.inline&&r.tagName.toLowerCase()in s)?qC("Could not initialize inline editor on invalid inline target element",e):(r=(e=>{let t=e.id;return t||(t=w(e,"name").filter(e=>!uT.get(e)).getOrThunk(uT.uniqueId),e.setAttribute("id",t)),t})(e),t=i,r=new cT(r,t,l),a.push(r),r.on("init",()=>{++n===o.length&&d(a)}),r.targetElm=r.targetElm||e,r.render())}var r})};return uT.bind(window,"ready",t),new Promise(t=>{r?t(r):d=e=>{t(e)}})},get(t){return 0===arguments.length?pT.slice(0):Z(t)?be(pT,e=>e.id===t).getOr(null):y(t)&&pT[t]?pT[t]:null},add(e){let r=this,t=r.get(e.id);return t===e||(null===t&&pT.push(e),vT(!0),r.activeEditor=e,r.dispatch("AddEditor",{editor:e}),gT)||(gT=e=>{var t=r.dispatch("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",gT)),e},createEditor(e,t){return this.add(new cT(e,t,this))},remove(e){let t=this,r;if(e){if(!Z(e))return r=e,I(t.get(r.id))?null:(bT(r)&&t.dispatch("RemoveEditor",{editor:r}),0===pT.length&&window.removeEventListener("beforeunload",gT),r.remove(),vT(0<pT.length),r);mT(uT.select(e),e=>{(r=t.get(e.id))&&t.remove(r)})}else for(let e=pT.length-1;0<=e;e--)t.remove(pT[e])},execCommand(e,t,r){var n,a=le(r)?null!=(n=r.id)?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(a)){let e=r.options;new cT(a,e,this).render()}return!0;case"mceRemoveEditor":{let e=this.get(a);return e&&e.remove(),!0}case"mceToggleEditor":{let e=this.get(a);return e?e.isHidden()?e.show():e.hide():this.execCommand("mceAddEditor",!1,r),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{mT(pT,e=>{e.save()})},addI18n:(e,t)=>{yi.add(e,t)},translate:e=>yi.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new gy(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new gy(this.baseURL)}},wT=(CT.setup(),(()=>{let t=Ma();return{FakeClipboardItem:t=>({items:t,types:Pe(t),getType:e=>w(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})()),ET=Math.min,xT=Math.max,_T=Math.round,kT=(e,t,r)=>{let n=t.x,a=t.y;var o=e.w,e=e.h,i=t.w,t=t.h,r=(r||"").split("");return"b"===r[0]&&(a+=t),"r"===r[1]&&(n+=i),"c"===r[0]&&(a+=_T(t/2)),"c"===r[1]&&(n+=_T(i/2)),"b"===r[3]&&(a-=e),"r"===r[4]&&(n-=o),"c"===r[3]&&(a-=_T(e/2)),"c"===r[4]&&(n-=_T(o/2)),ST(n,a,o,e)},ST=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),NT={inflate:(e,t,r)=>ST(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:kT,findBestRelativePosition:(t,r,n,a)=>{for(let e=0;e<a.length;e++){var o=kT(t,r,a[e]);if(o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return a[e]}return null},intersect:(e,t)=>{var r=xT(e.x,t.x),n=xT(e.y,t.y),a=ET(e.x+e.w,t.x+t.w),e=ET(e.y+e.h,t.y+t.h);return a-r<0||e-n<0?null:ST(r,n,a-r,e-n)},clamp:(e,t,r)=>{let n=e.x,a=e.y,o=e.x+e.w,i=e.y+e.h;var e=t.x+t.w,l=t.y+t.h,s=xT(0,t.x-n),t=xT(0,t.y-a),e=xT(0,o-e),l=xT(0,i-l);return n+=s,a+=t,r&&(o+=s,i+=t,n-=e,a-=l),o-=e,i-=l,ST(n,a,o-n,i-a)},create:ST,fromClientRect:e=>ST(e.left,e.top,e.width,e.height)},RT=(()=>{let o={},l={},r={};return{load:(t,r)=>{let n=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${t}', data)\` within 1 second`;var e;return void 0!==o[t]?o[t]:(e=new Promise((o,i)=>{let e=(()=>{let r=!1,n=null,e=t=>(...e)=>{r||(r=!0,null!==n&&(clearTimeout(n),n=null),t.apply(null,e))},t=e(o),a=e(i);return{start:(...e)=>{r||null!==n||(n=setTimeout(()=>a.apply(null,e),1e3))},resolve:t,reject:a}})();l[t]=e.resolve,pi.ScriptLoader.loadScript(r).then(()=>e.start(a),()=>e.reject(n))}),o[t]=e)},add:(e,t)=>{void 0!==l[e]&&(l[e](t),delete l[e]),o[e]=Promise.resolve(t),r[e]=t},has:e=>e in r,get:e=>r[e],unload:e=>{delete o[e],delete r[e]}}})(),AT;try{let e="__storage_test__";(AT=window.localStorage).setItem(e,e),AT.removeItem(e)}catch(n){AT=(()=>{let r={},n=[];var e={getItem:e=>r[e]||null,setItem:(e,t)=>{n.push(e),r[e]=String(t)},key:e=>n[e],removeItem:t=>{n=n.filter(e=>e===t),delete r[t]},clear:()=>{n=[],r={}},length:0};return Object.defineProperty(e,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),e})()}var dk={geom:{Rect:NT},util:{Delay:Mg,Tools:oe,VK:ie,URI:gy,EventDispatcher:FA,Observable:zA,I18n:yi,LocalStorage:AT,ImageUploader:r=>{let e=a1(),n=s1(r,e);return{upload:(e,t=!0)=>n.upload(e,t?l1(r):void 0)}}},dom:{EventUtils:ai,TreeWalker:Gn,TextSeeker:ji,DOMUtils:X,ScriptLoader:pi,RangeUtils:wf,Serializer:bC,StyleSheetLoader:oo,ControlSelection:Jg,BookmarkManager:hg,Selection:pC,Event:ai.Event},html:{Styles:Xo,Entities:_o,Node:Zf,Schema:jo,DomParser:Ny,Writer:hp,Serializer:vp},Env:F,AddOnManager:Ci,Annotator:pg,Formatter:C1,UndoManager:E1,EditorCommands:MA,WindowManager:zC,NotificationManager:IC,EditorObservable:WA,Shortcuts:iT,Editor:cT,FocusManager:Lg,EditorManager:CT,DOM:X.DOM,ScriptLoader:pi.ScriptLoader,PluginManager:FC,ThemeManager:UC,ModelManager:TC,IconManager:AC,Resource:RT,FakeClipboard:wT,trim:oe.trim,isArray:oe.isArray,is:oe.is,toArray:oe.toArray,makeMap:oe.makeMap,each:oe.each,map:oe.map,grep:oe.grep,inArray:oe.inArray,extend:oe.extend,walk:oe.walk,resolve:oe.resolve,explode:oe.explode,_addCacheSuffix:oe._addCacheSuffix},ck=oe.extend(CT,dk),TT=(mk=ck,window.tinymce=mk,window.tinyMCE=mk,ck);if("object"==typeof module)try{module.exports=TT}catch(TT){}})();
(()=>{let o=Object.getPrototypeOf,n=(e,t,o)=>!!o(e,t.prototype)||(null==(o=e.constructor)?void 0:o.name)===t.name,t=o=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&n(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===o;var t},a=t=>e=>typeof e===t,s=t=>e=>t===e,$=t("string"),v=t("object"),l=e=>{return e=e,t=Object,v(e)&&n(e,t,(e,t)=>o(e)===t);var t},c=t("array"),p=s(null),b=a("boolean"),q=s(void 0),Y=e=>null==e,X=e=>!Y(e),K=a("function"),J=a("number"),Q=(o,n)=>{if(c(o)){for(let e=0,t=o.length;e<t;++e)if(!n(o[e]))return!1;return!0}return!1},S=()=>{},Z=e=>()=>e(),ee=(t,o)=>(...e)=>t(o.apply(null,e)),F=e=>()=>e,x=e=>e,te=(e,t)=>e===t;function oe(t,...o){return(...e)=>{e=o.concat(e);return t.apply(null,e)}}let ne=t=>e=>!t(e),ae=e=>()=>{throw new Error(e)},re=e=>e(),ie=F(!1),se=F(!0);class I{constructor(e,t){this.tag=e,this.value=t}static some(e){return new I(!0,e)}static none(){return I.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?I.some(e(this.value)):I.none()}bind(e){return this.tag?e(this.value):I.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:I.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return X(e)?I.some(e):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);let le=Array.prototype.slice,ce=Array.prototype.indexOf,de=Array.prototype.push,ue=(e,t)=>ce.call(e,t),me=(e,t)=>-1<ue(e,t),ge=(o,n)=>{for(let e=0,t=o.length;e<t;e++)if(n(o[e],e))return!0;return!1},pe=(t,o)=>{var n=[];for(let e=0;e<t;e++)n.push(o(e));return n},he=(t,o)=>{var n=[];for(let e=0;e<t.length;e+=o){var a=le.call(t,e,e+o);n.push(a)}return n},C=(o,n)=>{let e=o.length,a=new Array(e);for(let t=0;t<e;t++){let e=o[t];a[t]=n(e,t)}return a},R=(o,n)=>{for(let e=0,t=o.length;e<t;e++)n(o[e],e)},fe=(o,n)=>{var a=[],r=[];for(let e=0,t=o.length;e<t;e++){var i=o[e];(n(i,e)?a:r).push(i)}return{pass:a,fail:r}},ve=(o,n)=>{var a=[];for(let e=0,t=o.length;e<t;e++){var r=o[e];n(r,e)&&a.push(r)}return a},be=(e,t,o)=>{var n,a,r=e;for(let e=r.length-1;0<=e;e--)n=r[e],a=e,o=t(o,n,a);return o},xe=(e,o,n)=>(R(e,(e,t)=>{n=o(n,e,t)}),n),ye=(e,t)=>{var o=e,n=t,a=ie;for(let e=0,t=o.length;e<t;e++){var r=o[e];if(n(r,e))return I.some(r);if(a(r,e))break}return I.none()},we=(o,n)=>{for(let e=0,t=o.length;e<t;e++)if(n(o[e],e))return I.some(e);return I.none()},Se=o=>{var n=[];for(let e=0,t=o.length;e<t;++e){if(!c(o[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+o);de.apply(n,o[e])}return n},Ce=(e,t)=>Se(C(e,t)),ke=(o,n)=>{for(let e=0,t=o.length;e<t;++e)if(!0!==n(o[e],e))return!1;return!0},Oe=e=>{e=le.call(e,0);return e.reverse(),e},_e=(e,t)=>ve(e,e=>!me(t,e)),Te=(o,n)=>{var a={};for(let e=0,t=o.length;e<t;e++){var r=o[e];a[String(r)]=n(r,e)}return a},Ee=e=>[e],Ae=(e,t)=>{e=le.call(e,0);return e.sort(t),e},Me=(e,t)=>0<=t&&t<e.length?I.some(e[t]):I.none(),De=e=>Me(e,0),Be=e=>Me(e,e.length-1),Fe=K(Array.from)?Array.from:e=>le.call(e),Ie=(t,o)=>{for(let e=0;e<t.length;e++){var n=o(t[e],e);if(n.isSome())return n}return I.none()},Re=Object.keys,Ne=Object.hasOwnProperty,ze=(o,n)=>{var a=Re(o);for(let e=0,t=a.length;e<t;e++){var r=a[e];n(o[r],r)}},Ve=(e,o)=>Le(e,(e,t)=>({k:t,v:o(e,t)})),Le=(e,o)=>{let n={};return ze(e,(e,t)=>{e=o(e,t);n[e.k]=e.v}),n},He=o=>(e,t)=>{o[t]=e},Pe=(e,o,n,a)=>{ze(e,(e,t)=>{(o(e,t)?n:a)(e,t)})},Ue=(e,t)=>{var o={};return Pe(e,t,He(o),S),o},We=(e,o)=>{let n=[];return ze(e,(e,t)=>{n.push(o(e,t))}),n},je=(o,n)=>{var a=Re(o);for(let e=0,t=a.length;e<t;e++){var r=a[e],i=o[r];if(n(i,r,o))return I.some(i)}return I.none()},Ge=e=>We(e,x),k=(e,t)=>$e(e,t)?I.from(e[t]):I.none(),$e=(e,t)=>Ne.call(e,t),qe=(e,t)=>$e(e,t)&&null!=e[t],Ye=(e,t,o=te)=>e.exists(e=>o(e,t)),Xe=t=>{let o=[],n=e=>{o.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return o},Ke=(e,t,o)=>e.isSome()&&t.isSome()?I.some(o(e.getOrDie(),t.getOrDie())):I.none(),Je=(e,t)=>null!=e?I.some(t(e)):I.none(),Qe=(e,t)=>e?I.some(t):I.none(),Ze=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,et=(e,t)=>ot(e,t)?(t=t.length,e.substring(t)):e,tt=(e,t,o=0,n)=>{e=e.indexOf(t,o);return-1!==e&&(!!q(n)||e+t.length<=n)},ot=(e,t)=>Ze(e,t,0),nt=(e,t)=>Ze(e,t,e.length-t.length),at=(Xo=/^\s+|\s+$/g,e=>e.replace(Xo,"")),rt=e=>0<e.length,it=e=>!rt(e),st=e=>void 0!==e.style&&K(e.style.getPropertyValue),lt=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},ct=(t,e)=>{e=(e||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length){let e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return lt(e.childNodes[0])},dt=(e,t)=>{t=(t||document).createElement(e);return lt(t)},ut=(e,t)=>{t=(t||document).createTextNode(e);return lt(t)},N=lt,mt="undefined"!=typeof window?window:Function("return this;")(),gt=(e,o)=>{{var n=e.split(".");let t=null!=o?o:mt;for(let e=0;e<n.length&&null!=t;++e)t=t[n[e]];return t}},pt=Object.getPrototypeOf,ht=e=>{var t=gt("ownerDocument.defaultView",e);return v(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=gt("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(pt(e).constructor.name))},ft=e=>e.dom.nodeName.toLowerCase(),vt=t=>e=>e.dom.nodeType===t,bt=e=>xt(e)&&ht(e.dom),xt=vt(1),yt=vt(3),wt=vt(9),St=vt(11),Ct=t=>e=>xt(e)&&ft(e)===t,kt=(e,t)=>{var o=e.dom;if(1!==o.nodeType)return!1;{let e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ot=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,_t=(e,t)=>{t=void 0===t?document:t.dom;return Ot(t)?I.none():I.from(t.querySelector(e)).map(N)},Tt=(e,t)=>e.dom===t.dom,Et=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},At=e=>N(e.dom.ownerDocument),Mt=e=>wt(e)?e:At(e),Dt=e=>N(Mt(e).dom.documentElement),Bt=e=>N(Mt(e).dom.defaultView),Ft=e=>I.from(e.dom.parentNode).map(N),It=e=>I.from(e.dom.parentElement).map(N),Rt=e=>I.from(e.dom.offsetParent).map(N),Nt=e=>C(e.dom.childNodes,N),zt=(e,t)=>{e=e.dom.childNodes;return I.from(e[t]).map(N)},Vt=e=>zt(e,0),Lt=(e,t)=>({element:e,offset:t}),Ht=(e,t)=>{var o=Nt(e);return 0<o.length&&t<o.length?Lt(o[t],0):Lt(e,t)},Pt=e=>St(e)&&X(e.dom.host),Ut=e=>N(e.dom.getRootNode()),Wt=e=>Pt(e)?e:N(Mt(e).dom.body),jt=e=>{e=Ut(e);return Pt(e)?I.some(e):I.none()},Gt=e=>N(e.dom.host),$t=e=>{let t=yt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return jt(N(t)).fold(()=>o.body.contains(t),(n=$t,a=Gt,e=>n(a(e))));var n,a},qt=()=>Yt(N(document)),Yt=e=>{e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return N(e)},Xt=(e,t,o)=>{if(!($(o)||b(o)||J(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},w=(e,t,o)=>{Xt(e.dom,t,o)},Kt=(e,t)=>{let o=e.dom;ze(t,(e,t)=>{Xt(o,t,e)})},Jt=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},Qt=(e,t)=>I.from(Jt(e,t)),Zt=(e,t)=>{e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},eo=(e,t)=>{e.dom.removeAttribute(t)},to=(e,t,o)=>{if(!$(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);st(e)&&e.style.setProperty(t,o)},oo=(e,t)=>{st(e)&&e.style.removeProperty(t)},z=(e,t,o)=>{e=e.dom;to(e,t,o)},no=(e,t)=>{let o=e.dom;ze(t,(e,t)=>{to(o,t,e)})},ao=(e,t)=>{let o=e.dom;ze(t,(e,t)=>{e.fold(()=>{oo(o,t)},e=>{to(o,t,e)})})},ro=(e,t)=>{var o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||$t(e)?n:io(o,t)},io=(e,t)=>st(e)?e.style.getPropertyValue(t):"",so=(e,t)=>{e=e.dom,e=io(e,t);return I.from(e).filter(e=>0<e.length)},lo=e=>{var t={},o=e.dom;if(st(o))for(let e=0;e<o.style.length;e++){var n=o.style.item(e);t[n]=o.style[n]}return t},co=(e,t,o)=>{e=dt(e);return z(e,t,o),so(e,t).isSome()},uo=(e,t)=>{var o=e.dom;oo(o,t),Ye(Qt(e,"style").map(at),"")&&eo(e,"style")},mo=e=>e.dom.offsetWidth,go=(o,n)=>{let e=t=>{var e=n(t);if(e<=0||null===e){let e=ro(t,o);return parseFloat(e)||0}return e},a=(o,e)=>xe(e,(e,t)=>{t=ro(o,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!J(t)&&!t.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+t);e=e.dom;st(e)&&(e.style[o]=t+"px")},get:e,getOuter:e,aggregate:a,max:(e,t,o)=>{e=a(e,o);return e<t?t-e:0}}},po=go("height",e=>{var t=e.dom;return $t(e)?t.getBoundingClientRect().height:t.offsetHeight}),ho=e=>po.get(e),fo=e=>po.getOuter(e),vo=(o,n)=>({left:o,top:n,translate:(e,t)=>vo(o+e,n+t)}),bo=vo,xo=(e,t)=>void 0!==e?e:void 0!==t?t:0,yo=e=>{var t,o,n=e.dom.ownerDocument,a=n.body,r=n.defaultView,n=n.documentElement;return a===e.dom?bo(a.offsetLeft,a.offsetTop):(t=xo(null==r?void 0:r.pageYOffset,n.scrollTop),r=xo(null==r?void 0:r.pageXOffset,n.scrollLeft),o=xo(n.clientTop,a.clientTop),n=xo(n.clientLeft,a.clientLeft),wo(e).translate(r-n,t-o))},wo=e=>{var t=e.dom,o=t.ownerDocument.body;return o===t?bo(o.offsetLeft,o.offsetTop):$t(e)?(o=t.getBoundingClientRect(),bo(o.left,o.top)):bo(0,0)},So=go("width",e=>e.dom.offsetWidth),Co=e=>So.get(e),ko=e=>So.getOuter(e),Oo=t=>{let o,n=!1;return(...e)=>(n||(n=!0,o=t.apply(null,e)),o)},_o=()=>To(0,0),To=(e,t)=>({major:e,minor:t}),Eo={nu:To,detect:(e,o)=>{var o=String(o).toLowerCase();if(0===e.length)return _o();{var n=o;let t=((t,o)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(o))return n}})(e,n);return t?(o=e=>Number(n.replace(t,"$"+e)),To(o(1),o(2))):{major:0,minor:0}}},unknown:_o},Ao=(e,t)=>{let o=String(t).toLowerCase();return ye(e,e=>e.search(o))},Mo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Do=t=>e=>tt(e,t),Bo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>tt(e,"edge/")&&tt(e,"chrome")&&tt(e,"safari")&&tt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mo],search:e=>tt(e,"chrome")&&!tt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>tt(e,"msie")||tt(e,"trident")},{name:"Opera",versionRegexes:[Mo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Do("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Do("firefox")},{name:"Safari",versionRegexes:[Mo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(tt(e,"safari")||tt(e,"mobile/"))&&tt(e,"applewebkit")}],Fo=[{name:"Windows",search:Do("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>tt(e,"iphone")||tt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Do("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Do("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Do("linux"),versionRegexes:[]},{name:"Solaris",search:Do("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Do("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Do("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Io={browsers:F(Bo),oses:F(Fo)},Ro="Chromium",No="Firefox",zo=e=>{let t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isEdge:n("Edge"),isChromium:n(Ro),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(No),isSafari:n("Safari")}},Vo=()=>zo({current:void 0,version:Eo.unknown()}),Lo=zo,Ho=(F("Edge"),F(Ro),F("IE"),F("Opera"),F(No),F("Safari"),"Windows"),Po="Android",Uo="Solaris",Wo="FreeBSD",jo="ChromeOS",Go=e=>{let t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isWindows:n(Ho),isiOS:n("iOS"),isAndroid:n(Po),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(Uo),isFreeBSD:n(Wo),isChromeOS:n(jo)}},$o=()=>Go({current:void 0,version:Eo.unknown()}),qo=Go,Yo=(F(Ho),F("iOS"),F(Po),F("Linux"),F("macOS"),F(Uo),F(Wo),F(jo),e=>window.matchMedia(e).matches);var Xo;let Ko=Oo(()=>{{var r=window.navigator.userAgent,i=I.from(window.navigator.userAgentData),s=Yo,l,c,d,u,m,g,p;let t=Io.browsers(),e=Io.oses(),o=i.bind(e=>{return n=t,e=e,Ie(e.brands,t=>{let o=t.brand.toLowerCase();return ye(n,e=>o===(null==(e=e.brand)?void 0:e.toLowerCase())).map(e=>({current:e.name,version:Eo.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=t,o=r,Ao(e,o).map(e=>{var t=Eo.detect(e.versionRegexes,o);return{current:e.name,version:t}});var e,o}).fold(Vo,Lo),n=(i=e,p=r,Ao(i,p).map(e=>{var t=Eo.detect(e.versionRegexes,p);return{current:e.name,version:t}}).fold($o,qo)),a=(i=o,c=r,s=s,d=(l=n).isiOS()&&!0===/ipad/i.test(c),u=l.isiOS()&&!d,m=l.isiOS()||l.isAndroid(),g=m||s("(pointer:coarse)"),s=d||!u&&m&&s("(min-device-width:768px)"),m=u||m&&!s,i=i.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),c=!m&&!s&&!i,{isiPad:F(d),isiPhone:F(u),isTablet:F(s),isPhone:F(m),isTouch:F(g),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:F(i),isDesktop:F(c)});return{browser:o,os:n,deviceType:a}}}),Jo=()=>Ko(),Qo=e=>{var t,o=N((e=>{if(X(e.target)){var t=N(e.target);if(xt(t)&&(t=t,X(t.dom.shadowRoot))&&e.composed&&e.composedPath){t=e.composedPath();if(t)return De(t)}}return I.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),a=()=>e.preventDefault(),r=ee(a,n);return t=e.clientX,{target:o,x:t,y:e.clientY,stop:n,prevent:a,kill:r,raw:e}},Zo=(e,t,o,n,a)=>{r=o,i=n;var r,i,o=e=>{r(e)&&i(Qo(e))};return e.dom.addEventListener(t,o,a),{unbind:oe(en,e,t,o,a)}},en=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},tn=(t,o)=>{Ft(t).each(e=>{e.dom.insertBefore(o.dom,t.dom)})},on=(e,t)=>{var o;o=e,I.from(o.dom.nextSibling).map(N).fold(()=>{Ft(e).each(e=>{an(e,t)})},e=>{tn(e,t)})},nn=(t,o)=>{Vt(t).fold(()=>{an(t,o)},e=>{t.dom.insertBefore(o.dom,e.dom)})},an=(e,t)=>{e.dom.appendChild(t.dom)},rn=(t,e)=>{R(e,e=>{an(t,e)})},sn=e=>{e.dom.textContent="",R(Nt(e),e=>{ln(e)})},ln=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},cn=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return bo(t,e)},dn=(e,t,o)=>{o=(void 0!==o?o.dom:document).defaultView;o&&o.scrollTo(e,t)},un=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),mn=e=>{let o=void 0===e?window:e,t=o.document,n=cn(N(t));return(e=>{e=void 0===e?window:e;return Jo().browser.isFirefox()?I.none():I.from(e.visualViewport)})(o).fold(()=>{var e=o.document.documentElement,t=e.clientWidth,e=e.clientHeight;return un(n.left,n.top,t,e)},e=>un(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},gn=()=>N(document),pn=(o,e)=>o.view(e).fold(F([]),e=>{var t=o.owner(e),t=pn(o,t);return[e].concat(t)});var hn,fn=Object.freeze({__proto__:null,view:e=>(e.dom===document?I.none():I.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(N),owner:e=>At(e)});let vn=o=>{let e=gn(),n=cn(e),t=(r=(a=fn).owner(o),a=pn(a,r),I.some(a));var a,r;return t.fold(oe(yo,o),e=>{var t=wo(o),e=be(e,(e,t)=>{t=wo(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});return bo(e.left+t.left+n.left,e.top+t.top+n.top)})},bn=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),xn=e=>{var t=yo(e),o=ko(e),e=fo(e);return bn(t.left,t.top,o,e)},yn=e=>{var t=vn(e),o=ko(e),e=fo(e);return bn(t.left,t.top,o,e)},wn=(e,t)=>{var o=Math.max(e.x,t.x),n=Math.max(e.y,t.y),a=Math.min(e.right,t.right),e=Math.min(e.bottom,t.bottom);return bn(o,n,a-o,e-n)},Sn=()=>mn(window),O=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Cn=e=>{let t=O(I.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(I.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(I.some(e))}}},kn=()=>Cn(e=>e.unbind()),On=()=>{let t=Cn(S);return{...t,on:e=>t.get().each(e)}},_n=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Tn=o=>{let e=e=>e(o),t=F(o),n=()=>a,a={tag:!0,inner:o,fold:(e,t)=>t(o),isValue:se,isError:ie,map:e=>V.value(e(o)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(o)},toOptional:()=>I.some(o)};return a},En=o=>{let e=()=>t,t={tag:!1,inner:o,fold:(e,t)=>e(o),isValue:ie,isError:se,map:e,mapError:e=>V.error(e(o)),bind:e,exists:ie,forall:se,getOr:x,or:x,getOrThunk:re,orThunk:re,getOrDie:ae(String(o)),each:S,toOptional:I.none};return t},V={value:Tn,error:En,fromOption:(e,t)=>e.fold(()=>En(t),Tn)},An=((ds=hn=hn||{})[ds.Error=0]="Error",ds[ds.Value=1]="Value",(e,t,o)=>e.stype===hn.Error?t(e.serror):o(e.svalue)),Mn=e=>({stype:hn.Value,svalue:e}),Dn=e=>({stype:hn.Error,serror:e}),Bn=Mn,Fn=Dn,In=An,Rn=(e,t,o,n)=>({tag:"field",key:e,newKey:t,presence:o,prop:n}),Nn=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},zn=a=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");var o={};for(let e=0;e<t.length;e++){var n=t[e];for(let e in n)$e(n,e)&&(o[e]=a(o[e],n[e]))}return o},Vn=zn((e,t)=>l(e)&&l(t)?Vn(e,t):t),Ln=zn((e,t)=>t),Hn=e=>({tag:"defaultedThunk",process:e}),Pn=e=>Hn(F(e)),Un=e=>({tag:"mergeWithThunk",process:e}),Wn=e=>{var t,e=(e=>{let t=[],o=[];return R(e,e=>{An(e,e=>o.push(e),e=>t.push(e))}),{values:t,errors:o}})(e);return 0<e.errors.length?(t=e.errors,ee(Fn,Se)(t)):Bn(e.values)},jn=e=>v(e)&&100<Re(e).length?" removed due to size":JSON.stringify(e,null,2),Gn=(e,t)=>Fn([{path:e,getErrorInfo:t}]),$n=n=>({extract:(e,t)=>{return(t=n(t)).stype===hn.Error?(o=t.serror,e=e,o=o,Gn(e,F(o))):t;var o},toString:F("val")}),qn=$n(Bn),Yn=(e,t,o,n)=>n(k(e,t).getOrThunk(()=>o(e))),Xn=(t,o,n,a,r)=>{let i=e=>r.extract(o.concat([a]),e),e=e=>e.fold(()=>Bn(I.none()),e=>{return e=r.extract(o.concat([a]),e),t=I.some,e.stype===hn.Value?{stype:hn.Value,svalue:t(e.svalue)}:e;var t});switch(t.tag){case"required":return d=o,u=n,m=a,g=i,k(u,m).fold(()=>{return e=d,t=m,o=u,Gn(e,()=>'Could not find valid *required* value for "'+t+'" in '+jn(o));var e,t,o},g);case"defaultedThunk":return Yn(n,a,t.process,i);case"option":return g=n,c=a,e(k(g,c));case"defaultedOptionThunk":return s=n,c=a,l=t.process,e(k(s,c).map(e=>!0===e?l(s):e));case"mergeWithThunk":return Yn(n,a,F({}),e=>{e=Vn(t.process(n),e);return i(e)})}var s,l,c,d,u,m,g},Kn=o=>({extract:(e,t)=>o().extract(e,t),toString:()=>o().toString()}),Jn=e=>Re(Ue(e,X)),Qn=e=>{let a=i(e),r=be(e,(t,e)=>Nn(e,e=>Vn(t,{[e]:!0}),F(t)),{});return{extract:(e,t)=>{var o,n=b(t)?[]:Jn(t),n=ve(n,e=>!qe(r,e));return 0===n.length?a.extract(e,t):(t=e,o=n,Gn(t,()=>"There are unsupported fields: ["+o.join(", ")+"] specified"))},toString:a.toString}},i=n=>({extract:(e,t)=>{{var i=e,s=t,o;let a={},r=[];for(o of n)Nn(o,(e,t,o,n)=>{o=Xn(o,i,s,e,n);In(o,e=>{r.push(...e)},e=>{a[t]=e})},(e,t)=>{a[e]=t(s)});return 0<r.length?Fn(r):Bn(a)}},toString:()=>"obj{\n"+C(n,e=>Nn(e,(e,t,o,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}),Zn=n=>({extract:(o,e)=>{e=C(e,(e,t)=>n.extract(o.concat(["["+t+"]"]),e));return Wn(e)},toString:()=>"array("+n.toString()+")"}),ea=(e,t)=>{let r=void 0!==t?t:x;return{extract:(t,o)=>{var n,a=[];for(n of e){let e=n.extract(t,o);if(e.stype===hn.Value)return{stype:hn.Value,svalue:r(e.svalue)};a.push(e)}return Wn(a)},toString:()=>"oneOf("+C(e,e=>e.toString()).join(", ")+")"}},ta=(a,r)=>({extract:(o,n)=>{var e=Re(n),t=(t=o,e=e,Zn($n(a)).extract(t,e));return(e=t).stype===hn.Value?(e=>{const t=C(e,e=>Rn(e,e,{tag:"required",process:{}},r));return i(t).extract(o,n)})(e.svalue):e},toString:()=>"setOf("+r.toString()+")"}),oa=ee(Zn,i),na=F(qn),aa=(o,n)=>$n(e=>{var t=typeof e;return o(e)?Bn(e):Fn(`Expected type: ${n} but got: `+t)}),ra=aa(J,"number"),ia=aa($,"string"),sa=aa(b,"boolean"),la=aa(K,"function"),ca=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(e=>ca(t[e]));default:return!1}},da=$n(e=>ca(e)?Bn(e):Fn("Expected value to be acceptable for sending via postMessage")),ua=(n,s)=>({extract:(o,i)=>k(i,n).fold(()=>{return e=o,t=n,Gn(e,()=>'Choice schema did not contain choice key: "'+t+'"');var e,t},e=>{return n=o,t=i,a=s,r=e,k(a,r).fold(()=>{return e=n,t=a,o=r,Gn(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+jn(t));var e,t,o},e=>e.extract(n.concat(["branch: "+r]),t));var n,t,a,r}),toString:()=>"chooseOn("+n+"). Possible values: "+Re(s)}),ma=t=>$n(e=>t(e).fold(Fn,Bn)),ga=(t,e)=>ta(e=>t(e).fold(Dn,Mn),e),pa=(e,t,o)=>(o=o,o=(t=t.extract([e],o)).stype===hn.Error?{stype:hn.Error,serror:(e=t.serror,{input:o,errors:e})}:t,An(o,V.error,V.value)),ha=e=>e.fold(e=>{throw new Error(va(e))},x),fa=(e,t,o)=>ha(pa(e,t,o)),va=e=>"Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:F("... (only showing first ten failures)")}]):e;return C(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+jn(e.input),ba=(e,t)=>ua(e,Ve(t,i)),xa=(e,t)=>{{let o=Oo(t);return{extract:(e,t)=>o().extract(e,t),toString:()=>o().toString()}}},ya=Rn,wa=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Sa=t=>ma(e=>me(t,e)?V.value(e):V.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`)),r=e=>ya(e,e,{tag:"required",process:{}},na()),Ca=(e,t)=>ya(e,e,{tag:"required",process:{}},t),ka=e=>Ca(e,ia),Oa=(e,t)=>ya(e,e,{tag:"required",process:{}},Sa(t)),_a=e=>Ca(e,la),Ta=(e,t)=>ya(e,e,{tag:"required",process:{}},i(t)),Ea=(e,t)=>ya(e,e,{tag:"required",process:{}},oa(t)),Aa=(e,t)=>ya(e,e,{tag:"required",process:{}},Zn(t)),d=e=>ya(e,e,{tag:"option",process:{}},na()),Ma=(e,t)=>ya(e,e,{tag:"option",process:{}},t),Da=e=>Ma(e,ra),Ba=e=>Ma(e,ia),Fa=(e,t)=>Ma(e,Sa(t)),Ia=e=>Ma(e,la),Ra=(e,t)=>Ma(e,Zn(t)),Na=(e,t)=>Ma(e,i(t)),u=(e,t)=>ya(e,e,Pn(t),na()),za=(e,t,o)=>ya(e,e,Pn(t),o),Va=(e,t)=>za(e,t,ra),La=(e,t)=>za(e,t,ia),Ha=(e,t,o)=>za(e,t,Sa(o)),Pa=(e,t)=>za(e,t,sa),Ua=(e,t)=>za(e,t,la),Wa=(e,t,o)=>za(e,t,Zn(o)),ja=(e,t,o)=>za(e,t,i(o)),Ga=r=>{if(!c(r))throw new Error("cases must be an array");if(0===r.length)throw new Error("there must be at least one case");let i=[],s={};return R(r,(e,t)=>{var o=Re(e);if(1!==o.length)throw new Error("one and only one name per case");let n=o[0],a=e[n];if(void 0!==s[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!c(a))throw new Error("case arguments must be an array");i.push(n),s[n]=(...o)=>{var e=o.length;if(e!==a.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+a.length+" ("+a+"), got "+e);return{fold:(...e)=>{if(e.length!==r.length)throw new Error("Wrong number of arguments to fold. Expected "+r.length+", got "+e.length);return e[t].apply(null,o)},match:e=>{let t=Re(e);if(i.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+i.join(",")+"\nActual: "+t.join(","));if(ke(i,e=>me(t,e)))return e[n].apply(null,o);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+i.join(", "))},log:e=>{console.log(e,{constructors:i,constructor:n,params:o})}}}}),s},$a=(Ga([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),(e,t)=>({[e]:t})),qa=e=>{{let t={};return R(e,e=>{t[e.key]=e.value}),t}},Ya=e=>K(e)?e:ie,Xa=(e,o,t)=>{let n=e.dom;for(var a=Ya(t);n.parentNode;){n=n.parentNode;let e=N(n),t=o(e);if(t.isSome())return t;if(a(e))break}return I.none()},Ka=(e,t,o)=>{let n=t(e),a=Ya(o);return n.orThunk(()=>a(e)?I.none():Xa(e,t,a))},Ja=(e,t)=>Tt(e.element,t.event.target),Qa={can:se,abort:ie,run:S},Za=e=>{if(qe(e,"can")||qe(e,"abort")||qe(e,"run"))return{...Qa,...e};throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!")},er=F,tr=er("touchstart"),or=er("touchmove"),nr=er("touchend"),ar=er("touchcancel"),rr=er("mousedown"),ir=er("mousemove"),sr=er("mouseout"),lr=er("mouseup"),cr=er("mouseover"),dr=er("focusin"),ur=er("focusout"),mr=er("keydown"),gr=er("keyup"),pr=er("input"),hr=er("change"),fr=er("click"),vr=er("transitioncancel"),br=er("transitionend"),xr=er("transitionstart"),yr=er("selectstart"),wr=e=>F("alloy."+e),Sr={tap:wr("tap")},Cr=wr("focus"),kr=wr("blur.post"),Or=wr("paste.post"),_r=wr("receive"),Tr=wr("execute"),Er=wr("focus.item"),Ar=Sr.tap,Mr=wr("longpress"),Dr=wr("sandbox.close"),Br=wr("typeahead.cancel"),Fr=wr("system.init"),Ir=wr("system.touchmove"),Rr=wr("system.touchend"),Nr=wr("system.scroll"),zr=wr("system.resize"),Vr=wr("system.attached"),Lr=wr("system.detached"),Hr=wr("system.dismissRequested"),Pr=wr("system.repositionRequested"),Ur=wr("focusmanager.shifted"),Wr=wr("slotcontainer.visibility"),jr=wr("system.external.element.scroll"),Gr=wr("change.tab"),$r=wr("dismiss.tab"),qr=wr("highlight"),Yr=wr("dehighlight"),_=(e,t)=>{Jr(e,e.element,t,{})},T=(e,t,o)=>{Jr(e,e.element,t,o)},Xr=e=>{_(e,Tr())},Kr=(e,t,o)=>{Jr(e,t,o,{})},Jr=(e,t,o,n)=>{n={target:t,...n};e.getSystem().triggerEvent(o,t,n)},Qr=(e,t,o,n)=>{e.getSystem().triggerEvent(o,t,n.event)},Zr=e=>qa(e),ei=(e,t)=>({key:e,value:Za({abort:t})}),ti=e=>({key:e,value:Za({run:(e,t)=>{t.event.prevent()}})}),L=(e,t)=>({key:e,value:Za({run:t})}),oi=(e,o,n)=>({key:e,value:Za({run:(e,t)=>{o.apply(void 0,[e,t].concat(n))}})}),ni=e=>o=>({key:e,value:Za({run:(e,t)=>{Ja(e,t)&&o(e,t)}})}),ai=(e,t,o)=>{return n=e,a=t.partUids[o],L(n,(e,t)=>{e.getSystem().getByUid(a).each(e=>{Qr(e,e.element,n,t)})});var n,a},ri=(e,a)=>L(e,(t,e)=>{let o=e.event,n=t.getSystem().getByDom(o.target).getOrThunk(()=>Ka(o.target,e=>t.getSystem().getByDom(e).toOptional(),ie).getOr(t));a(t,n,e)}),ii=e=>L(e,(e,t)=>{t.cut()}),si=(e,t)=>ni(e)(t),li=ni(Vr()),ci=ni(Lr()),di=ni(Fr()),ui=(ls=Tr(),e=>L(ls,e)),mi=e=>C(e,e=>nt(e,"/*")?e.substring(0,e.length-2):e),gi=(e,t)=>{let o=e.toString(),n=o.indexOf(")")+1,a=o.indexOf("("),r=o.substring(a+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:mi(r)}),e},pi=e=>({classes:q(e.classes)?[]:e.classes,attributes:q(e.attributes)?{}:e.attributes,styles:q(e.styles)?{}:e.styles}),hi=(o,n,a)=>di((e,t)=>{a(e,o,n)}),fi=e=>({key:e,value:void 0}),vi=(o,e,n,t,a,r,i)=>{let s=e=>qe(e,n)?e[n]():I.none(),l=Ve(a,(a,e)=>{var r=n,i=a,s=e;{var a=(o,...e)=>{let n=[o].concat(e);return o.config({name:F(r)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+s)},e=>{var t=Array.prototype.slice.call(n,1);return i.apply(void 0,[o,e.config,e.state].concat(t))})},l=s;let e=i.toString(),t=e.indexOf(")")+1,o=e.indexOf("("),n=e.substring(o+1,t-1).split(/,\s*/);return a.toFunctionAnnotation=()=>({name:l,parameters:mi(n.slice(0,1).concat(n.slice(3)))}),a}}),c={...Ve(r,(e,t)=>gi(e,t)),...l,revoke:oe(fi,n),config:e=>{var t=fa(n+"-config",o,e);return{key:n,value:{config:t,me:c,configAsRaw:Oo(()=>fa(n+"-config",o,e)),initialConfig:e,state:i}}},schema:F(e),exhibit:(e,o)=>Ke(s(e),k(t,"exhibit"),(e,t)=>t(o,e.config,e.state)).getOrThunk(()=>pi({})),name:F(n),handlers:e=>s(e).map(e=>k(t,"events").getOr(()=>({}))(e.config,e.state)).getOr({})};return c},bi={init:()=>xi({readState:F("No State required")})},xi=e=>e,H=e=>qa(e),yi=Qn([r("fields"),r("name"),u("active",{}),u("apis",{}),u("state",bi),u("extra",{})]),wi=e=>{var t,o,n,a,r,i,e=fa("Creating behaviour: "+e.name,yi,e);return t=e.fields,o=e.name,n=e.active,a=e.apis,r=e.extra,e=e.state,i=Qn(t),t=Na(o,[(t=t,Ma("config",Qn(t)))]),vi(i,t,o,n,a,r,e)},Si=Qn([r("branchKey"),r("branches"),r("name"),u("active",{}),u("apis",{}),u("state",bi),u("extra",{})]),Ci=e=>{var t,o,n,a,r,i,e=fa("Creating behaviour: "+e.name,Si,e);return t=ba(e.branchKey,e.branches),o=e.name,n=e.active,a=e.apis,r=e.extra,e=e.state,i=t,t=Na(o,[Ma("config",t)]),vi(i,t,o,n,a,r,e)},ki=F(void 0),Oi=(e,t)=>{e=Jt(e,t);return void 0===e||""===e?[]:e.split(" ")},_i=e=>void 0!==e.dom.classList,Ti=e=>Oi(e,"class"),Ei=(e,t)=>(t=Oi(e,"class").concat([t]),w(e,"class",t.join(" ")),!0),Ai=(e,t)=>{return e=e,o="class",n=t,0<(t=ve(Oi(e,o),e=>e!==n)).length?w(e,o,t.join(" ")):eo(e,o),!1;var o,n},Mi=(e,t)=>{_i(e)?e.dom.classList.add(t):Ei(e,t)},Di=e=>{0===(_i(e)?e.dom.classList:Ti(e)).length&&eo(e,"class")},Bi=(e,t)=>{_i(e)?e.dom.classList.remove(t):Ai(e,t),Di(e)},Fi=(e,t)=>_i(e)&&e.dom.classList.contains(t),Ii=(t,e)=>{R(e,e=>{Mi(t,e)})},Ri=(t,e)=>{R(e,e=>{Bi(t,e)})},Ni=e=>{if(_i(e)){var t=e.dom.classList,o=new Array(t.length);for(let e=0;e<t.length;e++){var n=t.item(e);null!==n&&(o[e]=n)}return o}return Ti(e)},zi=(e,t,o,n,a)=>{var r=e=>e+"px";return{position:e,left:t.map(r),top:o.map(r),right:n.map(r),bottom:a.map(r)}},Vi=(e,t)=>{ao(e,{...e=t,position:I.some(e.position)})},Li=e=>(Ye(so(e,"position"),"fixed")?I.none():Rt(e)).orThunk(()=>{let t=dt("span");return Ft(e).bind(e=>{an(e,t);e=Rt(t);return ln(t),e})}),Hi=e=>Li(e).map(yo).getOrThunk(()=>bo(0,0)),Pi=(e,t)=>{var o=e.element;Mi(o,t.transitionClass),Bi(o,t.fadeOutClass),Mi(o,t.fadeInClass),t.onShow(e)},Ui=(e,t)=>{var o=e.element;Mi(o,t.transitionClass),Bi(o,t.fadeInClass),Mi(o,t.fadeOutClass),t.onHide(e)},Wi=(e,t)=>e.y>=t.y,ji=(e,t)=>e.bottom<=t.bottom,Gi=(e,t,o)=>({location:"top",leftX:t,topY:o.bounds.y-e.y}),$i=(e,t,o)=>({location:"bottom",leftX:t,bottomY:e.bottom-o.bounds.bottom}),qi=e=>e.box.x-e.win.x,Yi=(n,a,e)=>e.getInitialPos().map(e=>{t=e,o=a.optScrollEnv.fold(F(t.bounds.y),e=>e.scrollElmTop+(t.bounds.y-e.currentScrollTop));var t,o=bo(t.bounds.x,o);return{box:bn(o.left,o.top,Co(n),ho(n)),location:e.location}}),Xi=(e,t,o,n,a)=>{r=t,o=o.optScrollEnv.fold(F(r.y),e=>r.y+e.currentScrollTop-e.scrollElmTop);var r,o=bo(r.x,o),o=bn(o.left,o.top,t.width,t.height);n.setInitialPos({style:lo(e),position:ro(e,"position")||"static",bounds:o,location:a.location})},Ki=(r,i,e)=>e.getInitialPos().bind(n=>{var a;switch(e.clearInitialPos(),n.position){case"static":return I.some({morph:"static"});case"absolute":let e=Li(r).getOr(qt()),t=xn(e),o=null!=(a=e.dom.scrollTop)?a:0;return I.some({morph:"absolute",positionCss:zi("absolute",k(n.style,"left").map(e=>i.x-t.x),k(n.style,"top").map(e=>i.y-t.y+o),k(n.style,"right").map(e=>t.right-i.right),k(n.style,"bottom").map(e=>t.bottom-i.bottom))});default:return I.none()}}),Ji=e=>{switch(e.location){case"top":return I.some({morph:"fixed",positionCss:zi("fixed",I.some(e.leftX),I.some(e.topY),I.none(),I.none())});case"bottom":return I.some({morph:"fixed",positionCss:zi("fixed",I.some(e.leftX),I.none(),I.none(),I.some(e.bottomY))});default:return I.none()}},Qi=(e,t,o)=>{var n,a,r,i,s,l,c,d,e=e.element;return Ye(so(e,"position"),"fixed")?(l=r=e,c=i=t,d=s=o,Yi(l,c,d).filter(({box:e})=>{return t=d.getModes(),o=e,n=c,ke(t,e=>{switch(e){case"bottom":return ji(o,n.bounds);case"top":return Wi(o,n.bounds)}});var t,o,n}).bind(({box:e})=>Ki(l,e,d)).orThunk(()=>i.optScrollEnv.bind(e=>Yi(r,i,s)).bind(({box:e,location:t})=>{var o=Sn(),e=qi({win:o,box:e}),t=("top"===t?Gi:$i)(o,e,i);return Ji(t)}))):(e=e,t=t,o=o,n=xn(e),a=Sn(),"top"===(a=((e,t,o)=>{let n=t.win,a=t.box,r=qi(t);return Ie(e,e=>{switch(e){case"bottom":return ji(a,o.bounds)?I.none():I.some($i(n,r,o));case"top":return Wi(a,o.bounds)?I.none():I.some(Gi(n,r,o));default:return I.none()}}).getOr({location:"no-dock"})})(o.getModes(),{win:a,box:n},t)).location||"bottom"===a.location?(Xi(e,n,t,o,a),Ji(a)):I.none())},Zi=(t,e,o)=>{o.setDocked(!1),R(["left","right","top","bottom","position"],e=>uo(t.element,e)),e.onUndocked(t)},es=(e,t,o,n)=>{var a="fixed"===n.position;o.setDocked(a),Vi(e.element,n),(a?t.onDocked:t.onUndocked)(e)},ts=(n,e,a,r,i=!1)=>{e.contextual.each(o=>{o.lazyContext(n).each(e=>{t=r.bounds;var t,e=e.y<t.bottom&&e.bottom>t.y;e!==a.isVisible()&&(a.setVisible(e),i&&!e?(Ii(n.element,[o.fadeOutClass]),o.onHide(n)):(e?Pi:Ui)(n,o))})})},os=(e,t,o,n,a)=>{ts(e,t,o,n,!0),es(e,t,o,a.positionCss)},ns=(e,t,o)=>{if(e.getSystem().isConnected()){var s=e,l=t,c=o;let i=l.lazyViewport(s);ts(s,l,c,i),Qi(s,i,c).each(e=>{var t=s,o=l,n=c,a=i,r=e;switch(r.morph){case"static":return void Zi(t,o,n);case"absolute":return void es(t,o,n,r.positionCss);case"fixed":os(t,o,n,a,r)}})}},as=(e,o,n)=>{if(n.isDocked()){var a=e,r=o,i=n;let t=a.element;i.setDocked(!1),((e,t)=>{let o=a.element;return Yi(o,e,t).bind(({box:e})=>Ki(o,e,t))})(r.lazyViewport(a),i).each(e=>{switch(e.morph){case"static":Zi(a,r,i);break;case"absolute":es(a,r,i,e.positionCss)}}),i.setVisible(!0),r.contextual.each(e=>{Ri(t,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(a)}),ns(a,r,i)}},rs=h=>(t,o,n)=>{let a=o.lazyViewport(t);var e,r,i,s,l,c,d,u,m,g,p;e=t.element,r=a,i=n,s=h,g=xn(e),p=Sn(),("bottom"===(s=s(p,qi({win:p,box:g}),r)).location||"top"===s.location?(l=e,c=g,d=r,m=s,(u=i).getInitialPos().fold(()=>Xi(l,c,d,u,m),()=>S),Ji(s)):I.none()).each(e=>{os(t,o,n,a,e)})},is=rs(Gi),ss=rs($i);var ls,cs,ds=Object.freeze({__proto__:null,refresh:ns,reset:as,isDocked:(e,t,o)=>o.isDocked(),getModes:(e,t,o)=>o.getModes(),setModes:(e,t,o,n)=>o.setModes(n),forceDockToTop:is,forceDockToBottom:ss}),us=Object.freeze({__proto__:null,events:(n,a)=>Zr([si(br(),(t,o)=>{n.contextual.each(e=>{Fi(t.element,e.transitionClass)&&(Ri(t.element,[e.transitionClass,e.fadeInClass]),(a.isVisible()?e.onShown:e.onHidden)(t)),o.stop()})}),L(Nr(),(e,t)=>{ns(e,n,a)}),L(jr(),(e,t)=>{ns(e,n,a)}),L(zr(),(e,t)=>{as(e,n,a)})])});let ms=e=>e.dom.innerHTML,gs=(e,t)=>{let o=At(e).dom,n=N(o.createDocumentFragment()),a=(t=t,(r=(o||document).createElement("div")).innerHTML=t,Nt(N(r)));var r;rn(n,a),sn(e),an(e,n)},ps=(e,t)=>N(e.dom.cloneNode(t)),hs=e=>{return e=e,Pt(e)?"#shadow-root":(e=e,e=e=ps(e,!1),t=dt("div"),e=N(e.dom.cloneNode(!0)),an(t,e),ms(t));var t},fs=((Hu=cs=cs||{})[Hu.STOP=0]="STOP",Hu[Hu.NORMAL=1]="NORMAL",Hu[Hu.LOGGING=2]="LOGGING",O({})),vs=["alloy/data/Fields","alloy/debugging/Debugging"],bs=(e,t,o)=>{var n=e,a=t,r=o;switch(k(fs.get(),n).orThunk(()=>{var e=Re(fs.get());return Ie(e,e=>-1<n.indexOf(e)?I.some(fs.get()[e]):I.none())}).getOr(cs.NORMAL)){case cs.NORMAL:return r(xs());case cs.LOGGING:var i=((t,o)=>{let n=[],a=(new Date).getTime();return{logEventCut:(e,t,o)=>{n.push({outcome:"cut",target:t,purpose:o})},logEventStopped:(e,t,o)=>{n.push({outcome:"stopped",target:t,purpose:o})},logNoParent:(e,t,o)=>{n.push({outcome:"no-parent",target:t,purpose:o})},logEventNoHandlers:(e,t)=>{n.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,o)=>{n.push({outcome:"response",purpose:o,target:t})},write:()=>{var e=(new Date).getTime();me(["mousemove","mouseover","mouseout",Fr()],t)||console.log(t,{event:t,time:e-a,target:o.dom,sequence:C(n,e=>me(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+hs(e.target)+")":e.outcome)})}}})(n,a),s=r(i);return i.write(),s;case cs.STOP:return!0}},xs=F({logEventCut:S,logEventStopped:S,logNoParent:S,logEventNoHandlers:S,logEventResponse:S,write:S}),ys=F([r("menu"),r("selectedMenu")]),ws=F([r("item"),r("selectedItem")]),Ss=(F(i(ws().concat(ys()))),F(i(ws()))),Cs=Ta("initSize",[r("numColumns"),r("numRows")]),ks=()=>Ta("markers",[r("backgroundMenu")].concat(ys()).concat(ws())),Os=e=>Ta("markers",C(e,r)),_s=(e,t,o)=>{return void 0!==(n=new Error).stack&&(n=n.stack.split("\n"),ye(n,t=>0<t.indexOf("alloy")&&!ge(vs,e=>-1<t.indexOf(e))).getOr("unknown")),ya(t,t,o,ma(t=>V.value((...e)=>t.apply(void 0,e))));var n},e=e=>_s(0,e,Pn(S)),Ts=e=>_s(0,e,Pn(I.none)),Es=e=>_s(0,e,{tag:"required",process:{}}),As=e=>_s(0,e,{tag:"required",process:{}}),Ms=(e,t)=>wa(e,F(t)),Ds=e=>wa(e,x),Bs=F(Cs),Fs=[Na("contextual",[ka("fadeInClass"),ka("fadeOutClass"),ka("transitionClass"),_a("lazyContext"),e("onShow"),e("onShown"),e("onHide"),e("onHidden")]),Ua("lazyViewport",()=>({bounds:Sn(),optScrollEnv:I.none()})),Wa("modes",["top","bottom"],ia),e("onDocked"),e("onUndocked")],Is=wi({fields:Fs,name:"docking",active:us,apis:ds,state:Object.freeze({__proto__:null,init:e=>{let t=O(!1),o=O(!0),n=On(),a=O(e.modes);return xi({isDocked:t.get,setDocked:t.set,getInitialPos:n.get,setInitialPos:n.set,clearInitialPos:n.clear,isVisible:o.get,setVisible:o.set,getModes:a.get,setModes:a.set,readState:()=>`docked:  ${t.get()}, visible: ${o.get()}, modes: `+a.get().join(",")})}})}),Rs=Zr([{key:Cr(),value:Za({can:(e,t)=>{var o,n,t=t.event,a=t.originator,t=t.target;return e=e,o=a,n=t,!(Tt(o,e.element)&&!Tt(o,n)&&(console.warn(Cr()+" did not get interpreted by the desired target. \nOriginator: "+hs(a)+"\nTarget: "+hs(t)+"\nCheck the "+Cr()+" event handlers"),1))}})}]);var Ns=Object.freeze({__proto__:null,events:Rs});let zs=(e,t,o,n)=>{e+=t;return n<e?o:e<o?n:e},Vs=(e,t,o)=>Math.min(Math.max(e,t),o),Ls=0,E=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9)+ ++Ls+String(t)},Hs=F("alloy-id-"),Ps=F("data-alloy-id"),Us=Hs(),Ws=Ps(),js=(e,t)=>{Object.defineProperty(e.dom,Ws,{value:t,writable:!0})},Gs=e=>{e=xt(e)?e.dom[Ws]:null;return I.from(e)},$s=e=>E(e),qs=x,Ys=t=>{let o=e=>"The component must be in a context to execute: "+e+(t?"\n"+hs(t().element)+" is not in context.":""),e=e=>()=>{throw new Error(o(e))},n=e=>()=>{console.warn(o(e))};return{debugInfo:F("fake"),triggerEvent:n("triggerEvent"),triggerFocus:n("triggerFocus"),triggerEscape:n("triggerEscape"),broadcast:n("broadcast"),broadcastOn:n("broadcastOn"),broadcastEvent:n("broadcastEvent"),build:e("build"),buildOrPatch:e("buildOrPatch"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:ie}},Xs=Ys(),Ks=E("alloy-premade"),Js=e=>(Object.defineProperty(e.element.dom,Ks,{value:e.uid,writable:!0}),$a(Ks,e)),Qs=e=>k(e,Ks),Zs=a=>{{var r=(e,...t)=>a(e.getApis(),e,...t);let e=a.toString(),t=e.indexOf(")")+1,o=e.indexOf("("),n=e.substring(o+1,t-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:mi(n.slice(1))}),r}},el=(e,a)=>{let r={};return ze(e,(e,n)=>{ze(e,(e,t)=>{var o=k(r,t).getOr([]);r[t]=o.concat([a(n,e)])})}),r},tl=e=>e.cHandler,ol=(e,t)=>({name:e,handler:t}),nl=(e,t)=>{let o={};return R(e,e=>{o[e.name()]=e.handlers(t)}),o},al=(e,t,o)=>{var t=t[o];return t?((a,e,r)=>{try{var t=Ae(e,(e,t)=>{var e=e.name,t=t.name,o=r.indexOf(e),n=r.indexOf(t);if(-1===o)throw new Error("The ordering for "+a+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===n)throw new Error("The ordering for "+a+" does not have an entry for "+t+".\nOrder specified: "+JSON.stringify(r,null,2));return o<n?-1:n<o?1:0});return V.value(t)}catch(a){return V.error([a])}})("Event: "+o,e,t).map(e=>{return o=C(e,e=>e.handler),t=n=o,{can:(...o)=>xe(n,(e,t)=>e&&t.can.apply(void 0,o),!0),abort:(...o)=>xe(t,(e,t)=>e||t.abort.apply(void 0,o),!1),run:(...t)=>{R(o,e=>{e.run.apply(void 0,t)})}};var o,t,n}):(t=o,o=e,V.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(C(o,e=>e.name),null,2)]))},rl=(e,r)=>{return 0<(e=(e=>{let t=[],o=[];return R(e,e=>{e.fold(e=>{t.push(e)},e=>{o.push(e)})}),{errors:t,values:o}})(We(e,(n,a)=>(1===n.length?V.value(n[0].handler):al(n,r,a)).map(e=>{const t=(e=>{const a=(e=>K(e)?{can:se,abort:ie,run:e}:e)(e);return(e,t,...o)=>{const n=[e,t].concat(o);a.abort.apply(void 0,n)?t.stop():a.can.apply(void 0,n)&&a.run.apply(void 0,n)}})(e),o=n.length>1?ve(r[a],t=>ge(n,e=>e.name===t)).join(" > "):n[0].name;return $a(a,((e,t)=>({handler:e,purpose:t}))(t,o))})))).errors.length?(t=e.errors,V.error(Se(t))):(t=e.values,e={},0===t.length?V.value(e):V.value(Vn(e,Ln.apply(void 0,t))));var t},il="alloy.base.behaviour",sl=i([ya("dom","dom",{tag:"required",process:{}},i([r("tag"),u("styles",{}),u("classes",[]),u("attributes",{}),d("value"),d("innerHtml")])),r("components"),r("uid"),u("events",{}),u("apis",{}),ya("eventOrder","eventOrder",(Hu={[Tr()]:["disabling",il,"toggling","typeaheadevents"],[Cr()]:[il,"focusing","keying"],[Fr()]:[il,"disabling","toggling","representing","tooltipping"],[pr()]:[il,"representing","streaming","invalidating"],[Lr()]:[il,"representing","item-events","toolbar-button-events","tooltipping"],[rr()]:["focusing",il,"item-type-events"],[tr()]:["focusing",il,"item-type-events"],[cr()]:["item-type-events","tooltipping"],[_r()]:["receiving","reflecting","tooltipping"]},Un(F(Hu))),na()),d("domModification")]),ll=e=>e.events,cl=e=>e.dom.value,dl=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},ul=(e,t,o)=>{o.fold(()=>an(e,t),e=>{Tt(e,t)||(tn(e,t),ln(e))})},ml=(e,t,o)=>{t=C(t,o),o=Nt(e);return R(o.slice(t.length),ln),t},gl=(e,t,o,n)=>{var a,r=zt(e,t),n=n(o,r),r=(o=e,t=t,a=r,zt(o,t).map(t=>{var e;return a.exists(e=>!Tt(e,t))?(e=a.map(ft).getOr("span"),e=dt(e),tn(t,e),e):t}));return ul(e,n.element,r),n},pl=(e,o)=>{var t,n=Re(e),a=Re(o),a=_e(a,n);return n=e,e={},t={},Pe(n,(e,t)=>!$e(o,t)||e!==o[t],He(e),He(t)),{toRemove:a,toSet:e}},hl=(n,e)=>{e=e.filter(e=>{return!(ft(e)!==n.tag||(t=n).innerHtml.isSome()&&0<t.domChildren.length||(t=e,$e(t.dom,Ks)));var t}).bind(e=>{var t=n;try{var o=((t,n)=>{g=n;let{class:e,style:o,...a}=xe(g.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),{toSet:r,toRemove:i}=pl(t.attributes,a),s=lo(n),{toSet:l,toRemove:c}=pl(t.styles,s),d=Ni(n),u=_e(d,t.classes),m=_e(t.classes,d);var g,p;return R(i,e=>eo(n,e)),Kt(n,r),Ii(n,m),Ri(n,u),R(c,e=>uo(n,e)),no(n,l),t.innerHtml.fold(()=>{var o,e=t.domChildren;o=n,e=e,ml(o,e,(e,t)=>{t=zt(o,t);return ul(o,e,t),e})},e=>{gs(n,e)}),g=n,(p=t.value.getOrUndefined())!==cl(g)&&dl(g,null!=p?p:""),n})(t,e);return I.some(o)}catch(t){return I.none()}}).getOrThunk(()=>{{var e=n;let t=dt(e.tag);Kt(t,e.attributes),Ii(t,e.classes),no(t,e.styles),e.innerHtml.each(e=>gs(t,e));var o=e.domChildren;return rn(t,o),e.value.each(e=>{dl(t,e)}),t}});return js(e,n.uid),e},fl=e=>{var t,o=(e=>{let t=k(e,"behaviours").getOr({});return Ce(Re(t),e=>{e=t[e];return X(e)?[e.me]:[]})})(e);return t=e,e=o,o=C(e,e=>Na(e.name(),[r("config"),u("state",bi)])),o=pa("component.behaviours",i(o),t.behaviours).fold(e=>{throw new Error(va(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))},x),{list:e,data:Ve(o,e=>{e=e.map(e=>({config:e.config,state:e.state.init(e.config)}));return F(e)})}},vl=(o,e)=>{let t=()=>m,n=O(Xs),a=ha((f=o,pa("custom.definition",sl,f))),r=fl(o),i=r.list,s=r.data,l=((e,t,o)=>{var n={...(n=e).dom,uid:n.uid,domChildren:C(n.components,e=>e.element)};let a=e.domModification.fold(()=>pi({}),pi),s={"alloy.base.modification":a},r=0<t.length?((t,e,o)=>{let n={...s};R(e,e=>{n[e.name()]=e.exhibit(t,o)});var e=el(n,(e,t)=>({name:e,modification:t})),a=e=>be(e,(e,t)=>({...t.modification,...e}),{}),r=be(e.classes,(e,t)=>t.modification.concat(e),[]),i=a(e.attributes),a=a(e.styles);return pi({classes:r,attributes:i,styles:a})})(o,t,n):a;return e=r,{...o=n,attributes:{...o.attributes,...e.attributes},styles:{...o.styles,...e.styles},classes:o.classes.concat(e.classes)}})(a,i,s),c=hl(l,e),d=(f=a,e=i,g=s,h={"alloy.base.behaviour":ll(f)},f=f.eventOrder,p=h,h=((e,t)=>{t={...p,...nl(t,e)};return el(t,ol)})(g,e),rl(h,f).getOrDie()),u=O(a.components),m={uid:o.uid,getSystem:n.get,config:e=>{var t=s;return(K(t[e.name()])?t[e.name()]:()=>{throw new Error("Could not find "+e.name()+" in "+JSON.stringify(o,null,2))})()},hasConfigured:e=>K(s[e.name()]),spec:o,readState:e=>s[e]().map(e=>e.state.readState()).getOr("not enabled"),getApis:()=>a.apis,connect:e=>{n.set(e)},disconnect:()=>{n.set(Ys(t))},element:c,syncComponents:()=>{var e=Nt(c),e=Ce(e,e=>n.get().getByDom(e).fold(()=>[],Ee));u.set(e)},components:u.get,events:d};var g,p,h,f;return m},bl=e=>{e=ut(e);return xl({element:e})},xl=e=>{let t=fa("external.component",Qn([r("element"),d("uid")]),e),o=O(Ys()),n=t.uid.getOrThunk(()=>$s("external")),a=(js(t.element,n),{uid:n,getSystem:o.get,config:I.none,hasConfigured:ie,connect:e=>{o.set(e)},disconnect:()=>{o.set(Ys(()=>a))},getApis:()=>({}),element:t.element,spec:e,readState:F("No state"),syncComponents:S,components:F([]),events:{}});return Js(a)},yl=$s,wl=(t,o)=>Qs(t).getOrThunk(()=>{return((e,t)=>{let{events:o,...n}=qs(e),a=((e,t)=>{let n=k(e,"components").getOr([]);return t.fold(()=>C(n,Sl),o=>C(n,(e,t)=>wl(e,zt(o,t))))})(n,t),r={...n,events:{...Ns,...o},components:a};return V.value(vl(r,t))})((e=t,$e(e,"uid")?t:{uid:yl(""),...t}),o).getOrDie();var e}),Sl=e=>wl(e,I.none()),Cl=Js;var kl,Ol=(e,t,o,n,a)=>e(o,n)?I.some(o):K(a)&&a(o)?I.none():t(o,n,a);let _l=(e,t,o)=>{let n=e.dom;for(var a=K(o)?o:ie;n.parentNode;){n=n.parentNode;let e=N(n);if(t(e))return I.some(e);if(a(e))break}return I.none()},Tl=(e,t,o)=>Ol((e,t)=>t(e),_l,e,t,o),El=(e,t)=>ye(e.dom.childNodes,e=>t(N(e))).map(N),Al=(e,t,o)=>Tl(e,t,o).isSome(),Ml=(e,t,o)=>_l(e,e=>kt(e,t),o),Dl=(e,t)=>El(e,e=>kt(e,t)),Bl=(e,t)=>_t(t,e),Fl=(e,t,o)=>Ol((e,t)=>kt(e,t),Ml,e,t,o),Il="aria-controls",Rl=()=>{let t=E(Il);return{id:t,link:e=>{w(e,Il,t)},unlink:e=>{eo(e,Il)}}},Nl=(t,e)=>{return Al(e,e=>Tt(e,t.element),ie)||(o=t,e=e,Tl(e,e=>!!xt(e)&&void 0!==(e=Jt(e,"id"))&&-1<e.indexOf(Il)).bind(e=>{var t=Jt(e,"id"),e=Ut(e);return Bl(e,`[${Il}="${t}"]`)}).exists(e=>Nl(o,e)));var o},zl=(e,t,o,n,a,r,i,s=!1)=>({x:e,y:t,bubble:o,direction:n,placement:a,restriction:r,label:i+"-"+a,alwaysFit:s}),Vl=Ga([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ll=Vl.southeast,Hl=Vl.southwest,Pl=Vl.northeast,Ul=Vl.northwest,Wl=Vl.south,jl=Vl.north,Gl=Vl.east,$l=Vl.west,ql=(o,t)=>Te(["left","right","top","bottom"],e=>k(t,e).map(e=>{var t=o;switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}})),Yl="layout",Xl=e=>e.x,Kl=(e,t)=>e.x+e.width/2-t.width/2,Jl=(e,t)=>e.x+e.width-t.width,Ql=(e,t)=>e.y-t.height,Zl=e=>e.y+e.height,ec=(e,t)=>e.y+e.height/2-t.height/2,tc=(e,t,o)=>zl(Xl(e),Zl(e),o.southeast(),Ll(),"southeast",ql(e,{left:1,top:3}),Yl),oc=(e,t,o)=>zl(Jl(e,t),Zl(e),o.southwest(),Hl(),"southwest",ql(e,{right:0,top:3}),Yl),nc=(e,t,o)=>zl(Xl(e),Ql(e,t),o.northeast(),Pl(),"northeast",ql(e,{left:1,bottom:2}),Yl),ac=(e,t,o)=>zl(Jl(e,t),Ql(e,t),o.northwest(),Ul(),"northwest",ql(e,{right:0,bottom:2}),Yl),rc=(e,t,o)=>zl(Kl(e,t),Ql(e,t),o.north(),jl(),"north",ql(e,{bottom:2}),Yl),ic=(e,t,o)=>zl(Kl(e,t),Zl(e),o.south(),Wl(),"south",ql(e,{top:3}),Yl),sc=(e,t,o)=>zl(e.x+e.width,ec(e,t),o.east(),Gl(),"east",ql(e,{left:0}),Yl),lc=(e,t,o)=>zl(e.x-t.width,ec(e,t),o.west(),$l(),"west",ql(e,{right:1}),Yl),cc=()=>[tc,oc,nc,ac,ic,rc,sc,lc],dc=()=>[oc,tc,ac,nc,ic,rc,sc,lc],uc=()=>[nc,ac,tc,oc,rc,ic],mc=()=>[ac,nc,oc,tc,rc,ic],gc=()=>[tc,oc,nc,ac,ic,rc],pc=()=>[oc,tc,ac,nc,ic,rc],hc=Object.freeze({__proto__:null,events:s=>Zr([L(_r(),(n,e)=>{let a=s.channels,t=Re(a),r=e,o=(e=t,(i=r).universal?e:ve(e,e=>me(i.channels,e)));var i;R(o,e=>{var t=a[e],o=t.schema,e=fa("channel["+e+"] data\nReceiver: "+hs(n.element),o,r.data);t.onReceive(n,e)})})])}),fc=[Ca("channels",ga(V.value,Qn([Es("onReceive"),u("schema",na())])))],vc=wi({fields:fc,name:"receiving",active:hc}),bc=Object.freeze({__proto__:null,exhibit:(e,t)=>pi({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}),xc=(e,t=!1)=>e.dom.focus({preventScroll:t}),yc=e=>e.dom.blur(),wc=e=>{var t=Ut(e).dom;return e.dom===t.activeElement},Sc=(e=gn())=>I.from(e.dom.activeElement).map(N),Cc=t=>Sc(Ut(t)).filter(e=>t.dom.contains(e.dom)),kc=(e,o)=>{let n=Ut(o),t=Sc(n).bind(t=>{var e=e=>Tt(t,e);if(e(o))return I.some(o);{var a=e;let n=t=>{for(let e=0;e<t.childNodes.length;e++){var o=N(t.childNodes[e]);if(a(o))return I.some(o);o=n(t.childNodes[e]);if(o.isSome())return o}return I.none()};return n(o.dom)}}),a=e(o);return t.each(t=>{Sc(n).filter(e=>Tt(e,t)).fold(()=>{xc(t)},S)}),a},Oc=Ga([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),_c=(e,t,o,n,a,r)=>{let i=t.rect,s=i.x-o,l=i.y-n,c=a-(s+i.width),d=r-(l+i.height),u=I.some(s),m=I.some(l),g=I.some(c),p=I.some(d),h=I.none();return t.direction.fold(()=>zi(e,u,m,h,h),()=>zi(e,h,m,g,h),()=>zi(e,u,h,h,p),()=>zi(e,h,h,g,p),()=>zi(e,u,m,h,h),()=>zi(e,u,h,h,p),()=>zi(e,u,m,h,h),()=>zi(e,h,m,g,h))},Tc=(e,a)=>e.fold(()=>{var e=a.rect;return zi("absolute",I.some(e.x),I.some(e.y),I.none(),I.none())},(e,t,o,n)=>_c("absolute",a,e,t,o,n),(e,t,o,n)=>_c("fixed",a,e,t,o,n)),Ec=(e,t)=>{var o=oe(vn,t),e=e.fold(o,o,()=>{var e=cn();return vn(t).translate(-e.left,-e.top)}),o=ko(t),n=fo(t);return bn(e.left,e.top,o,n)},Ac=(e,t,o)=>{let n=bo(t,o);return e.fold(F(n),F(n),()=>{var e=cn();return n.translate(-e.left,-e.top)})},Mc=(Oc.none,Oc.relative),Dc=Oc.fixed,Bc="data-alloy-placement",Fc=e=>Qt(e,Bc),Ic=Ga([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Rc=(e,t,o,n)=>{let a=e.bubble,r=a.offset,d=(y=n,w=e.restriction,S=r,k=(C=(n,a)=>w[n].map(e=>{var t="top"===n||"bottom"===n,o=t?S.top:S.left,e=("left"===n||"top"===n?Math.max:Math.min)(e,a)+o;return t?Vs(e,y.y,y.bottom):Vs(e,y.x,y.right)}).getOr(a))("left",y.x),O=C("top",y.y),_=C("right",y.right),C=C("bottom",y.bottom),bn(k,O,_-k,C-O)),i=e.x+r.left,s=e.y+r.top,l=bn(i,s,t,o),{originInBounds:c,sizeInBounds:u,visibleW:m,visibleH:g}=(e=>{var{x:t,y:o,right:n,bottom:a}=d,{x:e,y:r,right:i,bottom:s,width:l,height:c}=e;return{originInBounds:t<=e&&e<=n&&o<=r&&r<=a,sizeInBounds:i<=n&&t<=i&&s<=a&&o<=s,visibleW:Math.min(l,t<=e?n-e:i-t),visibleH:Math.min(c,o<=r?a-r:s-o)}})(l),p=c&&u,h=p?l:(e=>{var{x:t,y:o,right:n,bottom:a}=d,{x:e,y:r,width:i,height:s}=e,l=Math.max(t,n-i),c=Math.max(o,a-s),e=Vs(e,t,l),t=Vs(r,o,c),l=Math.min(e+i,n)-e,r=Math.min(t+s,a)-t;return bn(e,t,l,r)})(l),f=0<h.width&&0<h.height,{maxWidth:v,maxHeight:b}=((e,t,o)=>{let n=F(t.bottom-o.y),a=F(o.bottom-t.y),r=(c=a,e.fold(c,c,n,n,c,n,a,a)),i=F(t.right-o.x),s=F(o.right-t.x),l=(c=s,e.fold(c,i,c,i,s,s,c,i));var c;return{maxWidth:l,maxHeight:r}})(e.direction,h,n),x={rect:h,maxHeight:b,maxWidth:v,direction:e.direction,placement:e.placement,classes:{on:a.classesOn,off:a.classesOff},layout:e.label,testY:s};var y,w,S,C,k,O,_;return p||e.alwaysFit?Ic.fit(x):Ic.nofit(x,m,g,f)},Nc=se,zc=(e,t,o)=>{return e=e,t=t,n=Nc,o=o,Zo(e,t,n,o,!1);var n},Vc=(e,t,o)=>{return e=e,t=t,n=Nc,o=o,Zo(e,t,n,o,!0);var n},Lc=Qo,Hc=["top","bottom","right","left"],Pc="data-alloy-transition-timer",Uc=(n,s,a,r,i,e)=>{o=r,l=i;var o,l,t,c=e.exists(e=>{var t=o.mode;return"all"===t||e[t]!==l[t]});if(c||(t=n,e=r.classes,ke(e,e=>Fi(t,e)))){z(n,"position",a.position);let e=Ec(s,n),t=Tc(s,{...i,rect:e}),o=Te(Hc,e=>t[e]);if(((n,e)=>{let a=e=>parseFloat(e).toFixed(3);return je(e,(e,t)=>{return t=n[t].map(a),e=e.map(a),o=te,!Ke(t,e,o).getOr(t.isNone()&&e.isNone());var o}).isSome()})(a,o)){if(ao(n,o),c){var d=n,s=r;Ii(d,s.classes),Qt(d,Pc).each(e=>{clearTimeout(parseInt(e,10)),eo(d,Pc)});{var u=d,m=s;let o=kn(),n=kn(),a,r=e=>{var t=null!=(t=e.raw.pseudoElement)?t:"";return Tt(e.target,u)&&it(t)&&me(Hc,e.raw.propertyName)},t=t=>{if(Y(t)||r(t)){o.clear(),n.clear();let e=null==t?void 0:t.raw.type;!Y(e)&&e!==br()||(clearTimeout(a),eo(u,Pc),Ri(u,m.classes))}},i=zc(u,xr(),e=>{r(e)&&(i.unbind(),o.set(zc(u,br(),t)),n.set(zc(u,vr(),t)))}),e=(t=>{let e=e=>{e=ro(t,e).split(/\s*,\s*/);return ve(e,rt)},n=e=>{var t;return $(e)&&/^[\d.]+/.test(e)?(t=parseFloat(e),nt(e,"ms")?t:1e3*t):0},a=e("transition-delay"),o=e("transition-duration");return xe(o,(e,t,o)=>{o=n(a[o])+n(t);return Math.max(e,o)},0)})(u);requestAnimationFrame(()=>{a=setTimeout(t,e+17),w(u,Pc,a)})}}mo(n)}}else Ri(n,r.classes)},Wc=(e,t)=>{t=Math.floor(t);t=po.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),z(e,"max-height",t+"px")},jc=F((e,t)=>{Wc(e,t),no(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Gc=F((e,t)=>{Wc(e,t)}),$c=(e,t,o)=>void 0===e[t]?o:e[t],qc=(e,o,t,n)=>{var a,e=((e,t,r,i)=>{uo(t,"max-height"),uo(t,"max-width");var s={width:ko(s=t),height:fo(s)};{var c=t,d=(t=i.preference,e),u=s,m=r,g=i.bounds;let o=u.width,n=u.height,a=(e,a,r,i,s)=>{let t=e(d,u,m,c,g),l=Rc(t,o,n,g);return l.fold(F(l),(e,t,o,n)=>(s===n?i<o||r<t:!s&&n)?l:Ic.nofit(a,r,i,s))};return xe(t,(e,t)=>{t=oe(a,t);return e.fold(F(e),t)},Ic.nofit({rect:d,maxHeight:u.height,maxWidth:u.width,direction:Ll(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:d.y},-1,-1,!1)).fold(x,x)}})(e,o,t,n);{var r=o,i=e,s=n;let t=Tc(s.origin,i);s.transition.each(e=>{Uc(r,s.origin,t,e,i,s.lastPlacement)}),Vi(r,t)}return t=o,a=e.placement,w(t,Bc,a),t=o,a=e.classes,Ri(t,a.off),Ii(t,a.on),(0,n.maxHeightFunction)(o,e.maxHeight),(0,n.maxWidthFunction)(o,e.maxWidth),{layout:e.layout,placement:e.placement}},Yc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Xc=(e,t,o,n=1)=>{let a=e*n,r=t*n,i=e=>k(o,e).getOr([]),s=(e,t,o)=>{var n=_e(Yc,o);return{offset:bo(e,t),classesOn:Ce(o,i),classesOff:Ce(n,i)}};return{southeast:()=>s(-e,t,["top","alignLeft"]),southwest:()=>s(e,t,["top","alignRight"]),south:()=>s(-e/2,t,["top","alignCentre"]),northeast:()=>s(-e,-t,["bottom","alignLeft"]),northwest:()=>s(e,-t,["bottom","alignRight"]),north:()=>s(-e/2,-t,["bottom","alignCentre"]),east:()=>s(e,-t/2,["valignCentre","left"]),west:()=>s(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>s(a,r,["top","alignLeft","inset"]),insetNorthwest:()=>s(-a,r,["top","alignRight","inset"]),insetNorth:()=>s(-a/2,r,["top","alignCentre","inset"]),insetSoutheast:()=>s(a,-r,["bottom","alignLeft","inset"]),insetSouthwest:()=>s(-a,-r,["bottom","alignRight","inset"]),insetSouth:()=>s(-a/2,-r,["bottom","alignCentre","inset"]),insetEast:()=>s(-a,-r/2,["valignCentre","right","inset"]),insetWest:()=>s(a,-r/2,["valignCentre","left","inset"])}},Kc=()=>Xc(0,0,{}),Jc=x,Qc=(t,o)=>e=>"rtl"===Zc(e)?o:t,Zc=e=>"rtl"===ro(e,"direction")?"rtl":"ltr",ed=((us=kl=kl||{}).TopToBottom="toptobottom",us.BottomToTop="bottomtotop","data-alloy-vertical-dir"),td=e=>Al(e,e=>xt(e)&&Jt(e,"data-alloy-vertical-dir")===kl.BottomToTop),od=()=>Na("layouts",[r("onLtr"),r("onRtl"),d("onBottomLtr"),d("onBottomRtl")]),nd=(t,e,o,n,a,r,i)=>{var i=i.map(td).getOr(!1),s=e.layouts.map(e=>e.onLtr(t)),l=e.layouts.map(e=>e.onRtl(t)),a=i?e.layouts.bind(e=>e.onBottomLtr.map(e=>e(t))).or(s).getOr(a):s.getOr(o),s=i?e.layouts.bind(e=>e.onBottomRtl.map(e=>e(t))).or(l).getOr(r):l.getOr(n);return Qc(a,s)(t)},ad=[r("hotspot"),d("bubble"),u("overrides",{}),od(),Ms("placement",(e,t,o)=>{var n=t.hotspot,o=Ec(o,n.element),n=nd(e.element,t,gc(),pc(),uc(),mc(),I.some(t.hotspot.element));return I.some(Jc({anchorBox:o,bubble:t.bubble.getOr(Kc()),overrides:t.overrides,layouts:n}))})],rd=[r("x"),r("y"),u("height",0),u("width",0),u("bubble",Kc()),u("overrides",{}),od(),Ms("placement",(e,t,o)=>{o=Ac(o,t.x,t.y),o=bn(o.left,o.top,t.width,t.height),e=nd(e.element,t,cc(),dc(),cc(),dc(),I.none());return I.some(Jc({anchorBox:o,bubble:t.bubble,overrides:t.overrides,layouts:e}))})],id=Ga([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),sd=e=>e.fold(x,(e,t,o)=>e.translate(-t,-o)),ld=e=>e.fold(x,x),cd=e=>xe(e,(e,t)=>e.translate(t.left,t.top),bo(0,0)),dd=e=>{e=C(e,ld);return cd(e)},ud=id.screen,md=id.absolute,gd=(e,t,o)=>{var n=At(e.element),n=cn(n),e=((o,e)=>{e=Bt(e.root).dom;return I.from(e.frameElement).map(N).filter(e=>{var e=At(e),t=At(o.element);return Tt(e,t)}).map(yo)})(e,o).getOr(n);return md(e,n.left,n.top)},pd=(e,t,o,n)=>{e=ud(bo(e,t));return I.some({point:e,width:o,height:n})},hd=(e,r,i,s,l)=>e.map(e=>{let t=[r,e.point],o=s.fold(()=>dd(t),()=>dd(t),()=>{var e=t;return e=C(e,sd),cd(e)});var e={x:o.left,y:o.top,width:e.width,height:e.height},n=(i.showAbove?uc:gc)(),a=(i.showAbove?mc:pc)(),n=nd(l,i,n,a,n,a,I.none());return Jc({anchorBox:e,bubble:i.bubble.getOr(Kc()),overrides:i.overrides,layouts:n})}),fd=[r("node"),r("root"),d("bubble"),od(),u("overrides",{}),u("showAbove",!1),Ms("placement",(o,n,a)=>{let r=gd(o,0,n);return n.node.filter($t).bind(e=>{var e=e.dom.getBoundingClientRect(),e=pd(e.left,e.top,e.width,e.height),t=n.node.getOr(o.element);return hd(e,r,n,a,t)})})],vd=(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n}),bd=Ga([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),xd=(bd.before,Ga([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),yd={domRange:xd.domRange,relative:xd.relative,exact:xd.exact,exactFromRange:e=>xd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>N(e.startContainer),relative:(e,t)=>e.fold(x,x,x),exact:(e,t,o,n)=>e});return Bt(e)},range:vd},wd=(e,t,o)=>{var n,e=e.document.createRange(),a=e;return t.fold(e=>{a.setStartBefore(e.dom)},(e,t)=>{a.setStart(e.dom,t)},e=>{a.setStartAfter(e.dom)}),n=e,o.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)}),e},Sd=(e,t,o,n,a)=>{e=e.document.createRange();return e.setStart(t.dom,o),e.setEnd(n.dom,a),e},Cd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),kd=Ga([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Od=(e,t,o)=>t(N(o.startContainer),o.startOffset,N(o.endContainer),o.endOffset),_d=(r,e)=>(t=>{a=r;var a,t=t.match({domRange:e=>({ltr:F(e),rtl:I.none}),relative:(e,t)=>({ltr:Oo(()=>wd(a,e,t)),rtl:Oo(()=>I.some(wd(a,t,e)))}),exact:(e,t,o,n)=>({ltr:Oo(()=>Sd(a,e,t,o,n)),rtl:Oo(()=>I.some(Sd(a,o,n,e,t)))})});{let e=t.ltr();return e.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>kd.rtl(N(e.endContainer),e.endOffset,N(e.startContainer),e.startOffset)).getOrThunk(()=>Od(0,kd.ltr,e)):Od(0,kd.ltr,e)}})(e).match({ltr:(e,t,o,n)=>{var a=r.document.createRange();return a.setStart(e.dom,t),a.setEnd(o.dom,n),a},rtl:(e,t,o,n)=>{var a=r.document.createRange();return a.setStart(o.dom,n),a.setEnd(e.dom,t),a}}),Td=(kd.ltr,kd,(e,t,o)=>ve(((e,t)=>{var o=K(t)?t:ie;let n=e.dom;for(var a=[];null!=n.parentNode;){let e=n.parentNode,t=N(e);if(a.push(t),!0===o(t))break;n=e}return a})(e,o),t)),Ed=(e,t)=>(t=t,e=void 0===e?document:e.dom,Ot(e)?[]:C(e.querySelectorAll(t),N)),Ad=e=>{var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),I.some(vd(N(t.startContainer),t.startOffset,N(e.endContainer),e.endOffset))):I.none()},Md=e=>{var t,o,n,a,r,i,s,l,c,d,u;return null!==e.anchorNode&&null!==e.focusNode&&(t=N(e.anchorNode),o=N(e.focusNode),n=t,a=e.anchorOffset,d=n,u=a,s=r=o,l=i=e.focusOffset,(c=At(d).dom.createRange()).setStart(d.dom,u),c.setEnd(s.dom,l),d=c,u=Tt(n,r)&&a===i,d.collapsed)&&!u?I.some(vd(t,e.anchorOffset,o,e.focusOffset)):Ad(e)},Dd=(e,t)=>(e=_d(e,t),0<(t=0<(t=e.getClientRects()).length?t[0]:e.getBoundingClientRect()).width||0<t.height?I.some(t).map(Cd):I.none()),Bd=(o=>{let t=e=>o(e)?I.from(e.dom.nodeValue):I.none();return{get:e=>{if(o(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!o(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(yt),Fd=(e,t)=>({element:e,offset:t}),Id=(e,t)=>(yt(e)?Fd:(e,t)=>{var o=Nt(e);if(0===o.length)return Fd(e,t);if(t<o.length)return Fd(o[t],0);{let e=o[o.length-1],t=(yt(e)?(o=e,Bd.get(o)):Nt(e)).length;return Fd(e,t)}})(e,t),Rd=e=>void 0!==e.foffset,Nd=(t,e)=>e.getSelection.getOrThunk(()=>()=>{return e=t,I.from(e.getSelection()).filter(e=>0<e.rangeCount).bind(Md);var e})().map(e=>{var t,o;return Rd(e)?(t=Id(e.start,e.soffset),o=Id(e.finish,e.foffset),yd.range(t.element,t.offset,o.element,o.offset)):e}),zd=[d("getSelection"),r("root"),d("bubble"),od(),u("overrides",{}),u("showAbove",!1),Ms("placement",(e,t,o)=>{let n=Bt(t.root).dom,a=gd(e,0,t),r=Nd(n,t).bind(o=>{var e,t;return Rd(o)?(t=n,e=yd.exactFromRange(o),(0<(t=_d(t,e).getBoundingClientRect()).width||0<t.height?I.some(t).map(Cd):I.none()).orThunk(()=>{var e=ut("\ufeff"),t=(tn(o.start,e),Dd(n,yd.exact(e,0,e,1)));return ln(e),t}).bind(e=>pd(e.left,e.top,e.width,e.height))):(e=Ve(o,e=>e.dom.getBoundingClientRect()),t={left:Math.min(e.firstCell.left,e.lastCell.left),right:Math.max(e.firstCell.right,e.lastCell.right),top:Math.min(e.firstCell.top,e.lastCell.top),bottom:Math.max(e.firstCell.bottom,e.lastCell.bottom)},pd(t.left,t.top,t.right-t.left,t.bottom-t.top))}),i=Nd(n,t).bind(e=>Rd(e)?xt(e.start)?I.some(e.start):It(e.start):I.some(e.firstCell)).getOr(e.element);return hd(r,a,t,o,i)})],Vd="link-layout",Ld=e=>e.x+e.width,Hd=(e,t)=>e.x-t.width,Pd=(e,t)=>e.y-t.height+e.height,Ud=e=>e.y,Wd=(e,t,o)=>zl(Ld(e),Ud(e),o.southeast(),Ll(),"southeast",ql(e,{left:0,top:2}),Vd),jd=(e,t,o)=>zl(Hd(e,t),Ud(e),o.southwest(),Hl(),"southwest",ql(e,{right:1,top:2}),Vd),Gd=(e,t,o)=>zl(Ld(e),Pd(e,t),o.northeast(),Pl(),"northeast",ql(e,{left:0,bottom:3}),Vd),$d=(e,t,o)=>zl(Hd(e,t),Pd(e,t),o.northwest(),Ul(),"northwest",ql(e,{right:1,bottom:3}),Vd),qd=()=>[Wd,jd,Gd,$d],Yd=()=>[jd,Wd,$d,Gd],Xd=[r("item"),od(),u("overrides",{}),Ms("placement",(e,t,o)=>{o=Ec(o,t.item.element),e=nd(e.element,t,qd(),Yd(),qd(),Yd(),I.none());return I.some(Jc({anchorBox:o,bubble:Kc(),overrides:t.overrides,layouts:e}))})],Kd=ba("type",{selection:zd,node:fd,hotspot:ad,submenu:Xd,makeshift:rd}),Jd=[Aa("classes",ia),Ha("mode","all",["all","layout","placement"])],Qd=[u("useFixed",ie),d("getBounds")],Zd=[Ca("anchor",Kd),Na("transition",Jd)],eu=(n,m,g,p,e,h)=>{let f=fa("placement.info",i(Zd),e),a=f.anchor,r=p.element,v=g.get(p.uid);kc(()=>{z(r,"position","fixed");var e,t,o=so(r,"visibility");z(r,"visibility","hidden");let u=m.useFixed()?(t=document.documentElement,Dc(0,0,t.clientWidth,t.clientHeight)):(t=n,e=yo(t.element),t=t.element.dom.getBoundingClientRect(),Mc(e.left,e.top,t.width,t.height));a.placement(n,a,u).each(e=>{var t,o,n,a,r,i,s,l,c=h.orThunk(()=>m.getBounds.map(re)),d=(t=u,e=e,c=c,o=p,n=v,a=f.transition,d={anchorBox:d=e.anchorBox,origin:t},t=o.element,o=e.bubble,r=e.layouts,n=n,c=c,e=e.overrides,a=a,s=$c(e,"maxHeightFunction",jc()),e=$c(e,"maxWidthFunction",S),l=d.anchorBox,c={bounds:(i=d=d.origin,c.fold(()=>i.fold(Sn,Sn,bn),t=>i.fold(F(t),F(t),()=>{var e=Ac(i,t.x,t.y);return bn(e.left,e.top,t.width,t.height)}))),origin:d,preference:r,maxHeightFunction:s,maxWidthFunction:e,lastPlacement:n,transition:a},qc(l,t,o,c));g.set(p.uid,d)}),o.fold(()=>{uo(r,"visibility")},e=>{z(r,"visibility",e)}),so(r,"left").isNone()&&so(r,"top").isNone()&&so(r,"right").isNone()&&so(r,"bottom").isNone()&&Ye(so(r,"position"),"fixed")&&uo(r,"position")},r)},tu=Object.freeze({__proto__:null,position:(e,t,o,n,a)=>{var r=I.none();eu(e,t,o,n,a,r)},positionWithinBounds:eu,getMode:(e,t,o)=>t.useFixed()?"fixed":"absolute",reset:(e,t,o,n)=>{let a=n.element;var r;R(["position","left","right","top","bottom"],e=>uo(a,e)),r=a,eo(r,Bc),o.clear(n.uid)}}),ou=wi({fields:Qd,name:"positioning",active:bc,apis:tu,state:Object.freeze({__proto__:null,init:()=>{let o={};return xi({readState:()=>o,clear:e=>{X(e)?delete o[e]:o={}},set:(e,t)=>{o[e]=t},get:e=>k(o,e)})}})}),nu=e=>e.getSystem().isConnected(),au=e=>{_(e,Lr());e=e.components();R(e,au)},ru=e=>{var t=e.components();R(t,ru),_(e,Vr())},iu=(e,t)=>{e.getSystem().addToWorld(t),$t(e.element)&&ru(t)},su=e=>{au(e),e.getSystem().removeFromWorld(e)},lu=(e,t)=>{an(e.element,t.element)},cu=(e,t)=>{du(e,t,an)},du=(e,t,o)=>{e.getSystem().addToWorld(t),o(e.element,t.element),$t(e.element)&&ru(t),e.syncComponents()},uu=e=>{au(e),ln(e.element),e.getSystem().removeFromWorld(e)},mu=t=>{var e=Ft(t.element).bind(e=>t.getSystem().getByDom(e).toOptional());uu(t),e.each(e=>{e.syncComponents()})},gu=e=>{var t=e.components();R(t,uu),sn(e.element),e.syncComponents()},pu=(e,t)=>{fu(e,t,an)},hu=(e,t)=>{fu(e,t,on)},fu=(e,t,o)=>{o(e,t.element);o=Nt(t.element);R(o,e=>{t.getByDom(e).each(ru)})},vu=t=>{var e=Nt(t.element);R(e,e=>{t.getByDom(e).each(au)}),ln(t.element)},bu=(t,e,o,n)=>{o.get().each(e=>{gu(t)});e=e.getAttachPoint(t),cu(e,t),e=t.getSystem().build(n);return cu(t,e),o.set(e),e},xu=(e,t,o,n)=>{o=bu(e,t,o,n);return t.onOpen(e,o),o},yu=(t,o,n)=>{n.get().each(e=>{gu(t),mu(t),o.onClose(t,e),n.clear()})},wu=(e,t,o)=>o.isOpen(),Su=(e,t,o)=>{var n,a,r=t.getAttachPoint(e);z(e.element,"position",ou.getMode(r)),n=e,r="visibility",a=t.cloakVisibilityAttr,so(n.element,r).fold(()=>{eo(n.element,a)},e=>{w(n.element,a,e)}),z(n.element,r,"hidden")},Cu=(e,t,o)=>{var n,a,r;r=e.element,ge(["top","left","right","bottom"],e=>so(r,e).isSome())||uo(e.element,"position"),n=e,a="visibility",e=t.cloakVisibilityAttr,Qt(n.element,e).fold(()=>uo(n.element,a),e=>z(n.element,a,e))},ku=Object.freeze({__proto__:null,cloak:Su,decloak:Cu,open:xu,openWhileCloaked:(e,t,o,n,a)=>{Su(e,t),xu(e,t,o,n),a(),Cu(e,t)},close:yu,isOpen:wu,isPartOf:(t,o,e,n)=>wu(0,0,e)&&e.get().exists(e=>o.isPartOf(t,e,n)),getState:(e,t,o)=>o.get(),setContent:(e,t,o,n)=>o.get().map(()=>bu(e,t,o,n))}),Ou=Object.freeze({__proto__:null,events:(o,n)=>Zr([L(Dr(),(e,t)=>{yu(e,o,n)})])}),_u=[e("onOpen"),e("onClose"),r("isPartOf"),r("getAttachPoint"),u("cloakVisibilityAttr","data-precloak-visibility")],Tu=Object.freeze({__proto__:null,init:()=>{var e=On(),t=F("not-implemented");return xi({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}}),h=wi({fields:_u,name:"sandboxing",active:Ou,apis:ku,state:Tu}),Eu=F("dismiss.popups"),Au=F("reposition.popups"),Mu=F("mouse.released"),Du=Qn([u("isExtraPart",ie),Na("fireEventInstead",[u("event",Hr())])]),Bu=e=>{let o=fa("Dismissal",Du,e);return{[Eu()]:{schema:Qn([r("target")]),onReceive:(t,e)=>{!h.isOpen(t)||h.isPartOf(t,e.target)||o.isExtraPart(t,e.target)||o.fireEventInstead.fold(()=>h.close(t),e=>_(t,e.event))}}}},Fu=Qn([Na("fireEventInstead",[u("event",Pr())]),_a("doReposition")]),Iu=e=>{let o=fa("Reposition",Fu,e);return{[Au()]:{onReceive:t=>{h.isOpen(t)&&o.fireEventInstead.fold(()=>o.doReposition(t),e=>_(t,e.event))}}}},Ru=(e,t,o)=>{t.store.manager.onLoad(e,t,o)},Nu=(e,t,o)=>{t.store.manager.onUnload(e,t,o)},zu=Object.freeze({__proto__:null,onLoad:Ru,onUnload:Nu,setValue:(e,t,o,n)=>{t.store.manager.setValue(e,t,o,n)},getValue:(e,t,o)=>t.store.manager.getValue(e,t,o),getState:(e,t,o)=>o}),Vu=Object.freeze({__proto__:null,events:(o,n)=>{var e=o.resetOnDom?[li((e,t)=>{Ru(e,o,n)}),ci((e,t)=>{Nu(e,o,n)})]:[hi(o,n,Ru)];return Zr(e)}});var Lu,ds=()=>{let e=O(null);return xi({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},Hu=()=>{let r=O({}),i=O({});return xi({readState:()=>({mode:"dataset",dataByValue:r.get(),dataByText:i.get()}),lookup:e=>k(r.get(),e).orThunk(()=>k(i.get(),e)),update:e=>{let t=r.get(),o=i.get(),n={},a={};R(e,t=>{n[t.value]=t,k(t,"meta").each(e=>{k(e,"text").each(e=>{a[e]=t})})}),r.set({...t,...n}),i.set({...o,...a})},clear:()=>{r.set({}),i.set({})}})},us=Object.freeze({__proto__:null,memory:ds,dataset:Hu,manual:()=>xi({readState:S}),init:e=>e.store.manager.state(e)});let Pu=(e,t,o,n)=>{var a=t.store;o.update([n]),a.setValue(e,n),t.onSetValue(e,n)},Uu=[d("initialValue"),r("getFallbackEntry"),r("getDataKey"),r("setValue"),Ms("manager",{setValue:Pu,getValue:(e,t,o)=>{let n=t.store,a=n.getDataKey(e);return o.lookup(a).getOrThunk(()=>n.getFallbackEntry(a))},onLoad:(t,o,n)=>{o.store.initialValue.each(e=>{Pu(t,o,n,e)})},onUnload:(e,t,o)=>{o.clear()},state:Hu})],Wu=[r("getValue"),u("setValue",S),d("initialValue"),Ms("manager",{setValue:(e,t,o,n)=>{t.store.setValue(e,n),t.onSetValue(e,n)},getValue:(e,t,o)=>t.store.getValue(e),onLoad:(t,o,e)=>{o.store.initialValue.each(e=>{o.store.setValue(t,e)})},onUnload:S,state:bi.init})],ju=[d("initialValue"),Ms("manager",{setValue:(e,t,o,n)=>{o.set(n),t.onSetValue(e,n)},getValue:(e,t,o)=>o.get(),onLoad:(e,t,o)=>{t.store.initialValue.each(e=>{o.isNotSet()&&o.set(e)})},onUnload:(e,t,o)=>{o.clear()},state:ds})],Gu=[za("store",{mode:"memory"},ba("mode",{memory:ju,manual:Wu,dataset:Uu})),e("onSetValue"),u("resetOnDom",!1)],A=wi({fields:Gu,name:"representing",active:Vu,apis:zu,extra:{setValueFrom:(e,t)=>{t=A.getValue(t);A.setValue(e,t)}},state:us}),$u=(n,e)=>ja(n,{},C(e,e=>{return t=e.name(),o="Cannot configure "+e.name()+" for "+n,ya(t,t,{tag:"option",process:{}},$n(e=>Fn("The field: "+t+" is forbidden. "+o)));var t,o}).concat([wa("dump",x)])),qu=e=>e.dump,Yu=(e,t)=>({...H(t),...e.dump}),Xu=$u,Ku=Yu,Ju="placeholder",Qu=Ga([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Zu=e=>$e(e,"uiType"),em=(n,a,r,i)=>{return e=n,t=r,o=i,(Zu(t)&&t.uiType===Ju?(l=t,c=o,(s=e).exists(e=>e!==l.owner)?Qu.single(!0,F(l)):k(c,l.name).fold(()=>{throw new Error("Unknown placeholder component: "+l.name+"\nKnown: ["+Re(c)+"]\nNamespace: "+s.getOr("none")+"\nSpec: "+JSON.stringify(l,null,2))},e=>e.replace())):Qu.single(!1,F(t))).fold((e,t)=>{var t=Zu(r)?t(a,r.config,r.validated):t(a),o=k(t,"components").getOr([]),o=Ce(o,e=>em(n,a,e,i));return[{...t,components:o}]},(e,t)=>{if(Zu(r)){let e=t(a,r.config,r.validated);return r.validated.preprocess.getOr(x)(e)}return t(a)});var e,t,o,s,l,c},tm=Qu.single,om=Qu.multiple,nm=F(Ju),am=Ga([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),rm=u("factory",{sketch:x}),im=u("schema",[]),sm=r("name"),lm=ya("pname","pname",Hn(e=>"<alloy."+E(e.name)+">"),na()),cm=wa("schema",()=>[d("preprocess")]),dm=u("defaults",F({})),um=u("overrides",F({})),mm=i([rm,im,sm,lm,dm,um]),gm=i([rm,im,sm,dm,um]),pm=i([rm,im,sm,lm,dm,um]),hm=i([rm,cm,sm,r("unit"),lm,dm,um]),fm=e=>e.fold(I.some,I.none,I.some,I.some),vm=e=>{var t=e=>e.name;return e.fold(t,t,t,t)},bm=(t,o)=>e=>{e=fa("Converting part type",o,e);return t(e)},xm=bm(am.required,mm),ym=bm(am.external,gm),wm=bm(am.optional,pm),Sm=bm(am.group,hm),Cm=F("entirety"),km=Object.freeze({__proto__:null,required:xm,external:ym,optional:wm,group:Sm,asNamedPart:fm,name:vm,asCommon:e=>e.fold(x,x,x,x),original:Cm}),Om=(e,t,o,n)=>Vn(t.defaults(e,o,n),o,{uid:e.partUids[t.name]},t.overrides(e,o,n)),_m=(a,e)=>{let r={};return R(e,e=>{fm(e).each(o=>{e=a,t=o.pname;let n={uiType:nm(),owner:e,name:t};var e,t;r[o.name]=e=>{var t=fa("Part: "+o.name+" in "+a,i(o.schema),e);return{...n,config:e,validated:t}}})}),r},Tm=(e,t,o)=>({uiType:nm(),owner:e,name:t,config:o,validated:{}}),Em=e=>Ce(e,e=>e.fold(I.none,I.some,I.none,I.none).map(e=>Ta(e.name,e.schema.concat([Ds(Cm())]))).toArray()),Am=e=>C(e,vm),Mm=(e,n,a)=>{{var r=n;n=a;let t={},o={};return R(n,e=>{e.fold(n=>{t[n.pname]=tm(!0,(e,t,o)=>n.factory.sketch(Om(e,n,t,o)))},e=>{var t=r.parts[e.name];o[e.name]=F(e.factory.sketch(Om(r,e,t[Cm()]),t))},n=>{t[n.pname]=tm(!1,(e,t,o)=>n.factory.sketch(Om(e,n,t,o)))},a=>{t[a.pname]=om(!0,(t,e,o)=>{var n=t[a.name];return C(n,e=>a.factory.sketch(Vn(a.defaults(t,e,o),e,a.overrides(t,e))))})})}),{internals:F(t),externals:F(o)}}},Dm=(e,t,o)=>{return n=I.some(e),e=(a=t).components,t=o,t=Ve(t,(t,o)=>{{var n=o,a=t;let e=!1;return{name:F(n),required:()=>a.fold((e,t)=>e,(e,t)=>e),used:()=>e,replace:()=>{if(e)throw new Error("Trying to use the same placeholder more than once: "+n);return e=!0,a}}}}),r=n,i=a,e=e,s=t,e=Ce(e,e=>em(r,i,e,s)),ze(t,e=>{if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(a.components,null,2))}),e;var n,a,r,i,s},Bm=(e,t,o)=>{t=t.partUids[o];return e.getSystem().getByUid(t).toOptional()},Fm=(e,t,o)=>Bm(e,t,o).getOrDie("Could not find part: "+o),Im=(e,t,o)=>{let n={},a=t.partUids,r=e.getSystem();return R(o,e=>{n[e]=F(r.getByUid(a[e]))}),n},Rm=(e,t)=>{let o=e.getSystem();return Ve(t.partUids,(e,t)=>F(o.getByUid(e)))},Nm=e=>Re(e.partUids),zm=(e,t,o)=>{let n={},a=t.partUids,r=e.getSystem();return R(o,e=>{n[e]=F(r.getByUid(a[e]).getOrDie())}),n},Vm=(t,e)=>{e=Am(e);return qa(C(e,e=>({key:e,value:t+"-"+e})))},Lm=t=>ya("partUids","partUids",Un(e=>Vm(e.uid,t)),na()),Hm=Object.freeze({__proto__:null,generate:_m,generateOne:Tm,schemas:Em,names:Am,substitutes:Mm,components:Dm,defaultUids:Vm,defaultUidsSchema:Lm,getAllParts:Rm,getAllPartNames:Nm,getPart:Bm,getPartOrDie:Fm,getParts:Im,getPartsOrDie:zm}),Pm=(e,t,o,n,a)=>{a=a;n=(0<(n=n).length?[Ta("parts",n)]:[]).concat([r("uid"),u("dom",{}),u("components",[]),Ds("originalSpec"),u("debug.sketcher",{})]).concat(a);return fa(e+" [SpecSchema]",Qn(n.concat(t)),o)},Um=(e,t,o,n,a)=>{var a=Wm(a),r=Em(o),i=Lm(o),t=Pm(e,t,a,r,[i]),r=Mm(0,t,o);return n(t,Dm(e,t,r.internals()),a,r.externals())},Wm=e=>{return t=e,$e(t,"uid")?e:{...e,uid:$s("uid")};var t},jm=Qn([r("name"),r("factory"),r("configFields"),u("apis",{}),u("extraApis",{})]),Gm=Qn([r("name"),r("factory"),r("configFields"),r("partFields"),u("apis",{}),u("extraApis",{})]),$m=e=>{let a=fa("Sketcher for "+e.name,jm,e),t=Ve(a.apis,Zs),o=Ve(a.extraApis,(e,t)=>gi(e,t));return{name:a.name,configFields:a.configFields,sketch:e=>{var t=a.name,o=a.configFields,n=a.factory;return e=Wm(e),n(Pm(t,o,e,[],[]),e)},...t,...o}},qm=e=>{let t=fa("Sketcher for "+e.name,Gm,e),o=_m(t.name,t.partFields),n=Ve(t.apis,Zs),a=Ve(t.extraApis,(e,t)=>gi(e,t));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>Um(t.name,t.configFields,t.partFields,t.factory,e),parts:o,...n,...a}},Ym=e=>Ct("input")(e)&&"radio"!==Jt(e,"type")||Ct("textarea")(e),Xm=Object.freeze({__proto__:null,getCurrent:(e,t,o)=>t.find(e)}),Km=[r("find")],M=wi({fields:Km,name:"composing",apis:Xm}),Jm=["input","button","textarea","select"],Qm=(e,t,o)=>{(t.disabled()?ag:rg)(e,t)},Zm=(e,t)=>!0===t.useNative&&me(Jm,ft(e.element)),eg=e=>{w(e.element,"disabled","disabled")},tg=e=>{eo(e.element,"disabled")},og=e=>{w(e.element,"aria-disabled","true")},ng=e=>{w(e.element,"aria-disabled","false")},ag=(t,e,o)=>{e.disableClass.each(e=>{Mi(t.element,e)}),(Zm(t,e)?eg:og)(t),e.onDisabled(t)},rg=(t,e,o)=>{e.disableClass.each(e=>{Bi(t.element,e)}),(Zm(t,e)?tg:ng)(t),e.onEnabled(t)},ig=(e,t)=>Zm(e,t)?(t=e,Zt(t.element,"disabled")):(t=e,"true"===Jt(t.element,"aria-disabled")),sg=Object.freeze({__proto__:null,enable:rg,disable:ag,isDisabled:ig,onLoad:Qm,set:(e,t,o,n)=>{(n?ag:rg)(e,t)}}),lg=Object.freeze({__proto__:null,exhibit:(e,t)=>pi({classes:t.disabled()?t.disableClass.toArray():[]}),events:(o,e)=>Zr([ei(Tr(),(e,t)=>ig(e,o)),hi(o,e,Qm)])}),cg=[Ua("disabled",ie),u("useNative",!0),d("disableClass"),e("onDisabled"),e("onEnabled")],P=wi({fields:cg,name:"disabling",active:lg,apis:sg}),dg=(o,n,e,a)=>{var t=Ed(o.element,"."+n.highlightClass);R(t,t=>{ge(a,e=>Tt(e.element,t))||(Bi(t,n.highlightClass),o.getSystem().getByDom(t).each(e=>{n.onDehighlight(o,e),_(e,Yr())}))})},ug=(e,t,o,n)=>{dg(e,t,0,[n]),mg(0,t,0,n)||(Mi(n.element,t.highlightClass),t.onHighlight(e,n),_(n,qr()))},mg=(e,t,o,n)=>Fi(n.element,t.highlightClass),gg=(t,e,o)=>Bl(t.element,"."+e.itemClass).bind(e=>t.getSystem().getByDom(e).toOptional()),pg=(t,e,o)=>{e=Ed(t.element,"."+e.itemClass);return(0<e.length?I.some(e[e.length-1]):I.none()).bind(e=>t.getSystem().getByDom(e).toOptional())},hg=(t,o,e,n)=>{let a=Ed(t.element,"."+o.itemClass);return we(a,e=>Fi(e,o.highlightClass)).bind(e=>{e=zs(e,n,0,a.length-1);return t.getSystem().getByDom(a[e]).toOptional()})},fg=(t,e,o)=>{e=Ed(t.element,"."+e.itemClass);return Xe(C(e,e=>t.getSystem().getByDom(e).toOptional()))},vg=Object.freeze({__proto__:null,dehighlightAll:(e,t,o)=>dg(e,t,0,[]),dehighlight:(e,t,o,n)=>{mg(0,t,0,n)&&(Bi(n.element,t.highlightClass),t.onDehighlight(e,n),_(n,Yr()))},highlight:ug,highlightFirst:(t,o,e)=>{gg(t,o).each(e=>{ug(t,o,0,e)})},highlightLast:(t,o,e)=>{pg(t,o).each(e=>{ug(t,o,0,e)})},highlightAt:(t,o,e,n)=>{((e,t,o)=>{t=Ed(e.element,"."+t.itemClass);return I.from(t[o]).fold(()=>V.error(new Error("No element found with index "+o)),e.getSystem().getByDom)})(t,o,n).fold(e=>{throw e},e=>{ug(t,o,0,e)})},highlightBy:(t,o,e,n)=>{var a=fg(t,o);ye(a,n).each(e=>{ug(t,o,0,e)})},isHighlighted:mg,getHighlighted:(t,e,o)=>Bl(t.element,"."+e.highlightClass).bind(e=>t.getSystem().getByDom(e).toOptional()),getFirst:gg,getLast:pg,getPrevious:(e,t,o)=>hg(e,t,0,-1),getNext:(e,t,o)=>hg(e,t,0,1),getCandidates:fg}),bg=[r("highlightClass"),r("itemClass"),e("onHighlight"),e("onDehighlight")],y=wi({fields:bg,name:"highlighting",apis:vg}),xg=[8],yg=[9],wg=[13],Sg=[27],Cg=[32],kg=[37],Og=[38],_g=[39],Tg=[40],Eg=(e,t,o)=>{var n=Oe(e.slice(0,t)),e=Oe(e.slice(t+1));return ye(n.concat(e),o)},Ag=(e,t,o)=>{e=Oe(e.slice(0,t));return ye(e,o)},Mg=(e,t,o)=>{var n=e.slice(0,t),e=e.slice(t+1);return ye(e.concat(n),o)},Dg=(e,t,o)=>{e=e.slice(t+1);return ye(e,o)},m=t=>e=>{e=e.raw;return me(t,e.which)},Bg=e=>t=>ke(e,e=>e(t)),Fg=e=>!0===e.raw.shiftKey,Ig=e=>!0===e.raw.ctrlKey,Rg=ne(Fg),g=(e,t)=>({matches:e,classification:t}),Ng=(e,t,o)=>{t.exists(t=>o.exists(e=>Tt(e,t)))||T(e,Ur(),{prevFocus:t,newFocus:o})},zg=()=>{let n=e=>Cc(e.element);return{get:n,set:(e,t)=>{var o=n(e),t=(e.getSystem().triggerFocus(t,e.element),n(e));Ng(e,o,t)}}},Vg=((Hu=Lu=Lu||{}).OnFocusMode="onFocus",Hu.OnEnterOrSpaceMode="onEnterOrSpace",Hu.OnApiMode="onApi",(e,t,o,n,s)=>{let l=(t,o,e,n,a)=>{return e=e(t,o,n,a),r=o.event,ye(e,e=>e.matches(r)).map(e=>e.classification).bind(e=>e(t,o,n,a));var r},a={schema:()=>e.concat([u("focusManager",zg()),za("focusInside","onFocus",ma(e=>me(["onFocus","onEnterOrSpace","onApi"],e)?V.value(e):V.error("Invalid value for focusInside"))),Ms("handler",a),Ms("state",t),Ms("sendFocusIn",s)]),processKey:l,toEvents:(r,i)=>{var e=r.focusInside!==Lu.OnFocusMode?I.none():s(r).map(o=>L(Cr(),(e,t)=>{o(e,r,i),t.stop()})),t=[L(mr(),(n,a)=>{l(n,a,o,r,i).fold(()=>{var t,o,e;t=n,o=a,e=m(Cg.concat(wg))(o.event),r.focusInside===Lu.OnEnterOrSpaceMode&&e&&Ja(t,o)&&s(r).each(e=>{e(t,r,i),o.stop()})},e=>{a.stop()})}),L(gr(),(e,t)=>{l(e,t,n,r,i).each(e=>{t.stop()})})];return Zr(e.toArray().concat(t))}};return a}),Lg=e=>{let t=[d("onEscape"),d("onEnter"),u("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),u("firstTabstop",0),u("useTabstopAt",se),d("visibilitySelector")].concat([e]),l=(e,t)=>{e=e.visibilitySelector.bind(e=>Fl(t,e)).getOr(t);return 0<ho(e)},c=(e,t)=>t.focusManager.get(e).bind(e=>Fl(e,t.selector)),o=(t,o,e)=>{((e,t)=>{e=Ed(e.element,t.selector),e=ve(e,e=>l(t,e));return I.from(e[t.firstTabstop])})(t,o).each(e=>{o.focusManager.set(t,e)})},a=(a,e,r,i)=>{let s=ve(Ed(a.element,r.selector),e=>l(r,e));return c(a,r).bind(e=>we(s,oe(Tt,e)).bind(e=>{return t=a,o=s,n=r,i(o,e,e=>{return t=n,e=e,l(t,e)&&t.useTabstopAt(e);var t}).fold(()=>n.cyclic?I.some(!0):I.none(),e=>(n.focusManager.set(t,e),I.some(!0)));var t,o,n}))},r=(e,t,o)=>{var n=o.cyclic?Eg:Ag;return a(e,0,o,n)},i=(e,t,o)=>{var n=o.cyclic?Mg:Dg;return a(e,0,o,n)},n=F([g(Bg([Fg,m(yg)]),r),g(m(yg),i),g(Bg([Rg,m(wg)]),(t,o,e)=>e.onEnter.bind(e=>e(t,o)))]),s=F([g(m(Sg),(t,o,e)=>e.onEscape.bind(e=>e(t,o))),g(m(yg),(o,n,a)=>c(o,a).filter(e=>!a.useTabstopAt(e)).bind(e=>{return e=t=e,(Ft(e).bind(Vt).exists(e=>Tt(e,t))?r:i)(o,n,a);var t}))]);return Vg(t,bi.init,n,s,()=>I.some(o))},Hg=Lg(wa("cyclic",ie)),Pg=Lg(wa("cyclic",se)),Ug=(e,t,o)=>Ym(o)&&m(Cg)(t.event)?I.none():(t=e,e=o,Kr(t,e,Tr()),I.some(!0)),Wg=(e,t)=>I.some(!0),jg=[u("execute",Ug),u("useSpace",!1),u("useEnter",!0),u("useControlEnter",!1),u("useDown",!1)],Gg=(e,t,o)=>o.execute(e,t,e.element),$g=Vg(jg,bi.init,(e,t,o,n)=>{var e=o.useSpace&&!Ym(e.element)?Cg:[],a=o.useEnter?wg:[],r=o.useDown?Tg:[],e=e.concat(a).concat(r);return[g(m(e),Gg)].concat(o.useControlEnter?[g(Bg([Ig,m(wg)]),Gg)]:[])},(e,t,o,n)=>o.useSpace&&!Ym(e.element)?[g(m(Cg),Wg)]:[],()=>I.none()),qg=(ds=()=>{let o=On();return xi({readState:()=>o.get().map(e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(e,t)=>{o.set({numRows:e,numColumns:t})},getNumRows:()=>o.get().map(e=>e.numRows),getNumColumns:()=>o.get().map(e=>e.numColumns)})},us=Object.freeze({__proto__:null,flatgrid:ds,init:e=>e.state(e)}),r=>(e,t,o,n)=>{var a=r(e.element);return Jg(a,e,t,o,n)}),Yg=(e,t)=>{e=Qc(e,t);return qg(e)},Xg=(e,t)=>{t=Qc(t,e);return qg(t)},Kg=a=>(e,t,o,n)=>Jg(a,e,t,o,n),Jg=(t,o,e,n,a)=>n.focusManager.get(o).bind(e=>t(o.element,e,n,a)).map(e=>(n.focusManager.set(o,e),!0)),Qg=Kg,Zg=Kg,ep=Kg,tp=e=>!((e=e.dom).offsetWidth<=0&&e.offsetHeight<=0),op=(e,t,o)=>{var n,e=Ed(e,o);return n=ve(e,tp),we(n,e=>Tt(e,t)).map(e=>({index:e,candidates:n}))},np=(e,t)=>we(e,e=>Tt(t,e)),ap=(t,e,o,n)=>n(Math.floor(e/o),e%o).bind(e=>{e=e.row*o+e.column;return 0<=e&&e<t.length?I.some(t[e]):I.none()}),rp=(n,e,a,r,i)=>ap(n,e,r,(e,t)=>{var o=e===a-1?n.length-e*r:r,t=zs(t,i,0,o-1);return I.some({row:e,column:t})}),ip=(n,e,a,r,i)=>ap(n,e,r,(e,t)=>{var e=zs(e,i,0,a-1),o=e===a-1?n.length-e*r:r,t=Vs(t,0,o-1);return I.some({row:e,column:t})}),sp=[r("selector"),u("execute",Ug),Ts("onEscape"),u("captureTab",!1),Bs()],lp=(t,o,e)=>{Bl(t.element,o.selector).each(e=>{o.focusManager.set(t,e)})},cp=a=>(e,t,o,n)=>op(e,t,o.selector).bind(e=>a(e.candidates,e.index,n.getNumRows().getOr(o.initSize.numRows),n.getNumColumns().getOr(o.initSize.numColumns))),dp=(e,t,o)=>o.captureTab?I.some(!0):I.none(),up=cp((e,t,o,n)=>rp(e,t,o,n,-1)),mp=cp((e,t,o,n)=>rp(e,t,o,n,1)),gp=cp((e,t,o,n)=>ip(e,t,o,n,-1)),pp=cp((e,t,o,n)=>ip(e,t,o,n,1)),hp=F([g(m(kg),Yg(up,mp)),g(m(_g),Xg(up,mp)),g(m(Og),Qg(gp)),g(m(Tg),Zg(pp)),g(Bg([Fg,m(yg)]),dp),g(Bg([Rg,m(yg)]),dp),g(m(Cg.concat(wg)),(t,o,n,e)=>{return(a=n).focusManager.get(t).bind(e=>Fl(e,a.selector)).bind(e=>n.execute(t,o,e));var a})]),fp=F([g(m(Sg),(e,t,o)=>o.onEscape(e,t)),g(m(Cg),Wg)]),vp=Vg(sp,ds,hp,fp,()=>I.some(lp)),bp=(e,t,o,a,r)=>{let i=(o,e,n)=>r(o,e,a,0,n.length-1,n[e],e=>{return t=n[e],"button"===ft(t)&&"disabled"===Jt(t,"disabled")?i(o,e,n):I.from(n[e]);var t});return op(e,o,t).bind(e=>{var t=e.index,e=e.candidates;return i(t,t,e)})},xp=(e,t,o,n)=>bp(e,t,o,n,(e,t,o,n,a,r,i)=>{t=Vs(t+o,n,a);return t===e?I.from(r):i(t)}),yp=(e,t,o,n)=>bp(e,t,o,n,(e,t,o,n,a,r,i)=>{t=zs(t,o,n,a);return t===e?I.none():i(t)}),wp=[r("selector"),u("getInitial",I.none),u("execute",Ug),Ts("onEscape"),u("executeOnMove",!1),u("allowVertical",!0),u("allowHorizontal",!0),u("cycles",!0)],Sp=(t,o,n)=>{return(a=n).focusManager.get(t).bind(e=>Fl(e,a.selector)).bind(e=>n.execute(t,o,e));var a},Cp=(t,o,e)=>{o.getInitial(t).orThunk(()=>Bl(t.element,o.selector)).each(e=>{o.focusManager.set(t,e)})},kp=(e,t,o)=>(o.cycles?yp:xp)(e,o.selector,t,-1),Op=(e,t,o)=>(o.cycles?yp:xp)(e,o.selector,t,1),_p=a=>(e,t,o,n)=>a(e,t,o,n).bind(()=>o.executeOnMove?Sp(e,t,o):I.some(!0)),Tp=F([g(m(Cg),Wg),g(m(Sg),(e,t,o)=>o.onEscape(e,t))]),Ep=Vg(wp,bi.init,(e,t,o,n)=>{var a=[...o.allowHorizontal?kg:[]].concat(o.allowVertical?Og:[]),o=[...o.allowHorizontal?_g:[]].concat(o.allowVertical?Tg:[]);return[g(m(a),_p(Yg(kp,Op))),g(m(o),_p(Xg(kp,Op))),g(m(wg),Sp),g(m(Cg),Sp)]},Tp,()=>I.some(Cp)),Ap=(e,t,o)=>I.from(e[t]).bind(e=>I.from(e[o]).map(e=>({rowIndex:t,columnIndex:o,cell:e}))),Mp=(e,t,o,n)=>{var a=e[t].length,o=zs(o,n,0,a-1);return Ap(e,t,o)},Dp=(e,t,o,n)=>{o=zs(o,n,0,e.length-1),n=e[o].length,t=Vs(t,0,n-1);return Ap(e,o,t)},Bp=(e,t,o,n)=>{var a=e[t].length,o=Vs(o+n,0,a-1);return Ap(e,t,o)},Fp=(e,t,o,n)=>{o=Vs(o+n,0,e.length-1),n=e[o].length,t=Vs(t,0,n-1);return Ap(e,o,t)},Ip=[Ta("selectors",[r("row"),r("cell")]),u("cycles",!0),u("previousSelector",I.none),u("execute",Ug)],Rp=(t,o,e)=>{o.previousSelector(t).orThunk(()=>{var e=o.selectors;return Bl(t.element,e.cell)}).each(e=>{o.focusManager.set(t,e)})},Np=(e,t)=>(o,n,r)=>{let i=r.cycles?e:t;return Fl(n,r.selectors.row).bind(e=>{var t=Ed(e,r.selectors.cell);return np(t,n).bind(n=>{let a=Ed(o,r.selectors.row);return np(a,e).bind(e=>{o=a,t=r;var t,o=C(o,e=>Ed(e,t.selectors.cell));return i(o,e,n).map(e=>e.cell)})})})},zp=Np((e,t,o)=>Mp(e,t,o,-1),(e,t,o)=>Bp(e,t,o,-1)),Vp=Np((e,t,o)=>Mp(e,t,o,1),(e,t,o)=>Bp(e,t,o,1)),Lp=Np((e,t,o)=>Dp(e,o,t,-1),(e,t,o)=>Fp(e,o,t,-1)),Hp=Np((e,t,o)=>Dp(e,o,t,1),(e,t,o)=>Fp(e,o,t,1)),Pp=F([g(m(kg),Yg(zp,Vp)),g(m(_g),Xg(zp,Vp)),g(m(Og),Qg(Lp)),g(m(Tg),Zg(Hp)),g(m(Cg.concat(wg)),(t,o,n)=>Cc(t.element).bind(e=>n.execute(t,o,e)))]),Up=F([g(m(Cg),Wg)]),Wp=Vg(Ip,bi.init,Pp,Up,()=>I.some(Rp)),jp=[r("selector"),u("execute",Ug),u("moveOnTab",!1)],Gp=(t,o,n)=>n.focusManager.get(t).bind(e=>n.execute(t,o,e)),$p=(t,o,e)=>{Bl(t.element,o.selector).each(e=>{o.focusManager.set(t,e)})},qp=(e,t,o)=>yp(e,o.selector,t,-1),Yp=(e,t,o)=>yp(e,o.selector,t,1),Xp=F([g(m(Og),ep(qp)),g(m(Tg),ep(Yp)),g(Bg([Fg,m(yg)]),(e,t,o,n)=>o.moveOnTab?ep(qp)(e,t,o,n):I.none()),g(Bg([Rg,m(yg)]),(e,t,o,n)=>o.moveOnTab?ep(Yp)(e,t,o,n):I.none()),g(m(wg),Gp),g(m(Cg),Gp)]),Kp=F([g(m(Cg),Wg)]),Jp=Vg(jp,bi.init,Xp,Kp,()=>I.some($p));var Qp,Hu=[Ts("onSpace"),Ts("onEnter"),Ts("onShiftEnter"),Ts("onLeft"),Ts("onRight"),Ts("onTab"),Ts("onShiftTab"),Ts("onUp"),Ts("onDown"),Ts("onEscape"),u("stopSpaceKeyup",!1),d("focusIn")],ds=Vg(Hu,bi.init,(e,t,o)=>[g(m(Cg),o.onSpace),g(Bg([Rg,m(wg)]),o.onEnter),g(Bg([Fg,m(wg)]),o.onShiftEnter),g(Bg([Fg,m(yg)]),o.onShiftTab),g(Bg([Rg,m(yg)]),o.onTab),g(m(Og),o.onUp),g(m(Tg),o.onDown),g(m(kg),o.onLeft),g(m(_g),o.onRight),g(m(Cg),o.onSpace)],(e,t,o)=>[...o.stopSpaceKeyup?[g(m(Cg),Wg)]:[],g(m(Sg),o.onEscape)],e=>e.focusIn);let Zp=Hg.schema(),eh=Pg.schema(),th=Ep.schema(),oh=vp.schema(),nh=Wp.schema(),ah=$g.schema(),rh=Jp.schema(),ih=ds.schema(),U=Ci({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Zp,cyclic:eh,flow:th,flatgrid:oh,matrix:nh,execution:ah,menu:rh,special:ih}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(t,o,n)=>{o.sendFocusIn(o).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},e=>{e(t,o,n)})},setGridSize:(e,t,o,n,a)=>{var r;r=o,qe(r,"setGridSize")?o.setGridSize(n,a):console.error("Layout does not support setGridSize")}},state:us}),sh=(n,a)=>{kc(()=>{var t,e,o;e=(t=n).components(),o=t,R(o.components(),e=>ln(e.element)),sn(o.element),o.syncComponents(),o=C(a,n.getSystem().build),e=_e(e,o),R(e,e=>{au(e),t.getSystem().removeFromWorld(e)}),R(o,e=>{nu(e)?lu(t,e):(t.getSystem().addToWorld(e),lu(t,e),$t(t.element)&&ru(e))}),t.syncComponents()},n.element)},lh=(s,l)=>{kc(()=>{{var o=s,n=l;let e=o.components(),t=Ce(n,e=>Qs(e).toArray());R(e,e=>{me(t,e)||su(e)}),a=s.element,n=l,r=s.getSystem().buildOrPatch;var a,r,n=ml(a,n,(e,t)=>gl(a,t,e,r)),i=_e(e,n);R(i,e=>{nu(e)&&su(e)}),R(n,e=>{nu(e)||iu(o,e)}),o.syncComponents()}},s.element)},ch=(e,t,o,n)=>{su(t);t=gl(e.element,o,n,e.getSystem().buildOrPatch);iu(e,t),e.syncComponents()},dh=(e,t,o)=>{o=e.getSystem().build(o);du(e,o,t)},uh=(e,t,a,o)=>{mu(t),dh(e,(e,t)=>{var o,n;o=e,n=t,e=a,zt(o,e).fold(()=>{an(o,n)},e=>{tn(e,n)})},o)},mh=(e,t)=>e.components(),gh=(o,n,e,a,r)=>{var t=mh(o);return I.from(t[a]).map(t=>(r.fold(()=>mu(t),e=>{(n.reuseDom?ch:uh)(o,t,a,e)}),t))},ph=Object.freeze({__proto__:null,append:(e,t,o,n)=>{dh(e,an,n)},prepend:(e,t,o,n)=>{dh(e,nn,n)},remove:(e,t,o,n)=>{e=mh(e);ye(e,e=>Tt(n.element,e.element)).each(mu)},replaceAt:gh,replaceBy:(t,o,e,n,a)=>{var r=mh(t);return we(r,n).bind(e=>gh(t,o,0,e,a))},set:(e,t,o,n)=>(t.reuseDom?lh:sh)(e,n),contents:mh}),D=wi({fields:[Pa("reuseDom",!0)],name:"replacing",apis:ph}),B=(e,t)=>({key:e,value:{config:{},me:((e,t)=>{t=Zr(t);return wi({fields:[r("enabled")],name:e,active:{events:F(t)}})})(e,t),configAsRaw:F({}),initialConfig:{},state:bi}}),hh=(e,t)=>{t.ignore||(xc(e.element),t.onFocus(e))},fh=Object.freeze({__proto__:null,focus:hh,blur:(e,t)=>{t.ignore||yc(e.element)},isFocused:e=>wc(e.element)}),vh=Object.freeze({__proto__:null,exhibit:(e,t)=>{t=t.ignore?{}:{attributes:{tabindex:"-1"}};return pi(t)},events:o=>Zr([L(Cr(),(e,t)=>{hh(e,o),t.stop()})].concat(o.stopMousedown?[L(rr(),(e,t)=>{t.event.prevent()})]:[]))}),bh=[e("onFocus"),u("stopMousedown",!1),u("ignore",!1)],W=wi({fields:bh,name:"focusing",active:vh,apis:fh}),xh=(e,t,o,n)=>{var a,r,i,s=o.get();o.set(n),r=e,i=o,t.toggleClass.each(e=>{(i.get()?Mi:Bi)(r.element,e)}),(a=t.aria).update(e,a,o.get()),s!==n&&t.onToggled(e,n)},yh=(e,t,o)=>{xh(e,t,o,!o.get())},wh=(e,t,o)=>{xh(e,t,o,t.selected)},Sh=Object.freeze({__proto__:null,onLoad:wh,toggle:yh,isOn:(e,t,o)=>o.get(),on:(e,t,o)=>{xh(e,t,o,!0)},off:(e,t,o)=>{xh(e,t,o,!1)},set:xh}),Ch=Object.freeze({__proto__:null,exhibit:()=>pi({}),events:(e,t)=>{o=e,n=t,a=yh;var o,n,a,r=ui(e=>{a(e,o,n)}),t=hi(e,t,wh);return Zr(Se([e.toggleOnExecute?[r]:[],[t]]))}}),kh=(e,t,o)=>{w(e.element,"aria-expanded",o)},Oh=[u("selected",!1),d("toggleClass"),u("toggleOnExecute",!0),e("onToggled"),za("aria",{mode:"none"},ba("mode",{pressed:[u("syncWithExpanded",!1),Ms("update",(e,t,o)=>{w(e.element,"aria-pressed",o),t.syncWithExpanded&&kh(e,0,o)})],checked:[Ms("update",(e,t,o)=>{w(e.element,"aria-checked",o)})],expanded:[Ms("update",kh)],selected:[Ms("update",(e,t,o)=>{w(e.element,"aria-selected",o)})],none:[Ms("update",S)]}))],f=wi({fields:Oh,name:"toggling",active:Ch,apis:Sh,state:{init:()=>{let t=O(!1);return{get:()=>t.get(),set:e=>t.set(e),clear:()=>t.set(!1),readState:()=>t.get()}}}}),_h=()=>{var e=(e,t)=>{t.stop(),Xr(e)};return[L(fr(),e),L(Ar(),e),ii(tr()),ii(rr())]},Th=e=>Zr(Se([e.map(o=>ui((e,t)=>{o(e),t.stop()})).toArray(),_h()])),Eh="alloy.item-hover",Ah="alloy.item-focus",Mh="alloy.item-toggled",Dh=e=>{(Cc(e.element).isNone()||W.isFocused(e))&&(W.isFocused(e)||W.focus(e),T(e,Eh,{item:e}))},Bh=e=>{T(e,Ah,{item:e})},Fh=F(Eh),Ih=F(Ah),Rh=F(Mh),Nh=[r("data"),r("components"),r("dom"),u("hasSubmenu",!1),d("toggling"),d("role"),Xu("itemBehaviours",[f,W,U,A]),u("ignoreFocus",!1),u("domModification",{}),Ms("builder",t=>{return{dom:t.dom,domModification:{...t.domModification,attributes:{role:(e=t).role.fold(()=>e.toggling.map(e=>e.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),x),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ku(t.itemBehaviours,[t.toggling.fold(f.revoke,e=>{return f.config((o=e,{aria:{mode:t.role.exists(e=>"option"===e)?"selected":"checked"},...Ue(o,(e,t)=>"exclusive"!==t),onToggled:(e,t)=>{K(o.onToggled)&&o.onToggled(e,t),e=e,t=t,T(e,Mh,{item:e,state:t})}}));var o}),W.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:e=>{Bh(e)}}),U.config({mode:"execution"}),A.config({store:{mode:"memory",initialValue:t.data}}),B("item-type-events",[..._h(),L(cr(),Dh),L(Er(),W.focus)])]),components:t.components,eventOrder:t.eventOrder};var e}),u("eventOrder",{})],zh=[r("dom"),r("components"),Ms("builder",e=>({dom:e.dom,components:e.components,events:Zr([(e=Er(),L(e,(e,t)=>{t.stop()}))])}))],Vh=F("item-widget"),Lh=F([xm({name:"widget",overrides:t=>({behaviours:H([A.config({store:{mode:"manual",getValue:e=>t.data,setValue:S}})])})})]),Hh=[r("uid"),r("data"),r("components"),r("dom"),u("autofocus",!1),u("ignoreFocus",!1),Xu("widgetBehaviours",[A,W,U]),u("domModification",{}),Lm(Lh()),Ms("builder",o=>{let e=Mm(Vh(),o,Lh()),t=Dm(Vh(),o,e.internals()),n=e=>Bm(e,o,"widget").map(e=>(U.focusIn(e),e)),a=(e,t)=>(Ym(t.event.target)||o.autofocus&&t.setSource(e.element),I.none());return{dom:o.dom,components:t,domModification:o.domModification,events:Zr([ui((e,t)=>{n(e).each(e=>{t.stop()})}),L(cr(),Dh),L(Er(),(e,t)=>{o.autofocus?n(e):W.focus(e)})]),behaviours:Ku(o.widgetBehaviours,[A.config({store:{mode:"memory",initialValue:o.data}}),W.config({ignore:o.ignoreFocus,onFocus:e=>{Bh(e)}}),U.config({mode:"special",focusIn:o.autofocus?e=>{n(e)}:ki(),onLeft:a,onRight:a,onEscape:(e,t)=>W.isFocused(e)||o.autofocus?(o.autofocus&&t.setSource(e.element),I.none()):(W.focus(e),I.some(!0))})])}})],Ph=ba("type",{widget:Hh,item:Nh,separator:zh}),Uh=F([Sm({factory:{sketch:e=>{e=fa("menu.spec item",Ph,e);return e.builder(e)}},name:"items",unit:"item",defaults:(e,t)=>$e(t,"uid")?t:{...t,uid:$s("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),Wh=F([Ba("role"),r("value"),r("items"),r("dom"),r("components"),u("eventOrder",{}),$u("menuBehaviours",[y,A,M,U]),za("movement",{mode:"menu",moveOnTab:!0},ba("mode",{grid:[Bs(),Ms("config",(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}))],matrix:[Ms("config",(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager})),r("rowSelector"),u("previousSelector",I.none)],menu:[u("moveOnTab",!0),Ms("config",(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}))]})),Ca("markers",Ss()),u("fakeFocus",!1),u("focusManager",zg()),e("onHighlight"),e("onDehighlight"),u("showMenuRole",!0)]),jh=F("alloy.menu-focus"),Gh=qm({name:"Menu",configFields:Wh(),partFields:Uh(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Yu(e.menuBehaviours,[y.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),A.config({store:{mode:"memory",initialValue:e.value}}),M.config({find:I.some}),U.config(e.movement.config(e,e.movement))]),events:Zr([L(Ih(),(t,o)=>{var e=o.event;t.getSystem().getByDom(e.target).each(e=>{y.highlight(t,e),o.stop(),T(t,jh(),{menu:t,item:e})})}),L(Fh(),(e,t)=>{t=t.event.item;y.highlight(e,t)}),L(Rh(),(e,t)=>{var o,n,{item:t,state:a}=t.event;a&&"menuitemradio"===Jt(t.element,"role")&&(o=e,n=t,a=Ed(o.element,'[role="menuitemradio"][aria-checked="true"]'),R(a,e=>{Tt(e,n.element)||o.getSystem().getByDom(e).each(e=>{f.off(e)})}))})]),components:t,eventOrder:e.eventOrder,...e.showMenuRole?{domModification:{attributes:{role:e.role.getOr("menu")}}}:{}})}),$h=(o,n,a,e)=>k(a,e).bind(e=>k(o,e).bind(e=>{var t=$h(o,n,a,e);return I.some([e].concat(t))})).getOr([]),qh=e=>"prepared"===e.type?I.some(e.menu):I.none(),Yh=()=>{let s=O({}),a=O({}),l=O({}),c=On(),r=O({}),d=e=>t(e).bind(qh),t=e=>k(a.get(),e),o=e=>k(s.get(),e);return{setMenuBuilt:(e,t)=>{a.set({...a.get(),[e]:{type:"prepared",menu:t}})},setContents:(e,t,o,n)=>{c.set(e),s.set(o),a.set(t),r.set(n);e=((e,t)=>{let o={},n=(ze(e,(e,t)=>{R(e,e=>{o[e]=t})}),t),a=Le(t,(e,t)=>({k:e,v:t})),r=Ve(a,(e,t)=>[t].concat($h(o,n,a,t)));return Ve(o,e=>k(r,e).getOr([e]))})(n,o);l.set(e)},expand:o=>k(s.get(),o).map(e=>{var t=k(l.get(),o).getOr([]);return[e].concat(t)}),refresh:e=>k(l.get(),e),collapse:e=>k(l.get(),e).bind(e=>1<e.length?I.some(e.slice(1)):I.none()),lookupMenu:t,lookupItem:o,otherMenus:e=>{var t=r.get();return _e(Re(t),e)},getPrimary:()=>c.get().bind(d),getMenus:()=>a.get(),clear:()=>{s.set({}),a.set({}),l.set({}),c.clear()},isClear:()=>c.get().isNone(),getTriggeringPath:(e,i)=>{let r=ve(o(e).toArray(),e=>d(e).isSome());return k(l.get(),e).bind(e=>{let o=Oe(r.concat(e));var t=Ce(o,(e,t)=>{return n=e,a=i,r=o.slice(0,t+1),d(n).bind(t=>{return o=n,je(s.get(),(e,t)=>e===o).bind(e=>a(e).map(e=>({triggeredMenu:t,triggeringItem:e,triggeringPath:r})));var o}).fold(()=>Ye(c.get(),e)?[]:[I.none()],e=>[I.some(e)]);var n,a,r}),n=[];for(let e=0;e<t.length;e++){var a=t[e];if(!a.isSome())return I.none();n.push(a.getOrDie())}return I.some(n)})}}},Xh=qh,Kh=E("tiered-menu-item-highlight"),Jh=E("tiered-menu-item-dehighlight"),Qh=((Hu=Qp=Qp||{})[Hu.HighlightMenuAndItem=0]="HighlightMenuAndItem",Hu[Hu.HighlightJustMenu=1]="HighlightJustMenu",Hu[Hu.HighlightNone=2]="HighlightNone",F("collapse-item")),Zh=$m({name:"TieredMenu",configFields:[As("onExecute"),As("onEscape"),Es("onOpenMenu"),Es("onOpenSubmenu"),e("onRepositionMenu"),e("onCollapseMenu"),u("highlightOnOpen",Qp.HighlightMenuAndItem),Ta("data",[r("primary"),r("menus"),r("expansions")]),u("fakeFocus",!1),e("onHighlightItem"),e("onDehighlightItem"),e("onHover"),ks(),r("dom"),u("navigateOnHover",!0),u("stayInDom",!1),$u("tmenuBehaviours",[U,y,M,D]),u("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(l,e)=>{let a=On(),c=Yh(),d=e=>A.getValue(e).value,i=y.highlight,s=(t,o)=>{i(t,o),y.getHighlighted(o).orThunk(()=>y.getFirst(o)).each(e=>{l.fakeFocus?y.highlight(o,e):Kr(t,e.element,Er())})},r=(t,e)=>Xe(C(e,e=>t.lookupMenu(e).bind(e=>"prepared"===e.type?I.some(e.menu):I.none()))),u=(t,e,o)=>{e=r(e,e.otherMenus(o));R(e,e=>{Ri(e.element,[l.markers.backgroundMenu]),l.stayInDom||D.remove(t,e)})},m=(e,o)=>{n=e;var n,e=a.get().getOrThunk(()=>{let o={},e=Ed(n.element,"."+l.markers.item),t=ve(e,e=>"true"===Jt(e,"aria-haspopup"));return R(t,e=>{n.getSystem().getByDom(e).each(e=>{var t=d(e);o[t]=e})}),a.set(o),o});ze(e,(e,t)=>{t=me(o,t);w(e.element,"aria-expanded",t)})},g=(o,n,a)=>I.from(a[0]).bind(e=>n.lookupMenu(e).bind(e=>{var t;return"notbuilt"===e.type?I.none():(e=e.menu,t=r(n,a.slice(1)),R(t,e=>{Mi(e.element,l.markers.backgroundMenu)}),$t(e.element)||D.append(o,Cl(e)),Ri(e.element,[l.markers.backgroundMenu]),s(o,e),u(o,n,a),I.some(e))})),p;var t;(t=p=p||{})[t.HighlightSubmenu=0]="HighlightSubmenu",t[t.HighlightParent=1]="HighlightParent";let h=(r,i,s=p.HighlightSubmenu)=>{var e;return i.hasConfigured(P)&&P.isDisabled(i)?I.some(i):(e=d(i),c.expand(e).bind(a=>(m(r,a),I.from(a[0]).bind(n=>c.lookupMenu(n).bind(e=>{t=r,o=n;var t,o="notbuilt"===(e=e).type?(t=t.getSystem().build(e.nbMenu()),c.setMenuBuilt(o,t),t):e.menu;return $t(o.element)||D.append(r,Cl(o)),l.onOpenSubmenu(r,i,o,Oe(a)),s===p.HighlightSubmenu?(y.highlightFirst(o),g(r,c,a)):(y.dehighlightAll(o),I.some(i))})))))},o=(t,o)=>{var e=d(o);return c.collapse(e).bind(e=>(m(t,e),g(t,c,e).map(e=>(l.onCollapseMenu(t,o,e),e))))},n=o=>(t,e)=>Fl(e.getSource(),"."+l.markers.item).bind(e=>t.getSystem().getByDom(e).toOptional().bind(e=>o(t,e).map(se))),f=Zr([L(jh(),(t,o)=>{var e=o.event.item;c.lookupItem(d(e)).each(()=>{var e=o.event.menu,e=(y.highlight(t,e),d(o.event.item));c.refresh(e).each(e=>u(t,c,e))})}),ui((t,e)=>{e=e.event.target;t.getSystem().getByDom(e).each(e=>{0===d(e).indexOf("collapse-item")&&o(t,e),h(t,e,p.HighlightSubmenu).fold(()=>{l.onExecute(t,e)},S)})}),li((t,e)=>{var n,a,o,r;n=t,a=l.data.primary,o=l.data.menus,o=Ve(o,(e,t)=>{var o=()=>Gh.sketch({...e,value:t,markers:l.markers,fakeFocus:l.fakeFocus,onHighlight:(e,t)=>{T(e,Kh,{menuComp:e,itemComp:t})},onDehighlight:(e,t)=>{T(e,Jh,{menuComp:e,itemComp:t})},focusManager:(l.fakeFocus?()=>{let n=e=>y.getHighlighted(e).map(e=>e.element);return{get:n,set:(t,e)=>{var o=n(t),e=(t.getSystem().getByDom(e).fold(S,e=>{y.highlight(t,e)}),n(t));Ng(t,o,e)}}}:zg)()});return t===a?{type:"prepared",menu:n.getSystem().build(o())}:{type:"notbuilt",nbMenu:o}}),r=Ve(l.data.menus,(e,t)=>Ce(e.items,e=>"separator"===e.type?[]:[e.data.value])),c.setContents(l.data.primary,o,l.data.expansions,r),c.getPrimary().each(e=>{D.append(t,Cl(e)),l.onOpenMenu(t,e),l.highlightOnOpen===Qp.HighlightMenuAndItem?s(t,e):l.highlightOnOpen===Qp.HighlightJustMenu&&i(t,e)})}),L(Kh,(e,t)=>{l.onHighlightItem(e,t.event.menuComp,t.event.itemComp)}),L(Jh,(e,t)=>{l.onDehighlightItem(e,t.event.menuComp,t.event.itemComp)}),...l.navigateOnHover?[L(Fh(),(e,t)=>{var t=t.event.item,o=e,n=t;n=d(n),c.refresh(n).bind(e=>(m(o,e),g(o,c,e))),h(e,t,p.HighlightParent),l.onHover(e,t)})]:[]]),v=e=>y.getHighlighted(e).bind(y.getHighlighted),b={collapseMenu:t=>{v(t).each(e=>{o(t,e)})},highlightPrimary:t=>{c.getPrimary().each(e=>{s(t,e)})},repositionMenus:o=>{c.getPrimary().bind(t=>v(o).bind(e=>{let t=d(e),o=Ge(c.getMenus()),n=Xe(C(o,Xh));return c.getTriggeringPath(t,e=>{return t=n,o=e,Ie(t,e=>e.getSystem().isConnected()?(e=y.getCandidates(e),ye(e,e=>d(e)===o)):I.none());var t,o})}).map(e=>({primary:t,triggeringPath:e}))).fold(()=>{var e;e=o,I.from(e.components()[0]).filter(e=>"menu"===Jt(e.element,"role")).each(e=>{l.onRepositionMenu(o,e,[])})},({primary:e,triggeringPath:t})=>{l.onRepositionMenu(o,e,t)})}};return{uid:l.uid,dom:l.dom,markers:l.markers,behaviours:Yu(l.tmenuBehaviours,[U.config({mode:"special",onRight:n((e,t)=>Ym(t.element)?I.none():h(e,t,p.HighlightSubmenu)),onLeft:n((e,t)=>Ym(t.element)?I.none():o(e,t)),onEscape:n((e,t)=>o(e,t).orThunk(()=>l.onEscape(e,t).map(()=>e))),focusIn:(t,e)=>{c.getPrimary().each(e=>{Kr(t,e.element,Er())})}}),y.config({highlightClass:l.markers.selectedMenu,itemClass:l.markers.menu}),M.config({find:e=>y.getHighlighted(e)}),D.config({})]),eventOrder:l.eventOrder,apis:b,events:f}},extraApis:{tieredData:(e,t,o)=>({primary:e,menus:t,expansions:o}),singleData:(e,t)=>({primary:e,menus:$a(e,t),expansions:{}}),collapseItem:e=>({value:E(Qh()),meta:{text:e}})}}),ef=$m({name:"InlineView",configFields:[r("lazySink"),e("onShow"),e("onHide"),Ia("onEscape"),$u("inlineBehaviours",[h,A,vc]),Na("fireDismissalEventInstead",[u("event",Hr())]),Na("fireRepositionEventInstead",[u("event",Pr())]),u("getRelated",I.none),u("isExtraPart",ie),u("eventOrder",I.none)],factory:(r,e)=>{let a=(e,t,o,n)=>{let a=r.lazySink(e).getOrDie();h.openWhileCloaked(e,t,()=>ou.positionWithinBounds(a,e,o,n())),A.setValue(e,I.some({mode:"position",config:o,getBounds:n}))},n=(e,t,o,n)=>{t=((e,t,a,o,r)=>{let i=()=>e.lazySink(t),n="horizontal"===o.type?{layouts:{onLtr:()=>gc(),onRtl:()=>pc()}}:{},s=e=>2===e.length?n:{};return Zh.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightOnOpen:o.menu.highlightOnOpen,fakeFocus:o.menu.fakeFocus,onEscape:()=>(h.close(t),e.onEscape.map(e=>e(t)),I.some(!0)),onExecute:()=>I.some(!0),onOpenMenu:(e,t)=>{ou.positionWithinBounds(i().getOrDie(),t,a,r())},onOpenSubmenu:(e,t,o,n)=>{var a=i().getOrDie();ou.position(a,o,{anchor:{type:"submenu",item:t,...s(n)}})},onRepositionMenu:(e,t,o)=>{let n=i().getOrDie();ou.positionWithinBounds(n,t,a,r()),R(o,e=>{var t=s(e.triggeringPath);ou.position(n,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem,...t}})})}})})(r,e,t,o,n);h.open(e,t),A.setValue(e,I.some({mode:"menu",menu:t}))},t=o=>{h.isOpen(o)&&A.getValue(o).each(e=>{switch(e.mode){case"menu":h.getState(o).each(Zh.repositionMenus);break;case"position":var t=r.lazySink(o).getOrDie();ou.positionWithinBounds(t,o,e.config,e.getBounds())}})},o={setContent:(e,t)=>{h.setContent(e,t)},showAt:(e,t,o)=>{var n=I.none;a(e,t,o,n)},showWithinBounds:a,showMenuAt:(e,t,o)=>{n(e,t,o,I.none)},showMenuWithinBounds:n,hide:e=>{h.isOpen(e)&&(A.setValue(e,I.none()),h.close(e))},getContent:e=>h.getState(e),reposition:t,isOpen:h.isOpen};return{uid:r.uid,dom:r.dom,behaviours:Yu(r.inlineBehaviours,[h.config({isPartOf:(e,t,o)=>{return Nl(t,o)||(n=o,r.getRelated(e).exists(e=>Nl(e,n)));var n},getAttachPoint:e=>r.lazySink(e).getOrDie(),onOpen:e=>{r.onShow(e)},onClose:e=>{r.onHide(e)}}),A.config({store:{mode:"memory",initialValue:I.none()}}),vc.config({channels:{...Bu({isExtraPart:e.isExtraPart,...r.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...Iu({...r.fireRepositionEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({}),doReposition:t})}})]),eventOrder:r.eventOrder,apis:o}},apis:{showAt:(e,t,o,n)=>{e.showAt(t,o,n)},showWithinBounds:(e,t,o,n,a)=>{e.showWithinBounds(t,o,n,a)},showMenuAt:(e,t,o,n)=>{e.showMenuAt(t,o,n)},showMenuWithinBounds:(e,t,o,n,a)=>{e.showMenuWithinBounds(t,o,n,a)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,o)=>{e.setContent(t,o)},reposition:(e,t)=>{e.reposition(t)}}});var tf,of,nf,af=tinymce.util.Tools.resolve("tinymce.util.Delay"),rf=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),sf=tinymce.util.Tools.resolve("tinymce.EditorManager"),lf=tinymce.util.Tools.resolve("tinymce.Env");function cf(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return $v(nf,t)}(ds=tf=tf||{}).default="wrap",ds.floating="floating",ds.sliding="sliding",ds.scrolling="scrolling",(us=of=of||{}).auto="auto",us.top="top",us.bottom="bottom";let df=t=>e=>e.options.get(t),uf=t=>e=>I.from(t(e)),mf=e=>{let t=lf.deviceType.isPhone(),o=lf.deviceType.isTablet()||t,n=e.options.register,a=e=>$(e)||!1===e,r=e=>$(e)||J(e);n("skin",{processor:e=>$(e)||!1===e,default:"oxide"}),n("skin_url",{processor:"string"}),n("height",{processor:r,default:Math.max(e.getElement().offsetHeight,400)}),n("width",{processor:r,default:rf.DOM.getStyle(e.getElement(),"width")}),n("min_height",{processor:"number",default:100}),n("min_width",{processor:"number"}),n("max_height",{processor:"number"}),n("max_width",{processor:"number"}),n("style_formats",{processor:"object[]"}),n("style_formats_merge",{processor:"boolean",default:!1}),n("style_formats_autohide",{processor:"boolean",default:!1}),n("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),n("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),n("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),n("font_size_input_default_unit",{processor:"string",default:"pt"}),n("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),n("content_langs",{processor:"object[]"}),n("removed_menuitems",{processor:"string",default:""}),n("menubar",{processor:e=>$(e)||b(e),default:!t}),n("menu",{processor:"object",default:{}}),n("toolbar",{processor:e=>b(e)||$(e)||c(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),pe(9,e=>{n("toolbar"+(e+1),{processor:"string"})}),n("toolbar_mode",{processor:"string",default:o?"scrolling":"floating"}),n("toolbar_groups",{processor:"object",default:{}}),n("toolbar_location",{processor:"string",default:of.auto}),n("toolbar_persist",{processor:"boolean",default:!1}),n("toolbar_sticky",{processor:"boolean",default:e.inline}),n("toolbar_sticky_offset",{processor:"number",default:0}),n("fixed_toolbar_container",{processor:"string",default:""}),n("fixed_toolbar_container_target",{processor:"object"}),n("ui_mode",{processor:"string",default:"combined"}),n("file_picker_callback",{processor:"function"}),n("file_picker_validator_handler",{processor:"function"}),n("file_picker_types",{processor:"string"}),n("typeahead_urls",{processor:"boolean",default:!0}),n("anchor_top",{processor:a,default:"#top"}),n("anchor_bottom",{processor:a,default:"#bottom"}),n("draggable_modal",{processor:"boolean",default:!1}),n("statusbar",{processor:"boolean",default:!0}),n("elementpath",{processor:"boolean",default:!0}),n("branding",{processor:"boolean",default:!0}),n("promotion",{processor:"boolean",default:!0}),n("resize",{processor:e=>"both"===e||b(e),default:!lf.deviceType.isTouch()}),n("sidebar_show",{processor:"string"}),n("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),n("default_font_stack",{processor:"string[]",default:[]})},gf=df("readonly"),pf=df("disabled"),hf=df("height"),ff=df("width"),vf=uf(df("min_width")),bf=uf(df("min_height")),xf=uf(df("max_width")),yf=uf(df("max_height")),wf=uf(df("style_formats")),Sf=df("style_formats_merge"),Cf=df("style_formats_autohide"),kf=df("content_langs"),Of=df("removed_menuitems"),_f=df("toolbar_mode"),Tf=df("toolbar_groups"),Ef=df("toolbar_location"),Af=df("fixed_toolbar_container"),Mf=df("fixed_toolbar_container_target"),Df=df("toolbar_persist"),Bf=df("toolbar_sticky_offset"),Ff=df("menubar"),If=df("toolbar"),Rf=df("file_picker_callback"),Nf=df("file_picker_validator_handler"),zf=df("font_size_input_default_unit"),Vf=df("file_picker_types"),Lf=df("typeahead_urls"),Hf=df("anchor_top"),Pf=df("anchor_bottom"),Uf=df("draggable_modal"),Wf=df("statusbar"),jf=df("elementpath"),Gf=df("branding"),$f=df("resize"),qf=df("paste_as_text"),Yf=df("sidebar_show"),Xf=df("promotion"),Kf=df("help_accessibility"),Jf=df("default_font_stack"),Qf=df("skin"),Zf=e=>!1===e.options.get("skin"),ev=e=>!1!==e.options.get("menubar"),tv=t=>{let e=t.options.get("skin_url");if(Zf(t))return e;if(e)return t.documentBaseURI.toAbsolute(e);{let e=t.options.get("skin");return sf.baseURL+"/skins/ui/"+e}},ov=e=>e.options.get("line_height_formats").split(" "),nv=e=>{var t=If(e),o=$(t),n=c(t)&&0<t.length;return!rv(e)&&(n||o||!0===t)},av=t=>{var e=pe(9,e=>t.options.get("toolbar"+(e+1))),e=ve(e,$);return Qe(0<e.length,e)},rv=t=>av(t).fold(()=>{var e=If(t);return Q(e,$)&&0<e.length},se),iv=e=>Ef(e)===of.bottom,sv=e=>{var t;return e.inline?0<(t=null!=(t=Af(e))?t:"").length?Bl(qt(),t):(t=Mf(e),X(t)?I.some(N(t)):I.none()):I.none()},lv=e=>e.inline&&sv(e).isSome(),cv=e=>sv(e).getOrThunk(()=>Wt(Ut(N(e.getElement())))),dv=e=>e.inline&&!ev(e)&&!nv(e)&&!rv(e),uv=e=>(e.options.get("toolbar_sticky")||e.inline)&&!lv(e)&&!dv(e),mv=e=>!lv(e)&&"split"===e.options.get("ui_mode"),gv=e=>{e=e.options.get("menu");return Ve(e,e=>({...e,items:e.items}))},pv=Object.freeze({__proto__:null,get ToolbarMode(){return tf},get ToolbarLocation(){return of},register:mf,getSkinUrl:tv,getSkinUrlOption:e=>I.from(e.options.get("skin_url")),isReadOnly:gf,isDisabled:pf,getSkin:Qf,isSkinDisabled:Zf,getHeightOption:hf,getWidthOption:ff,getMinWidthOption:vf,getMinHeightOption:bf,getMaxWidthOption:xf,getMaxHeightOption:yf,getUserStyleFormats:wf,shouldMergeStyleFormats:Sf,shouldAutoHideStyleFormats:Cf,getLineHeightFormats:ov,getContentLanguages:kf,getRemovedMenuItems:Of,isMenubarEnabled:ev,isMultipleToolbars:rv,isToolbarEnabled:nv,isToolbarPersist:Df,getMultipleToolbarsOption:av,getUiContainer:cv,useFixedContainer:lv,isSplitUiMode:mv,getToolbarMode:_f,isDraggableModal:Uf,isDistractionFree:dv,isStickyToolbar:uv,getStickyToolbarOffset:Bf,getToolbarLocation:Ef,isToolbarLocationBottom:iv,getToolbarGroups:Tf,getMenus:gv,getMenubar:Ff,getToolbar:If,getFilePickerCallback:Rf,getFilePickerTypes:Vf,useTypeaheadUrls:Lf,getAnchorTop:Hf,getAnchorBottom:Pf,getFilePickerValidatorHandler:Nf,getFontSizeInputDefaultUnit:zf,useStatusBar:Wf,useElementPath:jf,promotionEnabled:Xf,useBranding:Gf,getResize:$f,getPasteAsText:qf,getSidebarShow:Yf,useHelpAccessibility:Kf,getDefaultFontStack:Jf}),hv=["visible","hidden","clip"],fv=e=>0<at(e).length&&!me(hv,e),vv=e=>{var t;return!!bt(e)&&(t=ro(e,"overflow-x"),e=ro(e,"overflow-y"),fv(t)||fv(e))},bv=e=>e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen(),xv=(o,n)=>{if(mv(o)){var a=o,o=n;let e=Td(o,vv),t=0===e.length?jt(o).map(Gt).map(e=>Td(e,vv)).getOr([]):e;return De(t).map(e=>({element:e,others:t.slice(1),isFullscreen:()=>bv(a)}))}return I.none()},yv=e=>{var t=[...C(e.others,xn),Sn()];return e.isFullscreen()?Sn():(e=xn(e.element),t=t,xe(t,(e,t)=>wn(e,t),e))},wv=$m({name:"Button",factory:e=>{var t=Th(e.action),o=e.dom.tag,n=t=>k(e.dom,"attributes").bind(e=>k(e,t));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Ku(e.buttonBehaviours,[W.config({}),U.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===o?{type:n("type").getOr("button"),...n("role").map(e=>({role:e})).getOr({})}:{role:e.role.getOr(n("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[u("uid",void 0),r("dom"),u("components",[]),Xu("buttonBehaviours",[W,U]),d("action"),d("role"),u("eventOrder",{})]}),Sv=e=>{let t=ct(e),o=Nt(t),n=(e=void 0!==t.dom.attributes?t.dom.attributes:[],xe(e,(e,t)=>"class"===t.name?e:{...e,[t.name]:t.value},{})),a=(e=t,Array.prototype.slice.call(e.dom.classList,0)),r=0===o.length?{}:{innerHtml:ms(t)};return{tag:ft(t),classes:a,attributes:n,...r}},j=e=>{let t=void 0!==e.uid&&qe(e,"uid")?e.uid:$s("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}},Cv=Object.freeze({__proto__:null,exhibit:(e,t)=>pi({attributes:qa([{key:t.tabAttr,value:"true"}])})}),kv=[u("tabAttr","data-alloy-tabstop")],Ov=wi({fields:kv,name:"tabstopping",active:Cv}),_v=E("tooltip.exclusive"),Tv=E("tooltip.show"),Ev=E("tooltip.hide"),Av=E("tooltip.immediateHide"),Mv=E("tooltip.immediateShow"),Dv=(e,t,o)=>{e.getSystem().broadcastOn([_v],{})},Bv=Object.freeze({__proto__:null,hideAllExclusive:Dv,immediateOpenClose:(e,t,o,n)=>_(e,n?Mv:Av),isEnabled:(e,t,o)=>o.isEnabled(),setComponents:(e,t,o,n)=>{o.getTooltip().each(e=>{e.getSystem().isConnected()&&D.set(e,n)})},setEnabled:(e,t,o,n)=>o.setEnabled(n)}),Fv=Object.freeze({__proto__:null,events:(n,a)=>{let o=t=>{a.getTooltip().each(e=>{e.getSystem().isConnected()&&(mu(e),n.onHide(t,e),a.clearTooltip())}),a.clearTimer()},t=t=>{var e,o;!a.isShowing()&&a.isEnabled()&&(Dv(t),e=n.lazySink(t).getOrDie(),o=t.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:Zr("normal"===n.mode?[L(cr(),e=>{_(t,Tv)}),L(sr(),e=>{_(t,Ev)})]:[]),behaviours:H([D.config({})])}),a.setTooltip(o),cu(e,o),n.onShow(t,o),ou.position(e,o,{anchor:n.anchor(t)}))},r=o=>{a.getTooltip().each(e=>{var t=n.lazySink(o).getOrDie();ou.position(t,e,{anchor:n.anchor(o)})})};return Zr(Se([[di(e=>{n.onSetup(e)}),L(Tv,e=>{a.resetTimer(()=>{t(e)},n.delayForShow())}),L(Ev,e=>{a.resetTimer(()=>{o(e)},n.delayForHide())}),L(Mv,e=>{a.resetTimer(()=>{t(e)},0)}),L(Av,e=>{a.resetTimer(()=>{o(e)},0)}),L(_r(),(e,t)=>{t.universal||me(t.channels,_v)&&o(e)}),ci(e=>{o(e)})],(()=>{switch(n.mode){case"normal":return[L(dr(),e=>{_(e,Mv)}),L(kr(),e=>{_(e,Av)}),L(cr(),e=>{_(e,Tv)}),L(sr(),e=>{_(e,Ev)})];case"follow-highlight":return[L(qr(),(e,t)=>{_(e,Tv)}),L(Yr(),e=>{_(e,Ev)})];case"children-normal":return[L(dr(),(t,o)=>{Cc(t.element).each(e=>{kt(o.event.target,"[data-mce-tooltip]")&&a.getTooltip().fold(()=>{_(t,Mv)},e=>{a.isShowing()&&(n.onShow(t,e),r(t))})})}),L(kr(),e=>{Cc(e.element).fold(()=>{_(e,Av)},S)}),L(cr(),t=>{Bl(t.element,"[data-mce-tooltip]:hover").each(e=>{a.getTooltip().fold(()=>{_(t,Tv)},e=>{a.isShowing()&&(n.onShow(t,e),r(t))})})}),L(sr(),e=>{Bl(e.element,"[data-mce-tooltip]:hover").fold(()=>{_(e,Ev)},S)})];default:return[L(dr(),(t,o)=>{Cc(t.element).each(e=>{kt(o.event.target,"[data-mce-tooltip]")&&a.getTooltip().fold(()=>{_(t,Mv)},e=>{a.isShowing()&&(n.onShow(t,e),r(t))})})}),L(kr(),e=>{Cc(e.element).fold(()=>{_(e,Av)},S)})]}})()]))}}),Iv=[r("lazySink"),r("tooltipDom"),u("exclusive",!0),u("tooltipComponents",[]),Ua("delayForShow",F(300)),Ua("delayForHide",F(100)),Ua("onSetup",S),Ha("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),u("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:F([ic,rc,tc,nc,oc,ac]),onRtl:F([ic,rc,tc,nc,oc,ac])},bubble:Xc(0,-2,{})})),e("onHide"),e("onShow")],Rv=Object.freeze({__proto__:null,init:()=>{let t=O(!0),o=On(),e=On(),n=()=>{o.on(clearTimeout)},a=F("not-implemented");return xi({getTooltip:e.get,isShowing:e.isSet,setTooltip:e.set,clearTooltip:e.clear,clearTimer:n,resetTimer:(e,t)=>{n(),o.set(setTimeout(e,t))},readState:a,isEnabled:()=>t.get(),setEnabled:e=>t.set(e)})}}),Nv=wi({fields:Iv,name:"tooltipping",active:Fv,state:Rv,apis:Bv}),{entries:zv,setPrototypeOf:Vv,isFrozen:Lv,getPrototypeOf:Hv,getOwnPropertyDescriptor:Pv}=Object,{freeze:Uv,seal:Wv,create:jv}=Object,{apply:Gv,construct:$v}="undefined"!=typeof Reflect&&Reflect,qv=(Uv=Uv||function(e){return e},Wv=Wv||function(e){return e},Gv=Gv||function(e,t,o){return e.apply(t,o)},$v=$v||function(e,t){return new e(...t)},ab(Array.prototype.forEach)),Yv=ab(Array.prototype.pop),Xv=ab(Array.prototype.push),Kv=ab(String.prototype.toLowerCase),Jv=ab(String.prototype.toString),Qv=ab(String.prototype.match),Zv=ab(String.prototype.replace),eb=ab(String.prototype.indexOf),tb=ab(String.prototype.trim),ob=ab(Object.prototype.hasOwnProperty),nb=ab(RegExp.prototype.test);function ab(a){return function(e){for(var t=arguments.length,o=new Array(1<t?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return Gv(a,e,o)}}function rb(e,o,t){var n=2<arguments.length&&void 0!==t?t:Kv;Vv&&Vv(e,null);let a=o.length;for(;a--;){let t=o[a];if("string"==typeof t){let e=n(t);e!==t&&(Lv(o)||(o[a]=e),t=e)}e[t]=!0}return e}function ib(e){var t,o,n=jv(null);for([t,o]of zv(e))ob(e,t)&&(Array.isArray(o)?n[t]=(t=>{for(let e=0;e<t.length;e++)ob(t,e)||(t[e]=null);return t})(o):o&&"object"==typeof o&&o.constructor===Object?n[t]=ib(o):n[t]=o);return n}function sb(e,t){for(;null!==e;){var o=Pv(e,t);if(o){if(o.get)return ab(o.get);if("function"==typeof o.value)return ab(o.value)}e=Hv(e)}return function(){return null}}nf=TypeError;let lb=Uv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cb=Uv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),db=Uv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ub=Uv(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mb=Uv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),gb=Uv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pb=Uv(["#text"]),hb=Uv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),fb=Uv(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vb=Uv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bb=Uv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xb=Wv(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yb=Wv(/<%[\w\W]*|[\w\W]*%>/gm),wb=Wv(/\${[\w\W]*}/gm),Sb=Wv(/^data-[\-\w.\u00B7-\uFFFF]/),Cb=Wv(/^aria-[\-\w]+$/),kb=Wv(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ob=Wv(/^(?:\w+script|data):/i),_b=Wv(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tb=Wv(/^html$/i),Eb=Wv(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ab=Object.freeze({__proto__:null,MUSTACHE_EXPR:xb,ERB_EXPR:yb,TMPLIT_EXPR:wb,DATA_ATTR:Sb,ARIA_ATTR:Cb,IS_ALLOWED_URI:kb,IS_SCRIPT_OR_DATA:Ob,ATTR_WHITESPACE:_b,DOCTYPE_NAME:Tb,CUSTOM_ELEMENT:Eb}),Mb=function R(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;let d=e=>R(e);if(d.version="3.1.7",d.removed=[],!e||!e.document||9!==e.document.nodeType)return d.isSupported=!1,d;let a=e.document,l=a,N=l.currentScript,{DocumentFragment:z,HTMLTemplateElement:V,Node:c,Element:L,NodeFilter:t,NamedNodeMap:H=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:P,DOMParser:U,trustedTypes:u}=e,o=L.prototype,W=sb(o,"cloneNode"),j=sb(o,"remove"),G=sb(o,"nextSibling"),$=sb(o,"childNodes"),r=sb(o,"parentNode");if("function"==typeof V){let e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}function q(e){return e instanceof RegExp||e instanceof Function}function m(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!D||D!==e){if(e=ib(e=e&&"object"==typeof e?e:{}),A=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,M="application/xhtml+xml"===A?Jv:Kv,h=ob(e,"ALLOWED_TAGS")?rb({},e.ALLOWED_TAGS,M):he,f=ob(e,"ALLOWED_ATTR")?rb({},e.ALLOWED_ATTR,M):fe,Ie=ob(e,"ALLOWED_NAMESPACES")?rb({},e.ALLOWED_NAMESPACES,Jv):Re,De=ob(e,"ADD_URI_SAFE_ATTR")?rb(ib(Be),e.ADD_URI_SAFE_ATTR,M):Be,Ae=ob(e,"ADD_DATA_URI_TAGS")?rb(ib(Me),e.ADD_DATA_URI_TAGS,M):Me,k=ob(e,"FORBID_CONTENTS")?rb({},e.FORBID_CONTENTS,M):Ee,v=ob(e,"FORBID_TAGS")?rb({},e.FORBID_TAGS,M):{},ve=ob(e,"FORBID_ATTR")?rb({},e.FORBID_ATTR,M):{},s=!!ob(e,"USE_PROFILES")&&e.USE_PROFILES,be=!1!==e.ALLOW_ARIA_ATTR,xe=!1!==e.ALLOW_DATA_ATTR,ye=e.ALLOW_UNKNOWN_PROTOCOLS||!1,we=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,b=e.SAFE_FOR_TEMPLATES||!1,Se=!1!==e.SAFE_FOR_XML,x=e.WHOLE_DOCUMENT||!1,y=e.RETURN_DOM||!1,w=e.RETURN_DOM_FRAGMENT||!1,S=e.RETURN_TRUSTED_TYPE||!1,ke=e.FORCE_BODY||!1,Oe=!1!==e.SANITIZE_DOM,_e=e.SANITIZE_NAMED_PROPS||!1,Te=!1!==e.KEEP_CONTENT,C=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||kb,E=e.NAMESPACE||T,i=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&q(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(i.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&q(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(i.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(i.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),b&&(xe=!1),w&&(y=!0),s&&(h=rb({},pb),f=[],!0===s.html&&(rb(h,lb),rb(f,hb)),!0===s.svg&&(rb(h,cb),rb(f,fb),rb(f,bb)),!0===s.svgFilters&&(rb(h,db),rb(f,fb),rb(f,bb)),!0===s.mathMl)&&(rb(h,mb),rb(f,vb),rb(f,bb)),e.ADD_TAGS&&rb(h=h===he?ib(h):h,e.ADD_TAGS,M),e.ADD_ATTR&&rb(f=f===fe?ib(f):f,e.ADD_ATTR,M),e.ADD_URI_SAFE_ATTR&&rb(De,e.ADD_URI_SAFE_ATTR,M),e.FORBID_CONTENTS&&rb(k=k===Ee?ib(k):k,e.FORBID_CONTENTS,M),Te&&(h["#text"]=!0),x&&rb(h,["html","head","body"]),h.table&&(rb(h,["tbody"]),delete v.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw cf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw cf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');g=e.TRUSTED_TYPES_POLICY,p=g.createHTML("")}else null!==(g=void 0===g?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let o=null;var n="data-tt-policy-suffix",t="dompurify"+((o=t&&t.hasAttribute(n)?t.getAttribute(n):o)?"#"+o:"");try{return e.createPolicy(t,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(u,N):g)&&"string"==typeof p&&(p=g.createHTML(""));Uv&&Uv(e),D=e}}function Y(t){let e=null,o=null;if(ke)t="<remove></remove>"+t;else{let e=Qv(t,/^[\r\n\t ]+/);o=e&&e[0]}"application/xhtml+xml"===A&&E===T&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var n=g?g.createHTML(t):t;if(E===T)try{e=(new U).parseFromString(n,A)}catch(t){}if(!e||!e.documentElement){e=te.createDocument(E,"template",null);try{e.documentElement.innerHTML=Fe?p:n}catch(t){}}return n=e.body||e.documentElement,t&&o&&n.insertBefore(a.createTextNode(o),n.childNodes[0]||null),E===T?ae.call(e,x?"html":"body")[0]:x?e.documentElement:n}function X(e){return oe.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null)}function K(e){return"function"==typeof c&&e instanceof c}function J(n){let t=null;if(I("beforeSanitizeElements",n,null),!We(n)){var e=M(n.nodeName);if(I("uponSanitizeElement",n,{tagName:e,allowedTags:h}),(!n.hasChildNodes()||K(n.firstElementChild)||!nb(/<[/\w]/g,n.innerHTML)||!nb(/<[/\w]/g,n.textContent))&&!(7===n.nodeType||Se&&8===n.nodeType&&nb(/<[/\w]/g,n.data))){if(h[e]&&!v[e])return(!(n instanceof L)||(e=>{let t=r(e);t&&t.tagName||(t={namespaceURI:E,tagName:"template"});var o=Kv(e.tagName),n=Kv(t.tagName);return Ie[e.namespaceURI]&&(e.namespaceURI===_?t.namespaceURI===T?"svg"===o:t.namespaceURI===O?"svg"===o&&("annotation-xml"===n||Ve[n]):Boolean(Pe[o]):e.namespaceURI===O?t.namespaceURI===T?"math"===o:t.namespaceURI===_?"math"===o&&Le[n]:Boolean(Ue[o]):e.namespaceURI===T?(t.namespaceURI!==_||Le[n])&&(t.namespaceURI!==O||Ve[n])&&!Ue[o]&&(He[o]||!Pe[o]):"application/xhtml+xml"===A&&Ie[e.namespaceURI])})(n))&&("noscript"!==e&&"noembed"!==e&&"noframes"!==e||!nb(/<\/no(script|embed|frames)/i,n.innerHTML))?(b&&3===n.nodeType&&(t=n.textContent,qv([ie,se,le],e=>{t=Zv(t,e," ")}),n.textContent!==t)&&(Xv(d.removed,{element:n.cloneNode()}),n.textContent=t),I("afterSanitizeElements",n,null),!1):(B(n),!0);if(!v[e]&&Q(e)){if(i.tagNameCheck instanceof RegExp&&nb(i.tagNameCheck,e))return;if(i.tagNameCheck instanceof Function&&i.tagNameCheck(e))return}if(Te&&!k[e]){let t=r(n)||n.parentNode,o=$(n)||n.childNodes;if(o&&t)for(let e=o.length-1;0<=e;--e){var a=W(o[e],!0);a.__removalCount=(n.__removalCount||0)+1,t.insertBefore(a,G(n))}}}}return B(n),1}function Q(e){return"annotation-xml"!==e&&Qv(e,ge)}function Z(o){I("beforeSanitizeAttributes",o,null);var n=o.attributes;if(n){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:f};let e=n.length;for(;e--;){var{name:r,namespaceURI:i,value:s}=n[e],l=M(r);let t="value"===r?s:tb(s);s=t;if(a.attrName=l,a.attrValue=t,a.keepAttr=!0,a.forceKeepAttr=void 0,I("uponSanitizeAttribute",o,a),t=a.attrValue,!a.forceKeepAttr)if(a.keepAttr)if(!we&&nb(/\/>/i,t))F(r,o);else{b&&qv([ie,se,le],e=>{t=Zv(t,e," ")});var c=M(o.nodeName);if(je(c,l,t))if(!_e||"id"!==l&&"name"!==l||(F(r,o),t="user-content-"+t),Se&&nb(/((--!?|])>)|<\/(style|title)/i,t))F(r,o);else{if(g&&"object"==typeof u&&"function"==typeof u.getAttributeType&&!i)switch(u.getAttributeType(c,l)){case"TrustedHTML":t=g.createHTML(t);break;case"TrustedScriptURL":t=g.createScriptURL(t)}if(t!==s)try{i?o.setAttributeNS(i,r,t):o.setAttribute(r,t),We(o)?B(o):Yv(d.removed)}catch(o){}}else F(r,o)}else F(r,o)}I("afterSanitizeAttributes",o,null)}}function ee(e){var t,o=X(e);for(I("beforeSanitizeShadowDOM",e,null);t=o.nextNode();)I("uponSanitizeShadowNode",t,null),J(t)||(t.content instanceof z&&ee(t.content),Z(t));I("afterSanitizeShadowDOM",e,null)}let g,p="",{implementation:te,createNodeIterator:oe,createDocumentFragment:ne,getElementsByTagName:ae}=a,re=l.importNode,n={},{MUSTACHE_EXPR:ie,ERB_EXPR:se,TMPLIT_EXPR:le,DATA_ATTR:ce,ARIA_ATTR:de,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:ge}=(d.isSupported="function"==typeof zv&&"function"==typeof r&&te&&void 0!==te.createHTMLDocument,Ab),pe=Ab.IS_ALLOWED_URI,h=null,he=rb({},[...lb,...cb,...db,...mb,...pb]),f=null,fe=rb({},[...hb,...fb,...vb,...bb]),i=Object.seal(jv(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),v=null,ve=null,be=!0,xe=!0,ye=!1,we=!0,b=!1,Se=!0,x=!1,Ce=!1,ke=!1,y=!1,w=!1,S=!1,Oe=!0,_e=!1,Te=!0,C=!1,s={},k=null,Ee=rb({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ae=null,Me=rb({},["audio","video","img","source","image","track"]),De=null,Be=rb({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),O="http://www.w3.org/1998/Math/MathML",_="http://www.w3.org/2000/svg",T="http://www.w3.org/1999/xhtml",E=T,Fe,Ie=null,Re=rb({},[O,_,T],Jv),A=null,Ne=["application/xhtml+xml","text/html"],M=null,D=null,ze=a.createElement("form"),Ve=rb({},["mi","mo","mn","ms","mtext"]),Le=rb({},["annotation-xml"]),He=rb({},["title","style","font","a","script"]),Pe=rb({},[...cb,...db,...ub]),Ue=rb({},[...mb,...gb]),B=function(t){Xv(d.removed,{element:t});try{r(t).removeChild(t)}catch(e){j(t)}},F=function(e,t){try{Xv(d.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Xv(d.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!f[e])if(y||w)try{B(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},We=function(e){return e instanceof P&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof H)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},I=function(e,t,o){n[e]&&qv(n[e],e=>{e.call(d,t,o,D)})},je=function(e,t,o){if(Oe&&("id"===t||"name"===t)&&(o in a||o in ze))return!1;if((!xe||ve[t]||!nb(ce,t))&&(!be||!nb(de,t)))if(!f[t]||ve[t]){if(!(Q(e)&&(i.tagNameCheck instanceof RegExp&&nb(i.tagNameCheck,e)||i.tagNameCheck instanceof Function&&i.tagNameCheck(e))&&(i.attributeNameCheck instanceof RegExp&&nb(i.attributeNameCheck,t)||i.attributeNameCheck instanceof Function&&i.attributeNameCheck(t))||"is"===t&&i.allowCustomizedBuiltInElements&&(i.tagNameCheck instanceof RegExp&&nb(i.tagNameCheck,o)||i.tagNameCheck instanceof Function&&i.tagNameCheck(o))))return!1}else if(!De[t]&&!nb(pe,Zv(o,me,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==eb(o,"data:")||!Ae[e])&&(!ye||nb(ue,Zv(o,me,"")))&&o)return!1;return!0};return d.sanitize=function(t){let e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=null,n,a,r=null;if("string"!=typeof(t=(Fe=!t)?"\x3c!--\x3e":t)&&!K(t)){if("function"!=typeof t.toString)throw cf("toString is not a function");if("string"!=typeof(t=t.toString()))throw cf("dirty is not a string, aborting")}if(!d.isSupported)return t;if(Ce||m(e),d.removed=[],C="string"==typeof t?!1:C){if(t.nodeName){let e=M(t.nodeName);if(!h[e]||v[e])throw cf("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(n=(o=Y("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?o=n:o.appendChild(n);else{if(!y&&!b&&!x&&-1===t.indexOf("<"))return g&&S?g.createHTML(t):t;if(!(o=Y(t)))return y?null:S?p:""}o&&ke&&B(o.firstChild);for(var i=X(C?t:o);a=i.nextNode();)J(a)||(a.content instanceof z&&ee(a.content),Z(a));if(C)return t;if(y){if(w)for(r=ne.call(o.ownerDocument);o.firstChild;)r.appendChild(o.firstChild);else r=o;return r=f.shadowroot||f.shadowrootmode?re.call(l,r,!0):r}let s=x?o.outerHTML:o.innerHTML;return x&&h["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&nb(Tb,o.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+s),b&&qv([ie,se,le],e=>{s=Zv(s,e," ")}),g&&S?g.createHTML(s):s},d.setConfig=function(){m(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),Ce=!0},d.clearConfig=function(){D=null,Ce=!1},d.isValidAttribute=function(e,t,o){D||m({});e=M(e),t=M(t);return je(e,t,o)},d.addHook=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],Xv(n[e],t))},d.removeHook=function(e){if(n[e])return Yv(n[e])},d.removeHooks=function(e){n[e]&&(n[e]=[])},d.removeAllHooks=function(){n={}},d}();let Db=e=>Mb().sanitize(e);var Bb=tinymce.util.Tools.resolve("tinymce.util.I18n");let Fb={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Ib="temporary-placeholder",Rb=e=>()=>k(e,Ib).getOr("!not found!"),Nb=(e,t)=>{var o,n=e.toLowerCase();if(Bb.isRtl()){o=n;let e=nt(o,"-rtl")?o:o+"-rtl";return $e(t,e)?e:n}return n},zb=(e,t)=>k(t,Nb(e,t)),Vb=(e,t)=>{t=t();return zb(e,t).getOrThunk(Rb(t))},Lb=()=>B("add-focusable",[li(e=>{Dl(e.element,"svg").each(e=>w(e,"focusable","false"))})]),Hb=(e,t,o,n)=>{a=t;var a=!!Bb.isRtl()&&$e(Fb,a)?["tox-icon--flip"]:[],t=k(o,Nb(t,o)).or(n).getOrThunk(Rb(o));return{dom:{tag:e.tag,attributes:null!=(n=e.attributes)?n:{},classes:e.classes.concat(a),innerHtml:t},behaviours:H([...null!=(o=e.behaviours)?o:[],Lb()])}},Pb=(e,t,o,n=I.none())=>Hb(t,e,o(),n),Ub={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Wb=$m({name:"Notification",factory:n=>{let e=E("notification-text"),o=j({dom:Sv(`<p id=${e}>${Db(n.backstageProvider.translate(n.text))}</p>`),behaviours:H([D.config({})])}),a=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:e+"%"}}}),r=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}),i=j({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},r(0)],behaviours:H([D.config({})])}),t={updateProgress:(e,t)=>{e.getSystem().isConnected()&&i.getOpt(e).each(e=>{D.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(t)]},r(t)])})},updateText:(e,t)=>{e.getSystem().isConnected()&&(e=o.get(e),D.set(e,[bl(t)]))}},s=Se([n.icon.toArray(),[n.level],I.from(Ub[n.level]).toArray()]),l=j(wv.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[Pb("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:H([Ov.config({}),Nv.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:e=>{n.onAction(e)}})),c=(e=>{let t=(0,n.iconProvider)(),o=ye(e,e=>$e(t,Nb(e,t)));return Hb({tag:"div",classes:["tox-notification__icon"]},o.getOr(Ib),t,I.none())})(s),d=[c,{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:H([D.config({})])}];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":e},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},behaviours:H([Ov.config({}),W.config({}),U.config({mode:"special",onEscape:e=>(n.onAction(e),I.some(!0))})]),components:d.concat(n.progress?[i.asSpec()]:[]).concat([l.asSpec()]),apis:t}},configFields:[Ha("level","info",["success","error","warning","warn","info"]),r("progress"),d("icon"),r("onAction"),r("text"),r("iconProvider"),r("backstageProvider")],apis:{updateProgress:(e,t,o)=>{e.updateProgress(t,o)},updateText:(e,t,o)=>{e.updateText(t,o)}}});var jb=(l,e,c,d)=>{let u=e.backstage.shared,m=()=>N(""===l.queryCommandValue("ToggleView")?l.getContentAreaContainer():l.getContainer()),g=()=>{var e=xn(m());return I.some(e)},o=e=>{g().each(t=>{R(e,e=>{uo(e.element,"width"),Co(e.element)>t.width&&z(e.element,"width",t.width+"px")})})};return{open:(e,a,r)=>{let t=()=>{d.on(e=>{a();var t,o,n=r();o=e,D.remove(o,i),s(),o=e,e=n,0===Nt(o.element).length?(t=o,n=e,ef.hide(t),d.clear(),n&&l.focus()):(t=o,e&&U.focusIn(t))})},i=Sl(Wb.sketch({text:e.text,level:me(["success","error","warning","warn","info"],e.type)?e.type:void 0,progress:!0===e.progressBar,icon:e.icon,onAction:t,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(d.isSet()){let t=Cl(i);d.on(e=>{D.append(e,t),ef.reposition(e),i.hasConfigured(Is)&&Is.refresh(e),o(e.components())})}else{let e=Sl(ef.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:H([U.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),D.config({}),...uv(l)&&u.header.isPositionedAtTop()?[]:[Is.config({contextual:{lazyContext:()=>I.some(xn(m())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:e=>xv(l,e.element).map(e=>({bounds:yv(e),optScrollEnv:I.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:yo(e.element).top})})).getOrThunk(()=>({bounds:Sn(),optScrollEnv:I.none()}))})]])})),t=Cl(i),o={maxHeightFunction:Gc()},n={...u.anchors.banner(),overrides:o};d.set(e),c.add(e),ef.showWithinBounds(e,t,{anchor:n},g)}J(e.timeout)&&0<e.timeout&&af.setEditorTimeout(l,()=>{t()},e.timeout);let s=()=>{d.on(e=>{ef.reposition(e),e.hasConfigured(Is)&&Is.refresh(e),o(e.components())})};return{close:t,reposition:s,text:e=>{Wb.updateText(i,e)},settings:e,getEl:()=>i.element.dom,progressBar:{value:e=>{Wb.updateProgress(i,e)}}}},close:e=>{e.close()},getArgs:e=>e.settings}},Gb=((Hu=U_=U_||{})[Hu.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Hu[Hu.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX",U_);let $b="tox-menu-nav__js",qb="tox-collection__item",Yb="tox-swatch",Xb={normal:$b,color:Yb},Kb="tox-collection__item--enabled",Jb="tox-collection__item-icon",Qb="tox-collection__item-label",Zb="tox-collection__item-caret",ex="tox-collection__item--active",tx="tox-collection__item-container",ox="tox-collection__item-container--row",nx=e=>k(Xb,e).getOr($b),ax=e=>"color"===e?"tox-swatches":"tox-menu",rx=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:ax(e),tieredMenu:"tox-tiered-menu"}),ix=e=>{var t=rx(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:nx(e)}},sx=(e,t,o)=>{o=rx(o);return{tag:"div",classes:Se([[o.menu,`tox-menu-${t}-column`],e?[o.hasIcons]:[]])}},lx=[Gh.parts.items({})],cx=(e,t,o)=>{var n=rx(o);return{dom:{tag:"div",classes:Se([[n.tieredMenu]])},markers:ix(o)}},dx=F([La("type","text"),d("data"),u("inputAttributes",{}),u("inputStyles",{}),u("tag","input"),u("inputClasses",[]),e("onSetValue"),Ua("fromInputValue",x),Ua("toInputValue",x),u("styles",{}),u("eventOrder",{}),$u("inputBehaviours",[A,W]),u("selectOnFocus",!0)]),ux=o=>H([W.config({onFocus:o.selectOnFocus?e=>{var e=e.element,t=cl(e);"range"!==o.type&&e.dom.setSelectionRange(0,t.length)}:S})]),mx=e=>({tag:e.tag,attributes:{type:e.type,...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),gx=$m({name:"Input",configFields:dx(),factory:(e,t)=>{return{uid:e.uid,dom:mx(e),components:[],behaviours:(o=e,{...ux(o),...Yu(o.inputBehaviours,[A.config({store:{mode:"manual",...o.data.map(e=>({initialValue:e})).getOr({}),getValue:e=>o.fromInputValue(cl(e.element)),setValue:(e,t)=>{cl(e.element)!==t&&dl(e.element,o.toInputValue(t))}},onSetValue:o.onSetValue})])}),eventOrder:e.eventOrder};var o}}),px=E("refetch-trigger-event"),hx=E("redirect-menu-item-interaction"),fx="tox-menu__searcher",vx=t=>Bl(t.element,"."+fx).bind(e=>t.getSystem().getByDom(e).toOptional()),bx=vx,xx=e=>({fetchPattern:A.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),yx=t=>{var e=(e,t)=>(t.cut(),I.none()),o=(e,t)=>{t={interactionEvent:t.event,eventType:t.event.raw.type};return T(e,hx,t),I.some(!0)},n="searcher-events";return{dom:{tag:"div",classes:[qb]},components:[gx.sketch({inputClasses:[fx,"tox-textfield"],inputAttributes:{...t.placeholder.map(e=>({placeholder:t.i18n(e)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:H([B(n,[L(pr(),e=>{_(e,px)}),L(mr(),(e,t)=>{"Escape"===t.event.raw.key&&t.stop()})]),U.config({mode:"special",onLeft:e,onRight:e,onSpace:e,onEnter:o,onEscape:o,onUp:o,onDown:o})]),eventOrder:{keydown:[n,U.name()]}})]}},wx="tox-collection--results__js",Sx=e=>{var t;return e.dom?{...e,dom:{...e.dom,attributes:{...null!=(t=e.dom.attributes)?t:{},id:E("aria-item-search-result-id"),"aria-selected":"false"}}}:e},Cx=(t,o)=>e=>{e=he(e,o);return C(e,e=>({dom:t,components:e}))},kx=(e,o)=>{let n=[],a=[];return R(e,(e,t)=>{(!o(e,t)||(0<a.length&&n.push(a),a=[],$e(e.dom,"innerHtml"))||e.components&&0<e.components.length)&&a.push(e)}),0<a.length&&n.push(a),C(n,e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e}))},Ox=(t,o,n)=>Gh.parts.items({preprocess:e=>{e=C(e,n);return"auto"!==t&&1<t?Cx({tag:"div",classes:["tox-collection__group"]},t)(e):kx(e,(e,t)=>"separator"===o[t].type)}}),_x=(e,t,o=0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Ox(e,t,x)]}),Tx=e=>ge(e,e=>"icon"in e&&void 0!==e.icon),Ex=e=>(console.error(va(e)),console.log(e),I.none()),Ax=(e,t,o,n,a)=>{r=o;var r,i={dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Gh.parts.items({preprocess:e=>kx(e,(e,t)=>"separator"===r[t].type)})]};return{value:e,dom:i.dom,components:i.components,items:o}},Mx=(t,e,o,n,a)=>{if("color"===a.menuType){r=n;let e={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Gh.parts.items({preprocess:"auto"!==r?Cx({tag:"div",classes:["tox-swatches__row"]},r):x})]}]};return{value:t,dom:e.dom,components:e.components,items:o}}var r,i,s,l;if("normal"===a.menuType&&"auto"===n){let e=_x(n,o);return{value:t,dom:e.dom,components:e.components,items:o}}if("normal"===a.menuType||"searchable"===a.menuType){let e="searchable"!==a.menuType?_x(n,o):"search-with-field"===a.searchMode.searchMode?(r=n,i=o,s=a.searchMode,l=E("aria-controls-search-results"),{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===r?["tox-collection--list"]:["tox-collection--grid"])},components:[yx({i18n:Bb.translate,placeholder:s.placeholder}),{dom:{tag:"div",classes:[...1===r?["tox-collection--list"]:["tox-collection--grid"],wx],attributes:{id:l}},components:[Ox(r,i,Sx)]}]}):(s=n,l=o,i=E("aria-controls-search-results"),{dom:{tag:"div",classes:["tox-menu","tox-collection",wx].concat(1===s?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[Ox(s,l,Sx)]});return{value:t,dom:e.dom,components:e.components,items:o}}if("listpreview"!==a.menuType||"auto"===n)return{value:t,dom:sx(e,n,a.menuType),components:lx,items:o};{a=n;let e={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Gh.parts.items({preprocess:Cx({tag:"div",classes:["tox-collection__group"]},a)})]};return{value:t,dom:e.dom,components:e.components,items:o}}},Dx=ka("type"),Bx=ka("name"),Fx=ka("label"),Ix=ka("text"),Rx=ka("title"),Nx=ka("icon"),zx=ka("value"),Vx=_a("fetch"),Lx=_a("getSubmenuItems"),Hx=_a("onAction"),Px=_a("onItemAction"),Ux=Ua("onSetup",()=>S),Wx=Ba("name"),jx=Ba("text"),Gx=Ba("role"),$x=Ba("icon"),qx=Ba("tooltip"),Yx=Ba("label"),Xx=Ba("shortcut"),Kx=Ia("select"),Jx=Pa("active",!1),Qx=Pa("borderless",!1),Zx=Pa("enabled",!0),ey=Pa("primary",!1),ty=e=>u("columns",e),oy=u("meta",{}),ny=Ua("onAction",S),ay=e=>La("type",e),ry=e=>ya("name","name",Hn(()=>E(e+"-name")),ia),iy=i([Dx,jx]),sy=i([ay("autocompleteitem"),Jx,Zx,oy,zx,jx,$x]),ly=[Zx,qx,$x,jx,Ux,La("context","mode:design")],cy=i([Dx,Hx,Xx].concat(ly)),dy=e=>pa("toolbarbutton",cy,e),uy=[Jx].concat(ly),my=i(uy.concat([Dx,Hx,Xx])),gy=e=>pa("ToggleButton",my,e),py=[Ua("predicate",ie),Ha("scope","node",["node","editor"]),Ha("position","selection",["node","selection","line"])],hy=ly.concat([ay("contextformbutton"),La("align","end"),ey,Hx,wa("original",x)]),fy=uy.concat([ay("contextformbutton"),La("align","end"),ey,Hx,wa("original",x)]),vy=ly.concat([ay("contextformbutton")]),by=uy.concat([ay("contextformtogglebutton")]),xy=[Yx,Aa("commands",ba("type",{contextformbutton:hy,contextformtogglebutton:fy})),Ma("launch",ba("type",{contextformbutton:vy,contextformtogglebutton:by})),Ua("onInput",S),Ua("onSetup",S)],yy=[...py,...xy,Oa("type",["contextform"]),Ua("initValue",F("")),Ba("placeholder")],wy=[...py,...xy,Oa("type",["contextsliderform"]),Ua("initValue",F(0)),Ua("min",F(0)),Ua("max",F(100))],Sy=[...py,...xy,Oa("type",["contextsizeinputform"]),Ua("initValue",F({width:"",height:""}))],Cy=ba("type",{contextform:yy,contextsliderform:wy,contextsizeinputform:Sy}),ky=i([ay("contexttoolbar"),Ca("items",ea([ia,oa([Ba("name"),Ba("label"),Aa("items",ia)])]))].concat(py)),Oy=e=>({name:e.name.getOrUndefined(),label:e.label.getOrUndefined(),items:e.items}),_y=[Dx,ka("src"),Ba("alt"),Wa("classes",[],ia)],Ty=i(_y),Ey=[Dx,Ix,Wx,Wa("classes",["tox-collection__item-label"],ia)],Ay=i(Ey),My=Kn(()=>ua("type",{cardimage:Ty,cardtext:Ay,cardcontainer:Dy})),Dy=i([Dx,La("direction","horizontal"),La("align","left"),La("valign","middle"),Aa("items",My)]),By=[Zx,jx,Gx,Xx,ya("value","value",Hn(()=>E("menuitem-value")),na()),oy,La("context","mode:design")],Fy=i([Dx,Yx,Aa("items",My),Ux,ny].concat(By)),Iy=i([Dx,Jx,$x].concat(By)),Ry=[Dx,ka("fancytype"),ny],Ny=[u("initData",{})].concat(Ry),zy=[Ia("select"),ja("initData",{},[Pa("allowCustomColors",!0),La("storageKey","default"),Ra("colors",na())])].concat(Ry),Vy=ba("fancytype",{inserttable:Ny,colorswatch:zy}),Ly=i([Dx,Ux,ny,$x].concat(By)),Hy=i([Dx,Lx,Ux,$x].concat(By)),Py=i([Dx,$x,Jx,Ux,Hx].concat(By)),Uy=(e,o,t)=>{let n=Ed(e.element,"."+t);if(0<n.length){let e=we(n,e=>{var e=e.dom.getBoundingClientRect().top,t=n[0].dom.getBoundingClientRect().top;return Math.abs(e-t)>o}).getOr(n.length);return I.some({numColumns:e,numRows:Math.ceil(n.length/e)})}return I.none()},Wy=e=>{return t=E("unnamed-events"),e=e,H([B(t,e)]);var t},jy=e=>P.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),Gy=e=>P.config({disabled:e}),$y=e=>P.config({disabled:e,disableClass:"tox-tbtn--disabled"}),qy=e=>P.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Yy=(e,t)=>{let o=e.getApi(t);return e=>{e(o)}},Xy=(t,o)=>li(e=>{K(t.onBeforeSetup)&&t.onBeforeSetup(e),Yy(t,e)(e=>{e=t.onSetup(e);K(e)&&o.set(e)})}),Ky=(t,o)=>ci(e=>Yy(t,e)(o.get())),Jy="silver.uistate",Qy="setDisabled",Zy=["switchmode","init"],ew=(e,t)=>{let o=e.mainUi.outerContainer,n=[e.mainUi.mothership,...e.uiMotherships];t===Qy&&R(n,e=>{e.broadcastOn([Eu()],{target:o.element})}),R(n,e=>{e.broadcastOn([Jy],t)})},tw=(o,n)=>{o.on("init SwitchMode",e=>{ew(n,e.type)}),o.on("DisabledStateChange",e=>{var t;e.isDefaultPrevented()||(t=e.state?Qy:"init",ew(n,t),e.state)||o.nodeChanged()}),o.on("NodeChange",e=>{e=o.ui.isEnabled()?e.type:Qy;ew(n,e)}),gf(o)&&o.mode.set("readonly")},ow=a=>vc.config({channels:{[Jy]:{onReceive:(e,t)=>{var o,n;t===Qy||"setEnabled"===t?P.set(e,t===Qy):({contextType:o,shouldDisable:n}=a(),"mode"===o&&!me(Zy,t)||P.set(e,n))}}}}),nw=(o,n)=>ui((e,t)=>{Yy(o,e)(o.onAction),o.triggersSubmenu||n!==Gb.CLOSE_ON_EXECUTE||(e.getSystem().isConnected()&&_(e,Dr()),t.stop())}),aw={[Tr()]:["disabling","alloy.base.behaviour","toggling","item-events"]},rw=Xe,iw=(e,t,o,n)=>{var a=O(S);return{type:"item",dom:t.dom,components:rw(t.optComponents),data:e.data,eventOrder:aw,hasSubmenu:e.triggersSubmenu,itemBehaviours:H([B("item-events",[nw(e,o),Xy(e,a),Ky(e,a)]),jy(()=>!e.enabled||n.checkUiComponentContext(e.context).shouldDisable),ow(()=>n.checkUiComponentContext(e.context)),D.config({})].concat(e.itemBehaviours))}},sw=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),lw=e=>{let t=lf.os.isMacOS()||lf.os.isiOS(),o=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},n=e.split("+"),a=C(n,e=>{var t=e.toLowerCase().trim();return $e(o,t)?o[t]:e});return t?a.join(""):a.join("+")},cw=(e,t,o=[Jb])=>Pb(e,{tag:"div",classes:o},t),dw=e=>({dom:{tag:"div",classes:[Qb]},components:[bl(Bb.translate(e))]}),uw=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),mw=(e,t)=>({dom:{tag:"div",classes:[Qb]},components:[{dom:{tag:e.tag,styles:e.styles},components:[bl(Bb.translate(t))]}]}),gw=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[bl(lw(e))]}),pw=e=>cw("checkmark",e,["tox-collection__item-checkmark"]),hw=e=>{e=e.map(e=>({attributes:{id:E("menu-item"),"aria-label":Bb.translate(e)}})).getOr({});return{tag:"div",classes:[$b,qb],...e}},fw=(r,i,s,l=I.none())=>{if("color"===r.presets){var n=r,a=i,c=l;let e=n.value,t=n.iconContent.map(e=>{var t=a.icons,o=c;return t=t(),zb(e,t).or(o).getOrThunk(Rb(t))}),o=n.ariaLabel.map(e=>({"aria-label":a.translate(e),"data-mce-name":e})).getOr({});return{dom:(n=Yb,m=t.getOr(""),n={tag:"div",attributes:o,classes:[n]},"custom"===e?{...n,tag:"button",classes:[...n.classes,"tox-swatches__picker-btn"],innerHtml:m}:"remove"===e?{...n,classes:[...n.classes,"tox-swatch--remove"],innerHtml:m}:X(e)?{...n,attributes:{...n.attributes,"data-mce-color":e},styles:{"background-color":e},innerHtml:m}:n),optComponents:[]}}{var d=r,u=i,m=s,g=l;let t={tag:"div",classes:[Jb]},e=m?d.iconContent.map(e=>Pb(e,t,u.icons,g)).orThunk(()=>I.some({dom:t})):I.none(),o=d.checkMark,n=I.from(d.meta).fold(()=>dw,e=>$e(e,"style")?oe(mw,e.style):dw),a=d.htmlContent.fold(()=>d.textContent.map(n),e=>I.some(uw(e,[Qb])));return{dom:hw(d.ariaLabel),optComponents:[e,a,d.shortcutContent.map(gw),o,d.caret]}}},vw=(e,t,o)=>k(e,"tooltipWorker").map(o=>[Nv.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:Gc}}),mode:"follow-highlight",onShow:(t,e)=>{o(e=>{Nv.setComponents(t,[xl({element:N(e)})])})}})]).getOrThunk(()=>o.map(e=>[Nv.config({...t.providers.tooltips.getConfig({tooltipText:e}),mode:"follow-highlight"})]).getOr([])),bw=(e,t)=>{e=Bb.translate(e);var o=rf.DOM.encode(e);if(0<t.length){let e=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return o.replace(e,e=>`<span class="tox-autocompleter-highlight">${e}</span>`)}return o},xw=(e,r)=>C(e,e=>{switch(e.type){case"cardcontainer":return t=e,o=xw(e.items,r),n="vertical"===t.direction?"tox-collection__item-container--column":ox,a="left"===t.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[tx,n,a,(()=>{switch(t.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:o};case"cardimage":return n=e.src,{dom:{tag:"img",classes:e.classes,attributes:{src:n,alt:e.alt.getOr("")}}};case"cardtext":a=e.name.exists(e=>me(r.cardText.highlightOn,e))?I.from(r.cardText.matchText).getOr(""):"";return uw(bw(e.text,a),e.classes)}var t,o,n,a}),yw=_m(Vh(),Lh()),ww=e=>({value:Ow(e)}),Sw=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Cw=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,kw=e=>Sw.test(e)||Cw.test(e),Ow=e=>et(e,"#").toUpperCase(),_w=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Tw=e=>{e=_w(e.red)+_w(e.green)+_w(e.blue);return ww(e)},Ew=Math.min,Aw=Math.max,Mw=Math.round,Dw=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Bw=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Fw=(e,t,o,n)=>({red:e,green:t,blue:o,alpha:n}),Iw=e=>{var t=parseInt(e,10);return t.toString()===e&&0<=t&&t<=255},Rw=e=>{let t,o,n;var a=(e.hue||0)%360,r=e.saturation/100,e=e.value/100,r=Aw(0,Ew(r,1)),e=Aw(0,Ew(e,1));if(0===r)t=o=n=Mw(255*e);else{var a=a/60,i=e*r,s=i*(1-Math.abs(a%2-1)),r=e-i;switch(Math.floor(a)){case 0:t=i,o=s,n=0;break;case 1:t=s,o=i,n=0;break;case 2:t=0,o=i,n=s;break;case 3:t=0,o=s,n=i;break;case 4:t=s,o=0,n=i;break;case 5:t=i,o=0,n=s;break;default:t=o=n=0}t=Mw(255*(t+r)),o=Mw(255*(o+r)),n=Mw(255*(n+r))}return Fw(t,o,n,1)},Nw=e=>{var e=(e=>{e={value:e.value.replace(Sw,(e,t,o,n)=>t+t+o+o+n+n)},e=Cw.exec(e.value);return null===e?["FFFFFF","FF","FF","FF"]:e})(e),t=parseInt(e[1],16),o=parseInt(e[2],16),e=parseInt(e[3],16);return Fw(t,o,e,1)},zw=(e,t,o,n)=>{e=parseInt(e,10),t=parseInt(t,10),o=parseInt(o,10),n=parseFloat(n);return Fw(e,t,o,n)},Vw=e=>{var t=Dw.exec(e);return null!==t?I.some(zw(t[1],t[2],t[3],"1")):null!==(t=Bw.exec(e))?I.some(zw(t[1],t[2],t[3],t[4])):I.none()},Lw=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Hw=Fw(255,0,0,1),Pw=(e,t)=>{e.dispatch("ResizeContent",t)},Uw=(e,t)=>{e.dispatch("TextColorChange",t)},Ww=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),jw=e=>{e.dispatch("ContextToolbarClose")},Gw=(e,t)=>()=>{e(),t()},$w=t=>Yw(t,"NodeChange",e=>{e.setEnabled(t.selection.isEditable())}),qw=(r,i)=>e=>{let t=$w(r)(e),o=(n=r,a=i,(t=>{let o=kn(),e=()=>{t.setActive(n.formatter.match(a));var e=n.formatter.formatChanged(a,t.setActive);o.set(e)};return n.initialized?e():n.once("init",e),()=>{n.off("init",e),o.clear()}})(e));var n,a;return()=>{t(),o()}},Yw=(n,a,r)=>e=>{let t=()=>r(e),o=()=>{r(e),n.on(a,t)};return n.initialized?o():n.once("init",o),()=>{n.off("init",o),n.off(a,t)}},Xw=t=>e=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,e.format)})},Kw=(e,t)=>()=>e.execCommand(t);var Jw,Qw=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");let Zw={},e0=o=>k(Zw,o).getOrThunk(()=>{var t="tinymce-custom-colors-"+o,e=Qw.getItem(t);if(Y(e)){let e=Qw.getItem("tinymce-custom-colors");Qw.setItem(t,X(e)?e:"[]")}e=(t=>{let e=Qw.getItem(t),o=$(e)?JSON.parse(e):[],n=10-(a=o).length<0?a.slice(0,10):a;var a;let r=e=>{n.splice(e,1)};return{add:e=>{((e,t)=>{e=ue(e,t);return-1===e?I.none():I.some(e)})(n,e).each(r),n.unshift(e),10<n.length&&n.pop(),Qw.setItem(t,JSON.stringify(n))},state:()=>n.slice(0)}})(t);return Zw[o]=e}),t0=(e,t)=>{e0(e).add(t)},o0=(e,t,o)=>({hue:e,saturation:t,value:o}),n0=e=>{let t,o,n=0;var a=e.red/255,r=e.green/255,e=e.blue/255,i=Math.min(a,Math.min(r,e)),s=Math.max(a,Math.max(r,e));return i===s?(n=i,o0(0,0,100*n)):(t=60*((a===i?3:e===i?1:5)-(a===i?r-e:e===i?a-r:e-a)/(s-i)),o=(s-i)/s,n=s,o0(Math.round(t),Math.round(100*o),Math.round(100*n)))},a0=e=>Tw(Rw(e)),r0="forecolor",i0="hilitecolor",s0=t=>{var o=[];for(let e=0;e<t.length;e+=2)o.push({text:t[e+1],value:t[e],icon:"checkmark",type:"choiceitem"});return o},l0=t=>e=>e.options.get(t),c0="#000000",d0=(e,t)=>(t===r0&&e.options.isSet("color_map_foreground")?l0("color_map_foreground"):t===i0&&e.options.isSet("color_map_background")?l0("color_map_background"):e.options.isSet("color_map_raw")?l0("color_map_raw"):l0("color_map"))(e),u0=(e,t="default")=>Math.max(5,Math.ceil(Math.sqrt(d0(e,t).length))),m0=(e,t)=>{var o=l0("color_cols")(e),t=u0(e,t);return o===u0(e)?t:o},g0=(e,t="default")=>Math.round((t===r0?l0("color_cols_foreground"):t===i0?l0("color_cols_background"):l0("color_cols"))(e)),p0=l0("custom_colors"),h0=l0("color_default_foreground"),f0=l0("color_default_background"),v0=(e,t)=>{e=N(e.selection.getStart()),t="hilitecolor"===t?Ka(e,e=>xt(e)?(e=ro(e,"background-color"),Qe(Vw(e).exists(e=>0!==e.alpha),e)):I.none()).getOr("rgba(0, 0, 0, 0)"):ro(e,"color");return Vw(t).map(e=>"#"+Tw(e).value)},b0=e=>{var t="choiceitem",o={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[o,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[o]},x0=(t,o,e,n)=>{"custom"===e?E0(t)(e=>{e.each(e=>{t0(o,e),t.execCommand("mceApplyTextcolor",o,e),n(e)})},v0(t,o).getOr(c0)):"remove"===e?(n(""),t.execCommand("mceRemoveTextcolor",o)):(n(e),t.execCommand("mceApplyTextcolor",o,e))},y0=(e,t,o)=>e.concat((e=t,C(e0(e).state(),e=>({type:"choiceitem",text:e,icon:"checkmark",value:e})).concat(b0(o)))),w0=(t,o,n)=>e=>{e(y0(t,o,n))},S0=(e,t,o)=>{e.setIconFill("forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",o)},C0=(e,t)=>{e.setTooltip(t)},k0=(o,n)=>e=>{var t=v0(o,n);return Ye(t,e.toUpperCase())},O0=(e,t,o)=>{var n;return it(o)?"forecolor"===t?"Text color":"Background color":(n="forecolor"===t?"Text color {0}":"Background color {0}",t=y0(d0(e,t),t,!1),t=ye(t,e=>e.value===o).getOr({text:""}).text,e.translate([n,e.translate(t)]))},_0=(o,n,a,r)=>{o.ui.registry.addSplitButton(n,{tooltip:O0(o,a,r.get()),presets:"color",icon:"forecolor"===n?"text-color":"highlight-bg-color",select:k0(o,a),columns:g0(o,a),fetch:w0(d0(o,a),a,p0(o)),onAction:e=>{x0(o,a,r.get(),S)},onItemAction:(e,t)=>{x0(o,a,t,e=>{r.set(e),Uw(o,{name:n,color:e})})},onSetup:t=>{S0(t,n,r.get());let e=e=>{e.name===n&&(S0(t,e.name,e.color),C0(t,O0(o,a,e.color)))};return o.on("TextColorChange",e),Gw($w(o)(t),()=>{o.off("TextColorChange",e)})}})},T0=(t,o,n,e,a)=>{t.ui.registry.addNestedMenuItem(o,{text:e,icon:"forecolor"===o?"text-color":"highlight-bg-color",onSetup:e=>(C0(e,O0(t,n,a.get())),S0(e,o,a.get()),$w(t)(e)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:k0(t,n),initData:{storageKey:n},onAction:e=>{x0(t,n,e.value,e=>{a.set(e),Uw(t,{name:o,color:e})})}}]})},E0=a=>(o,e)=>{let n=!1;a.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:e},onAction:(e,t)=>{"hex-valid"===t.name&&(n=t.value)},onSubmit:e=>{var t=e.getData().colorpicker;n?(o(I.from(t)),e.close()):a.windowManager.alert(a.translate(["Invalid hex color code: {0}",t]))},onClose:S,onCancel:()=>{o(I.none())}})},A0=(e,t,o,n,a,r,i,s)=>{var l,c,d,u,m,g,p,h=Tx(t),t=(l=t,c=o,d=n,u="color"!==a?"normal":"color",m=r,g=i,p=s,Xe(C(l,e=>"choiceitem"===e.type?(e=e,pa("choicemenuitem",Iy,e).fold(Ex,e=>I.some(((t,e,o,n,a,r,i,s=!0)=>{o=fw({presets:o,textContent:e?t.text:I.none(),htmlContent:I.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:I.none(),checkMark:e?I.some(pw(i.icons)):I.none(),caret:I.none(),value:t.value},i,s),s=t.text.filter(F(!e)).map(e=>Nv.config(i.tooltips.getConfig({tooltipText:i.translate(e)})));return Vn(iw({context:t.context,data:sw(t),enabled:t.enabled,getApi:t=>({setActive:e=>{f.set(t,e)},isActive:()=>f.isOn(t),isEnabled:()=>!P.isDisabled(t),setEnabled:e=>P.set(t,!e)}),onAction:e=>n(t.value),onSetup:e=>(e.setActive(a),S),triggersSubmenu:!1,itemBehaviours:[...s.toArray()]},o,r,i),{toggling:{toggleClass:Kb,toggleOnExecute:!1,selected:t.active,exclusive:!0}})})(e,1===d,u,c,g(e.value),m,p,Tx(l))))):I.none())));return Mx(e,h,t,n,{menuType:a})},M0=(e,t)=>{var o=ix(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group"),previousSelector:e=>"color"===t?Bl(e.element,"[aria-checked=true]"):I.none()}},D0=E("cell-over"),B0=E("cell-execute"),F0=(e,t)=>bl(t+"x"+e),I0={inserttable:(a,e)=>{n=e;let t=(e,t)=>n.shared.providers.translate(["{0} columns, {1} rows",t,e]),s=(o=>{var e=[];for(let t=0;t<10;t++){var n=[];for(let e=0;e<10;e++){var a=o(t+1,e+1);n.push(((t,o,e)=>{let n=e=>T(e,B0,{row:t,col:o}),a=(e,t)=>{t.stop(),n(e)};return Sl({dom:{tag:"div",attributes:{role:"button","aria-label":e}},behaviours:H([B("insert-table-picker-cell",[L(cr(),W.focus),L(Tr(),n),L(fr(),a),L(Ar(),a)]),f.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),W.config({onFocus:e=>T(e,D0,{row:t,col:o})})])})})(t,e,a))}e.push(n)}return e})(t),o=F0(0,0),l=j({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[o],behaviours:H([D.config({})])});var n;return{type:"widget",data:{value:E("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yw.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:(e=s,Ce(e,e=>C(e,Cl)).concat(l.asSpec())),behaviours:H([B("insert-table-picker",[li(e=>{D.set(l.get(e),[o])}),ri(D0,(e,t,o)=>{var{row:o,col:n}=o.event,a=s,r=o,i=n;for(let t=0;t<10;t++)for(let e=0;e<10;e++)f.set(a[t][e],t<=r&&e<=i);D.set(l.get(e),[F0(o+1,n+1)])}),ri(B0,(e,t,o)=>{var{row:o,col:n}=o.event;_(e,Dr()),a.onAction({numRows:o+1,numColumns:n+1})})]),U.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(t,e)=>{var o=((e,t)=>{let o=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>y0(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,o),e=>e.concat(b0(o)))})(t,e),n=e.colorinput.getColorCols(t.initData.storageKey),o={...A0(E("menu-value"),o,e=>{t.onAction({value:e})},n,"color",Gb.CLOSE_ON_EXECUTE,t.select.getOr(ie),e.shared.providers),markers:ix("color"),movement:M0(n,"color"),showMenuRole:!1};return{type:"widget",data:{value:E("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yw.widget(Gh.sketch(o))]}}},R0=e=>({type:"separator",dom:{tag:"div",classes:[qb,"tox-collection__group-heading"]},components:e.text.map(bl).toArray()}),N0=Object.freeze({__proto__:null,getCoupled:(e,t,o,n)=>o.getOrCreate(e,t,n),getExistingCoupled:(e,t,o,n)=>o.getExisting(e,t,n)}),z0=[Ca("others",ga(V.value,na()))],V0=Object.freeze({__proto__:null,init:()=>{let a={},r=(e,t)=>{if(0===Re(e.others).length)throw new Error("Cannot find any known coupled components");return k(a,t)},e=F({});return xi({readState:e,getExisting:(e,t,o)=>r(t,o).orThunk(()=>(k(t.others,o).getOrDie("No information found for coupled component: "+o),I.none())),getOrCreate:(t,o,n)=>r(o,n).getOrThunk(()=>{var e=k(o.others,n).getOrDie("No information found for coupled component: "+n)(t),e=t.getSystem().build(e);return a[n]=e})})}}),L0=wi({fields:z0,name:"coupling",apis:N0,state:V0}),H0=e=>{let o=I.none(),t=[],n=e=>{a()?r(e):t.push(e)},a=()=>o.isSome(),r=t=>{o.each(e=>{setTimeout(()=>{t(e)},0)})};return e(e=>{a()||(o=I.some(e),R(t,r),t=[])}),{get:n,map:o=>H0(t=>{n(e=>{t(o(e))})}),isReady:a}},P0={nu:H0,pure:t=>H0(e=>{e(t)})},U0=e=>{setTimeout(()=>{throw e},0)},W0=o=>{let e=e=>{o().then(e,U0)};return{map:e=>W0(()=>o().then(e)),bind:t=>W0(()=>o().then(e=>t(e).toPromise())),anonBind:e=>W0(()=>o().then(()=>e.toPromise())),toLazy:()=>P0.nu(e),toCached:()=>{let e=null;return W0(()=>e=null===e?o():e)},toPromise:o,get:e}},j0=e=>W0(()=>new Promise(e)),G0=e=>W0(()=>Promise.resolve(e)),$0=F("sink"),q0=F(wm({name:$0(),overrides:F({dom:{tag:"div"},behaviours:H([ou.config({useFixed:se})]),events:Zr([ii(mr()),ii(rr()),ii(fr())])})})),Y0=(e,t)=>{let o=e.getHotspot(t).getOr(t),n=e.getAnchorOverrides();return e.layouts.fold(()=>({type:"hotspot",hotspot:o,overrides:n}),e=>({type:"hotspot",hotspot:o,overrides:n,layouts:e}))},X0=(e,t,o,n,a,r,i)=>((o,e,a,n,r,i,s)=>{e=e;let t=(0,o.fetch)(n).map(e),l=Q0(n,o);return t.map(e=>e.bind(e=>{var t=e.menus[e.primary];return I.from(t).each(t=>{o.listRole.each(e=>{t.role=e})}),I.from(Zh.sketch({...i.menu(),uid:$s(""),data:e,highlightOnOpen:s,onOpenMenu:(e,t)=>{var o=l().getOrDie();ou.position(o,t,{anchor:a}),h.decloak(r)},onOpenSubmenu:(e,t,o)=>{var n=l().getOrDie();ou.position(n,o,{anchor:{type:"submenu",item:t}}),h.decloak(r)},onRepositionMenu:(e,t,o)=>{let n=l().getOrDie();ou.position(n,t,{anchor:a}),R(o,e=>{ou.position(n,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})})},onEscape:()=>(W.focus(n),h.close(r),I.some(!0))}))}))})(e,t,Y0(e,o),o,n,a,i).map(e=>(e.fold(()=>{h.isOpen(n)&&h.close(n)},e=>{h.cloak(n),h.open(n,e),r(n)}),n)),K0=(e,t,o,n,a,r,i)=>(h.close(n),G0(n)),J0=(e,t,o,n,a,r)=>{var i=L0.getCoupled(o,"sandbox");return(h.isOpen(i)?K0:X0)(e,t,o,i,n,a,r)},Q0=(t,e)=>t.getSystem().getByUid(e.uid+"-"+$0()).map(e=>()=>V.value(e)).getOrThunk(()=>e.lazySink.fold(()=>()=>V.error(new Error("No internal sink is specified, nor could an external sink be found")),e=>()=>e(t))),Z0=e=>{h.getState(e).each(e=>{Zh.repositionMenus(e)})},eS=(i,s,l)=>{let c=Rl(),o=Q0(s,i);return{dom:{tag:"div",classes:i.sandboxClasses,attributes:{id:c.id}},behaviours:Ku(i.sandboxBehaviours,[A.config({store:{mode:"memory",initialValue:s}}),h.config({onOpen:(e,t)=>{var o,n,a,r=Y0(i,s);c.link(s.element),i.matchWidth&&(o=r.hotspot,n=t,a=i.useMinWidth,n=M.getCurrent(n).getOr(n),o=Co(o.element),a?z(n.element,"min-width",o+"px"):(a=n.element,n=o,So.set(a,n))),i.onOpen(r,e,t),void 0!==l&&void 0!==l.onOpen&&l.onOpen(e,t)},onClose:(e,t)=>{c.unlink(s.element),o().getOr(t).element.dom.dispatchEvent(new window.FocusEvent("focusout")),void 0!==l&&void 0!==l.onClose&&l.onClose(e,t)},isPartOf:(e,t,o)=>Nl(t,o)||Nl(s,o),getAttachPoint:()=>o().getOrDie()}),M.config({find:e=>h.getState(e).bind(e=>M.getCurrent(e))}),vc.config({channels:{...Bu({isExtraPart:ie}),...Iu({doReposition:Z0})}})])}},tS=e=>{e=L0.getCoupled(e,"sandbox");Z0(e)},oS=()=>[u("sandboxClasses",[]),Xu("sandboxBehaviours",[M,vc,h,A])],nS=F([r("dom"),r("fetch"),e("onOpen"),Ts("onExecute"),u("getHotspot",I.some),u("getAnchorOverrides",F({})),od(),$u("dropdownBehaviours",[f,L0,U,W]),r("toggleClass"),u("eventOrder",{}),d("lazySink"),u("matchWidth",!1),u("useMinWidth",!1),d("role"),d("listRole")].concat(oS())),aS=F([ym({schema:[ks(),u("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),q0()]),rS=qm({name:"Dropdown",configFields:nS(),partFields:aS(),factory:(n,e,t,a)=>{let o=e=>{h.getState(e).each(e=>{Zh.highlightPrimary(e)})},r=(e,t,o)=>J0(n,x,e,a,t,o),i={expand:e=>{f.isOn(e)||r(e,S,Qp.HighlightNone).get(S)},open:e=>{f.isOn(e)||r(e,S,Qp.HighlightMenuAndItem).get(S)},refetch:t=>L0.getExistingCoupled(t,"sandbox").fold(()=>r(t,S,Qp.HighlightMenuAndItem).map(S),e=>X0(n,x,t,e,a,S,Qp.HighlightMenuAndItem).map(S)),isOpen:f.isOn,close:e=>{f.isOn(e)&&r(e,S,Qp.HighlightMenuAndItem).get(S)},repositionMenus:e=>{f.isOn(e)&&tS(e)}},s=(e,t)=>(Xr(e),I.some(!0));return{uid:n.uid,dom:n.dom,components:e,behaviours:Yu(n.dropdownBehaviours,[f.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),L0.config({others:{sandbox:e=>eS(n,e,{onOpen:()=>f.on(e),onClose:()=>f.off(e)})}}),U.config({mode:"special",onSpace:s,onEnter:s,onDown:(t,e)=>{if(rS.isOpen(t)){let e=L0.getCoupled(t,"sandbox");o(e)}else rS.open(t);return I.some(!0)},onEscape:(e,t)=>rS.isOpen(e)?(rS.close(e),I.some(!0)):I.none()}),W.config({})]),events:Th(I.some(e=>{r(e,o,Qp.HighlightMenuAndItem).get(S)})),eventOrder:{...n.eventOrder,[Tr()]:["disabling","toggling","alloy.base.behaviour"]},apis:i,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),e=>({role:e})),..."button"===n.dom.tag?{type:k(n.dom,"attributes").bind(e=>k(e,"type")).getOr("button")}:{}}}}},apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),iS=(e,n,a)=>{bx(e).each(t=>{var o,e;o=t,e=a,Qt(e.element,"id").each(e=>w(o.element,"aria-activedescendant",e)),(Fi((e=n).element,wx)?I.some(e.element):Bl(e.element,"."+wx)).each(e=>{Qt(e,"id").each(e=>w(t.element,"aria-controls",e))})}),w(a.element,"aria-selected","true")},sS=e=>L0.getExistingCoupled(e,"sandbox").bind(vx).map(xx).map(e=>e.fetchPattern).getOr(""),lS=((ds=Jw=Jw||{})[ds.ContentFocus=0]="ContentFocus",ds[ds.UiFocus=1]="UiFocus",(e,t,n,o,a)=>{let r=n.shared.providers,i=e=>a?{...e,shortcut:I.none(),icon:e.text.isSome()?I.none():e.icon}:e;switch(e.type){case"menuitem":return c=e,pa("menuitem",Ly,c).fold(Ex,e=>I.some(((e,t,o,n=!0)=>{n=fw({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:I.none(),ariaLabel:e.text,caret:I.none(),checkMark:I.none(),shortcutContent:e.shortcut},o,n);return iw({context:e.context,data:sw(e),getApi:t=>({isEnabled:()=>!P.isDisabled(t),setEnabled:e=>P.set(t,!e)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},n,t,o)})(i(e),t,r,o)));case"nestedmenuitem":return c=e,pa("nestedmenuitem",Hy,c).fold(Ex,e=>I.some(((e,t,n,o=!0,a=!1)=>{a=a?(a=n.icons,cw("chevron-down",a,[Zb])):(a=n.icons,cw("chevron-right",a,[Zb])),a=fw({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:I.none(),ariaLabel:e.text,caret:I.some(a),checkMark:I.none(),shortcutContent:e.shortcut},n,o);return iw({context:e.context,data:sw(e),getApi:o=>({isEnabled:()=>!P.isDisabled(o),setEnabled:e=>P.set(o,!e),setIconFill:(e,t)=>{Bl(o.element,`svg path[class="${e}"], rect[class="${e}"]`).each(e=>{w(e,"fill",t)})},setTooltip:e=>{e=n.translate(e);w(o.element,"aria-label",e)}}),enabled:e.enabled,onAction:S,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,t,n)})(i(e),t,r,o,a)));case"togglemenuitem":return l=e,pa("togglemenuitem",Py,l).fold(Ex,e=>I.some(((e,t,o,n=!0)=>{n=fw({iconContent:e.icon,textContent:e.text,htmlContent:I.none(),ariaLabel:e.text,checkMark:I.some(pw(o.icons)),caret:I.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},o,n);return Vn(iw({context:e.context,data:sw(e),enabled:e.enabled,getApi:t=>({setActive:e=>{f.set(t,e)},isActive:()=>f.isOn(t),isEnabled:()=>!P.isDisabled(t),setEnabled:e=>P.set(t,!e)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},n,t,o),{toggling:{toggleClass:Kb,toggleOnExecute:!1,selected:e.active},role:e.role.getOrUndefined()})})(i(e),t,r,o)));case"separator":return l=e,pa("separatormenuitem",iy,l).fold(Ex,e=>I.some(R0(e)));case"fancymenuitem":return s=e,pa("fancymenuitem",Vy,s).fold(Ex,e=>{return t=e,o=n,k(I0,t.fancytype).map(e=>e(t,o));var t,o});default:return console.error("Unknown item in general menu",e),I.none()}var s,l,c}),cS=(e,l,c,t,d,u,i)=>{let m=1===t,g=!m||Tx(e);return Xe(C(e,e=>{switch(e.type){case"separator":return o=e,pa("Autocompleter.Separator",iy,o).fold(Ex,e=>I.some(R0(e)));case"cardmenuitem":return o=e,pa("cardmenuitem",Fy,o).fold(Ex,t=>{return I.some((e={...t,onAction:e=>{t.onAction(e),c(t.value,t.meta)}},o=d,n=u,a={itemBehaviours:vw(t.meta,u,I.none()),cardText:{matchText:l,highlightOn:i}},r={dom:hw(e.label),optComponents:[I.some({dom:{tag:"div",classes:[tx,ox]},components:xw(e.items,a)})]},iw({context:"mode:design",data:sw({text:I.none(),...e}),enabled:e.enabled,getApi:o=>({isEnabled:()=>!P.isDisabled(o),setEnabled:t=>{P.set(o,!t),R(Ed(o.element,"*"),e=>{o.getSystem().getByDom(e).each(e=>{e.hasConfigured(P)&&P.set(e,!t)})})}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:I.from(a.itemBehaviours).getOr([])},r,o,n.providers)));var e,o,n,a,r});default:return t=e,pa("Autocompleter.Item",sy,t).fold(Ex,e=>{return I.some(([t,o,n,a,e,r,i=!0]=[e,l,m,c,d,u,g],i=fw({presets:"normal",textContent:I.none(),htmlContent:n?t.text.map(e=>bw(e,o)):I.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:I.none(),checkMark:I.none(),caret:I.none(),value:t.value},r.providers,i,t.icon),s=t.text.filter(e=>!n&&""!==e),iw({context:"mode:design",data:sw(t),enabled:t.enabled,getApi:F({}),onAction:e=>a(t.value,t.meta),onSetup:F(S),triggersSubmenu:!1,itemBehaviours:vw(t,r,s)},i,e,r.providers)));var t,o,n,a,r,i,s})}var t,o}))},dS=(e,t,o,n,a,r)=>{let i=Tx(t),s=Xe(C(t,e=>{var t=e=>lS(e,o,n,(e=e,a?!$e(e,"text"):i),a);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t({...e,enabled:!1}):t(e)})),l="no-search"===r.searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:r};return(a?Ax:Mx)(e,i,s,1,l)},uS=e=>Zh.singleData(e.value,e),mS=e=>vd(N(e.startContainer),e.startOffset,N(e.endContainer),e.endOffset),gS=(r,o)=>{let n=E("autocompleter"),i=O(!1),t=O(!1),s=On(),a=Sl(ef.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:n}},components:[],fireDismissalEventInstead:{},inlineBehaviours:H([B("dismissAutocompleter",[L(Hr(),()=>u()),L(qr(),(e,t)=>{Qt(t.event.target,"id").each(e=>w(N(r.getBody()),"aria-activedescendant",e))})])]),lazySink:o.getSink})),e=()=>ef.isOpen(a),l=t.get,c=()=>{if(e()){ef.hide(a),r.dom.remove(n,!1);let e=N(r.getBody());Qt(e,"aria-owns").filter(e=>e===n).each(()=>{eo(e,"aria-owns"),eo(e,"aria-activedescendant")})}},d=()=>ef.getContent(a).bind(e=>Me(e.components(),0)),u=()=>r.execCommand("mceAutocompleterClose"),m=e=>{var t=(e=>{let t=Ie(e,e=>I.from(e.columns)).getOr(1);return Ce(e,a=>{var e=a.items;return cS(e,a.matchText,(t,o)=>{let n={hide:()=>u(),reload:e=>{c(),r.execCommand("mceAutocompleterReload",!1,{fetchOptions:e})}};r.execCommand("mceAutocompleterRefreshActiveRange"),s.get().each(e=>{i.set(!0),a.onAction(n,e,t,o),i.set(!1)})},t,Gb.BUBBLE_TO_SANDBOX,o,a.highlightOn)})})(e);0<t.length?(e=Ie(e,e=>I.from(e.columns)).getOr(1),ef.showMenuAt(a,{anchor:{type:"selection",getSelection:()=>s.get().map(mS),root:N(r.getBody())}},((e,t,o,n)=>{let a=M0(t,n),r=ix(n);return{data:uS({...e,movement:a,menuBehaviours:Wy("auto"!==t?[]:[li((o,e)=>{Uy(o,4,r.item).each(({numColumns:e,numRows:t})=>{U.setGridSize(o,t,e)})})])}),menu:{markers:ix(n),fakeFocus:o===Jw.ContentFocus}}})(Mx("autocompleter-value",!0,t,e,{menuType:"normal"}),e,Jw.ContentFocus,"normal")),d().each(y.highlightFirst),w(N(r.getBody()),"aria-owns",n),r.inline||(()=>{r.dom.get(n)&&r.dom.remove(n,!1);const e=r.getDoc().documentElement,t=r.selection.getNode(),o=(e=>ps(e,!0))(a.element);no(o,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${t.offsetTop}px`,left:`${t.offsetLeft}px`}),r.dom.add(e,o.dom),Bl(o,'[role="menu"]').each(e=>{uo(e,"position"),uo(e,"max-height")})})()):c()};r.on("AutocompleterStart",({lookupData:e})=>{t.set(!0),i.set(!1),m(e)}),r.on("AutocompleterUpdate",({lookupData:e})=>m(e)),r.on("AutocompleterUpdateActiveRange",({range:e})=>s.set(e)),r.on("AutocompleterEnd",()=>{c(),t.set(!1),i.set(!1),s.clear()});{var g={cancelIfNecessary:u,isMenuOpen:e,isActive:l,isProcessingAction:i.get,getMenu:d},p=r;let o=(e,t)=>{T(e,mr(),{raw:t})},n=()=>g.getMenu().bind(y.getHighlighted);p.on("keydown",t=>{var e=t.which;g.isActive()&&(g.isMenuOpen()?13===e?(n().each(Xr),t.preventDefault()):40===e?(n().fold(()=>{g.getMenu().each(y.highlightFirst)},e=>{o(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):37!==e&&38!==e&&39!==e||n().each(e=>{o(e,t),t.preventDefault(),t.stopImmediatePropagation()}):13!==e&&38!==e&&40!==e||g.cancelIfNecessary())}),p.on("NodeChange",()=>{!g.isActive()||g.isProcessingAction()||p.queryCommandState("mceAutoCompleterInRange")||g.cancelIfNecessary()})}},pS=(e,t,o)=>Fl(e,t,o).isSome(),hS=(t,o)=>{let n=null;return{cancel:()=>{null!==n&&(clearTimeout(n),n=null)},schedule:(...e)=>{n=setTimeout(()=>{t.apply(null,e),n=null},o)}}},fS=e=>{e=e.raw;return void 0===e.touches||1!==e.touches.length?I.none():I.some(e.touches[0])},vS=(t,e)=>{let o={stopBackspace:!0,...e},n=(o=>{let a=On(),n=O(!1),r=hS(e=>{o.triggerEvent(Mr(),e),n.set(!0)},400),i=qa([{key:tr(),value:t=>(fS(t).each(e=>{r.cancel();e={x:e.clientX,y:e.clientY,target:t.target};r.schedule(t),n.set(!1),a.set(e)}),I.none())},{key:or(),value:e=>(r.cancel(),fS(e).each(n=>{a.on(e=>{var t,o;t=n,e=e,o=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<o||5<t)&&a.clear()})}),I.none())},{key:nr(),value:t=>(r.cancel(),a.get().filter(e=>Tt(e.target,t.target)).map(e=>n.get()?(t.prevent(),!1):o.triggerEvent(Ar(),t)))}]);return{fireIfReady:(t,e)=>k(i,e).bind(e=>e(t))}})(o),a=C(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),e=>zc(t,e,t=>{n.fireIfReady(t,e).each(e=>{e&&t.kill()}),o.triggerEvent(e,t)&&t.kill()})),r=On(),i=zc(t,"paste",t=>{n.fireIfReady(t,"paste").each(e=>{e&&t.kill()}),o.triggerEvent("paste",t)&&t.kill(),r.set(setTimeout(()=>{o.triggerEvent(Or(),t)},0))}),s=zc(t,"keydown",e=>{var t;o.triggerEvent("keydown",e)?e.kill():!o.stopBackspace||(t=e).raw.which!==xg[0]||me(["input","textarea"],ft(t.target))||pS(t.target,'[contenteditable="true"]')||e.prevent()}),l=zc(t,"focusin",e=>{o.triggerEvent("focusin",e)&&e.kill()}),c=On(),d=zc(t,"focusout",e=>{o.triggerEvent("focusout",e)&&e.kill(),c.set(setTimeout(()=>{o.triggerEvent(kr(),e)},0))});return{unbind:()=>{R(a,e=>{e.unbind()}),s.unbind(),l.unbind(),d.unbind(),i.unbind(),r.on(clearTimeout),c.on(clearTimeout)}}},bS=(e,t)=>{e=k(e,"target").getOr(t);return O(e)},xS=Ga([{stopped:[]},{resume:["element"]},{complete:[]}]),yS=(e,n,t,o,a,r)=>{let i=e(n,o),s=((e,t)=>{let o=O(!1),n=O(!1);return{stop:()=>{o.set(!0)},cut:()=>{n.set(!0)},isStopped:o.get,isCut:n.get,event:e,setSource:t.set,getSource:t.get}})(t,a);return i.fold(()=>(r.logEventNoHandlers(n,o),xS.complete()),t=>{let o=t.descHandler;return tl(o)(s),s.isStopped()?(r.logEventStopped(n,t.element,o.purpose),xS.stopped()):s.isCut()?(r.logEventCut(n,t.element,o.purpose),xS.complete()):Ft(t.element).fold(()=>(r.logNoParent(n,t.element,o.purpose),xS.complete()),e=>(r.logEventResponse(n,t.element,o.purpose),xS.resume(e)))})},wS=(t,o,n,e,a,r)=>yS(t,o,n,e,a,r).fold(se,e=>wS(t,o,n,e,a,r),ie),SS=(e,t,o,n,a)=>{var r=bS(o,n);return wS(e,t,o,n,r,a)},CS=()=>{let i=(()=>{let r={};return{registerId:(n,a,e)=>{ze(e,(e,t)=>{var o=void 0!==r[t]?r[t]:{};o[a]={cHandler:oe.apply(void 0,[(e=e).handler].concat(n)),purpose:e.purpose},r[t]=o})},unregisterId:o=>{ze(r,(e,t)=>{$e(e,o)&&delete e[o]})},filterByType:e=>k(r,e).map(e=>We(e,(e,t)=>({id:t,descHandler:e}))).getOr([]),find:(e,t,o)=>k(r,t).bind(n=>Ka(o,e=>{return t=n,o=e,Gs(o).bind(e=>k(t,e)).map(e=>({element:o,descHandler:e}));var t,o},e))}})(),s={},l=e=>{Gs(e.element).each(e=>{delete s[e],i.unregisterId(e)})};return{find:(e,t,o)=>i.find(e,t,o),filter:e=>i.filterByType(e),register:e=>{t=(o=e).element;var o,t=Gs(t).getOrThunk(()=>{return e=o.element,t=E(Us+"uid-"),js(e,t),t;var e,t});if(qe(s,t)){var n=e,a=t,r=s[a];if(r!==n)throw new Error('The tagId "'+a+'" is already used by: '+hs(r.element)+"\nCannot use it for: "+hs(n.element)+"\nThe conflicting element is"+($t(r.element)?" ":" not ")+"already in the DOM");l(n)}a=[e];i.registerId(a,t,e.events),s[t]=e},unregister:l,getById:e=>k(s,e)}},kS=$m({name:"Container",factory:e=>{let{attributes:t,...o}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...o},components:e.components,behaviours:qu(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[u("components",[]),$u("containerBehaviours",[]),u("events",{}),u("domModification",{}),u("eventOrder",{})]}),OS=o=>{let n=t=>Ft(o.element).fold(se,e=>Tt(t,e)),a=CS(),l=(e,t)=>a.find(n,e,t),e=vS(o.element,{triggerEvent:(a,r)=>bs(a,r.target,e=>{return t=l,o=a,n=r,e=e,SS(t,o,n,n.target,e);var t,o,n})}),r={debugInfo:F("real"),triggerEvent:(t,o,n)=>{bs(t,o,e=>SS(l,t,n,o,e))},triggerFocus:(i,s)=>{Gs(i).fold(()=>{xc(i)},e=>{bs(Cr(),i,e=>{return t=l,o=Cr(),n={originator:s,kill:S,prevent:S,target:i},a=i,e=e,r=bS(n,a),yS(t,o,n,a,r,e),!1;var t,o,n,a,r})})},triggerEscape:(e,t)=>{r.triggerEvent("keydown",e.element,t.event)},getByUid:e=>p(e),getByDom:e=>h(e),build:Sl,buildOrPatch:wl,addToGui:e=>{s(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{t(e)},removeFromWorld:e=>{i(e)},broadcast:e=>{u(e)},broadcastOn:(e,t)=>{m(e,t)},broadcastEvent:(e,t)=>{g(e,t)},isConnected:se},t=e=>{e.connect(r),yt(e.element)||(a.register(e),R(e.components(),t),r.triggerEvent(Fr(),e.element,{target:e.element}))},i=e=>{yt(e.element)||(R(e.components(),i),a.unregister(e)),e.disconnect()},s=e=>{cu(o,e)},c=e=>{mu(e)},d=t=>{var e=a.filter(_r());R(e,e=>{e=e.descHandler;tl(e)(t)})},u=e=>{d({universal:!0,data:e})},m=(e,t)=>{d({universal:!1,channels:e,data:t})},g=(e,o)=>{{e=a.filter(e);let t=(e=>{let t=O(!1);return{stop:()=>{t.set(!0)},cut:S,isStopped:t.get,isCut:ie,event:e,setSource:ae("Cannot set source of a broadcasted event"),getSource:ae("Cannot get source of a broadcasted event")}})(o);return R(e,e=>{e=e.descHandler;tl(e)(t)}),t.isStopped()}},p=e=>a.getById(e).fold(()=>V.error(new Error('Could not find component with uid: "'+e+'" in system.')),V.value),h=e=>{e=Gs(e).getOr("not found");return p(e)};return t(o),{root:o,element:o.element,destroy:()=>{e.unbind(),ln(o.element)},add:s,remove:c,getByUid:p,getByDom:h,addToWorld:t,removeFromWorld:i,broadcast:u,broadcastOn:m,broadcastEvent:g}},_S=F([u("prefix","form-field"),$u("fieldBehaviours",[M,A])]),TS=F([wm({schema:[r("dom")],name:"label"}),wm({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[r("text")],name:"aria-descriptor"}),xm({factory:{sketch:e=>{var t=((e,o)=>{let n={};return ze(e,(e,t)=>{me(o,t)||(n[t]=e)}),n})(e,["factory"]);return e.factory.sketch(t)}},schema:[r("factory")],name:"field"})]),G=qm({name:"FormField",configFields:_S(),partFields:TS(),factory:(a,e,t,o)=>{var n=Yu(a.fieldBehaviours,[M.config({find:e=>Bm(e,a,"field")}),A.config({store:{mode:"manual",getValue:e=>M.getCurrent(e).bind(A.getValue),setValue:(e,t)=>{M.getCurrent(e).each(e=>{A.setValue(e,t)})}}})]),r=Zr([li((e,t)=>{let n=Im(e,a,["label","field","aria-descriptor"]);n.field().each(o=>{let t=E(a.prefix);n.label().each(e=>{w(e.element,"for",t),w(o.element,"id",t)}),n["aria-descriptor"]().each(e=>{var t=E(a.prefix);w(e.element,"id",t),w(o.element,"aria-describedby",t)})})})]);return{uid:a.uid,dom:a.dom,components:e,behaviours:n,events:r,apis:{getField:e=>Bm(e,a,"field"),getLabel:e=>Bm(e,a,"label")}}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var ES=tinymce.util.Tools.resolve("tinymce.html.Entities");let AS=(e,t,o,n)=>{e=MS(e,t,o,n);return G.sketch(e)},MS=(e,t,o,n)=>({dom:DS(o),components:e.toArray().concat([t]),fieldBehaviours:H(n)}),DS=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),BS=(e,t)=>G.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[bl(t.translate(e))]}),FS=E("form-component-change"),IS=E("form-component-input"),RS=E("form-close"),NS=E("form-cancel"),zS=E("form-action"),VS=E("form-submit"),LS=E("form-block"),HS=E("form-unblock"),PS=E("form-tabchange"),US=E("form-resize"),WS=(c,i,e)=>{let t=c.label.map(e=>BS(e,i)),d=i.icons(),o=n=>(t,o)=>{Fl(o.event.target,"[data-collection-item-value]").each(e=>{n(t,o,e,Jt(e,"data-collection-item-value"))})},n=o((e,t,o,n)=>{t.stop(),i.checkUiComponentContext("mode:design").shouldDisable||i.isDisabled()||T(e,zS,{name:c.name,value:n})}),a=[L(cr(),o((e,t,o)=>{xc(o,!0)})),L(fr(),n),L(Ar(),n),L(dr(),o((e,t,o)=>{Bl(e.element,"."+ex).each(e=>{Bi(e,ex)}),Mi(o,ex)})),L(ur(),o(e=>{Bl(e.element,"."+ex).each(e=>{Bi(e,ex),yc(e)})})),ui(o((e,t,o,n)=>{T(e,zS,{name:c.name,value:n})}))],r=(e,t)=>C(Ed(e.element,".tox-collection__item"),t),s=G.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==c.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:x},behaviours:H([P.config({disabled:()=>i.checkUiComponentContext(c.context).shouldDisable,onDisabled:e=>{r(e,e=>{Mi(e,"tox-collection__item--state-disabled"),w(e,"aria-disabled",!0)})},onEnabled:e=>{r(e,e=>{Bi(e,"tox-collection__item--state-disabled"),eo(e,"aria-disabled")})}}),ow(()=>i.checkUiComponentContext(c.context)),D.config({}),Nv.config({...i.tooltips.getConfig({tooltipText:"",onShow:t=>{Bl(t.element,"."+ex+"[data-mce-tooltip]").each(e=>{Qt(e,"data-mce-tooltip").each(e=>{Nv.setComponents(t,i.tooltips.getComponents({tooltipText:e}))})})}}),mode:"children-keyboard-focus",anchor:e=>({type:"node",node:Bl(e.element,"."+ex).orThunk(()=>_t(".tox-collection__item")),root:e.element,layouts:{onLtr:F([ic,rc,tc,nc,oc,ac]),onRtl:F([ic,rc,tc,nc,oc,ac])},bubble:Xc(0,-2,{})})}),A.config({store:{mode:"memory",initialValue:e.getOr([])},onSetValue:(n,a)=>{{var r=n;let l=i.checkUiComponentContext("mode:design").shouldDisable||i.isDisabled()?" tox-collection__item--state-disabled":"",e=C(a,e=>{let t=Bb.translate(e.text),o=1===c.columns?`<div class="tox-collection__item-label">${t}</div>`:"",n=`<div class="tox-collection__item-icon">${i=e.icon,null!=(s=d[i])?s:i}</div>`,a={_:" "," - ":" ","-":" "},r=t.replace(/\_| \- |\-/g,e=>a[e]);var i,s;return`<div data-mce-tooltip="${r}" class="tox-collection__item${l}" tabindex="-1" data-collection-item-value="${ES.encodeAllRaw(e.value)}" aria-label="${r}">${n}${o}</div>`}),t="auto"!==c.columns&&1<c.columns?he(e,c.columns):[e],o=C(t,e=>`<div class="tox-collection__group">${e.join("")}</div>`);gs(r.element,o.join(""))}"auto"===c.columns&&Uy(n,5,"tox-collection__item").each(({numRows:e,numColumns:t})=>{U.setGridSize(n,e,t)}),_(n,US)}}),Ov.config({}),U.config(1===(e=c.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+qb}}),B("collection-events",a)]),eventOrder:{[Tr()]:["disabling","alloy.base.behaviour","collection-events"],[dr()]:["collection-events","tooltipping"]}});return AS(t,s,["tox-form__group--collection"],[])},jS=["input","textarea"],GS=e=>{e=ft(e);return me(jS,e)},$S=(e,t)=>{var o=t.getRoot(e).getOr(e.element);Bi(o,t.invalidClass),t.notify.each(t=>{GS(e.element)&&w(e.element,"aria-invalid",!1),t.getContainer(e).each(e=>{gs(e,t.validHtml)}),t.onValid(e)})},qS=(t,e,o,n)=>{var a=e.getRoot(t).getOr(t.element);Mi(a,e.invalidClass),e.notify.each(e=>{GS(t.element)&&w(t.element,"aria-invalid",!0),e.getContainer(t).each(e=>{gs(e,n)}),e.onInvalid(t,n)})},YS=(t,e,o)=>e.validator.fold(()=>G0(V.value(!0)),e=>e.validate(t)),XS=(t,o,e)=>(o.notify.each(e=>{e.onValidate(t)}),YS(t,o).map(e=>t.getSystem().isConnected()?e.fold(e=>(qS(t,o,0,e),V.error(e)),e=>($S(t,o),V.value(e))):V.error("No longer in system"))),KS=Object.freeze({__proto__:null,markValid:$S,markInvalid:qS,query:YS,run:XS,isInvalid:(e,t)=>{e=t.getRoot(e).getOr(e.element);return Fi(e,t.invalidClass)}}),JS=Object.freeze({__proto__:null,events:(t,e)=>t.validator.map(e=>Zr([L(e.onEvent,e=>{XS(e,t).get(x)})].concat(e.validateOnLoad?[li(e=>{XS(e,t).get(S)})]:[]))).getOr({})}),QS=[r("invalidClass"),u("getRoot",I.none),Na("notify",[u("aria","alert"),u("getContainer",I.none),u("validHtml",""),e("onValid"),e("onInvalid"),e("onValidate")]),Na("validator",[r("validate"),u("onEvent","input"),u("validateOnLoad",!0)])],ZS=wi({fields:QS,name:"invalidating",active:JS,apis:KS,extra:{validation:t=>e=>{e=A.getValue(e);return G0(t(e))}}}),eC=wi({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Zr([ei(yr(),se)]),exhibit:()=>pi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),tC=E("color-input-change"),oC=E("color-swatch-change"),nC=E("color-picker-cancel"),aC=wm({schema:[r("dom")],name:"label"}),rC=t=>wm({name:t+"-edge",overrides:e=>e.model.manager.edgeActions[t].fold(()=>({}),n=>({events:Zr([oi(tr(),(e,t,o)=>n(e,o),[e]),oi(rr(),(e,t,o)=>n(e,o),[e]),oi(ir(),(e,t,o)=>{o.mouseIsDown.get()&&n(e,o)},[e])])}))}),iC=rC("top-left"),sC=rC("top"),lC=rC("top-right"),cC=rC("right"),dC=rC("bottom-right"),uC=rC("bottom"),mC=rC("bottom-left"),gC=rC("left"),pC=xm({name:"thumb",defaults:F({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Zr([ai(tr(),e,"spectrum"),ai(or(),e,"spectrum"),ai(nr(),e,"spectrum"),ai(rr(),e,"spectrum"),ai(ir(),e,"spectrum"),ai(lr(),e,"spectrum")])})}),hC=e=>Fg(e.event),fC=[aC,gC,cC,sC,uC,iC,lC,mC,dC,pC,xm({schema:[wa("mouseIsDown",()=>O(!1))],name:"spectrum",overrides:o=>{let n=o.model.manager,a=(t,e)=>n.getValueFromEvent(e).map(e=>n.setValueFrom(t,o,e));return{behaviours:H([U.config({mode:"special",onLeft:(e,t)=>n.onLeft(e,o,hC(t)),onRight:(e,t)=>n.onRight(e,o,hC(t)),onUp:(e,t)=>n.onUp(e,o,hC(t)),onDown:(e,t)=>n.onDown(e,o,hC(t))}),Ov.config({}),W.config({})]),events:Zr([L(tr(),a),L(or(),a),L(rr(),a),L(ir(),(e,t)=>{o.mouseIsDown.get()&&a(e,t)})])}}})],vC=F("slider.change.value"),bC=e=>{var t=e.event.raw;if(-1!==t.type.indexOf("touch")){let e=t;return void 0!==e.touches&&1===e.touches.length?I.some(e.touches[0]).map(e=>bo(e.clientX,e.clientY)):I.none()}{let e=t;return void 0!==e.clientX?I.some(e).map(e=>bo(e.clientX,e.clientY)):I.none()}},xC=e=>e.model.minX,yC=e=>e.model.minY,wC=e=>e.model.minX-1,SC=e=>e.model.minY-1,CC=e=>e.model.maxX,kC=e=>e.model.maxY,OC=e=>e.model.maxX+1,_C=e=>e.model.maxY+1,TC=(e,t,o)=>t(e)-o(e),EC=e=>TC(e,CC,xC),AC=e=>TC(e,kC,yC),MC=e=>EC(e)/2,DC=e=>AC(e)/2,BC=(e,t)=>t?e.stepSize*e.speedMultiplier:e.stepSize,FC=e=>e.snapToGrid,IC=e=>e.snapStart,RC=e=>e.rounded,NC=(e,t)=>void 0!==e[t+"-edge"],zC=e=>NC(e,"left"),VC=e=>NC(e,"right"),LC=e=>NC(e,"top"),HC=e=>NC(e,"bottom"),PC=e=>e.model.value.get(),UC=(e,t)=>({x:e,y:t}),WC=(e,t)=>{T(e,vC(),{value:t})},jC=(e,t,o,n)=>e<t?e:o<e?o:e===t?t-1:Math.max(t,e-n),GC=(e,t,o,n)=>o<e?e:e<t?t:e===o?o+1:Math.min(o,e+n),$C=(e,t,o)=>Math.max(t,Math.min(o,e)),qC=e=>{let{min:o,max:n,range:a,value:r,step:i,snap:s,snapStart:l,rounded:c,hasMinEdge:t,hasMaxEdge:d,minBound:u,maxBound:m,screenRange:g}=e,p=t?o-1:o,h=d?n+1:n;if(r<u)return p;if(m<r)return h;{y=u;let e=Math.min(m,Math.max(r,y))-y,t=$C(e/g*a+o,p,h);return s&&t>=o&&t<=n?(f=t,v=o,b=n,x=i,l.fold(()=>{var e=Math.round((f-v)/x)*x;return $C(v+e,v-1,b+1)},e=>{var t=Math.round((f-e)%x/x),o=Math.floor((f-e)/x),n=Math.floor((b-e)/x),n=e+Math.min(n,o+t)*x;return Math.max(e,n)})):c?Math.round(t):t}var f,v,b,x,y},YC=e=>{var{min:e,max:t,range:o,value:n,hasMinEdge:a,hasMaxEdge:r,maxBound:i,maxOffset:s,centerMinEdge:l,centerMaxEdge:c}=e;return n<e?a?0:l:t<n?r?i:c:(n-e)/o*s},XC="top",KC="right",JC="bottom",QC="left",ZC=e=>e.element.dom.getBoundingClientRect(),ek=(e,t)=>e[t],tk=e=>{e=ZC(e);return ek(e,QC)},ok=e=>{e=ZC(e);return ek(e,KC)},nk=e=>{e=ZC(e);return ek(e,XC)},ak=e=>{e=ZC(e);return ek(e,JC)},rk=e=>{e=ZC(e);return ek(e,"width")},ik=e=>{e=ZC(e);return ek(e,"height")},sk=(e,t,o)=>(e+t)/2-o,lk=(e,t)=>{var e=ZC(e),t=ZC(t),o=ek(e,QC),e=ek(e,KC),t=ek(t,QC);return sk(o,e,t)},ck=(e,t)=>{var e=ZC(e),t=ZC(t),o=ek(e,XC),e=ek(e,JC),t=ek(t,XC);return sk(o,e,t)},dk=(e,t)=>{T(e,vC(),{value:t})},uk=(e,t,o)=>{o={min:xC(t),max:CC(t),range:EC(t),value:o,step:BC(t),snap:FC(t),snapStart:IC(t),rounded:RC(t),hasMinEdge:zC(t),hasMaxEdge:VC(t),minBound:tk(e),maxBound:ok(e),screenRange:rk(e)};return qC(o)},mk=n=>(e,t,o)=>((e,t,o)=>{t=(0<n?GC:jC)(PC(t),xC(t),CC(t),BC(t,o));return dk(e,t),I.some(t)})(e,t,o).map(se),gk=(e,t,o,n,a,r)=>{i=t,r=r,o=o,n=n,a=a,s=rk(i),n=n.bind(e=>I.some(lk(e,i))).getOr(0),a=a.bind(e=>I.some(lk(e,i))).getOr(s),o={min:xC(r),max:CC(r),range:EC(r),value:o,hasMinEdge:zC(r),hasMaxEdge:VC(r),minBound:tk(i),minOffset:0,maxBound:ok(i),maxOffset:s,centerMinEdge:n,centerMaxEdge:a};var i,s,r=YC(o);return tk(t)-tk(e)+r},pk=mk(-1),hk=mk(1),fk=I.none,vk=I.none,bk={"top-left":I.none(),top:I.none(),"top-right":I.none(),right:I.some((e,t)=>{WC(e,OC(t))}),"bottom-right":I.none(),bottom:I.none(),"bottom-left":I.none(),left:I.some((e,t)=>{WC(e,wC(t))})},xk=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{t=uk(e,t,o);return dk(e,t),t},setToMin:(e,t)=>{t=xC(t);dk(e,t)},setToMax:(e,t)=>{t=CC(t);dk(e,t)},findValueOfOffset:uk,getValueFromEvent:e=>bC(e).map(e=>e.left),findPositionOfValue:gk,setPositionFromValue:(e,t,o,n)=>{var a=PC(o),a=gk(e,n.getSpectrum(e),a,n.getLeftEdge(e),n.getRightEdge(e),o),n=Co(t.element)/2;z(t.element,"left",a-n+"px")},onLeft:pk,onRight:hk,onUp:fk,onDown:vk,edgeActions:bk}),yk=(e,t)=>{T(e,vC(),{value:t})},wk=(e,t,o)=>{o={min:yC(t),max:kC(t),range:AC(t),value:o,step:BC(t),snap:FC(t),snapStart:IC(t),rounded:RC(t),hasMinEdge:LC(t),hasMaxEdge:HC(t),minBound:nk(e),maxBound:ak(e),screenRange:ik(e)};return qC(o)},Sk=n=>(e,t,o)=>((e,t,o)=>{t=(0<n?GC:jC)(PC(t),yC(t),kC(t),BC(t,o));return yk(e,t),I.some(t)})(e,t,o).map(se),Ck=(e,t,o,n,a,r)=>{i=t,r=r,o=o,n=n,a=a,s=ik(i),n=n.bind(e=>I.some(ck(e,i))).getOr(0),a=a.bind(e=>I.some(ck(e,i))).getOr(s),o={min:yC(r),max:kC(r),range:AC(r),value:o,hasMinEdge:LC(r),hasMaxEdge:HC(r),minBound:nk(i),minOffset:0,maxBound:ak(i),maxOffset:s,centerMinEdge:n,centerMaxEdge:a};var i,s,r=YC(o);return nk(t)-nk(e)+r},kk=I.none,Ok=I.none,_k=Sk(-1),Tk=Sk(1),Ek={"top-left":I.none(),top:I.some((e,t)=>{WC(e,SC(t))}),"top-right":I.none(),right:I.none(),"bottom-right":I.none(),bottom:I.some((e,t)=>{WC(e,_C(t))}),"bottom-left":I.none(),left:I.none()},Ak=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{t=wk(e,t,o);return yk(e,t),t},setToMin:(e,t)=>{t=yC(t);yk(e,t)},setToMax:(e,t)=>{t=kC(t);yk(e,t)},findValueOfOffset:wk,getValueFromEvent:e=>bC(e).map(e=>e.top),findPositionOfValue:Ck,setPositionFromValue:(e,t,o,n)=>{var a=PC(o),a=Ck(e,n.getSpectrum(e),a,n.getTopEdge(e),n.getBottomEdge(e),o),n=ho(t.element)/2;z(t.element,"top",a-n+"px")},onLeft:kk,onRight:Ok,onUp:_k,onDown:Tk,edgeActions:Ek}),Mk=(e,t)=>{T(e,vC(),{value:t})},Dk=(e,t)=>({x:e,y:t}),Bk=(i,s)=>(e,t,o)=>{return n=s,e=e,t=t,o=o,a=0<i?GC:jC,r=n?PC(t).x:a(PC(t).x,xC(t),CC(t),BC(t,o)),n=n?a(PC(t).y,yC(t),kC(t),BC(t,o)):PC(t).y,Mk(e,Dk(r,n)),I.some(r).map(se);var n,a,r},Fk=Bk(-1,!1),Ik=Bk(1,!1),Rk=Bk(-1,!0),Nk=Bk(1,!0),zk={"top-left":I.some((e,t)=>{WC(e,UC(wC(t),SC(t)))}),top:I.some((e,t)=>{WC(e,UC(MC(t),SC(t)))}),"top-right":I.some((e,t)=>{WC(e,UC(OC(t),SC(t)))}),right:I.some((e,t)=>{WC(e,UC(OC(t),DC(t)))}),"bottom-right":I.some((e,t)=>{WC(e,UC(OC(t),_C(t)))}),bottom:I.some((e,t)=>{WC(e,UC(MC(t),_C(t)))}),"bottom-left":I.some((e,t)=>{WC(e,UC(wC(t),_C(t)))}),left:I.some((e,t)=>{WC(e,UC(wC(t),DC(t)))})},Vk=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{var n=uk(e,t,o.left),t=wk(e,t,o.top),o=Dk(n,t);return Mk(e,o),o},setToMin:(e,t)=>{var o=xC(t),t=yC(t);Mk(e,Dk(o,t))},setToMax:(e,t)=>{var o=CC(t),t=kC(t);Mk(e,Dk(o,t))},getValueFromEvent:e=>bC(e),setPositionFromValue:(e,t,o,n)=>{var a=PC(o),r=gk(e,n.getSpectrum(e),a.x,n.getLeftEdge(e),n.getRightEdge(e),o),a=Ck(e,n.getSpectrum(e),a.y,n.getTopEdge(e),n.getBottomEdge(e),o),n=Co(t.element)/2,e=ho(t.element)/2;z(t.element,"left",r-n+"px"),z(t.element,"top",a-e+"px")},onLeft:Fk,onRight:Ik,onUp:Rk,onDown:Nk,edgeActions:zk}),Lk=qm({name:"Slider",configFields:[u("stepSize",1),u("speedMultiplier",10),u("onChange",S),u("onChoose",S),u("onInit",S),u("onDragStart",S),u("onDragEnd",S),u("snapToGrid",!1),u("rounded",!0),d("snapStart"),Ca("model",ba("mode",{x:[u("minX",0),u("maxX",100),wa("value",e=>O(e.mode.minX)),r("getInitialValue"),Ms("manager",xk)],y:[u("minY",0),u("maxY",100),wa("value",e=>O(e.mode.minY)),r("getInitialValue"),Ms("manager",Ak)],xy:[u("minX",0),u("maxX",100),u("minY",0),u("maxY",100),wa("value",e=>O({x:e.mode.minX,y:e.mode.minY})),r("getInitialValue"),Ms("manager",Vk)]})),$u("sliderBehaviours",[U,A]),wa("mouseIsDown",()=>O(!1))],partFields:fC,factory:(a,e,t,o)=>{let r=e=>Fm(e,a,"thumb"),i=e=>Fm(e,a,"spectrum"),n=e=>Bm(e,a,"left-edge"),s=e=>Bm(e,a,"right-edge"),l=e=>Bm(e,a,"top-edge"),c=e=>Bm(e,a,"bottom-edge"),d=a.model,u=d.manager,m=(e,t)=>{u.setPositionFromValue(e,t,a,{getLeftEdge:n,getRightEdge:s,getTopEdge:l,getBottomEdge:c,getSpectrum:i})},g=(e,t)=>{d.value.set(t);t=r(e);m(e,t)},p=o=>{var e=a.mouseIsDown.get();a.mouseIsDown.set(!1),e&&Bm(o,a,"thumb").each(e=>{var t=d.value.get();a.onChoose(o,e,t)})},h=(e,t)=>{t.stop(),a.mouseIsDown.set(!0),a.onDragStart(e,r(e))},f=(e,t)=>{t.stop(),a.onDragEnd(e,r(e)),p(e)},v=e=>{Bm(e,a,"spectrum").map(U.focusIn)};return{uid:a.uid,dom:a.dom,components:e,behaviours:Yu(a.sliderBehaviours,[U.config({mode:"special",focusIn:v}),A.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:g}}),vc.config({channels:{[Mu()]:{onReceive:p}}})]),events:Zr([L(vC(),(e,t)=>{var o;e=e,t=t.event.value,g(e,t),o=r(e),a.onChange(e,o,t),I.some(!0)}),li((e,t)=>{var o=d.getInitialValue(),o=(d.value.set(o),r(e)),n=(m(e,o),i(e));a.onInit(e,o,n,d.value.get())}),L(tr(),h),L(nr(),f),L(rr(),(e,t)=>{v(e),h(e,t)}),L(lr(),f)]),apis:{resetToMin:e=>{u.setToMin(e,a)},resetToMax:e=>{u.setToMax(e,a)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,o)=>{e.setValue(t,o)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),Hk=E("rgb-hex-update"),Pk=E("slider-update"),Uk=E("palette-update"),Wk=[$u("formBehaviours",[A])],jk=e=>"<alloy.field."+e+">",Gk=(n,e)=>({uid:n.uid,dom:n.dom,components:e,behaviours:Yu(n.formBehaviours,[A.config({store:{mode:"manual",getValue:e=>{e=Rm(e,n);return Ve(e,(e,n)=>e().bind(e=>{return t=M.getCurrent(e),o=new Error(`Cannot find a current component to extract the value from for form part '${n}': `+hs(e.element)),t.fold(()=>V.error(o),V.value);var t,o}).map(A.getValue))},setValue:(o,e)=>{ze(e,(t,e)=>{Bm(o,n,e).each(e=>{M.getCurrent(e).each(e=>{A.setValue(e,t)})})})}}})]),apis:{getField:(e,t)=>Bm(e,n,t).bind(M.getCurrent)}}),$k={getField:Zs((e,t,o)=>e.getField(t,o)),sketch:e=>{var t=(()=>{let o=[];return{field:(e,t)=>(o.push(e),Tm("form",jk(e),t)),record:F(o)}})(),e=e(t),t=t.record(),t=C(t,e=>xm({name:e,pname:jk(e)}));return Um("form",Wk,t,Gk,e)}},qk=E("valid-input"),Yk=E("invalid-input"),Xk=E("validating-input"),Kk="colorcustom.rgb.",Jk={isEnabled:se,setEnabled:S,immediatelyShow:S,immediatelyHide:S},Qk=(v,b,u,m,x,y)=>{let w=(e,t)=>{t=t.get();e!==t.isEnabled()&&(t.setEnabled(e),e?t.immediatelyShow():t.immediatelyHide())},g=(e,o,t,n,a)=>{let r=O(Jk),i=v(Kk+"range"),s=G.parts.label({dom:{tag:"label"},components:[bl(t)]}),l=G.parts.field({data:a,factory:gx,inputAttributes:{type:"text","aria-label":n,..."hex"===o?{"aria-live":"polite"}:{}},inputClasses:[b("textfield")],inputBehaviours:H([(p=o,h=e,f=r,ZS.config({invalidClass:b("invalid"),notify:{onValidate:e=>{T(e,Xk,{type:p})},onValid:e=>{w(!1,f),T(e,qk,{type:p,value:A.getValue(e)})},onInvalid:e=>{w(!0,f),T(e,Yk,{type:p,value:A.getValue(e)})}},validator:{validate:e=>{e=A.getValue(e),e=h(e)?V.value(!0):V.error(v("aria.input.invalid"));return G0(e)},validateOnLoad:!1}})),Ov.config({}),Nv.config({...x({tooltipText:"",onSetup:t=>{r.set({isEnabled:()=>Nv.isEnabled(t),setEnabled:e=>Nv.setEnabled(t,e),immediatelyShow:()=>Nv.immediateOpenClose(t,!0),immediatelyHide:()=>Nv.immediateOpenClose(t,!1)}),Nv.setEnabled(t,!1)},onShow:(e,t)=>{Nv.setComponents(e,[{dom:{tag:"p",classes:[b("rgb-warning-note")]},components:[bl(v("hex"===o?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:e=>{ZS.isInvalid(e)&&ZS.run(e).get(S)}}),c=E("aria-invalid"),d=j(y("invalid",I.some(c),"warning")),u=[s,l,j({dom:{tag:"div",classes:[b("invalid-icon")]},components:[d.asSpec()]}).asSpec()],m="hex"!==o?[G.parts["aria-descriptor"]({text:i})]:[],g=u.concat(m);var p,h,f;return{dom:{tag:"div",attributes:{role:"presentation"},classes:[b("rgb-container")]},components:g}},p=(e,t)=>{var o=t.red,n=t.green,t=t.blue;A.setValue(e,{red:o,green:n,blue:t})},h=j({dom:{tag:"div",classes:[b("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),f=(e,t)=>{h.getOpt(e).each(e=>{z(e.element,"background-color","#"+t.value)})},e=$m({factory:()=>{let o={red:O(I.some(255)),green:O(I.some(255)),blue:O(I.some(255)),hex:O(I.some("ffffff"))},i=e=>o[e].get(),s=(e,t)=>{o[e].set(t)},l=e=>{var t=e.red,o=e.green,e=e.blue;s("red",I.some(t)),s("green",I.some(o)),s("blue",I.some(e))},t=(e,t)=>{t=t.event;"hex"!==t.type?s(t.type,I.none()):m(e)},n=(e,t)=>{var o,t=t.event;{var n,a,r;"hex"===t.type?(r=e,o=t.value,u(r),o=ww(o),s("hex",I.some(o.value)),a=Nw(o),p(r,a),l(a),T(r,Hk,{hex:o}),f(r,o)):(n=e,a=t.type,r=t.value,r=parseInt(r,10),s(a,I.some(r)),i("red").bind(o=>i("green").bind(t=>i("blue").map(e=>Fw(o,t,e,1)))).each(e=>{e=((t,e)=>{let o=Tw(e);return $k.getField(t,"hex").each(e=>{W.isFocused(e)||A.setValue(t,{hex:o.value})}),o})(n,e);T(n,Hk,{hex:e}),f(n,e)}))}},e=e=>({label:v(Kk+e+".label"),description:v(Kk+e+".description")}),a=e("red"),r=e("green"),c=e("blue"),d=e("hex");return Vn($k.sketch(e=>({dom:{tag:"form",classes:[b("rgb-form")],attributes:{"aria-label":v("aria.color.picker")}},components:[e.field("red",G.sketch(g(Iw,"red",a.label,a.description,255))),e.field("green",G.sketch(g(Iw,"green",r.label,r.description,255))),e.field("blue",G.sketch(g(Iw,"blue",c.label,c.description,255))),e.field("hex",G.sketch(g(kw,"hex",d.label,d.description,"ffffff"))),h.asSpec()],formBehaviours:H([ZS.config({invalidClass:b("form-invalid")}),B("rgb-form-events",[L(qk,n),L(Yk,t),L(Xk,t)])])})),{apis:{updateHex:(e,t)=>{A.setValue(e,{hex:t.value});var o=e,n=t;n=Nw(n),p(o,n),l(n),f(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,o)=>{e.updateHex(t,o)}},extraApis:{}});return e},Zk=(h,f,v,b)=>$m({name:"ColourPicker",configFields:[r("dom"),u("onValidHex",S),u("onInvalidHex",S)],factory:e=>{let o=Qk(h,f,e.onValidHex,e.onInvalidHex,v,b),n=((n,a)=>{let r=Lk.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[a("sv-palette-spectrum")]}}),i=Lk.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[a("sv-palette-thumb")],innerHtml:`<div class=${a("sv-palette-inner-thumb")} role="presentation"></div>`}}),s=(e,t)=>{var{width:o,height:n}=e,e=e.getContext("2d");null!==e&&(e.fillStyle=t,e.fillRect(0,0,o,n),(t=e.createLinearGradient(0,0,o,0)).addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=t,e.fillRect(0,0,o,n),(t=e.createLinearGradient(0,0,0,n)).addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=t,e.fillRect(0,0,o,n))};return $m({factory:e=>{var t=F({x:0,y:0}),o=H([M.config({find:I.some}),W.config({})]);return Lk.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[a("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[r,i],onChange:(e,t,o)=>{J(o)||w(e.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(o.x),Math.floor(100-o.y)])),T(e,Uk,{value:o})},onInit:(e,t,o,n)=>{s(o.element.dom,Lw(Hw))},sliderBehaviours:o})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,o)=>{o=o,t=t.components()[0].element.dom,o=o0(o,100,100),o=Rw(o),s(t,Lw(o))},setThumb:(e,t,o)=>{o=n0(Nw(o)),Lk.setValue(t,{x:o.saturation,y:100-o.value}),w(t.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",o.saturation,o.value]))}},extraApis:{}})})(h,f),i={paletteRgba:O(Hw),paletteHue:O(0)},a=j((m=f,g=Lk.parts.spectrum({dom:{tag:"div",classes:[m("hue-slider-spectrum")],attributes:{role:"presentation"}}}),p=Lk.parts.thumb({dom:{tag:"div",classes:[m("hue-slider-thumb")],attributes:{role:"presentation"}}}),Lk.sketch({dom:{tag:"div",classes:[m("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:F(0)},components:[g,p],sliderBehaviours:H([W.config({})]),onChange:(e,t,o)=>{w(e.element,"aria-valuenow",Math.floor(360-3.6*o)),T(e,Pk,{value:o})}}))),r=j(n.sketch({})),s=j(o.sketch({})),t=(e,t,o)=>{r.getOpt(e).each(e=>{n.setHue(e,o)})},l=(e,t)=>{s.getOpt(e).each(e=>{o.updateHex(e,t)})},c=(e,t,o)=>{a.getOpt(e).each(e=>{Lk.setValue(e,100-o/360*100)})},d=(e,t)=>{r.getOpt(e).each(e=>{n.setThumb(e,t)})},u=(t,o,n,e)=>{var a=o,r=n;a=Nw(a),i.paletteRgba.set(a),i.paletteHue.set(r),R(e,e=>{e(t,o,n)})};var m,g,p;return{uid:e.uid,dom:e.dom,components:[r.asSpec(),a.asSpec(),s.asSpec()],behaviours:H([B("colour-picker-events",[L(Hk,(()=>{let n=[t,c,d];return(e,t)=>{var t=t.event.hex,o=(o=t,n0(Nw(o)));u(e,t,o.hue,n)}})()),L(Uk,(()=>{let n=[l];return(e,t)=>{var t=t.event.value,o=i.paletteHue.get(),t=o0(o,t.x,100-t.y),t=a0(t);u(e,t,o,n)}})()),L(Pk,(()=>{let n=[t,l];return(e,t)=>{var t=(100-t.event.value)/100*360,o=i.paletteRgba.get(),o=n0(o),o=o0(t,o.saturation,o.value),o=a0(o);u(e,o,t,n)}})())]),M.config({find:e=>s.getOpt(e)}),U.config({mode:"acyclic"})])}}}),eO=()=>M.config({find:I.some}),tO=e=>M.config({find:t=>zt(t.element,e).bind(e=>t.getSystem().getByDom(e).toOptional())}),oO=i([u("preprocess",x),u("postprocess",x)]),nO=(o,e)=>{let n=fa("RepresentingConfigs.memento processors",oO,e);return A.config({store:{mode:"manual",getValue:e=>{e=o.get(e),e=A.getValue(e);return n.postprocess(e)},setValue:(e,t)=>{t=n.preprocess(t),e=o.get(e);A.setValue(e,t)}}})},aO=(e,t,o)=>A.config({store:{mode:"manual",...e.map(e=>({initialValue:e})).getOr({}),getValue:t,setValue:o}}),rO=(e,t,o)=>aO(e,e=>t(e.element),(e,t)=>o(e.element,t)),iO=e=>A.config({store:{mode:"memory",initialValue:e}}),sO={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var lO=tinymce.util.Tools.resolve("tinymce.Resource");let cO=e=>$e(e,"init");var dO=tinymce.util.Tools.resolve("tinymce.util.Tools");let uO=E("browse.files.event"),mO=(t,o)=>{let n=null,a=()=>{p(n)||(clearTimeout(n),n=null)};return{cancel:a,throttle:(...e)=>{a(),n=setTimeout(()=>{n=null,t.apply(null,e)},o)}}},gO=E("alloy-fake-before-tabstop"),pO=E("alloy-fake-after-tabstop"),hO=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:H([W.config({ignore:!0}),Ov.config({})])}),fO=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[hO([gO]),t,hO([pO])],behaviours:H([tO(1)])}),vO=(e,t)=>{T(e,mr(),{raw:{which:9,shiftKey:t}})},bO=(e,t)=>{t=t.element;Fi(t,gO)?vO(e,!0):Fi(t,pO)&&vO(e,!1)},xO=e=>pS(e,["."+gO,"."+pO].join(","),ie),yO=E("update-dialog"),wO=E("update-title"),SO=E("update-body"),CO=E("update-footer"),kO=E("body-send-message"),OO=E("dialog-focus-shifted"),_O=Jo().browser,TO=_O.isSafari(),EO=_O.isFirefox(),AO=TO||EO,MO=_O.isChromium(),DO=({scrollTop:e,scrollHeight:t,clientHeight:o})=>Math.ceil(e)+o>=t,BO=(e,t)=>e.scrollTo(0,"bottom"===t?99999999:t),FO=(e,s,t)=>{let l=e.dom;I.from(l.contentDocument).fold(t,e=>{let t=0,o=(r=s,i=(a=e).body,I.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!MO&&!TO||X(i)&&(0!==i.scrollTop||1<Math.abs(i.scrollHeight-i.clientHeight)))?i:a.documentElement).map(e=>(t=e.scrollTop,e)).forall(DO)),n=()=>{var e=l.contentWindow;X(e)&&(o?BO(e,"bottom"):!o&&AO&&0!==t&&BO(e,t))};var a,r,i;TO&&l.addEventListener("load",n,{once:!0}),e.open(),e.write(s),e.close(),TO||n()})},IO=Qe(AO,TO?500:200).map(e=>{{var n=FO,a=e;let t=null,o=null;return{cancel:()=>{p(t)||(clearTimeout(t),t=null,o=null)},throttle:(...e)=>{o=e,p(t)&&(t=setTimeout(()=>{var e=o;t=null,o=null,n.apply(null,e)},a))}}}}),RO=E("toolbar.button.execute"),NO=E("common-button-display-events"),zO={[Tr()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Vr()]:["toolbar-button-events",NO],[Lr()]:["toolbar-button-events","dropdown-events","tooltipping"],[rr()]:["focusing","alloy.base.behaviour",NO]},VO=e=>z(e.element,"width",ro(e.element,"width")),LO=(e,t,o)=>Pb(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},t),HO=(e,t)=>LO(e,t,[]),PO=(e,t)=>LO(e,t,[D.config({})]),UO=(e,t,o)=>({dom:{tag:"span",classes:[t+"__select-label"]},components:[bl(o.translate(e))],behaviours:H([D.config({})])}),WO=E("update-menu-text"),jO=E("update-menu-icon"),GO=(n,t,a,e)=>{let o=O(S),r=n.text.map(e=>j(UO(e,t,a.providers))),i=n.icon.map(e=>j(PO(e,a.providers.icons))),s=(e,t)=>{e=A.getValue(e);return W.focus(e),T(e,"keydown",{raw:t.event.raw}),rS.close(e),I.some(!0)},l=n.role.fold(()=>({}),e=>({role:e})),c=I.from(n.listRole).map(e=>({listRole:e})).getOr({}),d=n.ariaLabel.fold(()=>({}),e=>({"aria-label":a.providers.translate(e)})),u=Pb("chevron-down",{tag:"div",classes:[t+"__select-chevron"]},a.providers.icons),m=E("common-button-display-events"),g="dropdown-events",p=j(rS.sketch({...n.uid?{uid:n.uid}:{},...l,...c,dom:{tag:"button",classes:[t,t+"--select"].concat(C(n.classes,e=>t+"--"+e)),attributes:{...d,...X(e)?{"data-mce-name":e}:{}}},components:rw([i.map(e=>e.asSpec()),r.map(e=>e.asSpec()),I.some(u)]),matchWidth:!0,useMinWidth:!0,onOpen:(e,t,o)=>{n.searchable&&(o=o,bx(o).each(e=>W.focus(e)))},dropdownBehaviours:H([...n.dropdownBehaviours,Gy(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),ow(()=>a.providers.checkUiComponentContext(n.context)),eC.config({}),D.config({}),...n.tooltip.map(e=>Nv.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(e)}))).toArray(),B(g,[Xy(n,o),Ky(n,o)]),B(m,[li((e,t)=>{"listbox"!==n.listRole&&VO(e)})]),B("update-dropdown-width-variable",[L(zr(),(e,t)=>rS.close(e))]),B("menubutton-update-display-text",[L(WO,(t,o)=>{r.bind(e=>e.getOpt(t)).each(e=>{D.set(e,[bl(a.providers.translate(o.event.text))])})}),L(jO,(t,o)=>{i.bind(e=>e.getOpt(t)).each(e=>{D.set(e,[PO(o.event.icon,a.providers.icons)])})})])]),eventOrder:Vn(zO,{[rr()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Vr()]:["toolbar-button-events",Nv.name(),g,m]}),sandboxBehaviours:H([U.config({mode:"special",onLeft:s,onRight:s}),B("dropdown-sandbox-events",[L(px,(e,t)=>{{let t=A.getValue(e),o=vx(e).map(xx);rS.refetch(t).get(()=>{let e=L0.getCoupled(t,"sandbox");o.each(o=>vx(e).each(e=>{return e=e,t=o,A.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,void(e.element.dom.selectionEnd=t.selectionEnd);var t}))})}t.stop()}),L(hx,(e,t)=>{var a,r;r=t,e=a=e,h.getState(e).bind(y.getHighlighted).bind(y.getHighlighted).each(e=>{var t,o,n;t=a,e=e.element,o=r.event.eventType,n={...r.event.interactionEvent,target:e},t.getSystem().triggerEvent(o,e,n)}),t.stop()})])]),lazySink:a.getSink,toggleClass:t+"--active",parts:{menu:{...cx(0,n.columns,n.presets),fakeFocus:n.searchable,..."listbox"===n.listRole?{}:{onHighlightItem:iS,onCollapseMenu:(t,e,o)=>{y.getHighlighted(o).each(e=>{iS(t,o,e)})},onDehighlightItem:(e,t,o)=>{w(o.element,"aria-selected","false")}}}},getAnchorOverrides:()=>({maxHeightFunction:(e,t)=>{jc()(e,t-10)}}),fetch:e=>j0(oe(n.fetch,e))}));return p.asSpec()},$O=e=>"separator"===e.type,qO={type:"separator"},YO=(e,r)=>{e=((e,n)=>{e=xe(e,(e,t)=>{return o=t,$(o)?""===t?e:"|"===t?0<e.length&&!$O(e[e.length-1])?e.concat([qO]):e:$e(n,t.toLowerCase())?e.concat([n[t.toLowerCase()]]):e:e.concat([t]);var o},[]);return 0<e.length&&$O(e[e.length-1])&&e.pop(),e})($(e)?e.split(" "):e,r);return be(e,(e,t)=>{var o,n,a;return a=t,$e(a,"getSubmenuItems")?(a=t,n=k(a,"value").getOrThunk(()=>E("generated-menu-item")),n=Vn({value:n},a),a=r,o=(n=n).getSubmenuItems(),o=YO(o,a),a={item:n,menus:Vn(o.menus,{[n.value]:o.items}),expansions:Vn(o.expansions,{[n.value]:n.value})},{menus:Vn(e.menus,a.menus),items:[a.item,...e.items],expansions:Vn(e.expansions,a.expansions)}):{...e,items:[t,...e.items]}},{menus:{},expansions:{},items:[]})},XO=(e,o,n,t)=>{var a=E("primary-menu"),e=YO(e,n.shared.providers.menuItems());if(0===e.items.length)return I.none();let r=t.search.fold(()=>({searchMode:"no-search"}),e=>({searchMode:"search-with-field",placeholder:e.placeholder})),i=dS(a,e.items,o,n,t.isHorizontalMenu,r),s=t.search.fold(()=>({searchMode:"no-search"}),e=>({searchMode:"search-with-results"})),l=Ve(e.menus,(e,t)=>dS(t,e,o,n,!1,s)),c=Vn(l,$a(a,i));return I.from(Zh.tieredData(a,c,e.expansions))},KO=e=>!$e(e,"items"),JO="data-value",QO=(t,o,e,n,a)=>C(e,e=>KO(e)?{type:"togglemenuitem",...a?{}:{role:"option"},text:e.text,value:e.value,active:e.value===n,onAction:()=>{A.setValue(t,e.value),T(t,FS,{name:o}),W.focus(t)}}:{type:"nestedmenuitem",text:e.text,getSubmenuItems:()=>QO(t,o,e.items,n,a)}),ZO=(e,t)=>Ie(e,e=>KO(e)?Qe(e.value===t,e):ZO(e.items,t)),e_=$m({name:"HtmlSelect",configFields:[r("options"),$u("selectBehaviours",[W,A]),u("selectClasses",[]),u("selectAttributes",{}),d("data")],factory:(n,e)=>{var t=C(n.options,e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}})),o=n.data.map(e=>$a("initialValue",e)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:t,behaviours:Yu(n.selectBehaviours,[W.config({}),A.config({store:{mode:"manual",getValue:e=>cl(e.element),setValue:(t,o)=>{var e=De(n.options);ye(n.options,e=>e.value===o).isSome()?dl(t.element,o):-1===t.element.dom.selectedIndex&&""===o&&e.each(e=>dl(t.element,e.value))},...o}})])}}}),t_=F([u("field1Name","field1"),u("field2Name","field2"),Es("onLockedChange"),Os(["lockClass"]),u("locked",!1),Xu("coupledFieldBehaviours",[M,A]),Ua("onInput",S)]),o_=(e,r)=>xm({factory:G,name:e,overrides:a=>({fieldBehaviours:H([B("coupled-input-behaviour",[L(pr(),o=>{var e,t,n;e=o,t=a,n=r,Bm(e,t,n).bind(M.getCurrent).each(t=>{Bm(o,a,"lock").each(e=>{f.isOn(e)&&a.onLockedChange(o,t,e),a.onInput(o)})})})])])})}),n_=F([o_("field1","field2"),o_("field2","field1"),xm({factory:wv,schema:[r("dom")],name:"lock",overrides:e=>({buttonBehaviours:H([f.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),a_=qm({name:"FormCoupledInputs",configFields:t_(),partFields:n_(),factory:(o,e,t,n)=>({uid:o.uid,dom:o.dom,components:e,behaviours:Ku(o.coupledFieldBehaviours,[M.config({find:I.some}),A.config({store:{mode:"manual",getValue:e=>{e=zm(e,o,["field1","field2"]);return{[o.field1Name]:A.getValue(e.field1()),[o.field2Name]:A.getValue(e.field2())}},setValue:(e,t)=>{e=zm(e,o,["field1","field2"]);qe(t,o.field1Name)&&A.setValue(e.field1(),t[o.field1Name]),qe(t,o.field2Name)&&A.setValue(e.field2(),t[o.field2Name])}}})]),apis:{getField1:e=>Bm(e,o,"field1"),getField2:e=>Bm(e,o,"field2"),getLock:e=>Bm(e,o,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),r_=e=>{var t,o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let n=e.value.toFixed((t=e.unit)in o?o[t]:1);return(n=-1!==n.indexOf(".")?n.replace(/\.?0*$/,""):n)+e.unit},i_=e=>{var o=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null===o)return V.error(e);{let e=parseFloat(o[1]),t=o[2];return V.value({value:e,unit:t})}},s_=(e,t)=>{let o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},n=e=>$e(o,e);return e.unit===t?I.some(e.value):n(e.unit)&&n(t)?o[e.unit]===o[t]?I.some(e.value):I.some(e.value/o[e.unit]*o[t]):I.none()},l_=e=>I.none(),c_=(e,t)=>{e=i_(e).toOptional(),t=i_(t).toOptional();return Ke(e,t,(e,n)=>s_(e,n.unit).map(e=>n.value/e).map(e=>{return t=e,o=n.unit,e=>s_(e,o).map(e=>({value:e*t,unit:o}));var t,o}).getOr(l_)).getOr(l_)},d_=(o,t)=>{var e=o.label.map(e=>BS(e,t)),n=[P.config({disabled:()=>o.disabled||t.checkUiComponentContext(o.context).shouldDisable}),ow(()=>t.checkUiComponentContext(o.context)),U.config({mode:"execution",useEnter:!0!==o.multiline,useControlEnter:!0===o.multiline,execute:e=>(_(e,VS),I.some(!0))}),B("textfield-change",[L(pr(),(e,t)=>{T(e,FS,{name:o.name})}),L(Or(),(e,t)=>{T(e,FS,{name:o.name})})]),Ov.config({})],a=o.validation.map(o=>ZS.config({getRoot:e=>It(e.element),invalidClass:"tox-invalid",validator:{validate:e=>{var e=A.getValue(e),t=o.validator(e);return G0(!0===t?V.value(e):V.error(t))},validateOnLoad:o.validateOnLoad}})).toArray(),r={...o.placeholder.fold(F({}),e=>({placeholder:t.translate(e)})),...o.inputMode.fold(F({}),e=>({inputmode:e})),"data-mce-name":o.name},r=G.parts.field({tag:!0===o.multiline?"textarea":"input",...o.data.map(e=>({data:e})).getOr({}),inputAttributes:r,inputClasses:[o.classname],inputBehaviours:H(Se([n,a])),selectOnFocus:!1,factory:gx}),n=o.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[r]}:r,a=(o.flex?["tox-form__group--stretched"]:[]).concat(o.maximized?["tox-form-group--maximize"]:[]),r=[P.config({disabled:()=>o.disabled||t.checkUiComponentContext(o.context).shouldDisable,onDisabled:e=>{G.getField(e).each(P.disable)},onEnabled:e=>{G.getField(e).each(P.enable)}}),ow(()=>t.checkUiComponentContext(o.context))];return AS(e,n,a,r)},u_=(t,e)=>e.getAnimationRoot.fold(()=>t.element,e=>e(t)),m_=e=>e.dimension.property,g_=(e,t)=>e.dimension.getDimension(t),p_=(e,t)=>{e=u_(e,t);Ri(e,[t.shrinkingClass,t.growingClass])},h_=(e,t)=>{Bi(e.element,t.openClass),Mi(e.element,t.closedClass),z(e.element,m_(t),"0px"),mo(e.element)},f_=(e,t)=>{Bi(e.element,t.closedClass),Mi(e.element,t.openClass),uo(e.element,m_(t))},v_=(e,t,o,n)=>{o.setCollapsed(),z(e.element,m_(t),g_(t,e.element)),p_(e,t),h_(e,t),t.onStartShrink(e),t.onShrunk(e)},b_=(e,t,o,n)=>{n=n.getOrThunk(()=>g_(t,e.element)),o.setCollapsed(),z(e.element,m_(t),n),mo(e.element),o=u_(e,t);Bi(o,t.growingClass),Mi(o,t.shrinkingClass),h_(e,t),t.onStartShrink(e)},x_=(e,t,o)=>{var n=g_(t,e.element);("0px"===n?v_:b_)(e,t,o,I.some(n))},y_=(e,t,o)=>{let n=u_(e,t),a=Fi(n,t.shrinkingClass),r=g_(t,e.element);f_(e,t);var i=g_(t,e.element);(a?()=>{z(e.element,m_(t),r),mo(e.element)}:()=>{h_(e,t)})(),Bi(n,t.shrinkingClass),Mi(n,t.growingClass),f_(e,t),z(e.element,m_(t),i),o.setExpanded(),t.onStartGrow(e)},w_=(e,t,o)=>{e=u_(e,t);return!0===Fi(e,t.growingClass)},S_=(e,t,o)=>{e=u_(e,t);return!0===Fi(e,t.shrinkingClass)},C_=Object.freeze({__proto__:null,refresh:(t,o,e)=>{if(e.isExpanded()){uo(t.element,m_(o));let e=g_(o,t.element);z(t.element,m_(o),e)}},grow:(e,t,o)=>{o.isExpanded()||y_(e,t,o)},shrink:(e,t,o)=>{o.isExpanded()&&x_(e,t,o)},immediateShrink:(e,t,o)=>{o.isExpanded()&&v_(e,t,o)},hasGrown:(e,t,o)=>o.isExpanded(),hasShrunk:(e,t,o)=>o.isCollapsed(),isGrowing:w_,isShrinking:S_,isTransitioning:(e,t,o)=>w_(e,t)||S_(e,t),toggleGrow:(e,t,o)=>{(o.isExpanded()?x_:y_)(e,t,o)},disableTransitions:p_,immediateGrow:(e,t,o)=>{o.isExpanded()||(f_(e,t),z(e.element,m_(t),g_(t,e.element)),p_(e,t),o.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),k_=Object.freeze({__proto__:null,exhibit:(e,t,o)=>{var n=t.expanded;return pi(n?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:$a(t.dimension.property,"0px")})},events:(o,n)=>Zr([si(br(),(e,t)=>{t.event.raw.propertyName===o.dimension.property&&(p_(e,o),n.isExpanded()&&uo(e.element,o.dimension.property),(n.isExpanded()?o.onGrown:o.onShrunk)(e))})])}),O_=[r("closedClass"),r("openClass"),r("shrinkingClass"),r("growingClass"),d("getAnimationRoot"),e("onShrunk"),e("onStartShrink"),e("onGrown"),e("onStartGrow"),u("expanded",!1),Ca("dimension",ba("property",{width:[Ms("property","width"),Ms("getDimension",e=>Co(e)+"px")],height:[Ms("property","height"),Ms("getDimension",e=>ho(e)+"px")]}))],__=wi({fields:O_,name:"sliding",active:k_,apis:C_,state:Object.freeze({__proto__:null,init:e=>{let t=O(e.expanded);return xi({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:oe(t.set,!1),setExpanded:oe(t.set,!0),readState:()=>"expanded: "+t.get()})}})}),T_=o=>({isEnabled:()=>!P.isDisabled(o),setEnabled:e=>P.set(o,!e),setActive:e=>{var t=o.element;e?(Mi(t,"tox-tbtn--enabled"),w(t,"aria-pressed",!0)):(Bi(t,"tox-tbtn--enabled"),eo(t,"aria-pressed"))},isActive:()=>Fi(o.element,"tox-tbtn--enabled"),setText:e=>{T(o,WO,{text:e})},setIcon:e=>T(o,jO,{icon:e})}),E_=(n,e,a,t,o=!0,r)=>GO({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:t,fetch:(e,t)=>{var o={pattern:n.search.isSome()?sS(e):""};n.fetch(e=>{t(XO(e,Gb.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},o,T_(e))},onSetup:n.onSetup,getApi:T_,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...o?[Ov.config({})]:[]],context:n.context},e,a.shared,r),A_=(t,a,r)=>e=>{e(C(t,e=>{var t,o,n=e.text.fold(()=>({}),e=>({text:e}));return{type:e.type,active:!1,...n,context:e.context,onAction:e=>{var t=!e.isActive();e.setActive(t),o.storage.set(t),r.shared.getSink().each(e=>{a().getOpt(e).each(e=>{xc(e.element),T(e,zS,{name:o.name,value:o.storage.get()})})})},onSetup:(t=o=e,e=>{e.setActive(t.storage.get())})}}))},M_=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":e}},components:[bl(e)]}),D_=(t,o,n)=>{t.customStateIcon.each(e=>o.push(I_(e,n.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],e=>[Nv.config(n.shared.providers.tooltips.getConfig({tooltipText:e}))]),["tox-icon-custom-state"])))},B_=E("leaf-label-event-id"),F_=({leaf:o,onLeafAction:t,visible:n,treeId:a,selectedId:r,backstage:i})=>{let e=o.menu.map(e=>E_(e,"tox-mbtn",i,I.none(),n)),s=[M_(o.title)];return D_(o,s,i),e.each(e=>s.push(e)),wv.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(n?["tox-tree--leaf__label--visible"]:[])},components:s,role:"treeitem",action:e=>{t(o.id),e.getSystem().broadcastOn(["update-active-item-"+a],{value:o.id})},eventOrder:{[mr()]:[B_,"keying"]},buttonBehaviours:H([...n?[Ov.config({})]:[],f.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),vc.config({channels:{["update-active-item-"+a]:{onReceive:(e,t)=>{(t.value===o.id?f.on:f.off)(e)}}}}),B(B_,[li((t,e)=>{r.each(e=>{(e===o.id?f.on:f.off)(t)})}),L(mr(),(t,e)=>{var o="ArrowLeft"===e.event.raw.code,n="ArrowRight"===e.event.raw.code;o?(Ml(t.element,".tox-tree--directory").each(e=>{t.getSystem().getByDom(e).each(t=>{Dl(e,".tox-tree--directory__label").each(e=>{t.getSystem().getByDom(e).each(W.focus)})})}),e.stop()):n&&e.stop()})])])})},I_=(e,t,o,n,a)=>Pb(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(n||[]),behaviours:o,attributes:a},t),R_=E("directory-label-event-id"),N_=({directory:n,visible:e,noChildren:t,backstage:o})=>{let a=n.menu.map(e=>E_(e,"tox-mbtn",o,I.none())),r=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(i=o.shared.providers.icons,I_("chevron-right",i,[]))]},M_(n.title)];var i;D_(n,r,o),a.each(e=>{r.push(e)});let s=o=>{Ml(o.element,".tox-tree--directory").each(e=>{o.getSystem().getByDom(e).each(e=>{var t=!f.isOn(e);f.toggle(e),T(o,"expand-tree-node",{expanded:t,node:n.id})})})};return wv.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(e?["tox-tree--directory__label--visible"]:[])},components:r,action:s,eventOrder:{[mr()]:[R_,"keying"]},buttonBehaviours:H([...e?[Ov.config({})]:[],B(R_,[L(mr(),(o,n)=>{let a="ArrowRight"===n.event.raw.code,r="ArrowLeft"===n.event.raw.code;a&&t&&n.stop(),(a||r)&&Ml(o.element,".tox-tree--directory").each(e=>{o.getSystem().getByDom(e).each(t=>{!f.isOn(t)&&a||f.isOn(t)&&r?(s(o),n.stop()):r&&!f.isOn(t)&&(Ml(t.element,".tox-tree--directory").each(e=>{Dl(e,".tox-tree--directory__label").each(e=>{t.getSystem().getByDom(e).each(W.focus)})}),n.stop())})})})])])})},z_=({children:e,onLeafAction:t,visible:o,treeId:n,expandedIds:a,selectedId:r,backstage:i})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(e=>"leaf"===e.type?F_({leaf:e,selectedId:r,onLeafAction:t,visible:o,treeId:n,backstage:i}):L_({directory:e,expandedIds:a,selectedId:r,onLeafAction:t,labelTabstopping:o,treeId:n,backstage:i})),behaviours:H([__.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:o}),D.config({})])}),V_=E("directory-event-id"),L_=({directory:e,onLeafAction:a,labelTabstopping:t,treeId:r,backstage:i,expandedIds:o,selectedId:s})=>{let l=e.children,c=O(o),n=o.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[N_({directory:e,visible:t,noChildren:0===e.children.length,backstage:i}),z_({children:l,expandedIds:o,selectedId:s,onLeafAction:a,visible:n,treeId:r,backstage:i})],behaviours:H([B(V_,[li((e,t)=>{f.set(e,n)}),L("expand-tree-node",(e,t)=>{let{expanded:o,node:n}=t.event;c.set(o?[...c.get(),n]:c.get().filter(e=>e!==n))})]),f.config({...0<e.children.length?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(e,t)=>{var o,e=e.components()[1],n=(o=t,l.map(e=>"leaf"===e.type?F_({leaf:e,selectedId:s,onLeafAction:a,visible:o,treeId:r,backstage:i}):L_({directory:e,expandedIds:c.get(),selectedId:s,onLeafAction:a,labelTabstopping:o,treeId:r,backstage:i})));t?__.grow(e):__.shrink(e),D.set(e,n)}})])}},H_=E("tree-event-id"),P_=Object.freeze({__proto__:null,events:(e,t)=>{var o=e.stream.streams.setup(e,t);return Zr([L(e.event,o),ci(()=>t.cancel())].concat(e.cancelEvent.map(e=>[L(e,()=>t.cancel())]).getOr([])))}});var us=e=>{let t=O(null);return xi({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{var e=t.get();null!==e&&e.cancel()}})},Hu=Object.freeze({__proto__:null,throttle:us,init:e=>e.stream.streams.state(e)}),U_=[Ca("stream",ba("mode",{throttle:[r("delay"),u("stopEvent",!0),Ms("streams",{setup:(e,t)=>{let o=e.stream,n=mO(e.onStream,o.delay);return t.setTimer(n),(e,t)=>{n.throttle(e,t),o.stopEvent&&t.stop()}},state:us})]})),u("event","input"),d("cancelEvent"),Es("onStream")];let W_=wi({fields:U_,name:"streaming",active:P_,state:Hu}),j_=(e,t,o)=>{o=A.getValue(o);A.setValue(t,o),$_(t)},G_=(e,t)=>{var e=e.element,o=cl(e),n=e.dom;"number"!==Jt(e,"type")&&t(n,o)},$_=e=>{G_(e,(e,t)=>e.setSelectionRange(t.length,t.length))},q_=F("alloy.typeahead.itemexecute"),Y_=F([d("lazySink"),r("fetch"),u("minChars",5),u("responseTime",1e3),e("onOpen"),u("getHotspot",I.some),u("getAnchorOverrides",F({})),u("layouts",I.none()),u("eventOrder",{}),ja("model",{},[u("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),u("selectsOver",!0),u("populateFromBrowse",!0)]),e("onSetValue"),Ts("onExecute"),e("onItemExecute"),u("inputClasses",[]),u("inputAttributes",{}),u("inputStyles",{}),u("matchWidth",!0),u("useMinWidth",!1),u("dismissOnBlur",!0),Os(["openClass"]),d("initialData"),d("listRole"),$u("typeaheadBehaviours",[W,A,W_,U,f,L0]),wa("lazyTypeaheadComp",()=>O(I.none)),wa("previewing",()=>O(!0))].concat(dx()).concat(oS())),X_=F([ym({schema:[ks()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(e,t,o)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(e=>{((n,a,r)=>{if(n.selectsOver){let e=A.getValue(a),t=n.getDisplayText(e),o=A.getValue(r);return 0===n.getDisplayText(o).indexOf(t)?I.some(()=>{var e,o;j_(0,a,r),e=a,o=t.length,G_(e,(e,t)=>e.setSelectionRange(o,t.length))}):I.none()}return I.none()})(n.model,e,o).fold(()=>{n.model.selectsOver?(y.dehighlight(t,o),n.previewing.set(!0)):n.previewing.set(!1)},e=>{e(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(t=>{n.model.populateFromBrowse&&j_(n.model,t,o),Qt(o.element,"id").each(e=>w(t.element,"aria-activedescendant",e))})},onExecute:(e,t)=>n.lazyTypeaheadComp.get().map(e=>(T(e,q_(),{item:t}),!0)),onHover:(e,t)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(e=>{n.model.populateFromBrowse&&j_(n.model,e,t)})}})})]),K_=qm({name:"Typeahead",configFields:Y_(),partFields:X_(),factory:(r,e,t,i)=>{let o=(t,o,n)=>{r.previewing.set(!1);let a=L0.getCoupled(t,"sandbox");if(h.isOpen(a))M.getCurrent(a).each(e=>{y.getHighlighted(e).fold(()=>{n(e)},()=>{Qr(a,e.element,"keydown",o)})});else{let e=e=>{M.getCurrent(e).each(n)};X0(r,s(t),t,a,i,e,Qp.HighlightMenuAndItem).get(S)}},n=ux(r),s=o=>e=>e.map(e=>{var t=Ge(e.menus),t=Ce(t,e=>ve(e.items,e=>"item"===e.type));return A.getState(o).update(C(t,e=>e.data)),e}),a=e=>M.getCurrent(e),l="typeaheadevents",c=[W.config({}),A.config({onSetValue:r.onSetValue,store:{mode:"dataset",getDataKey:e=>cl(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(e,t)=>{dl(e.element,r.model.getDisplayText(t))},...r.initialData.map(e=>$a("initialValue",e)).getOr({})}}),W_.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:(e,t)=>{let o=L0.getCoupled(e,"sandbox");if(W.isFocused(e)&&cl(e.element).length>=r.minChars){let t=a(o).bind(e=>y.getHighlighted(e).map(A.getValue));r.previewing.set(!0);X0(r,s(e),e,o,i,e=>{a(o).each(e=>{t.fold(()=>{r.model.selectsOver&&y.highlightFirst(e)},t=>{y.highlightBy(e,e=>A.getValue(e).value===t.value),y.getHighlighted(e).orThunk(()=>(y.highlightFirst(e),I.none()))})})},Qp.HighlightJustMenu).get(S)}},cancelEvent:Br()}),U.config({mode:"special",onDown:(e,t)=>(o(e,t,y.highlightFirst),I.some(!0)),onEscape:e=>{e=L0.getCoupled(e,"sandbox");return h.isOpen(e)?(h.close(e),I.some(!0)):I.none()},onUp:(e,t)=>(o(e,t,y.highlightLast),I.some(!0)),onEnter:t=>{var e,o=L0.getCoupled(t,"sandbox"),n=h.isOpen(o);return n&&!r.previewing.get()?a(o).bind(e=>y.getHighlighted(e)).map(e=>(T(t,q_(),{item:e}),!0)):(e=A.getValue(t),_(t,Br()),r.onExecute(o,t,e),n&&h.close(o),I.some(!0))}}),f.config({toggleClass:r.markers.openClass,aria:{mode:"expanded"}}),L0.config({others:{sandbox:e=>eS(r,e,{onOpen:()=>f.on(e),onClose:()=>{r.lazyTypeaheadComp.get().each(e=>eo(e.element,"aria-activedescendant")),f.off(e)}})}}),B(l,[li(e=>{r.lazyTypeaheadComp.set(I.some(e))}),ci(e=>{r.lazyTypeaheadComp.set(I.none())}),ui(e=>{var t=S;J0(r,s(e),e,i,t,Qp.HighlightMenuAndItem).get(S)}),L(q_(),(e,t)=>{var o=L0.getCoupled(e,"sandbox");j_(r.model,e,t.event.item),_(e,Br()),r.onItemExecute(e,o,t.event.item,A.getValue(e)),h.close(o),$_(e)})].concat(r.dismissOnBlur?[L(kr(),e=>{e=L0.getCoupled(e,"sandbox");Cc(e.element).isNone()&&h.close(e)})]:[]))],d={[Lr()]:[A.name(),W_.name(),l],...r.eventOrder};return{uid:r.uid,dom:mx(Vn(r,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...n,...Yu(r.typeaheadBehaviours,c)},eventOrder:d}}}),J_=r=>({...r,toCached:()=>J_(r.toCached()),bindFuture:t=>J_(r.bind(e=>e.fold(e=>G0(V.error(e)),e=>t(e)))),bindResult:t=>J_(r.map(e=>e.bind(t))),mapResult:t=>J_(r.map(e=>e.map(t))),mapError:t=>J_(r.map(e=>e.mapError(t))),foldResult:(t,o)=>r.map(e=>e.fold(t,o)),withTimeout:(e,a)=>J_(j0(t=>{let o=!1,n=setTimeout(()=>{o=!0,t(V.error(a()))},e);r.get(e=>{o||(clearTimeout(n),t(e))})}))}),Q_=(e,t,o=[],n,a,r,i)=>{t=t.fold(()=>({}),e=>({action:e})),r={buttonBehaviours:H([jy(()=>!e.enabled||i.checkUiComponentContext(e.context).shouldDisable),ow(()=>i.checkUiComponentContext(e.context)),Ov.config({}),...r.map(e=>Nv.config(i.tooltips.getConfig({tooltipText:i.translate(e)}))).toArray(),B("button press",[ti("click")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...t},o=Vn(r,{dom:n});return Vn(o,{components:a})},Z_=(e,t,o,n=[],a)=>{var a={tag:"button",classes:["tox-tbtn"],attributes:{...e.tooltip.map(e=>({"aria-label":o.translate(e)})).getOr({}),"data-mce-name":a}},r=e.icon.map(e=>HO(e,o.icons)),r=rw([r]);return Q_(e,t,n,a,r,e.tooltip,o)},e1=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},t1=(e,t,o,n=[],a=[])=>{let r=o.translate(e.text),i=e.icon.map(e=>HO(e,o.icons)),s=[i.getOrThunk(()=>bl(r))],l=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),c={tag:"button",classes:[...e1(l),...i.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...a],attributes:{"aria-label":r,"data-mce-name":e.text}},d=e.icon.map(F(r));return Q_(e,t,n,c,s,d,o)},o1=(e,t,o,n=[],a=[])=>{e=t1(e,I.some(t),o,n,a);return wv.sketch(e)},n1=(t,o)=>e=>{"custom"===o?T(e,zS,{name:t,value:{}}):"submit"===o?_(e,VS):"cancel"===o?_(e,NS):console.error("Unknown button type: ",o)},a1=(g,e,p)=>{if("menu"===e){let e=()=>n,t=g,o={...g,type:"menubutton",search:I.none(),onSetup:e=>(e.setEnabled(g.enabled),S),fetch:A_(t.items,e,p)},n=j(E_(o,"tox-tbtn",p,I.none(),!0,g.text.or(g.tooltip).getOrUndefined()));return n.asSpec()}var t;if("custom"===e||"cancel"===e||"submit"===e)return t=n1(g.name,e),v={...g,context:"cancel"===e?"any":g.context,borderless:!1},o1(v,t,p.shared.providers,[]);if("togglebutton"!==e)throw console.error("Unknown footer button type: ",e),new Error("Unknown footer button type");{var h=g,f=p.shared.providers,v=g.text.or(g.tooltip).getOrUndefined();let e,t,n=h.icon.map(e=>PO(e,f.icons)).map(j),o=h.buttonType.getOr(h.primary?"primary":"secondary"),a={...h,name:null!=(e=h.name)?e:"",primary:"primary"===o,tooltip:h.tooltip,enabled:null!=(t=h.enabled)&&t,borderless:!1},r=a.tooltip.or(h.text).map(e=>({"aria-label":f.translate(e)})).getOr({}),i=e1(null!=o?o:"secondary"),s=h.icon.isSome()&&h.text.isSome(),l={tag:"button",classes:[...i.concat(h.icon.isSome()?["tox-button--icon"]:[]),...h.active?["tox-button--enabled"]:[],...s?["tox-button--icon-and-text"]:[]],attributes:{...r,...X(v)?{"data-mce-name":v}:{}}},c=f.translate(h.text.getOr("")),d=bl(c),u=[...rw([n.map(e=>e.asSpec())]),...h.text.isSome()?[d]:[]],m=Q_(a,I.some(o=>{T(o,zS,{name:h.name,value:{setIcon:t=>{n.map(e=>e.getOpt(o).each(e=>{D.set(e,[PO(t,f.icons)])}))}}})}),[],l,u,h.tooltip,f);return wv.sketch(m)}},r1={type:"separator"},i1=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:S}),s1=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:S}),l1=(e,t)=>{return o=e,e=t,t=ve(e,e=>e.type===o),C(t,i1);var o},c1=(e,t)=>{let o=e.toLowerCase();return ve(t,e=>{var t=(void 0!==e.meta&&void 0!==e.meta.text?e.meta:e).text,e=null!=(e=e.value)?e:"";return tt(t.toLowerCase(),o)||tt(e.toLowerCase(),o)})},d1=E("aria-invalid"),u1=(e,t)=>{e.dom.checked=t},m1=e=>e.dom.checked,g1=i=>(t,o,n,a,r)=>k(o,"name").fold(()=>i(o,a,I.none(),r),e=>t.field(e,i(o,a,k(n,e),r))),p1={bar:g1((e,t)=>(e=e,t=t.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:C(e.items,t.interpreter)})),collection:g1((e,t,o)=>WS(e,t.shared.providers,o)),alertbanner:g1((e,t)=>{return o=e,e=t.shared.providers,t=Vb(o.icon,e.icons),kS.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+o.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:o.url?void 0:t},components:o.url?[wv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:t,attributes:{title:e.translate(o.iconTooltip)}},action:e=>T(e,zS,{name:"alert-banner",value:o.url}),buttonBehaviours:H([Lb()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:e.translate(o.text)}}]});var o}),input:g1((e,t,o)=>(e=e,t=t.shared.providers,o=o,d_({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:I.none(),maximized:e.maximized,data:o,context:e.context},t))),textarea:g1((e,t,o)=>(e=e,t=t.shared.providers,o=o,d_({name:e.name,multiline:!0,label:e.label,inputMode:I.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:I.none(),maximized:e.maximized,data:o,context:e.context},t))),label:g1((r,i,e,s)=>{{var l=r,c=(r=i.shared,s);let e="tox-label",t="center"===l.align?[e+"--center"]:[],o="end"===l.align?[e+"--end"]:[],n=j({dom:{tag:"label",classes:[e,...t,...o]},components:[bl(r.providers.translate(l.label))]}),a=C(l.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n.asSpec(),...a],behaviours:H([eO(),D.config({}),(r=I.none(),rO(r,ms,gs)),U.config({mode:"acyclic"}),B("label",[li(t=>{l.for.each(e=>{c(e).each(o=>{n.getOpt(t).each(e=>{var t=null!=(t=Jt(o.element,"id"))?t:E("form-field");w(o.element,"id",t),w(e.element,"for",t)})})})})])])}}}),iframe:(FT=(s,l,c)=>{{var d=l.shared.providers,u=c;let t="tox-dialog__iframe",o=s.transparent?[]:[t+"--opaque"],n=s.border?["tox-navobj-bordered"]:[],a={...s.label.map(e=>({title:e})).getOr({}),...u.map(e=>({srcdoc:e})).getOr({}),...s.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},r=((e,a)=>{let t=O(e.getOr(""));return{getValue:e=>t.get(),setValue:(o,n)=>{if(t.get()!==n){let e=o.element,t=()=>w(e,"srcdoc",n);a?IO.fold(F(FO),e=>e.throttle)(e,n,t):t()}t.set(n)}}})(u,s.streamContent),e=s.label.map(e=>BS(e,d)),i=G.parts.field({factory:{sketch:e=>fO(I.from(n),{uid:e.uid,dom:{tag:"iframe",attributes:a,classes:[t,...o]},behaviours:H([Ov.config({}),W.config({}),aO(u,r.getValue,r.setValue),vc.config({channels:{[OO]:{onReceive:(o,e)=>{e.newFocus.each(t=>{It(o.element).each(e=>{(Tt(o.element,t)?Mi:Bi)(e,"tox-navobj-bordered-focus")})})}}}})])})}});return AS(e,i,["tox-form__group--stretched"],[])}},(e,t,o,n,a)=>{t=Vn(t,{source:"dynamic"});return g1(FT)(e,t,o,n,a)}),button:g1((e,t)=>{return e=e,t=t.shared.providers,o=n1(e.name,"custom"),n=I.none(),e=G.parts.field({factory:wv,...t1(e,I.some(o),t,[iO(""),eO()])}),AS(n,e,[],[]);var o,n}),checkbox:g1((e,t,o)=>{return n=e,a=t.shared.providers,e=o,t=e=>(e.element.dom.click(),I.some(!0)),e=G.parts.field({factory:{sketch:x},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:H([eO(),P.config({disabled:()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable,onDisabled:e=>{It(e.element).each(e=>Mi(e,"tox-checkbox--disabled"))},onEnabled:e=>{It(e.element).each(e=>Bi(e,"tox-checkbox--disabled"))}}),Ov.config({}),W.config({}),rO(e,m1,u1),U.config({mode:"special",onEnter:t,onSpace:t,stopSpaceKeyup:!0}),B("checkbox-events",[L(hr(),(e,t)=>{T(e,FS,{name:n.name})})])])}),t=G.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[bl(a.translate(n.label))],behaviours:H([eC.config({})])}),o=e=>Pb("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},a.icons),o=j({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]}),G.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[e,o.asSpec(),t],fieldBehaviours:H([P.config({disabled:()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable}),ow(()=>a.checkUiComponentContext(n.context))])});var n,a}),colorinput:g1((o,r,i)=>{{var s=o,l=r.shared,c=r.colorinput,d,u;o=i;let e=G.parts.field({factory:gx,inputClasses:["tox-textfield"],data:o,onSetValue:e=>ZS.run(e).get(S),inputBehaviours:H([P.config({disabled:()=>l.providers.isDisabled()||l.providers.checkUiComponentContext(s.context).shouldDisable}),ow(()=>l.providers.checkUiComponentContext(s.context)),Ov.config({}),ZS.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>It(e.element),notify:{onValid:e=>{var t=A.getValue(e);T(e,tC,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{let t=A.getValue(e);if(0===t.length)return G0(V.value(!0));{let e=dt("span");z(e,"background-color",t);var o=so(e,"background-color").fold(()=>V.error("blah"),e=>V.value(t));return G0(o)}}}})]),selectOnFocus:!1}),t=s.label.map(e=>BS(e,l.providers)),n=(e,t)=>{T(e,oC,{value:t})},a=j((d={dom:{tag:"span",attributes:{"aria-label":l.providers.translate("Color swatch")}},layouts:{onRtl:()=>[oc,tc,ic],onLtr:()=>[tc,oc,ic]},components:[],fetch:w0(c.getColors(s.storageKey),s.storageKey,c.hasCustomColors()),columns:c.getColorCols(s.storageKey),presets:"color",onItemAction:(e,o)=>{a.getOpt(e).each(t=>{"custom"===o?c.colorPicker(e=>{e.fold(()=>_(t,nC),e=>{n(t,e),t0(s.storageKey,e)})},"#ffffff"):n(t,"remove"===o?"":o)})},context:s.context},u=l,rS.sketch({dom:d.dom,components:d.components,toggleClass:"mce-active",dropdownBehaviours:H([Gy(()=>u.providers.isDisabled()||u.providers.checkUiComponentContext(d.context).shouldDisable),ow(()=>u.providers.checkUiComponentContext(d.context)),eC.config({}),Ov.config({})]),layouts:d.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:u.getSink,fetch:t=>j0(e=>d.fetch(e)).map(e=>I.from(uS(Vn(A0(E("menu-value"),e,e=>{d.onItemAction(t,e)},d.columns,d.presets,Gb.CLOSE_ON_EXECUTE,ie,u.providers),{movement:M0(d.columns,d.presets)})))),parts:{menu:cx(0,0,d.presets)}})));return G.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:t.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[e,a.asSpec()]}]),fieldBehaviours:H([B("form-field-events",[L(tC,(e,t)=>{a.getOpt(e).each(e=>{z(e.element,"background-color",t.event.color)}),T(e,FS,{name:s.name})}),L(oC,(t,o)=>{G.getField(t).each(e=>{A.setValue(e,o.event.value),M.getCurrent(t).each(W.focus)})}),L(nC,(t,e)=>{G.getField(t).each(e=>{M.getCurrent(t).each(W.focus)})})])])})}}),colorpicker:g1((e,o,n)=>{{var r=o.shared.providers,i;o=n;let e=e=>"tox-"+e,t=Zk(e=>$(e)?i.translate(sO[e]):i.translate(e),e,(i=r).tooltips.getConfig,(e,t,o=e,n=e)=>Pb(o,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:{title:r.translate(n),"aria-live":"polite",...t.fold(()=>({}),e=>({id:e}))}},r.icons)),a=j(t.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:e=>{T(e,zS,{name:"hex-valid",value:!0})},onInvalidHex:e=>{T(e,zS,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[a.asSpec()],behaviours:H([aO(o,e=>{e=a.get(e);return M.getCurrent(e).bind(e=>A.getValue(e).hex).map(e=>"#"+et(e,"#")).getOr("")},(e,t)=>{let o=I.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind(e=>Me(e,1)),n=a.get(e);M.getCurrent(n).fold(()=>{console.log("Can not find form")},e=>{A.setValue(e,{hex:o.getOr("")}),$k.getField(e,"hex").each(e=>{_(e,pr())})})}),eO()])}}}),dropzone:g1((e,t,o)=>((n,a,e)=>{let t=(e,t)=>{t.stop()},o=e=>(t,o)=>{R(e,e=>{e(t,o)})},r=j({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:H([B("input-file-events",[ii(fr()),ii(Ar())])])}),i=n.label.map(e=>BS(e,a)),s=G.parts.field({factory:wv,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[bl(a.translate("Browse for an image")),r.asSpec()],action:e=>{r.get(e).element.dom.click()},buttonBehaviours:H([eO(),iO(e.getOr([])),Ov.config({}),Gy(()=>a.checkUiComponentContext(n.context).shouldDisable),ow(()=>a.checkUiComponentContext(n.context))])}),l={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:H([P.config({disabled:()=>a.checkUiComponentContext(n.context).shouldDisable}),ow(()=>a.checkUiComponentContext(n.context)),f.config({toggleClass:"dragenter",toggleOnExecute:!1}),B("dropzone-events",[L("dragenter",o([t,f.toggle])),L("dragleave",o([t,f.toggle])),L("dragover",t),L("drop",o([t,(e,t)=>{P.isDisabled(e)||(t=t.event.raw,T(e,uO,{files:null==(e=t.dataTransfer)?void 0:e.files}))}])),L(hr(),(e,t)=>{t=t.event.raw.target;T(e,uO,{files:t.files})})])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[bl(a.translate("Drop an image here"))]},s]}]};return AS(i,l,["tox-form__group--stretched"],[B("handle-files",[L(uO,(e,o)=>{G.getField(e).each(e=>{var t;(t=o.event.files)&&(A.setValue(e,((e,t)=>{let o=dO.explode(t.getOption("images_file_types"));return ve(Fe(e),t=>ge(o,e=>nt(t.name.toLowerCase(),"."+e.toLowerCase())))})(t,a)),T(e,FS,{name:n.name}))})})])])})(e,t.shared.providers,o)),grid:g1((e,t)=>(e=e,t=t.shared,{dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:C(e.items,t.interpreter)})),listbox:g1((i,s,l)=>{{var c=i,d=s;i=l;let o=ge(c.items,e=>!KO(e)),t=d.shared.providers,n=i.bind(e=>ZO(c.items,e)).orThunk(()=>De(c.items).filter(KO)),e=c.label.map(e=>BS(e,t)),a=G.parts.field({dom:{},factory:{sketch:e=>GO({context:c.context,uid:e.uid,text:n.map(e=>e.text),icon:I.none(),tooltip:I.none(),role:Qe(!o,"combobox"),...o?{}:{listRole:"listbox"},ariaLabel:c.label,fetch:(e,t)=>{e=QO(e,c.name,c.items,A.getValue(e),o);t(XO(e,Gb.CLOSE_ON_EXECUTE,d,{isHorizontalMenu:!1,search:I.none()}))},onSetup:F(S),getApi:F({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ov.config({}),aO(n.map(e=>e.value),e=>Jt(e.element,JO),(t,e)=>{ZO(c.items,e).each(e=>{w(t.element,JO,e.value),T(t,WO,{text:e.text})})})]},"tox-listbox",d.shared)}}),r={dom:{tag:"div",classes:["tox-listboxfield"]},components:[a]};return G.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Se([e.toArray(),[r]]),fieldBehaviours:H([P.config({disabled:()=>!c.enabled||t.checkUiComponentContext(c.context).shouldDisable,onDisabled:e=>{G.getField(e).each(P.disable)},onEnabled:e=>{G.getField(e).each(P.enable)}})])})}}),selectbox:g1((e,t,o)=>{return n=e,a=t.shared.providers,e=o,t=C(n.items,e=>({text:a.translate(e.text),value:e.value})),o=n.label.map(e=>BS(e,a)),e=G.parts.field({dom:{},...e.map(e=>({data:e})).getOr({}),selectAttributes:{size:n.size},options:t,factory:e_,selectBehaviours:H([P.config({disabled:()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable}),Ov.config({}),B("selectbox-change",[L(hr(),(e,t)=>{T(e,FS,{name:n.name})})])])}),t=1<n.size?I.none():I.some(Pb("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},a.icons)),e={dom:{tag:"div",classes:["tox-selectfield"]},components:Se([[e],t.toArray()])},G.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Se([o.toArray(),[e]]),fieldBehaviours:H([P.config({disabled:()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable,onDisabled:e=>{G.getField(e).each(P.disable)},onEnabled:e=>{G.getField(e).each(P.enable)}}),ow(()=>a.checkUiComponentContext(n.context))])});var n,a}),sizeinput:g1((g,p)=>{{var h=g,f=p.shared.providers;let n=l_,a=E("ratio-event"),e=e=>Pb(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},f.icons),t=()=>!h.enabled||f.checkUiComponentContext(h.context).shouldDisable,r=ow(()=>f.checkUiComponentContext(h.context)),o=h.label.getOr("Constrain proportions"),i=f.translate(o),s=a_.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":i,"data-mce-name":o}},components:[e("lock"),e("unlock")],buttonBehaviours:H([P.config({disabled:t}),r,Ov.config({}),Nv.config(f.tooltips.getConfig({tooltipText:i}))])}),l=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),c=o=>G.parts.field({factory:gx,inputClasses:["tox-textfield"],inputBehaviours:H([P.config({disabled:t}),r,Ov.config({}),B("size-input-events",[L(dr(),(e,t)=>{T(e,a,{isField1:o})}),L(hr(),(e,t)=>{T(e,FS,{name:h.name})})])]),selectOnFocus:!1}),d=e=>({dom:{tag:"label",classes:["tox-label"]},components:[bl(f.translate(e))]}),u=a_.parts.field1(l([G.parts.label(d("Width")),c(!0)])),m=a_.parts.field2(l([G.parts.label(d("Height")),c(!1)]));return a_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[u,m,l([d(""),s])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,o)=>{i_(A.getValue(e)).each(e=>{n(e).each(e=>{A.setValue(t,r_(e))})})},coupledFieldBehaviours:H([P.config({disabled:t,onDisabled:e=>{a_.getField1(e).bind(G.getField).each(P.disable),a_.getField2(e).bind(G.getField).each(P.disable),a_.getLock(e).each(P.disable)},onEnabled:e=>{a_.getField1(e).bind(G.getField).each(P.enable),a_.getField2(e).bind(G.getField).each(P.enable),a_.getLock(e).each(P.enable)}}),ow(()=>f.checkUiComponentContext("mode:design")),B("size-input-events2",[L(a,(e,t)=>{var t=t.event.isField1,o=t?a_.getField1(e):a_.getField2(e),t=t?a_.getField2(e):a_.getField1(e),e=o.map(A.getValue).getOr(""),o=t.map(A.getValue).getOr("");n=c_(e,o)})])])})}}),slider:g1((e,t,o)=>{return n=e,e=t.shared.providers,t=o,e=Lk.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[bl(e.translate(n.label))]}),o=Lk.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=Lk.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}}),Lk.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:F(t.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[e,o,a],sliderBehaviours:H([eO(),W.config({})]),onChoose:(e,t,o)=>{T(e,FS,{name:n.name,value:o})},onChange:(e,t,o)=>{T(e,FS,{name:n.name,value:o})}});var n,a}),urlinput:g1((u,m,g)=>{{var p=u,h=m,f=m.urlinput;u=g;let a=h.shared.providers,r=e=>{e=A.getValue(e);f.addToHistory(e.value,p.filetype)},e={...u.map(e=>({initialData:e})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":d1,type:"url"},minChars:0,responseTime:0,fetch:e=>{e=((n,e,a)=>{let t,o,r=A.getValue(e),i=null!=(o=null==(t=null==r?void 0:r.meta)?void 0:t.text)?o:r.value;return a.getLinkInformation().fold(()=>[],e=>{var t,o=c1(i,(o=a.getHistory(n),C(o,e=>s1(e,e))));return"file"===n?(e=[o,c1(i,(t=e,l1("header",t.targets))),c1(i,Se([(t=e,I.from(t.anchorTop).map(e=>s1("<top>",e)).toArray()),(t=e,l1("anchor",t.targets)),(t=e,I.from(t.anchorBottom).map(e=>s1("<bottom>",e)).toArray())]))],xe(e,(e,t)=>0===e.length||0===t.length?e.concat(t):e.concat(r1,t),[])):o})})(p.filetype,e,f),e=XO(e,Gb.BUBBLE_TO_SANDBOX,h,{isHorizontalMenu:!1,search:I.none()});return G0(e)},getHotspot:e=>c.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(ZS)&&ZS.run(e).get(S)},typeaheadBehaviours:H([...f.getValidationHandler().map(n=>ZS.config({getRoot:e=>It(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{i.getOpt(e).each(e=>{w(e.element,"title",a.translate(t))})}},validator:{validate:e=>{let t=A.getValue(e);return J_(j0(o=>{n({type:p.filetype,url:t.value},e=>{var t;"invalid"===e.status?(t=V.error(e.message),o(t)):(t=V.value(e.message),o(t))})}))},validateOnLoad:!1}})).toArray(),P.config({disabled:()=>!p.enabled||a.checkUiComponentContext(p.context).shouldDisable}),Ov.config({}),B("urlinput-events",[L(pr(),e=>{var t=cl(e.element),o=t.trim();o!==t&&dl(e.element,o),"file"===p.filetype&&T(e,FS,{name:p.name})}),L(hr(),e=>{T(e,FS,{name:p.name}),r(e)}),L(Or(),e=>{T(e,FS,{name:p.name}),r(e)})])]),eventOrder:{[pr()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:h.shared.getSink,parts:{menu:cx(0,0,"normal")},onExecute:(e,t,o)=>{T(t,VS,{})},onItemExecute:(e,t,o,n)=>{r(e),T(e,FS,{name:p.name})}},t=G.parts.field({...e,factory:K_}),o=p.label.map(e=>BS(e,a)),i=j(((e,t,o=e)=>Pb("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:{title:a.translate("invalid"),"aria-live":"polite",...t.fold(()=>({}),e=>({id:e}))}},a.icons))("invalid",I.some(d1))),n=j({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[i.asSpec()]}),s=f.getUrlPicker(p.filetype),l=E("browser.url.event"),c=j({dom:{tag:"div",classes:["tox-control-wrap"]},components:[t,n.asSpec()],behaviours:H([P.config({disabled:()=>!p.enabled||a.checkUiComponentContext(p.context).shouldDisable})])}),d=j(o1({context:p.context,name:p.name,icon:I.some("browse"),text:p.picker_text.or(p.label).getOr(""),enabled:p.enabled,primary:!1,buttonType:I.none(),borderless:!0},e=>_(e,l),a,[],["tox-browse-url"]));return G.sketch({dom:DS([]),components:o.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Se([[c.asSpec()],s.map(()=>d.asSpec()).toArray()])}]),fieldBehaviours:H([P.config({disabled:()=>!p.enabled||a.checkUiComponentContext(p.context).shouldDisable,onDisabled:e=>{G.getField(e).each(P.disable),d.getOpt(e).each(P.disable)},onEnabled:e=>{G.getField(e).each(P.enable),d.getOpt(e).each(P.enable)}}),ow(()=>a.checkUiComponentContext(p.context)),B("url-input-events",[L(l,n=>{M.getCurrent(n).each(t=>{let e=A.getValue(t),o={fieldname:p.name,...e};s.each(e=>{e(o).get(e=>{A.setValue(t,e),T(n,FS,{name:p.name})})})})})])])})}}),customeditor:g1(o=>{let n=On(),t=j({dom:{tag:o.tag}}),a=On(),e=!cO(o)&&o.onFocus.isSome()?[W.config({onFocus:t=>{o.onFocus.each(e=>{e(t.element.dom)})}}),Ov.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:H([B("custom-editor-events",[li(e=>{t.getOpt(e).each(t=>{(cO(o)?o.init(t.element.dom):lO.load(o.scriptId,o.scriptUrl).then(e=>e(t.element.dom,o.settings))).then(t=>{a.on(e=>{t.setValue(e)}),a.clear(),n.set(t)})})})]),aO(I.none(),()=>n.get().fold(()=>a.get().getOr(""),e=>e.getValue()),(e,t)=>{n.get().fold(()=>a.set(t),e=>e.setValue(t))}),eO()].concat(e)),components:[t.asSpec()]}}),htmlpanel:g1((e,t)=>{return o=e,n=t.shared.providers,e=["tox-form__group",...o.stretched?["tox-form__group--stretched"]:[]],t=B("htmlpanel",[li(e=>{o.onInit(e.element.dom)})]),"presentation"===o.presets?kS.sketch({dom:{tag:"div",classes:e,innerHtml:o.html},containerBehaviours:H([Nv.config({...n.tooltips.getConfig({tooltipText:"",onShow:t=>{Bl(t.element,"[data-mce-tooltip]:hover").orThunk(()=>Cc(t.element)).each(e=>{Qt(e,"data-mce-tooltip").each(e=>{Nv.setComponents(t,n.tooltips.getComponents({tooltipText:e}))})})}}),mode:"children-normal",anchor:e=>({type:"node",node:Bl(e.element,"[data-mce-tooltip]:hover").orThunk(()=>Cc(e.element).filter(e=>Qt(e,"data-mce-tooltip").isSome())),root:e.element,layouts:{onLtr:F([ic,rc,tc,nc,oc,ac]),onRtl:F([ic,rc,tc,nc,oc,ac])},bubble:Xc(0,-2,{})})}),t])}):kS.sketch({dom:{tag:"div",classes:e,innerHtml:o.html,attributes:{role:"document"}},containerBehaviours:H([Ov.config({}),W.config({}),t])});var o,n}),imagepreview:g1((o,e,a)=>{{let e=O(a.getOr({url:""})),n=j({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:a.map(e=>({src:e.url})).getOr({})}}),d=j({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[n.asSpec()]}),t={};return o.height.each(e=>t.height=e),o=a.map(e=>({url:e.url,zoom:I.from(e.zoom),cachedWidth:I.from(e.cachedWidth),cachedHeight:I.from(e.cachedHeight)})),{dom:{tag:"div",classes:["tox-imagepreview"],styles:t,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:H([eO(),aO(o,()=>e.get(),(l,t)=>{let c={url:t.url},o=(t.zoom.each(e=>c.zoom=e),t.cachedWidth.each(e=>c.cachedWidth=e),t.cachedHeight.each(e=>c.cachedHeight=e),e.set(c),()=>{let{cachedWidth:o,cachedHeight:n,zoom:e}=c;if(!q(o)&&!q(n)){if(q(e)){a=l.element,r=o,i=n,s=Co(a),a=ho(a);let e=Math.min(s/r,a/i,1);c.zoom=e}let t=((e,t,o,n,a)=>{o*=a,n*=a,a=Math.max(0,e/2-o/2),e=Math.max(0,t/2-n/2);return{left:a.toString()+"px",top:e.toString()+"px",width:o.toString()+"px",height:n.toString()+"px"}})(Co(l.element),ho(l.element),o,n,c.zoom);d.getOpt(l).each(e=>{no(e.element,t)})}var a,r,i,s});n.getOpt(l).each(e=>{var r,e=e.element;t.url!==Jt(e,"src")&&(w(e,"src",t.url),Bi(l.element,"tox-imagepreview__loaded")),o(),r=e,new Promise((e,t)=>{let o=()=>{a(),e(r)},n=[zc(r,"load",o),zc(r,"error",()=>{a(),t("Unable to load data from image: "+r.dom.src)})],a=()=>R(n,e=>e.unbind());r.dom.complete&&o()}).then(e=>{l.getSystem().isConnected()&&(Mi(l.element,"tox-imagepreview__loaded"),c.cachedWidth=e.dom.naturalWidth,c.cachedHeight=e.dom.naturalHeight,o())})})})])}}}),table:g1((e,o)=>{{var n=o.shared.providers;let t=e=>({dom:{tag:"td",innerHtml:n.translate(e)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(o=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:C(o,e=>({dom:{tag:"th",innerHtml:n.translate(e)}}))}]}),(o=e.cells,{dom:{tag:"tbody"},components:C(o,e=>({dom:{tag:"tr"},components:C(e,t)}))})],behaviours:H([Ov.config({}),W.config({})])}}}),tree:g1((t,l)=>{{var c=t,d=l;let n=c.onLeafAction.getOr(S),a=c.onToggleExpand.getOr(S),e=c.defaultExpandedIds,r=O(e),o=O(c.defaultSelectedId),i=E("tree-id"),s=(t,o)=>c.items.map(e=>"leaf"===e.type?F_({leaf:e,selectedId:t,onLeafAction:n,visible:!0,treeId:i,backstage:d}):L_({directory:e,selectedId:t,onLeafAction:n,expandedIds:o,labelTabstopping:!0,treeId:i,backstage:d}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:s(o.get(),r.get()),behaviours:H([U.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),B(H_,[L("expand-tree-node",(e,t)=>{let{expanded:o,node:n}=t.event;r.set(o?[...r.get(),n]:r.get().filter(e=>e!==n)),a(r.get(),{expanded:o,node:n})})]),vc.config({channels:{["update-active-item-"+i]:{onReceive:(e,t)=>{o.set(I.some(t.value)),D.set(e,s(I.some(t.value),r.get()))}}}}),D.config({})])}}}),panel:g1((e,t)=>(t=t,{dom:{tag:"div",classes:(e=e).classes},components:C(e.items,t.shared.interpreter)}))},h1={field:(e,t)=>t,record:F([])},f1=(t,e,o,n,a)=>{let r=Vn(n,{shared:{interpreter:e=>v1(t,e,o,r,a)}});return v1(t,e,o,r,a)},v1=(t,o,n,a,r)=>k(p1,o.type).fold(()=>(console.error(`Unknown factory type "${o.type}", defaulting to container: `,o),o),e=>e(t,o,n,a,r)),b1=(e,t,o,n)=>v1(h1,e,t,o,n),x1="layout-inset",y1=e=>e.x,w1=(e,t)=>e.x+e.width/2-t.width/2,S1=(e,t)=>e.x+e.width-t.width,C1=(e,t)=>e.y+e.height-t.height,k1=(e,t)=>e.y+e.height/2-t.height/2,O1=(e,t,o)=>zl(S1(e,t),C1(e,t),o.insetSouthwest(),Ul(),"southwest",ql(e,{right:0,bottom:3}),x1),_1=(e,t,o)=>zl(y1(e),C1(e,t),o.insetSoutheast(),Pl(),"southeast",ql(e,{left:1,bottom:3}),x1),T1=(e,t,o)=>zl(S1(e,t),e.y,o.insetNorthwest(),Hl(),"northwest",ql(e,{right:0,top:2}),x1),E1=(e,t,o)=>zl(y1(e),e.y,o.insetNortheast(),Ll(),"northeast",ql(e,{left:1,top:2}),x1),A1=(e,t,o)=>zl(w1(e,t),e.y,o.insetNorth(),Wl(),"north",ql(e,{top:2}),x1),M1=(e,t,o)=>zl(w1(e,t),C1(e,t),o.insetSouth(),jl(),"south",ql(e,{bottom:3}),x1),D1=(e,t,o)=>zl(S1(e,t),k1(e,t),o.insetEast(),$l(),"east",ql(e,{right:0}),x1),B1=(e,t,o)=>zl(y1(e),k1(e,t),o.insetWest(),Gl(),"west",ql(e,{left:1}),x1),F1=e=>{switch(e){case"north":return A1;case"northeast":return E1;case"northwest":return T1;case"south":return M1;case"southeast":return _1;case"southwest":return O1;case"east":return D1;case"west":return B1}},I1=(e,t,o,n,a)=>Fc(n).map(F1).getOr(A1)(e,t,o,n,a),R1=e=>{switch(e){case"north":return M1;case"northeast":return _1;case"northwest":return O1;case"south":return A1;case"southeast":return E1;case"southwest":return T1;case"east":return B1;case"west":return D1}},N1=(e,t,o,n,a)=>Fc(n).map(R1).getOr(A1)(e,t,o,n,a),z1={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},V1=(e,t,o)=>{let n={maxHeightFunction:Gc()};return()=>o()?{type:"node",root:Wt(Ut(e())),node:I.from(e()),bubble:Xc(12,12,z1),layouts:{onRtl:()=>[E1],onLtr:()=>[T1]},overrides:n}:{type:"hotspot",hotspot:t(),bubble:Xc(-12,12,z1),layouts:{onRtl:()=>[tc,oc,ic],onLtr:()=>[oc,tc,ic]},overrides:n}},L1=(e,t,o,n)=>{let a={maxHeightFunction:Gc()};return()=>n()?{type:"node",root:Wt(Ut(t())),node:I.from(t()),bubble:Xc(12,12,z1),layouts:{onRtl:()=>[A1],onLtr:()=>[A1]},overrides:a}:e?{type:"node",root:Wt(Ut(t())),node:I.from(t()),bubble:Xc(0,-fo(t()),z1),layouts:{onRtl:()=>[rc],onLtr:()=>[rc]},overrides:a}:{type:"hotspot",hotspot:o(),bubble:Xc(0,0,z1),layouts:{onRtl:()=>[rc],onLtr:()=>[rc]},overrides:a}},H1=(e,t,o)=>()=>o()?{type:"node",root:Wt(Ut(e())),node:I.from(e()),layouts:{onRtl:()=>[A1],onLtr:()=>[A1]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[ic],onLtr:()=>[ic]}},P1=(t,e)=>()=>({type:"selection",root:e(),getSelection:()=>{let e=t.selection.getRng(),n=t.model.table.getSelectedCells();if(1<n.length){let e=n[0],t=n[n.length-1],o={firstCell:N(e),lastCell:N(t)};return I.some(o)}return I.some(yd.range(N(e.startContainer),e.startOffset,N(e.endContainer),e.endOffset))}}),U1=t=>e=>({type:"node",root:t(),node:e}),W1=e=>qe(e,"items"),j1=e=>qe(e,"format"),G1=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],$1=e=>xe(e,(e,t)=>{var o,n;return $e(t,"items")?(n=$1(t.items),{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}):$e(t,"inline")||(n=t,$e(n,"block"))||(o=t,$e(o,"selector"))?(o="custom-"+($(t.name)?t.name:t.title.toLowerCase()),{customFormats:e.customFormats.concat([{name:o,format:t}]),formats:e.formats.concat([{title:t.title,format:o,icon:t.icon}])}):{...e,formats:e.formats.concat(t)}},{customFormats:[],formats:[]}),q1=t=>wf(t).map(e=>{e=((t,e)=>{let o=$1(e),n=e=>{R(e,e=>{t.formatter.has(e.name)||t.formatter.register(e.name,e.format)})};return t.formatter?n(o.customFormats):t.on("init",()=>{n(o.customFormats)}),o.formats})(t,e);return Sf(t)?G1.concat(e):e}).getOr(G1),Y1=(e,t,o)=>({...e,type:"formatter",isSelected:t(e.format),getStylePreview:o(e.format)}),X1=(a,e,r,i)=>{let s=e=>C(e,e=>{return W1(e)?(o=e,n=s(o.items),{...o,type:"submenu",getStyleItems:F(n)}):j1(e)?(o=e,Y1(o,r,i)):(e=>{e=Re(e);return 1===e.length&&me(e,"title")})(e)?{...e,type:"separator"}:(n=e,e=$(n.name)?n.name:E(n.title),t="custom-"+e,n={...n,type:"formatter",format:t,isSelected:r(t),getStylePreview:i(t)},a.formatter.register(e,n),n);var t,o,n});return s(e)},K1=dO.trim,J1=o=>e=>{if(t=e,X(t)&&1===t.nodeType){if(e.contentEditable===o)return!0;if(e.getAttribute("data-mce-contenteditable")===o)return!0}var t;return!1},Q1=J1("true"),Z1=J1("false"),eT=(e,t,o,n,a)=>({type:e,title:t,url:o,level:n,attach:a}),tT=e=>e.innerText||e.textContent,oT=e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name)&&aT(e),nT=e=>e&&/^(H[1-6])$/.test(e.nodeName),aT=e=>(e=>{let t=e;for(;t=t.parentNode;){let e=t.contentEditable;if(e&&"inherit"!==e)return Q1(t)}return!1})(e)&&!Z1(e),rT=e=>nT(e)&&aT(e),iT=e=>{let t,o=e.id||E("h");var n;return eT("header",null!=(t=tT(e))?t:"","#"+o,(n=e,nT(n)?parseInt(n.nodeName.substr(1),10):0),()=>{e.id=o})},sT=e=>{var t=e.id||e.name,e=tT(e);return eT("anchor",e||"#"+t,"#"+t,0,S)},lT=e=>0<K1(e.title).length,cT=e=>{e=e;var t,e=C(Ed(N(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),e=>e.dom);return ve((t=e,C(ve(t,rT),iT).concat((t=e,C(ve(t,oT),sT)))),lT)},dT="tinymce-url-history",uT=e=>$(e)&&/^https?/.test(e),mT=e=>v(e)&&je(e,e=>!(c(e=e)&&e.length<=5&&ke(e,uT))).isNone(),gT=()=>{var e=Qw.getItem(dT);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+dT+" was not valid JSON",e),{};throw e}return mT(t)?t:(console.log("Local storage "+dT+" was not valid format",t),{})},pT=e=>{var t=gT();return k(t,e).getOr([])},hT=(t,e)=>{if(uT(t)){var o=gT(),n=k(o,e).getOr([]),n=ve(n,e=>e!==t),e=(o[e]=[t].concat(n).slice(0,5),o);if(!mT(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Qw.setItem(dT,JSON.stringify(e))}},fT=e=>!!e,vT=e=>Ve(dO.makeMap(e,/[, ]/),fT),bT=e=>I.from(Rf(e)),xT=e=>I.from(e).filter($).getOrUndefined(),yT=n=>({getHistory:pT,addToHistory:hT,getLinkInformation:()=>{return e=n,Lf(e)?I.some({targets:cT(e.getBody()),anchorTop:xT(Hf(e)),anchorBottom:xT(Pf(e))}):I.none();var e},getValidationHandler:()=>{return e=n,I.from(Nf(e));var e},getUrlPicker:e=>{return e=r=e,o=(e=>{let t=I.from(Vf(e)).filter(fT).map(vT);return bT(e).fold(ie,e=>t.fold(se,e=>0<Re(e).length&&e))})(t=a=n),(b(o)?o?bT(t):I.none():o[e]?bT(t):I.none()).map(n=>t=>j0(o=>{var e={filetype:r,fieldname:t.fieldname,...I.from(t.meta).getOr({})};n.call(a,(e,t)=>{if(!$(e))throw new Error("Expected value to be string");if(void 0!==t&&!v(t))throw new Error("Expected meta to be a object");o({value:e,meta:t})},t.value,e)}));var a,r,t,o}}),wT=Hm,ST=km,CT=F([u("shell",!1),r("makeItem"),u("setupItem",S),Xu("listBehaviours",[D])]),kT=wm({name:"items",overrides:()=>({behaviours:H([D.config({})])})}),OT=F([kT]),_T=qm({name:F("CustomList")(),configFields:CT(),partFields:OT(),factory:(i,e,t,o)=>{e=i.shell?{behaviours:[D.config({})],components:[]}:{behaviours:[],components:e};return{uid:i.uid,dom:i.dom,components:e.components,behaviours:Yu(i.listBehaviours,e.behaviours),apis:{setItems:(a,r)=>{var e=a;(i.shell?I.some(e):Bm(e,i,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},t=>{var e=D.contents(t),o=r.length,n=o-e.length,n=0<n?pe(n,()=>i.makeItem()):[],e=e.slice(o),o=(R(e,e=>D.remove(t,e)),R(n,e=>D.append(t,e)),D.contents(t));R(o,(e,t)=>{i.setupItem(a,e,r[t],t)})})}}}},apis:{setItems:(e,t,o)=>{e.setItems(t,o)}}}),TT=F([r("dom"),u("shell",!0),$u("toolbarBehaviours",[D])]),ET=F([wm({name:"groups",overrides:()=>({behaviours:H([D.config({})])})})]),AT=qm({name:"Toolbar",configFields:TT(),partFields:ET(),factory:(o,e,t,n)=>{e=o.shell?{behaviours:[D.config({})],components:[]}:{behaviours:[],components:e};return{uid:o.uid,dom:o.dom,components:e.components,behaviours:Yu(o.toolbarBehaviours,e.behaviours),apis:{setGroups:(e,t)=>{(o.shell?I.some(e):Bm(e,o,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},e=>{D.set(e,t)})},refresh:S},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)}}}),MT=S,DT=ie,BT=F([]);var FT,IT=Object.freeze({__proto__:null,setup:MT,isDocked:DT,getBehaviours:BT});let RT=F(E("toolbar-height-change")),NT={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},zT="tox-tinymce--toolbar-sticky-on",VT="tox-tinymce--toolbar-sticky-off",LT=(e,t)=>me(Is.getModes(e),t),HT=e=>{let a=e.element;It(a).each(t=>{var o,n="padding-"+Is.getModes(e)[0];if(Is.isDocked(e)){let e=Co(t);z(a,"width",e+"px"),z(t,n,(o=a,fo(o)+(parseInt(ro(o,"margin-top"),10)||0)+(parseInt(ro(o,"margin-bottom"),10)||0)+"px"))}else uo(a,"width"),uo(t,n)})},PT=(e,t)=>{t?(Bi(e,NT.fadeOutClass),Ii(e,[NT.transitionClass,NT.fadeInClass])):(Bi(e,NT.fadeInClass),Ii(e,[NT.fadeOutClass,NT.transitionClass]))},UT=(e,t)=>{e=N(e.getContainer());t?(Mi(e,zT),Bi(e,VT)):(Mi(e,VT),Bi(e,zT))},WT=(r,e)=>{let i=On(),o=e.getSink,n=t=>{o().each(e=>t(e.element))},t=e=>{r.inline||HT(e),UT(r,Is.isDocked(e)),e.getSystem().broadcastOn([Au()],{}),o().each(e=>e.getSystem().broadcastOn([Au()],{}))},a=r.inline?[]:[vc.config({channels:{[RT()]:{onReceive:HT}}})];return[W.config({}),Is.config({contextual:{lazyContext:n=>{let a=fo(n.element),e=r.inline?r.getContentAreaContainer():r.getContainer();return I.from(e).map(e=>{let o=xn(N(e));return xv(r,n.element).fold(()=>{var e=o.height-a,t=o.y+(LT(n,"top")?0:a);return bn(o.x,t,o.width,e)},e=>{var e=wn(o,yv(e)),t=LT(n,"top")?e.y:e.y+a;return bn(e.x,t,e.width,e.height-a)})})},onShow:()=>{n(e=>PT(e,!0))},onShown:a=>{n(e=>Ri(e,[NT.transitionClass,NT.fadeInClass])),i.get().each(e=>{{var o=a.element,n=e;let t=At(n);Sc(t).filter(e=>!Tt(n,e)).filter(e=>Tt(e,N(t.dom.body))||Et(o,e)).each(()=>xc(n))}i.clear()})},onHide:e=>{var t;e=e.element,t=o,Cc(e).orThunk(()=>t().toOptional().bind(e=>Cc(e.element))).fold(i.clear,i.set),n(e=>PT(e,!1))},onHidden:()=>{n(e=>Ri(e,[NT.transitionClass]))},...NT},lazyViewport:n=>xv(r,n.element).fold(()=>{var e=Sn(),t=Bf(r),o=e.y+(LT(n,"top")&&!bv(r)?t:0),t=e.height-(LT(n,"bottom")?t:0);return{bounds:bn(e.x,o,e.width,t),optScrollEnv:I.none()}},e=>({bounds:yv(e),optScrollEnv:I.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:yo(e.element).top})})),modes:[e.header.getDockingMode()],onDocked:t,onUndocked:t}),...a]};var jT=Object.freeze({__proto__:null,setup:(e,t,o)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{o().each(Is.reset)}),e.on("ResizeWindow ResizeEditor",()=>{o().each(HT)}),e.on("SkinLoaded",()=>{o().each(e=>{Is.isDocked(e)?Is.reset(e):Is.refresh(e)})}),e.on("FullscreenStateChanged",()=>{o().each(Is.reset)})),e.on("AfterScrollIntoView",u=>{o().each(t=>{Is.refresh(t);t=t.element;if(tp(t)){var e=u,o=At(t),n=Bt(t).dom.innerHeight,a=cn(o),e=N(e.elm),r=yn(e),i=ho(e),e=(r=r.y)+i,s=yo(t),t=ho(t),l=(s=s.top)+t,c=Math.abs(s-a.top)<2,d=Math.abs(l-(a.top+n))<2;if(c&&r<l)dn(a.left,r-t,o);else if(d&&s<e){let e=r-n+i+t;dn(a.left,e,o)}}})}),e.on("PostRender",()=>{UT(e,!1)})},isDocked:e=>e().map(Is.isDocked).getOr(!1),getBehaviours:WT});let GT=i([Dx,Ca("items",ea([oa([Bx,Aa("items",ia)]),ia]))].concat(ly)),$T=[Ba("text"),Ba("tooltip"),Ba("icon"),za("search",!1,ea([sa,i([Ba("placeholder")])],e=>b(e)?e?I.some({placeholder:I.none()}):I.none():I.some(e))),_a("fetch"),Ua("onSetup",()=>S),La("context","mode:design")],qT=i([Dx,...$T]),YT=e=>pa("menubutton",qT,e),XT=i([Dx,qx,$x,jx,Kx,Vx,Ux,Ha("presets","normal",["normal","color","listpreview"]),ty(1),Hx,Px,La("context","mode:design")]);var KT=$m({factory:(t,o)=>{var e={focus:U.focusIn,setMenus:(e,t)=>{t=C(t,t=>{var e={type:"menubutton",text:t.text,fetch:e=>{e(t.getItems())},context:"any"},e=YT(e).mapError(e=>va(e)).getOrDie();return E_(e,"tox-mbtn",o.backstage,I.some("menuitem"))});D.set(e,t)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:H([D.config({}),B("menubar-events",[li(e=>{t.onSetup(e)}),L(cr(),(o,e)=>{Bl(o.element,".tox-mbtn--active").each(t=>{Fl(e.event.target,".tox-mbtn").each(e=>{Tt(t,e)||o.getSystem().getByDom(t).each(t=>{o.getSystem().getByDom(e).each(e=>{rS.expand(e),rS.close(t),W.focus(e)})})})})}),L(Ur(),(o,e)=>{e.event.prevFocus.bind(e=>o.getSystem().getByDom(e).toOptional()).each(t=>{e.event.newFocus.bind(e=>o.getSystem().getByDom(e).toOptional()).each(e=>{rS.isOpen(t)&&(rS.expand(e),rS.close(t))})})})]),U.config({mode:"flow",selector:".tox-mbtn",onEscape:e=>(t.onEscape(e),I.some(!0))}),Ov.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[r("dom"),r("uid"),r("onEscape"),r("backstage"),u("onSetup",S)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,o)=>{e.setMenus(t,o)}}});let JT="container",QT=[$u("slotBehaviours",[])],ZT=e=>"<alloy.field."+e+">",eE=(a,e)=>{let t=e=>Nm(a),o=(o,n)=>(e,t)=>Bm(e,a,t).map(e=>o(e,t)).getOr(n),n=(e,t)=>"true"!==Jt(e.element,"aria-hidden"),r=o(n,!1),i=o((e,t)=>{var o;n(e)&&(o=e.element,z(o,"display","none"),w(o,"aria-hidden","true"),T(e,Wr(),{name:t,visible:!1}))}),s=(t,e)=>{R(e,e=>d(t,e))},l=o((e,t)=>{var o;n(e)||(o=e.element,uo(o,"display"),eo(o,"aria-hidden"),T(e,Wr(),{name:t,visible:!0}))}),c={getSlotNames:t,getSlot:(e,t)=>Bm(e,a,t),isShowing:r,hideSlot:d=i,hideAllSlots:e=>s(e,t()),showSlot:l};var d;return{uid:a.uid,dom:a.dom,components:e,behaviours:qu(a.slotBehaviours),apis:c}},tE={...Ve({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,o)=>e.getSlot(t,o),isShowing:(e,t,o)=>e.isShowing(t,o),hideSlot:(e,t,o)=>e.hideSlot(t,o),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,o)=>e.showSlot(t,o)},e=>Zs(e)),sketch:e=>{var t=(()=>{let o=[];return{slot:(e,t)=>(o.push(e),Tm(JT,ZT(e),t)),record:F(o)}})(),e=e(t),t=t.record(),t=C(t,e=>xm({name:e,pname:ZT(e)}));return Um(JT,QT,t,eE,e)}},oE=i([$x,qx,Ua("onShow",S),Ua("onHide",S),Ux]),nE=e=>({element:()=>e.element.dom}),aE=t=>tE.sketch(e=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:((o,n)=>{let a=C(Re(n),e=>{var t=n[e],t=ha((t=t,pa("sidebar",oE,t)));return{name:e,getApi:nE,onSetup:t.onSetup,onShow:t.onShow,onHide:t.onHide}});return C(a,e=>{var t=O(S);return o.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Wy([Xy(e,t),Ky(e,t),L(Wr(),(t,e)=>{let o=e.event,n=ye(a,e=>e.name===o.name);n.each(e=>{(o.visible?e.onShow:e.onHide)(e.getApi(t))})})])})})})(e,t),slotBehaviours:Wy([li(e=>tE.hideAllSlots(e))])})),rE=(e,t)=>{w(e,"role",t)},iE=e=>M.getCurrent(e).bind(e=>__.isGrowing(e)||__.hasGrown(e)?M.getCurrent(e).bind(t=>ye(tE.getSlotNames(t),e=>tE.isShowing(t,e))):I.none()),sE=E("FixSizeEvent"),lE=E("AutoSizeEvent"),cE=Object.freeze({__proto__:null,block:(e,t,o,n)=>{w(e.element,"aria-busy",!0);let a=t.getRoot(e).getOr(e),r=H([U.config({mode:"special",onTab:()=>I.some(!0),onShiftTab:()=>I.some(!0)}),W.config({})]),i=n(a,r),s=a.getSystem().build(i);D.append(a,Cl(s)),s.hasConfigured(U)&&t.focus&&U.focusIn(s),o.isBlocked()||t.onBlock(e),o.blockWith(()=>D.remove(a,s))},unblock:(e,t,o)=>{eo(e.element,"aria-busy"),o.isBlocked()&&t.onUnblock(e),o.clear()},isBlocked:(e,t,o)=>o.isBlocked()}),dE=[Ua("getRoot",I.none),Pa("focus",!0),e("onBlock"),e("onUnblock")],uE=wi({fields:dE,name:"blocking",apis:cE,state:Object.freeze({__proto__:null,init:()=>{let t=Cn(e=>e.destroy());return xi({readState:t.isSet,blockWith:e=>{t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),mE=e=>M.getCurrent(e).each(e=>xc(e.element,!0)),gE=(c,d,u)=>{let m=O(!1),o=On(),t=e=>{var t;!m.get()||"focusin"===(t=e).type&&(t.composed?De(t.composedPath()):I.from(t.target)).map(N).filter(xt).exists(e=>Fi(e,"mce-pastebin"))||(e.preventDefault(),mE(d()),c.editorManager.setActive(c))},n=(c.inline||c.on("PreInit",()=>{c.dom.bind(c.getWin(),"focusin",t),c.on("BeforeExecCommand",e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&t(e)})}),e=>{if(e!==m.get()){m.set(e);var o,t=c,n=d(),a=e,r=u.providers,i=n.element;{var s=t,l=a;let o="tabindex",n="data-mce-"+o;I.from(s.iframeElement).map(N).each(t=>{l?(Qt(t,o).each(e=>w(t,n,e)),w(t,o,-1)):(eo(t,o),Qt(t,n).each(e=>{w(t,o,e),eo(t,n)}))})}if(a)uE.block(n,(o=r,(e,t)=>({dom:{tag:"div",attributes:{"aria-label":o.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Sv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))),uo(i,"display"),eo(i,"aria-hidden"),t.hasFocus()&&mE(n);else{let e=M.getCurrent(n).exists(e=>wc(e.element));uE.unblock(n),z(i,"display","none"),w(i,"aria-hidden","true"),e&&t.focus()}c.dispatch("AfterProgressState",{state:e})}});c.on("ProgressState",e=>{var t;o.on(clearTimeout),J(e.time)?(t=af.setEditorTimeout(c,()=>n(e.state),e.time),o.set(t)):(n(e.state),o.clear())})},pE=(e,t,o)=>({within:e,extra:t,withinWidth:o}),hE=(e,t,a)=>{var e=xe(e,(t,e)=>{return e=e,o=t.len,n=a(e),I.some({element:e,start:o,finish:o+n,width:n}).fold(F(t),e=>({len:e.finish,list:t.list.concat([e])}));var o,n},{len:0,list:[]}).list,o=ve(e,e=>e.finish<=t),n=be(o,(e,t)=>e+t.width,0);return{within:o,extra:e.slice(o.length),withinWidth:n}},fE=e=>C(e,e=>e.element),vE=(e,t)=>{t=C(t,e=>Cl(e));AT.setGroups(e,t)},bE=(e,t,o)=>{var n,a,r,i,s,l,c,d,u,m,g=t.builtGroups.get();0!==g.length&&(n=Fm(e,t,"primary"),e=L0.getCoupled(e,"overflowGroup"),z(n.element,"visibility","hidden"),g=g.concat([e]),a=Ie(g,t=>Cc(t.element).bind(e=>t.getSystem().getByDom(e).toOptional())),o([]),vE(n,g),r=Co(n.element),i=t.builtGroups.get(),l=e,g=((e,t,o)=>{t=hE(t,e,o);return 0===t.extra.length?I.some(t):I.none()})(r,i,s=e=>Math.ceil(e.element.dom.getBoundingClientRect().width)).getOrThunk(()=>hE(i,r-s(l),s)),t=g.within,m=g.extra,g=g.withinWidth,0===(g=1===m.length&&m[0].width<=s(l)?(d=t,c=m,u=g,d=fE(d.concat(c)),pE(d,[],u)):1<=m.length?(c=t,d=m,u=l,m=g,c=fE(c).concat([u]),pE(c,fE(d),m)):(m=t,t=g,pE(fE(m),[],t))).extra.length?(D.remove(n,e),o([])):(vE(n,g.within),o(g.extra)),uo(n.element,"visibility"),mo(n.element),a.each(W.focus))},xE=F([$u("splitToolbarBehaviours",[L0]),wa("builtGroups",()=>O([]))]),yE=F([Os(["overflowToggledClass"]),Ia("getOverflowBounds"),r("lazySink"),wa("overflowGroups",()=>O([])),e("onOpened"),e("onClosed")].concat(xE())),wE=F([xm({factory:AT,schema:TT(),name:"primary"}),ym({schema:TT(),name:"overflow"}),ym({name:"overflow-button"}),ym({name:"overflow-group"})]),SE=F((e,t)=>{t=Math.floor(t);t=So.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),z(e,"max-width",t+"px")}),CE=F([Os(["toggledClass"]),r("lazySink"),_a("fetch"),Ia("getBounds"),Na("fireDismissalEventInstead",[u("event",Hr())]),od(),e("onToggled")]),kE=F([ym({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:H([f.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),ym({factory:AT,schema:TT(),name:"toolbar",overrides:t=>({toolbarBehaviours:H([U.config({mode:"cyclic",onEscape:e=>(Bm(e,t,"button").each(W.focus),I.none())})])})})]),OE=On(),_E=(e,t)=>{e=L0.getCoupled(e,"toolbarSandbox");h.isOpen(e)?h.close(e):h.open(e,t.toolbar())},TE=(e,t,o,n)=>{var a=o.getBounds.map(e=>e()),o=o.lazySink(e).getOrDie();ou.positionWithinBounds(o,t,{anchor:{type:"hotspot",hotspot:e,layouts:n,overrides:{maxWidthFunction:SE()}}},a)},EE=(e,t,o,n,a)=>{AT.setGroups(t,a),TE(e,t,o,n),f.on(e)},AE=qm({name:"FloatingToolbarButton",factory:(s,e,l,o)=>({...wv.sketch({...o.button(),action:e=>{_E(e,o)},buttonBehaviours:Ku({dump:o.button().buttonBehaviours},[L0.config({others:{toolbarSandbox:e=>{{var a=e,r=l,i=s;let n=Rl();return{dom:{tag:"div",attributes:{id:n.id}},behaviours:H([U.config({mode:"special",onEscape:e=>(h.close(e),I.some(!0))}),h.config({onOpen:(e,t)=>{let o=OE.get().getOr(!1);i.fetch().get(e=>{EE(a,t,i,r.layouts,e),n.link(a.element),o||U.focusIn(t)})},onClose:()=>{f.off(a),OE.get().getOr(!1)||W.focus(a),n.unlink(a.element)},isPartOf:(e,t,o)=>Nl(t,o)||Nl(a,o),getAttachPoint:()=>i.lazySink(a).getOrDie()}),vc.config({channels:{...Bu({isExtraPart:ie,...i.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...Iu({doReposition:()=>{h.getState(L0.getCoupled(a,"toolbarSandbox")).each(e=>{TE(a,e,i,r.layouts)})}})}})])}}}}})])}),apis:{setGroups:(t,o)=>{h.getState(L0.getCoupled(t,"toolbarSandbox")).each(e=>{EE(t,e,s,l.layouts,o)})},reposition:t=>{h.getState(L0.getCoupled(t,"toolbarSandbox")).each(e=>{TE(t,e,s,l.layouts)})},toggle:e=>{_E(e,o)},toggleWithoutFocusing:e=>{var t;e=e,t=o,OE.set(!0),_E(e,t),OE.clear()},getToolbar:e=>h.getState(L0.getCoupled(e,"toolbarSandbox")),isOpen:e=>h.isOpen(L0.getCoupled(e,"toolbarSandbox"))}}),configFields:CE(),partFields:kE(),apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),ME=F([r("items"),Os(["itemSelector"]),$u("tgroupBehaviours",[U])]),DE=F([Sm({name:"items",unit:"item"})]),BE=qm({name:"ToolbarGroup",configFields:ME(),partFields:DE(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Yu(e.tgroupBehaviours,[U.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),FE=e=>C(e,e=>Cl(e)),IE=(e,o,n)=>{bE(e,n,t=>{n.overflowGroups.set(t),o.getOpt(e).each(e=>{AE.setGroups(e,FE(t))})})},RE=qm({name:"SplitFloatingToolbar",configFields:yE(),partFields:wE(),factory:(o,e,t,n)=>{let a=j(AE.sketch({fetch:()=>j0(e=>{e(FE(o.overflowGroups.get()))}),layouts:{onLtr:()=>[oc,tc],onRtl:()=>[tc,oc],onBottomLtr:()=>[ac,nc],onBottomRtl:()=>[nc,ac]},getBounds:t.getOverflowBounds,lazySink:o.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:o.markers.overflowToggledClass},parts:{button:n["overflow-button"](),toolbar:n.overflow()},onToggled:(e,t)=>o[t?"onOpened":"onClosed"](e)}));return{uid:o.uid,dom:o.dom,components:e,behaviours:Yu(o.splitToolbarBehaviours,[L0.config({others:{overflowGroup:()=>BE.sketch({...n["overflow-group"](),items:[a.asSpec()]})}})]),apis:{setGroups:(e,t)=>{o.builtGroups.set(C(t,e.getSystem().build)),IE(e,a,o)},refresh:e=>IE(e,a,o),toggle:e=>{a.getOpt(e).each(e=>{AE.toggle(e)})},toggleWithoutFocusing:e=>{a.getOpt(e).each(AE.toggleWithoutFocusing)},isOpen:e=>a.getOpt(e).map(AE.isOpen).getOr(!1),reposition:e=>{a.getOpt(e).each(e=>{AE.reposition(e)})},getOverflow:e=>a.getOpt(e).bind(AE.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),NE=F([Os(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),e("onOpened"),e("onClosed")].concat(xE())),zE=F([xm({factory:AT,schema:TT(),name:"primary"}),xm({factory:AT,schema:TT(),name:"overflow",overrides:t=>({toolbarBehaviours:H([__.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:e=>{Bm(e,t,"overflow-button").each(e=>{f.off(e)}),t.onClosed(e)},onGrown:e=>{t.onOpened(e)},onStartGrow:e=>{Bm(e,t,"overflow-button").each(f.on)}}),U.config({mode:"acyclic",onEscape:e=>(Bm(e,t,"overflow-button").each(W.focus),I.some(!0))})])})}),ym({name:"overflow-button",overrides:e=>({buttonBehaviours:H([f.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ym({name:"overflow-group"})]),VE=(e,a,r)=>{Bm(e,a,"overflow-button").each(n=>{Bm(e,a,"overflow").each(o=>{if(LE(e,a),__.hasShrunk(o)){let t=a.onOpened;a.onOpened=e=>{r||U.focusIn(o),t(e),a.onOpened=t}}else{let t=a.onClosed;a.onClosed=e=>{r||W.focus(n),t(e),a.onClosed=t}}__.toggleGrow(o)})})},LE=(e,o)=>{Bm(e,o,"overflow").each(t=>{bE(e,o,e=>{e=C(e,e=>Cl(e));AT.setGroups(t,e)}),Bm(e,o,"overflow-button").each(e=>{__.hasGrown(t)&&f.on(e)}),__.refresh(t)})},HE=qm({name:"SplitSlidingToolbar",configFields:NE(),partFields:zE(),factory:(n,e,t,o)=>{let a="alloy.toolbar.toggle";return{uid:n.uid,dom:n.dom,components:e,behaviours:Yu(n.splitToolbarBehaviours,[L0.config({others:{overflowGroup:t=>BE.sketch({...o["overflow-group"](),items:[wv.sketch({...o["overflow-button"](),action:e=>{_(t,a)}})]})}}),B("toolbar-toggle-events",[L(a,e=>{VE(e,n,!1)})])]),apis:{setGroups:(e,t)=>{var o=e;t=C(t,o.getSystem().build),n.builtGroups.set(t),LE(e,n)},refresh:e=>LE(e,n),toggle:e=>{VE(e,n,!1)},toggleWithoutFocusing:e=>{VE(e,n,!0)},isOpen:e=>{return e=e,t=n,Bm(e,t,"overflow").map(__.hasGrown).getOr(!1);var t}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),PE=e=>{var t=e.label.isNone()?e.title.fold(()=>({}),e=>({attributes:{"aria-label":e}})):e.label.fold(()=>({}),e=>({attributes:{"aria-label":e}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(e.label.isSome()?["tox-toolbar__group_with_label"]:[]),...t},components:[...e.label.map(e=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[bl(e)]})).toArray(),BE.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:H([Ov.config({}),W.config({ignore:!0})])}},UE=e=>BE.sketch(PE(e)),WE=(o,e)=>{var t=li(e=>{var t=C(o.initGroups,UE);AT.setGroups(e,t)});return H([qy(()=>o.providers.checkUiComponentContext("any").shouldDisable),ow(()=>o.providers.checkUiComponentContext("any")),U.config({mode:e,onEscape:o.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),B("toolbar-events",[t])])},jE=e=>{var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":PE({title:I.none(),label:I.none(),items:[]}),"overflow-button":Z_({context:"any",name:"more",icon:I.some("more-drawer"),enabled:!0,tooltip:I.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:I.none(),borderless:!1},I.none(),e.providers,[],"overflow-button")},splitToolbarBehaviours:WE(e,t)}},GE=e=>{var t=e.cyclicKeying?"cyclic":"acyclic";return AT.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===tf.scrolling?["tox-toolbar--scrolling"]:[])},components:[AT.parts.groups({})],toolbarBehaviours:WE(e,t)})},$E=[jx,$x,Ba("tooltip"),Ha("buttonType","secondary",["primary","secondary"]),Pa("borderless",!1),_a("onAction"),La("context","mode:design")],qE={button:[...$E,Ix,Oa("type",["button"])],togglebutton:[...$E,Pa("active",!1),Oa("type",["togglebutton"])]},YE=[Oa("type",["group"]),Wa("buttons",[],ba("type",qE))],XE=ba("type",{...qE,group:YE}),KE=i([Wa("buttons",[],XE),_a("onShow"),_a("onHide")]),JE=(p,h)=>{{var f=p,v=h;let e,t,n="togglebutton"===f.type,a=f.icon.map(e=>PO(e,v.icons)).map(j),o={...f,name:n?f.text.getOr(f.icon.getOr("")):null!=(e=f.text)?e:f.icon.getOr(""),primary:"primary"===f.buttonType,buttonType:I.from(f.buttonType),tooltip:f.tooltip,icon:f.icon,enabled:!0,borderless:f.borderless},r=e1(null!=(t=f.buttonType)?t:"secondary"),i=n?f.text.map(v.translate):I.some(v.translate(f.text)),s=i.map(bl),l=o.tooltip.or(i).map(e=>({"aria-label":v.translate(e)})).getOr({}),c=a.map(e=>e.asSpec()),d=rw([c,s]),u=f.icon.isSome()&&s.isSome(),m={tag:"button",classes:r.concat(...f.icon.isSome()&&!u?["tox-button--icon"]:[]).concat(...u?["tox-button--icon-and-text"]:[]).concat(...f.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===f.type&&f.active?["tox-button--enabled"]:[]),attributes:l},g=Q_(o,I.some(o=>{var e=t=>{a.map(e=>e.getOpt(o).each(e=>{D.set(e,[PO(t,v.icons)])}))};return n?f.onAction({setIcon:e,setActive:e=>{var t=o.element;e?(Mi(t,"tox-button--enabled"),w(t,"aria-pressed",!0)):(Bi(t,"tox-button--enabled"),eo(t,"aria-pressed"))},isActive:()=>Fi(o.element,"tox-button--enabled"),focus:()=>xc(o.element)}):"button"===f.type?f.onAction({setIcon:e}):void 0}),[],m,d,f.tooltip,v);return wv.sketch(g)}},QE=Jo().deviceType,ZE=QE.isPhone(),eA=QE.isTablet();var tA=qm({name:"silver.View",configFields:[r("viewConfig")],partFields:[wm({factory:{sketch:n=>{let a=!1;var e=C(n.buttons,e=>{return"group"===e.type?(a=!0,t=e,o=n.providers,{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:C(t.buttons,e=>JE(e,o))}):JE(e,n.providers);var t,o});return{uid:n.uid,dom:{tag:"div",classes:[a?"tox-view__toolbar":"tox-view__header",...ZE||eA?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:H([W.config({}),U.config({mode:"flow",selector:"button, .tox-button",focusInside:Lu.OnEnterOrSpaceMode})]),components:a?e:[kS.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),kS.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:e})]}}},schema:[r("buttons"),r("providers")],name:"header"}),wm({factory:{sketch:e=>({uid:e.uid,behaviours:H([W.config({}),Ov.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(t,e,o,n)=>{var a={getPane:e=>wT.getPart(e,t,"pane"),getOnShow:e=>t.viewConfig.onShow,getOnHide:e=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:e,behaviours:H([W.config({}),U.config({mode:"cyclic",focusInside:Lu.OnEnterOrSpaceMode})]),apis:a}},apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});let oA=(t,a)=>tE.sketch(e=>{return{dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:(o=e,e=t,n=a,We(e,(e,t)=>{e=ha(pa("view",KE,e));return o.slot(t,tA.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:e,components:[...0<e.buttons.length?[tA.parts.header({buttons:e.buttons,providers:n})]:[],tA.parts.pane({})]}))})),slotBehaviours:Wy([li(e=>tE.hideAllSlots(e))])};var o,n}),nA=t=>ye(tE.getSlotNames(t),e=>tE.isShowing(t,e)),aA=(e,t,o)=>{tE.getSlot(e,t).each(t=>{tA.getPane(t).each(e=>{o(t)((e=e.element.dom,{getContainer:F(e)}))})})};var rA,iA=$m({factory:(e,o)=>{var t={setViews:(e,t)=>{D.set(e,[oA(t,o.backstage.shared.providers)])},whichView:e=>M.getCurrent(e).bind(nA),toggleView:(r,i,s,l)=>M.getCurrent(r).exists(o=>{var e,t=nA(o),n=t.exists(e=>l===e),a=tE.getSlot(o,l).isSome();return a&&(tE.hideAllSlots(o),n?(n=r.element,z(n,"display","none"),w(n,"aria-hidden","true"),i()):(s(),n=r.element,uo(n,"display"),eo(n,"aria-hidden"),tE.showSlot(o,l),n=o,e=l,aA(n,e,tA.getOnShow)),t.each(e=>{return t=o,e=e,aA(t,e,tA.getOnHide);var t})),a})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:H([D.config({}),M.config({find:e=>{e=D.contents(e);return De(e)}})]),apis:t}},name:"silver.ViewWrapper",configFields:[r("backstage")],apis:{setViews:(e,t,o)=>e.setViews(t,o),toggleView:(e,t,o,n,a)=>e.toggleView(t,o,n,a),whichView:(e,t)=>e.whichView(t)}}),ds=ST.optional({factory:KT,name:"menubar",schema:[r("backstage")]}),us=ST.optional({factory:{sketch:e=>_T.sketch({uid:e.uid,dom:e.dom,listBehaviours:H([U.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>GE({type:e.type,uid:E("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),I.some(!0))}),setupItem:(e,t,o,n)=>{AT.setGroups(t,o)},shell:!0})},name:"multiple-toolbar",schema:[r("dom"),r("onEscape")]}),U_=ST.optional({factory:{sketch:o=>(o.type===tf.sliding?t=>{var e=HE.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=HE.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),n=jE(t);return HE.sketch({...n,components:[e,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:e=>{e.getSystem().broadcastOn([RT()],{type:"opened"}),t.onToggled(e,!0)},onClosed:e=>{e.getSystem().broadcastOn([RT()],{type:"closed"}),t.onToggled(e,!1)}})}:o.type===tf.floating?n=>{var e=jE(n),t=RE.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return RE.sketch({...e,lazySink:n.getSink,getOverflowBounds:()=>{var e=n.moreDrawerData.lazyHeader().element,t=yn(e),e=Dt(e),o=yn(e),e=Math.max(e.dom.scrollHeight,o.height);return bn(t.x+4,o.y,t.width-8,e)},parts:{...e.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[t],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:e=>n.onToggled(e,!0),onClosed:e=>n.onToggled(e,!1)})}:GE)({type:o.type,uid:o.uid,onEscape:()=>(o.onEscape(),I.some(!0)),onToggled:(e,t)=>o.onToolbarToggled(t),cyclicKeying:!1,initGroups:[],getSink:o.getSink,providers:o.providers,moreDrawerData:{lazyToolbar:o.lazyToolbar,lazyMoreButton:o.lazyMoreButton,lazyHeader:o.lazyHeader},attributes:o.attributes})},name:"toolbar",schema:[r("dom"),r("onEscape"),r("getSink")]}),Hu=ST.optional({factory:{sketch:e=>{var t=e.editor,o=e.sticky?WT:BT;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:H(o(t,e.sharedBackstage))}}},name:"header",schema:[r("dom")]}),sA=ST.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"Upgrade"}}]})},name:"promotion",schema:[r("dom")]}),lA=ST.optional({name:"socket",schema:[r("dom")]}),cA=ST.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:H([Ov.config({}),W.config({}),__.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{M.getCurrent(e).each(tE.hideAllSlots),_(e,lE)},onGrown:e=>{_(e,lE)},onStartGrow:e=>{T(e,sE,{width:so(e.element,"width").getOr("")})},onStartShrink:e=>{T(e,sE,{width:Co(e.element)+"px"})}}),D.config({}),M.config({find:e=>{e=D.contents(e);return De(e)}})])}],behaviours:H([tO(0),B("sidebar-sliding-events",[L(sE,(e,t)=>{z(e.element,"width",t.event.width)}),L(lE,(e,t)=>{uo(e.element,"width")})])])})},name:"sidebar",schema:[r("dom")]}),dA=ST.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:H([D.config({}),uE.config({focus:!1}),M.config({find:e=>De(e.components())})]),components:[]})},name:"throbber",schema:[r("dom")]}),uA=ST.optional({factory:iA,name:"viewWrapper",schema:[r("backstage")]}),mA=ST.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]}),gA=qm({name:"OuterContainer",factory:(n,e,t)=>{let o=!1,a=e=>{var t,o;t=".tox-statusbar",((e=(o=e=e).dom).parentNode?El(N(e.parentNode),e=>!Tt(o,e)&&kt(e,t)):I.none()).each(e=>{"none"===ro(e,"display")&&"true"===Jt(e,"aria-hidden")?(uo(e,"display"),eo(e,"aria-hidden")):(z(e,"display","none"),w(e,"aria-hidden","true"))})},r={getSocket:e=>wT.getPart(e,n,"socket"),setSidebar:(e,t,o)=>{wT.getPart(e,n,"sidebar").each(e=>{var n,a,r;n=e,a=t,r=o,M.getCurrent(n).each(t=>{D.set(t,[aE(a)]);let o=null==r?void 0:r.toLowerCase();$(o)&&$e(a,o)&&M.getCurrent(t).each(e=>{tE.showSlot(e,o),__.immediateGrow(t),uo(t.element,"width"),rE(n.element,"region")})})})},toggleSidebar:(e,t)=>{wT.getPart(e,n,"sidebar").each(e=>{var o,n;o=e,n=t,M.getCurrent(o).each(t=>{M.getCurrent(t).each(e=>{__.hasGrown(t)?tE.isShowing(e,n)?(__.shrink(t),rE(o.element,"presentation")):(tE.hideAllSlots(e),tE.showSlot(e,n),rE(o.element,"region")):(tE.hideAllSlots(e),tE.showSlot(e,n),__.grow(t),rE(o.element,"region"))})})})},whichSidebar:e=>wT.getPart(e,n,"sidebar").bind(iE).getOrNull(),getHeader:e=>wT.getPart(e,n,"header"),getToolbar:e=>wT.getPart(e,n,"toolbar"),setToolbar:(e,o)=>{wT.getPart(e,n,"toolbar").each(e=>{var t=C(o,UE);e.getApis().setGroups(e,t)})},setToolbars:(e,o)=>{wT.getPart(e,n,"multiple-toolbar").each(e=>{var t=C(o,e=>C(e,UE));_T.setItems(e,t)})},refreshToolbar:e=>{wT.getPart(e,n,"toolbar").each(e=>e.getApis().refresh(e))},toggleToolbarDrawer:e=>{wT.getPart(e,n,"toolbar").each(t=>{Je(t.getApis().toggle,e=>e(t))})},toggleToolbarDrawerWithoutFocusing:e=>{wT.getPart(e,n,"toolbar").each(t=>{Je(t.getApis().toggleWithoutFocusing,e=>e(t))})},isToolbarDrawerToggled:e=>wT.getPart(e,n,"toolbar").bind(t=>I.from(t.getApis().isOpen).map(e=>e(t))).getOr(!1),getThrobber:e=>wT.getPart(e,n,"throbber"),focusToolbar:e=>{wT.getPart(e,n,"toolbar").orThunk(()=>wT.getPart(e,n,"multiple-toolbar")).each(e=>{U.focusIn(e)})},setMenubar:(e,t)=>{wT.getPart(e,n,"menubar").each(e=>{KT.setMenus(e,t)})},focusMenubar:e=>{wT.getPart(e,n,"menubar").each(e=>{KT.focus(e)})},setViews:(e,t)=>{wT.getPart(e,n,"viewWrapper").each(e=>{iA.setViews(e,t)})},toggleView:(t,o)=>wT.getPart(t,n,"viewWrapper").exists(e=>iA.toggleView(e,()=>r.showMainView(t),()=>r.hideMainView(t),o)),whichView:e=>wT.getPart(e,n,"viewWrapper").bind(iA.whichView).getOrNull(),hideMainView:e=>{(o=r.isToolbarDrawerToggled(e))&&r.toggleToolbarDrawer(e),wT.getPart(e,n,"editorContainer").each(e=>{e=e.element;a(e),z(e,"display","none"),w(e,"aria-hidden","true")})},showMainView:e=>{o&&r.toggleToolbarDrawer(e),wT.getPart(e,n,"editorContainer").each(e=>{e=e.element;a(e),uo(e,"display"),eo(e,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:e,apis:r,behaviours:n.behaviours}},configFields:[r("dom"),r("behaviours")],partFields:[Hu,ds,U_,us,lA,cA,sA,dA,uA,mA],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,o,n)=>{e.setSidebar(t,o,n)},toggleSidebar:(e,t,o)=>{e.toggleSidebar(t,o)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,o)=>{e.setToolbar(t,o)},setToolbars:(e,t,o)=>{e.setToolbars(t,o)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,o)=>{e.setMenubar(t,o)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,o)=>{e.setViews(t,o)},toggleView:(e,t,o)=>e.toggleView(t,o),whichView:(e,t)=>e.whichView(t)}});let pA={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},hA=e=>e.split(" "),fA=(a,r)=>{let o={...pA,...r.menus},n=0<Re(r.menus).length,e=void 0===r.menubar||!0===r.menubar?hA("file edit view insert format tools table help"):hA(!1===r.menubar?"":r.menubar),t=ve(e,e=>{var t=$e(pA,e);return n?t||k(r.menus,e).exists(e=>$e(e,"items")):t}),i=C(t,e=>{e=o[e];{var t={title:e.title,items:hA(e.items)},n=r;e=a;let o=Of(e).split(/[ ,]/);return{text:t.title,getItems:()=>Ce(t.items,e=>{let t=e.toLowerCase();return 0===t.trim().length||ge(o,e=>e===t)?[]:"separator"===t||"|"===t?[{type:"separator"}]:n.menuItems[t]?[n.menuItems[t]]:[]})}}});return ve(i,e=>0<e.getItems().length&&ge(e.getItems(),e=>$(e)||"separator"!==e.type))},vA=(e,t,o)=>(e.on("remove",()=>o.unload(t)),o.load(t)),bA=(e,t,o,n)=>(e.on("remove",()=>n.unloadRawCss(t)),n.loadRawCss(t,o)),xA=e=>I.from(tinymce.Resource.get(e)).filter($),yA=(t,o,n="")=>{var e=(e=>{e=Qf(e);return e?I.from(e):I.none()})(t).map(e=>"ui/"+e+"/"+(o+".css")),a=e.bind(xA);return Ke(e,a,(e,t)=>({_kind:"load-raw",key:e,css:t})).getOrThunk(()=>{var e=t.editorManager.suffix;return{_kind:"load-stylesheet",url:n+`/${o}${e}.css`}})},wA=(e,t)=>{return(async(e,t)=>{var o=tv(t);if(await((o,n,a)=>{var r=yA(o,n?"content.inline":"content",a);switch(r._kind){case"load-raw":let{key:e,css:t}=r;return n?bA(o,e,t,o.ui.styleSheetLoader):o.on("PostRender",()=>{bA(o,e,t,o.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":var i=r.url;return a&&o.contentCSS.push(i),Promise.resolve();default:return Promise.resolve()}})(t,e,o),!Zf(t)&&$(o))return Promise.all([((o,e)=>{var n=o.ui.styleSheetLoader,a=yA(o,"skin",e);switch(a._kind){case"load-raw":let{key:e,css:t}=a;return bA(o,e,t,n),Promise.resolve();case"load-stylesheet":var r=a.url;return vA(o,r,n);default:return Promise.resolve()}})(t,o),((a,e)=>{var t=N(a.getElement());if(!jt(t).isSome())return Promise.resolve();{let o=rf.DOM.styleSheetLoader,n=yA(a,"skin.shadowdom",e);switch(n._kind){case"load-raw":let{key:e,css:t}=n;return bA(a,e,t,o),Promise.resolve();case"load-stylesheet":var r=n.url;return vA(a,r,o);default:return Promise.resolve()}}})(t,o)]).then()})(e,t).then((e=>{let t=()=>{e._skinLoaded=!0,e.dispatch("SkinLoaded")};return()=>{e.initialized?t():e.on("init",t)}})(t),(o=t,()=>{o.dispatch("SkinLoadError",{message:"Skin could not be loaded"})}));var o},SA=oe(wA,!1),CA=oe(wA,!0),kA=(e,t,o)=>it(o)?e.translate(t):e.translate([t,e.translate(o)]),OA=(r,i)=>{let a=(t,o,e,n)=>{var a=r.shared.providers.translate(t.title);if("separator"===t.type)return I.some({type:"separator",text:a});if("submenu"!==t.type)return I.some({type:"togglemenuitem",text:a,icon:t.icon,active:t.isSelected(n),enabled:!e,onAction:i.onAction(t),...t.getStylePreview().fold(()=>({}),e=>({meta:{style:e}}))});{let e=Ce(t.getStyleItems(),e=>s(e,o,n));return 0===o&&e.length<=0?I.none():I.some({type:"nestedmenuitem",text:a,enabled:0<e.length,getSubmenuItems:()=>Ce(t.getStyleItems(),e=>s(e,o,n))})}},s=(e,t,o)=>{var n="formatter"===e.type&&i.isInvalid(e);return 0===t?n?[]:a(e,t,!1,o).toArray():a(e,t,n,o).toArray()},l=e=>{let t=i.getCurrentValue(),o=i.shouldHide?0:1;return Ce(e,e=>s(e,o,t))};return{validateItems:l,getFetch:(n,a)=>(e,t)=>{var o=a(),o=l(o);t(XO(o,Gb.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:I.none()}))}}},_A=(e,t)=>{let o=t.dataset,n="basic"===o.type?()=>C(o.data,e=>Y1(e,t.isSelectedFor,t.getPreviewFor)):o.getData;return{items:OA(e,t),getStyleItems:n}},TA=(o,n,a,r,i,e)=>{let{items:t,getStyleItems:s}=_A(n,a),l=O(a.tooltip);return GO({context:"mode:design",text:a.icon.isSome()?I.none():a.text,icon:a.icon,ariaLabel:I.some(a.tooltip),tooltip:I.none(),role:I.none(),fetch:t.getFetch(n,s),onSetup:t=>{let e=e=>t.setTooltip(kA(o,r(e.value),e.value));return o.on(i,e),Gw(Yw(o,"NodeChange",e=>{var t=e.getComponent();a.updateText(t),P.set(e.getComponent(),!o.selection.isEditable())})(t),()=>o.off(i,e))},getApi:o=>({getComponent:F(o),setTooltip:e=>{var t=n.shared.providers.translate(e);w(o.element,"aria-label",t),l.set(e)}}),columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Nv.config({...n.shared.providers.tooltips.getConfig({tooltipText:n.shared.providers.translate(a.tooltip),onShow:t=>{if(a.tooltip!==l.get()){let e=n.shared.providers.translate(l.get());Nv.setComponents(t,n.shared.providers.tooltips.getComponents({tooltipText:e}))}}})})]},"tox-tbtn",n.shared,e)},EA=((Hu=rA=rA||{})[Hu.SemiColon=0]="SemiColon",Hu[Hu.Space=1]="Space",(e,t,o)=>(e=e.options.get(t),t=o===rA.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "),{type:"basic",data:C(t,e=>{let t=e,o=e;e=e.split("=");return 1<e.length&&(t=e[0],o=e[1]),{title:t,format:o}})})),AA=F("Alignment {0}"),MA="left",DA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],BA=o=>{var e={type:"basic",data:DA};return{tooltip:kA(o,AA(),MA),text:I.none(),icon:I.some("align-left"),isSelectedFor:e=>()=>o.formatter.match(e),getCurrentValue:I.none,getPreviewFor:e=>I.none,onAction:t=>()=>ye(DA,e=>e.format===t.format).each(e=>o.execCommand(e.command)),updateText:e=>{var t=ye(DA,e=>o.formatter.match(e.format)).fold(F(MA),e=>e.title.toLowerCase());T(e,jO,{icon:"align-"+t}),o.dispatch("AlignTextUpdate",{value:t})},dataset:e,shouldHide:!1,isInvalid:e=>!o.formatter.canApply(e.format)}},FA=(e,t)=>{let o=t(),n=C(o,e=>e.format);return I.from(e.formatter.closest(n)).bind(t=>ye(o,e=>e.format===t))},IA=F("Block {0}"),RA="Paragraph",NA=o=>{let n=EA(o,"block_formats",rA.SemiColon);return{tooltip:kA(o,IA(),RA),text:I.some(RA),icon:I.none(),isSelectedFor:e=>()=>o.formatter.match(e),getCurrentValue:I.none,getPreviewFor:t=>()=>{var e=o.formatter.get(t);return e?I.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(t))}):I.none()},onAction:Xw(o),updateText:e=>{var t=FA(o,()=>n.data).fold(F(RA),e=>e.title);T(e,WO,{text:t}),o.dispatch("BlocksTextUpdate",{value:t})},dataset:n,shouldHide:!1,isInvalid:e=>!o.formatter.canApply(e.format)}},zA=F("Font {0}"),VA="System Font",LA=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],HA=e=>{e=e.split(/\s*,\s*/);return C(e,e=>e.replace(/^['"]+|['"]+$/g,""))},PA=(t,e)=>0<e.length&&ke(e,e=>-1<t.indexOf(e.toLowerCase())),UA=i=>{let n=()=>{let t=e=>e?HA(e)[0]:"",e=i.queryCommandValue("FontName"),o=s.data,n=e?e.toLowerCase():"",a=Jf(i),r=ye(o,e=>{e=e.format;return e.toLowerCase()===n||t(e).toLowerCase()===t(n).toLowerCase()}).orThunk(()=>{return Qe((e=n,t=a,(0===e.indexOf("-apple-system")||0<t.length)&&(e=HA(e.toLowerCase()),PA(e,LA)||PA(e,t))),{title:VA,format:n});var e,t});return{matchOpt:r,font:e}},s=EA(i,"font_family_formats",rA.SemiColon);return{tooltip:kA(i,zA(),VA),text:I.some(VA),icon:I.none(),isSelectedFor:t=>e=>e.exists(e=>e.format===t),getCurrentValue:()=>{var e=n().matchOpt;return e},getPreviewFor:e=>()=>I.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:e=>()=>{i.undoManager.transact(()=>{i.focus(),i.execCommand("FontName",!1,e.format)})},updateText:e=>{var{matchOpt:t,font:o}=n(),t=t.fold(F(o),e=>e.title);T(e,WO,{text:t}),i.dispatch("FontFamilyTextUpdate",{value:t})},dataset:s,shouldHide:!1,isInvalid:ie}},WA={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},jA=(U_="[eE][+-]?"+(ds="[0-9]+"),ds=["Infinity",ds+"\\."+(us=e=>`(?:${e})?`)(ds)+us(U_),"\\."+ds+us(U_),ds+us(U_)].join("|"),new RegExp(`^([+-]?(?:${ds}))(.*)$`)),GA=(e,a)=>I.from(jA.exec(e)).bind(e=>{var t,o,n=Number(e[1]),e=e[2];return t=e,o=a,ge(o,e=>ge(WA[e],e=>t===e))?I.some({value:n,unit:e}):I.none()}),$A={tab:F(9),escape:F(27),enter:F(13),backspace:F(8),delete:F(46),left:F(37),up:F(38),right:F(39),down:F(40),space:F(32),home:F(36),end:F(35),pageUp:F(33),pageDown:F(34)},qA=F("Font size {0}"),YA="12pt",XA={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},KA={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},JA=(e,t)=>{return/[0-9.]+px$/.test(e)?(o=72*parseInt(e,10)/96,t=Math.pow(10,t||0),Math.round(o*t)/t+"pt"):k(KA,e).getOr(e);var o},QA=e=>k(XA,e).getOr(""),ZA=i=>{let n=()=>{let n=I.none(),a=t.data,r=i.queryCommandValue("FontSize");if(r)for(let e=3;n.isNone()&&0<=e;e--){let t=JA(r,e),o=QA(t);n=ye(a,e=>e.format===r||e.format===t||e.format===o)}return{matchOpt:n,size:r}},e=F(I.none),t=EA(i,"font_size_formats",rA.Space);return{tooltip:kA(i,qA(),YA),text:I.some(YA),icon:I.none(),isSelectedFor:t=>e=>e.exists(e=>e.format===t),getPreviewFor:e,getCurrentValue:()=>{var e=n().matchOpt;return e},onAction:e=>()=>{i.undoManager.transact(()=>{i.focus(),i.execCommand("FontSize",!1,e.format)})},updateText:e=>{var{matchOpt:t,size:o}=n(),t=t.fold(F(o),e=>e.title);T(e,WO,{text:t}),i.dispatch("FontSizeTextUpdate",{value:t})},dataset:t,shouldHide:!1,isInvalid:ie}},eM=e=>it(e)?"Formats":"Format {0}",tM=(a,e)=>({tooltip:kA(a,eM(""),""),text:I.some("Formats"),icon:I.none(),isSelectedFor:e=>()=>a.formatter.match(e),getCurrentValue:I.none,getPreviewFor:t=>()=>{var e=a.formatter.get(t);return void 0!==e?I.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:a.dom.parseStyle(a.formatter.getCssText(t))}):I.none()},onAction:Xw(a),updateText:e=>{let t=e=>W1(e)?Ce(e.items,t):j1(e)?[{title:e.title,format:e.format}]:[],o=Ce(q1(a),t),n=FA(a,F(o)).fold(F({title:"Formats",tooltipLabel:""}),e=>({title:e.title,tooltipLabel:e.title}));T(e,WO,{text:n.title}),a.dispatch("StylesTextUpdate",{value:n.tooltipLabel})},shouldHide:Cf(a),isInvalid:e=>!a.formatter.canApply(e.format),dataset:e}),oM=F([r("toggleClass"),r("fetch"),Es("onExecute"),u("getHotspot",I.some),u("getAnchorOverrides",F({})),od(),Es("onItemExecute"),d("lazySink"),r("dom"),e("onOpen"),$u("splitDropdownBehaviours",[L0,U,W]),u("matchWidth",!1),u("useMinWidth",!1),u("eventOrder",{}),d("role"),d("listRole")].concat(oS())),nM=xm({factory:wv,schema:[r("dom")],name:"arrow",defaults:()=>({buttonBehaviours:H([W.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:e=>{e.getSystem().getByUid(t.uid).each(Xr)},buttonBehaviours:H([f.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),aM=xm({factory:wv,schema:[r("dom")],name:"button",defaults:()=>({buttonBehaviours:H([W.revoke()])}),overrides:o=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(o.uid).each(e=>{o.onExecute(e,t)})}})}),rM=F([nM,aM,wm({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[r("text")],name:"aria-descriptor"}),ym({schema:[ks()],name:"menu",defaults:n=>({onExecute:(t,o)=>{t.getSystem().getByUid(n.uid).each(e=>{n.onItemExecute(e,t,o)})}})}),q0()]),iM=qm({name:"SplitDropdown",configFields:oM(),partFields:rM(),factory:(n,e,t,o)=>{let a=e=>{M.getCurrent(e).each(e=>{y.highlightFirst(e),U.focusIn(e)})},r=e=>{J0(n,x,e,o,a,Qp.HighlightMenuAndItem).get(S)},i=e=>{e=Fm(e,n,"button");return Xr(e),I.some(!0)},s={...Zr([li((o,e)=>{Bm(o,n,"aria-descriptor").each(e=>{var t=E("aria");w(e.element,"id",t),w(o.element,"aria-describedby",t)})})]),...Th(I.some(r))},l={repositionMenus:e=>{f.isOn(e)&&tS(e)}};return{uid:n.uid,dom:n.dom,components:e,apis:l,eventOrder:{...n.eventOrder,[Tr()]:["disabling","toggling","alloy.base.behaviour"]},events:s,behaviours:Yu(n.splitDropdownBehaviours,[L0.config({others:{sandbox:e=>{let t=Fm(e,n,"arrow");return eS(n,e,{onOpen:()=>{f.on(t),f.on(e)},onClose:()=>{f.off(t),f.off(e)}})}}}),U.config({mode:"special",onSpace:i,onEnter:i,onDown:e=>(r(e),I.some(!0))}),W.config({}),f.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:n.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),sM=t=>({isEnabled:()=>!P.isDisabled(t),setEnabled:e=>P.set(t,!e),setText:e=>T(t,WO,{text:e}),setIcon:e=>T(t,jO,{icon:e})}),lM=t=>({setActive:e=>{f.set(t,e)},isActive:()=>f.isOn(t),isEnabled:()=>!P.isDisabled(t),setEnabled:e=>P.set(t,!e),setText:e=>T(t,WO,{text:e}),setIcon:e=>T(t,jO,{icon:e})}),cM=(e,t)=>e.map(e=>({"aria-label":t.translate(e)})).getOr({}),dM=E("focus-button"),uM=(e,t,o,n,a,r,i)=>{let s=t.map(e=>j(UO(e,"tox-tbtn",a))),l=e.map(e=>j(PO(e,a.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:{...cM(o,a),...X(i)?{"data-mce-name":i}:{}}},components:rw([l.map(e=>e.asSpec()),s.map(e=>e.asSpec())]),eventOrder:{[rr()]:["focusing","alloy.base.behaviour",NO],[Vr()]:[NO,"toolbar-group-button-events"],[Lr()]:[NO,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:H([qy(()=>a.checkUiComponentContext(r).shouldDisable),ow(()=>a.checkUiComponentContext(r)),B(NO,[li((e,t)=>VO(e)),L(WO,(t,o)=>{s.bind(e=>e.getOpt(t)).each(e=>{D.set(e,[bl(a.translate(o.event.text))])})}),L(jO,(t,o)=>{l.bind(e=>e.getOpt(t)).each(e=>{D.set(e,[PO(o.event.icon,a.icons)])})}),L(rr(),(e,t)=>{t.event.prevent(),_(e,dM)})])].concat(n.getOr([])))}},mM=(t,e,o,n)=>{var a,r=O(S),n=uM(t.icon,t.text,t.tooltip,I.none(),o,t.context,n);return wv.sketch({dom:n.dom,components:n.components,eventOrder:zO,buttonBehaviours:{...H([B("toolbar-button-events",[(a={onAction:t.onAction,getApi:e.getApi},ui((t,e)=>{Yy(a,t)(e=>{T(t,RO,{buttonApi:e}),a.onAction(e)})})),Xy(e,r),Ky(e,r)]),...t.tooltip.map(e=>Nv.config(o.tooltips.getConfig({tooltipText:o.translate(e)+t.shortcut.map(e=>` (${lw(e)})`).getOr("")}))).toArray(),qy(()=>!t.enabled||o.checkUiComponentContext(t.context).shouldDisable),ow(()=>o.checkUiComponentContext(t.context))].concat(e.toolbarButtonBehaviours)),[NO]:null==(r=n.buttonBehaviours)?void 0:r[NO]}})},gM=(e,t,o,n)=>mM(e,{toolbarButtonBehaviours:0<o.length?[B("toolbarButtonWith",o)]:[],getApi:sM,onSetup:e.onSetup},t,n),pM=(e,t,o,n)=>mM(e,{toolbarButtonBehaviours:[D.config({}),f.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<o.length?[B("toolbarToggleButtonWith",o)]:[]),getApi:lM,onSetup:e.onSetup},t,n),hM=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],fM=(a,r)=>(e,t,o,n)=>{e=a(e).mapError(e=>va(e)).getOrDie();return r(e,t,o,n)},vM={button:fM(dy,(e,t,o,n)=>(e=e,t=t.shared.providers,n=n,gM(e,t,[],n))),togglebutton:fM(gy,(e,t,o,n)=>(e=e,t=t.shared.providers,n=n,pM(e,t,[],n))),menubutton:fM(YT,(e,t,o,n)=>E_(e,"tox-tbtn",t,I.none(),!1,n)),splitbutton:fM(e=>pa("SplitButton",XT,e),(a,r,e,i)=>{{var s=a,l=r.shared,c,d,u;a=i;let n=O(s.tooltip.getOr("")),t=o=>({isEnabled:()=>!P.isDisabled(o),setEnabled:e=>P.set(o,!e),setIconFill:(e,t)=>{Bl(o.element,`svg path[class="${e}"], rect[class="${e}"]`).each(e=>{w(e,"fill",t)})},setActive:t=>{w(o.element,"aria-pressed",t),Bl(o.element,"span").each(e=>{o.getSystem().getByDom(e).each(e=>f.set(e,t))})},isActive:()=>Bl(o.element,"span").exists(e=>o.getSystem().getByDom(e).exists(f.isOn)),setText:t=>Bl(o.element,"span").each(e=>o.getSystem().getByDom(e).each(e=>T(e,WO,{text:t}))),setIcon:t=>Bl(o.element,"span").each(e=>o.getSystem().getByDom(e).each(e=>T(e,jO,{icon:t}))),setTooltip:e=>{var t=l.providers.translate(e);w(o.element,"aria-label",t),n.set(e)}}),e=O(S),o={getApi:t,onSetup:s.onSetup};return iM.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...cM(s.tooltip,l.providers),...X(a)?{"data-mce-name":a}:{}}},onExecute:e=>{e=t(e);e.isEnabled()&&s.onAction(e)},onItemExecute:(e,t,o)=>{},splitDropdownBehaviours:H([B("split-dropdown-events",[li((e,t)=>VO(e)),L(dM,W.focus),Xy(o,e),Ky(o,e)]),$y(()=>l.providers.isDisabled()||l.providers.checkUiComponentContext(s.context).shouldDisable),ow(()=>l.providers.checkUiComponentContext(s.context)),eC.config({}),...s.tooltip.map(e=>Nv.config({...l.providers.tooltips.getConfig({tooltipText:l.providers.translate(e),onShow:t=>{if(n.get()!==e){let e=l.providers.translate(n.get());Nv.setComponents(t,l.providers.tooltips.getComponents({tooltipText:e}))}}})})).toArray()]),eventOrder:{[Vr()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Lr()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:l.getSink,fetch:(c=t,d=s,u=l.providers,t=>j0(e=>d.fetch(e)).map(e=>I.from(uS(Vn(A0(E("menu-value"),e,e=>{d.onItemAction(c(t),e)},d.columns,d.presets,Gb.CLOSE_ON_EXECUTE,d.select.getOr(ie),u),{movement:M0(d.columns,d.presets),menuBehaviours:Wy("auto"!==d.columns?[]:[li((o,e)=>{Uy(o,4,nx(d.presets)).each(({numRows:e,numColumns:t})=>{U.setGridSize(o,e,t)})})])}))))),parts:{menu:cx(0,s.columns,s.presets)},components:[iM.parts.button(uM(s.icon,s.text,I.none(),I.some([f.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),qy(ie),ow(F({contextType:"any",shouldDisable:!1}))]),l.providers,s.context)),iM.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Vb("chevron-down",l.providers.icons)},buttonBehaviours:H([$y(ie),ow(F({contextType:"any",shouldDisable:!1}))])}),iM.parts["aria-descriptor"]({text:l.providers.translate("To open the popup, press Shift+Enter")})]})}}),grouptoolbarbutton:fM(e=>pa("GroupToolbarButton",GT,e),(e,t,o,n)=>{let a=o.ui.registry.getAll().buttons,r={"data-alloy-vertical-dir":t.shared.header.isPositionedAtTop()?kl.TopToBottom:kl.BottomToTop};if(_f(o)===tf.floating)return i=e,e=r,n=n,l=(s=t).shared,c=O(S),d={toolbarButtonBehaviours:[],getApi:sM,onSetup:i.onSetup},d=[B("toolbar-group-button-events",[Xy(d,c),Ky(d,c)]),...i.tooltip.map(e=>Nv.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(e)}))).toArray()],AE.sketch({lazySink:l.getSink,fetch:()=>j0(e=>{e(C((e=i.items,xM(o,{buttons:a,toolbar:e,allowToolbarGroups:!1},t,I.none())),UE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:uM(i.icon,i.text,i.tooltip,I.some(d),l.providers,i.context,n),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e}}}});var i,s,l,c,d;throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},bM={styles:(e,t)=>{var o={type:"advanced",...t.styles};return TA(e,t,tM(e,o),eM,"StylesTextUpdate","styles")},fontsize:(e,t)=>TA(e,t,ZA(e),qA,"FontSizeTextUpdate","fontsize"),fontsizeinput:(p,h)=>{{var f=p,v=h,b=(c=>{let d=()=>c.queryCommandValue("FontSize");return{updateInputValue:e=>T(e,WO,{text:d()}),onAction:(e,t)=>c.execCommand("FontSize",!1,e,{skip_focus:!t}),getNewValue:(e,t)=>{GA(e,["unsupportedLength","empty"]);let o=d(),n=GA(e,["unsupportedLength","empty"]).or(GA(o,["unsupportedLength","empty"])),a=n.map(e=>e.value).getOr(16),r=zf(c),i=n.map(e=>e.unit).filter(e=>""!==e).getOr(r),s=t(a,(null!=(e={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[i])?e:{step:1}).step),l=""+(0<=s?s:a)+i;return l!==o&&c.dispatch("FontSizeInputTextUpdate",{value:l}),l}}})(p);h="fontsizeinput";let l=I.none(),e=Yw(f,"NodeChange SwitchMode DisabledStateChange",e=>{e=e.getComponent();l=I.some(e),b.updateInputValue(e),P.set(e,!f.selection.isEditable()||pf(f))}),c=e=>({getComponent:F(e)}),t=O(S),o=E("custom-number-input-events"),n=(e,o,t)=>{let n=l.map(e=>A.getValue(e)).getOr(""),a=b.getNewValue(n,e),r=n.length-(""+a).length,i=l.map(e=>e.element.dom.selectionStart-r),s=l.map(e=>e.element.dom.selectionEnd-r);b.onAction(a,t),l.each(t=>{A.setValue(t,a),o&&(i.each(e=>t.element.dom.selectionStart=e),s.each(e=>t.element.dom.selectionEnd=e))})},a=(e,t)=>n((e,t)=>e-t,e,t),r=(e,t)=>n((e,t)=>e+t,e,t),i=e=>It(e.element).fold(I.none,e=>(xc(e),I.some(!0))),s=e=>wc(e.element)?(Vt(e.element).each(e=>xc(e)),I.some(!0)):I.none(),d=(o,e,t,n)=>{var a=O(S),t=v.shared.providers.translate(t),r=E("altExecuting"),i=Yw(f,"NodeChange SwitchMode DisabledStateChange",e=>{P.set(e.getComponent(),!f.selection.isEditable()||pf(f))}),s=e=>{P.isDisabled(e)||o(!0)};return wv.sketch({dom:{tag:"button",attributes:{"aria-label":t,"data-mce-name":e},classes:n.concat(e)},components:[HO(e,v.shared.providers.icons)],buttonBehaviours:H([P.config({}),Nv.config(v.shared.providers.tooltips.getConfig({tooltipText:t})),B(r,[Xy({onSetup:i,getApi:c},a),Ky({getApi:c},a),L(mr(),(e,t)=>{t.event.raw.keyCode!==$A.space()&&t.event.raw.keyCode!==$A.enter()||P.isDisabled(e)||o(!1)}),L(fr(),s),L(nr(),s)])]),eventOrder:{[mr()]:[r,"keying"],[fr()]:[r,"alloy.base.behaviour"],[nr()]:[r,"alloy.base.behaviour"],[Vr()]:["alloy.base.behaviour",r,"tooltipping"],[Lr()]:[r,"tooltipping"]}})},u=j(d(e=>a(!1,e),"minus","Decrease font size",[])),m=j(d(e=>r(!1,e),"plus","Increase font size",[])),g=j({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[gx.sketch({inputBehaviours:H([P.config({}),B(o,[Xy({onSetup:e,getApi:c},t),Ky({getApi:c},t)]),B("input-update-display-text",[L(WO,(e,t)=>{A.setValue(e,t.event.text)}),L(ur(),e=>{b.onAction(A.getValue(e))}),L(hr(),e=>{b.onAction(A.getValue(e))})]),U.config({mode:"special",onEnter:e=>(n(x,!0,!0),I.some(!0)),onEscape:i,onUp:e=>(r(!0,!1),I.some(!0)),onDown:e=>(a(!0,!1),I.some(!0)),onLeft:(e,t)=>(t.cut(),I.none()),onRight:(e,t)=>(t.cut(),I.none())})])})],behaviours:H([W.config({}),U.config({mode:"special",onEnter:s,onSpace:s,onEscape:i}),B("input-wrapper-events",[L(cr(),t=>{R([u,m],e=>{e=N(e.get(t).element.dom);wc(e)&&yc(e)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...X(h)?{"data-mce-name":h}:{}}},components:[u.asSpec(),g.asSpec(),m.asSpec()],behaviours:H([W.config({}),U.config({mode:"flow",focusInside:Lu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:e=>wc(e.element)?I.none():(xc(e.element),I.some(!0))})])}}},fontfamily:(e,t)=>TA(e,t,UA(e),zA,"FontFamilyTextUpdate","fontfamily"),blocks:(e,t)=>TA(e,t,NA(e),IA,"BlocksTextUpdate","blocks"),align:(e,t)=>TA(e,t,BA(e),AA,"AlignTextUpdate","align")},xM=(n,a,c,d)=>{var o,e,t=!1===(r=a.toolbar)?[]:void 0===r||!0===r?(o=a.buttons,e=C(hM,e=>{var t=ve(e.items,e=>$e(o,e)||$e(bM,e));return{name:e.name,items:t}}),ve(e,e=>0<e.items.length)):$(r)?(e=r.split("|"),C(e,e=>({items:e.trim().split(" ")}))):(t=r,Q(t,e=>($e(e,"name")||$e(e,"label"))&&$e(e,"items"))?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])),r=C(t,e=>{var t=Ce(e.items,e=>{return 0===e.trim().length?[]:(r=n,t=a.buttons,i=e,s=a.allowToolbarGroups,l=c,o=d,k(t,i.toLowerCase()).orThunk(()=>o.bind(e=>Ie(e,e=>k(t,e+i.toLowerCase())))).fold(()=>k(bM,i.toLowerCase()).map(e=>e(r,l)),e=>{return"grouptoolbarbutton"!==e.type||s?(t=e,o=l,n=r,a=i.toLowerCase(),k(vM,t.type).fold(()=>(console.error("skipping button defined by",t),I.none()),e=>I.some(e(t,o,n,a)))):(console.warn(`Ignoring the '${i}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),I.none());var t,o,n,a}).toArray());var r,t,i,s,l,o});return{title:I.from(n.translate(e.name)),label:Qe(void 0!==e.label,n.translate(e.label)),items:t}});return ve(r,e=>0<e.items.length)},yM=(t,e,o,n)=>{let a=e.mainUi.outerContainer,r=o.toolbar,i=o.buttons;if(Q(r,$)){let e=r.map(e=>{e={toolbar:e,buttons:i,allowToolbarGroups:o.allowToolbarGroups};return xM(t,e,n,I.none())});gA.setToolbars(a,e)}else gA.setToolbar(a,xM(t,o,n,I.none()))},wM=Jo(),SM=wM.os.isiOS()&&wM.os.version.major<=12;var CM=Object.freeze({__proto__:null,render:(u,m,e,t,o)=>{let{mainUi:n,uiMotherships:a}=m,r=O(0),i=n.outerContainer;SA(u);var o=N(o.targetNode),s=Wt(Ut(o)),o=(hu(o,n.mothership),o=u,s=s,l=m,mv(o)&&hu(l.mainUi.mothership.element,l.popupUi.mothership),pu(s,l.dialogUi.mothership),u.on("PostRender",()=>{gA.setSidebar(i,e.sidebar,Yf(u))}),u.on("SkinLoaded",()=>{yM(u,m,e,t),r.set(u.getWin().innerWidth),gA.setMenubar(i,fA(u,e)),gA.setViews(i,e.views);{var d=u;let e=m.uiMotherships,t=d.dom,o=d.getWin(),n=d.getDoc().documentElement,a=O(bo(o.innerWidth,o.innerHeight)),r=O(bo(n.offsetWidth,n.offsetHeight)),i=()=>{var e=a.get();e.left===o.innerWidth&&e.top===o.innerHeight||(a.set(bo(o.innerWidth,o.innerHeight)),Pw(d))},s=()=>{var e=d.getDoc().documentElement,t=r.get();t.left===e.offsetWidth&&t.top===e.offsetHeight||(r.set(bo(e.offsetWidth,e.offsetHeight)),Pw(d))},l=e=>{d.dispatch("ScrollContent",e)},c=(t.bind(o,"resize",i),t.bind(o,"scroll",l),Vc(N(d.getBody()),"load",s));d.on("hide",()=>{R(e,e=>{z(e.element,"display","none")})}),d.on("show",()=>{R(e,e=>{uo(e.element,"display")})}),d.on("NodeChange",s),d.on("remove",()=>{c.unbind(),t.unbind(o,"resize",i),t.unbind(o,"scroll",l),o=null})}}),gA.getSocket(i).getOrDie("Could not find expected socket element"));if(SM){no(o.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});let e=(()=>{let t=null;return{cancel:()=>{p(t)||(clearTimeout(t),t=null)},throttle:(...e)=>{p(t)&&(t=setTimeout(()=>{t=null,(()=>{u.dispatch("ScrollContent")}).apply(null,e)},20))}}})(),t=zc(o.element,"scroll",e.throttle);u.on("remove",t.unbind)}tw(u,m),u.addCommand("ToggleSidebar",(e,t)=>{gA.toggleSidebar(i,t),u.dispatch("ToggleSidebar")}),u.addQueryValueHandler("ToggleSidebar",()=>{var e;return null!=(e=gA.whichSidebar(i))?e:""}),u.addCommand("ToggleView",(e,t)=>{if(gA.toggleView(i,t)){let t=i.element;n.mothership.broadcastOn([Eu()],{target:t}),R(a,e=>{e.broadcastOn([Eu()],{target:t})}),p(gA.whichView(i))&&(u.focus(),u.nodeChanged(),gA.refreshToolbar(i)),u.dispatch("ToggleView")}}),u.addQueryValueHandler("ToggleView",()=>{var e;return null!=(e=gA.whichView(i))?e:""});var s=_f(u),l=(s!==tf.sliding&&s!==tf.floating||u.on("ResizeWindow ResizeEditor ResizeContent",()=>{var e=u.getWin().innerWidth;e!==r.get()&&(gA.refreshToolbar(m.mainUi.outerContainer),r.set(e))}),{setEnabled:e=>{ew(m,e?"setEnabled":"setDisabled")},isEnabled:()=>!P.isDisabled(i)});return{iframeContainer:o.element.dom,editorContainer:i.element.dom,api:l}}});let kM=e=>/^[0-9\.]+(|px)$/i.test(""+e)?I.some(parseInt(""+e,10)):I.none(),OM=e=>J(e)?e+"px":e,_M=(t,e,o)=>{e=e.filter(e=>t<e),o=o.filter(e=>e<t);return e.or(o).getOr(t)},TM=e=>{let t=ff(e),o=vf(e),n=xf(e);return kM(t).map(e=>_M(e,o,n))},{ToolbarLocation:EM,ToolbarMode:AM}=pv,MM=(m,g,e,t,a)=>{let{mainUi:p,uiMotherships:o}=e,n=rf.DOM,r=lv(m),i=uv(m),s=xf(m).or(TM(m)),l=t.shared.header,h=l.isPositionedAtTop,c=_f(m),f=c===AM.sliding||c===AM.floating,d=O(!1),v=()=>d.get()&&!m.removed,b=e=>f?e.fold(F(0),e=>1<e.components().length?ho(e.components()[1].element):0):0,x=()=>{R(o,e=>{e.broadcastOn([Au()],{})})},u=e=>{if(v()){r||a.on(e=>{var t=s.getOrThunk(()=>mn().width-wo(g).left-10);z(e.element,"max-width",t+"px")});var d,u,o=cn(),n=!(r||!(yo(p.outerContainer.element).left+ko(p.outerContainer.element)>=window.innerWidth-40||so(p.outerContainer.element,"width").isSome())||(z(p.outerContainer.element,"position","absolute"),z(p.outerContainer.element,"left","0px"),uo(p.outerContainer.element,"width"),0));if(f&&gA.refreshToolbar(p.outerContainer),!r){let t=cn(),e=Qe(o.left!==t.left,o);d=n,u=e,a.on(n=>{let e=gA.getToolbar(p.outerContainer),a=b(e),r=xn(g),t=(l=m,c=p.outerContainer.element,mv(l)?Li(c):I.none()),i=t.fold(()=>r.x,e=>{var t=xn(e);return Tt(e,qt())?r.x:r.x-t.x}),o=Qe(d,Math.ceil(p.outerContainer.element.dom.getBoundingClientRect().width)).filter(e=>150<e).map(e=>{var t=u.getOr(cn()),t=window.innerWidth-(i-t.left),o=Math.max(Math.min(e,t),150);return t<e&&z(p.outerContainer.element,"width",o+"px"),{width:o+"px"}}).getOr({width:"max-content"}),s={position:"absolute",left:Math.round(i)+"px",top:t.fold(()=>h()?Math.max(r.y-ho(n.element)+a,0):r.bottom,e=>{var t=xn(e),o=null!=(o=e.dom.scrollTop)?o:0,e=Tt(e,qt())?Math.max(r.y-ho(n.element)+a,0):r.y-t.y+o-ho(n.element)+a;return h()?e:r.bottom})+"px"};var l,c;no(p.outerContainer.element,{...s,...o})}),e.each(e=>{dn(e.left,t.top)})}i&&a.on(e),x()}},y=()=>!(r||!i||!v())&&a.get().exists(e=>{var o,t=l.getDockingMode(),e=(a=>{switch(Ef(m)){case EM.auto:let e=gA.getToolbar(p.outerContainer),t=b(e),o=ho(a.element)-t,n=xn(g);if(n.y>o)return"top";{let e=Dt(g),t=Math.max(e.dom.scrollHeight,ho(e));return n.bottom<t-o||Sn().bottom<n.bottom-o?"bottom":"top"}case EM.bottom:return"bottom";default:EM.top;return"top"}})(e);return e!==t&&(o=e,a.on(e=>{Is.setModes(e,[o]),l.setDockingMode(o);var t=h()?kl.TopToBottom:kl.BottomToTop;w(e.element,ed,t)}),!0)});return{isVisible:v,isPositionedAtTop:h,show:()=>{d.set(!0),z(p.outerContainer.element,"display","flex"),n.addClass(m.getBody(),"mce-edit-focus"),R(o,e=>{uo(e.element,"display")}),y(),mv(m)?u(e=>Is.isDocked(e)?Is.reset(e):Is.refresh(e)):u(Is.refresh)},hide:()=>{d.set(!1),z(p.outerContainer.element,"display","none"),n.removeClass(m.getBody(),"mce-edit-focus"),R(o,e=>{z(e.element,"display","none")})},update:u,updateMode:()=>{y()&&u(Is.reset)},repositionPopups:x}},DM=(e,t)=>{e=xn(e);return{pos:t?e.y:e.bottom,bounds:e}};var BM=Object.freeze({__proto__:null,render:(c,t,o,n,e)=>{let r=t.mainUi,a=On(),d=N(e.targetNode),u=MM(c,d,t,n,a),m=Df(c),i=(CA(c),()=>{var e;a.isSet()?u.show():(a.set(gA.getHeader(r.outerContainer).getOrDie()),e=cv(c),mv(c)?(hu(d,r.mothership),hu(d,t.popupUi.mothership)):pu(e,r.mothership),pu(e,t.dialogUi.mothership),e=()=>{yM(c,t,o,n),gA.setMenubar(r.outerContainer,fA(c,o)),u.show();{var i=c,s=d,l=u,a=m;let r=O(DM(s,l.isPositionedAtTop())),t=e=>{var{pos:t,bounds:o}=DM(s,l.isPositionedAtTop()),{pos:n,bounds:a}=r.get(),a=o.height!==a.height||o.width!==a.width;r.set({pos:t,bounds:o}),a&&Pw(i,e),l.isVisible()&&(n!==t?l.update(Is.reset):a&&(l.updateMode(),l.repositionPopups()))},o=(a||(i.on("activate",l.show),i.on("deactivate",l.hide)),i.on("SkinLoaded ResizeWindow",()=>l.update(Is.reset)),i.on("NodeChange keydown",e=>{requestAnimationFrame(()=>t(e))}),0),n=mO(()=>l.update(Is.refresh),33),e=(i.on("ScrollWindow",()=>{var e=cn().left;e!==o&&(o=e,n.throttle()),l.updateMode()}),mv(i)&&i.on("ElementScroll",e=>{l.update(Is.refresh)}),kn());e.set(Vc(N(i.getBody()),"load",e=>t(e.raw))),i.on("remove",()=>{e.clear()})}c.nodeChanged()},m?c.once("SkinLoaded",e):e())});c.on("show",i),c.on("hide",u.hide),m||(c.on("focus",i),c.on("blur",u.hide)),c.on("init",()=>{(c.hasFocus()||m)&&i()}),tw(c,t);e={show:i,hide:u.hide,setEnabled:e=>{ew(t,e?"setEnabled":"setDisabled")},isEnabled:()=>!P.isDisabled(r.outerContainer)};return{editorContainer:r.outerContainer.element.dom,api:e}}});let FM="contexttoolbar-hide",IM=e=>{ef.getContent(e).each(e=>{Bl(e.element,".tox-toolbar-slider__input,.tox-toolbar-textfield").fold(()=>U.focusIn(e),xc)})},RM=E("forward-slide"),NM=E("backward-slide"),zM=E("change-slide-event"),VM="tox-pop--resizing",LM=(t,o)=>{let n=On();return{setInputEnabled:e=>{!e&&o&&xc(o),P.set(t,!e)},isInputEnabled:()=>!P.isDisabled(t),hide:()=>{n.isSet()||n.set(A.getValue(t)),_(t,Dr())},back:()=>{n.isSet()||n.set(A.getValue(t)),_(t,NM)},getValue:()=>n.get().getOrThunk(()=>A.getValue(t)),setValue:e=>{n.isSet()?n.set(e):A.setValue(t,e)}}},HM=(n,a)=>L(RO,(e,t)=>{var o=n.get(e),o=LM(o,e.element);a.onAction(o,t.event.buttonApi)}),PM=(n,e,a)=>{let r=C(e,e=>{return j((t=n,o=a,("contextformtogglebutton"===(e=e).type?(e,t,o)=>{let{primary:n,...a}=t.original,r=ha(gy({...a,type:"togglebutton",onAction:S}));return pM(r,o,[HM(e,t)])}:(e,t,o)=>{let{primary:n,...a}=t.original,r=ha(dy({...a,type:"button",onAction:S}));return gM(r,o,[HM(e,t)])})(t,e,o)));var t,o});return{asSpecs:()=>C(r,e=>e.asSpec()),findPrimary:o=>Ie(e,(e,t)=>e.primary?I.from(r[t]).bind(e=>e.getOpt(o)).filter(ne(P.isDisabled)):I.none())}},UM=(t,o,e)=>{let{width:n,height:a}=t.initValue(),r=l_,i=E("ratio-event"),s=LM,l=e=>Pb(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},o.icons),c=()=>!1,d=t.label.getOr("Constrain proportions"),u=o.translate(d),m=a_.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":u,"data-mce-name":d}},components:[l("lock"),l("unlock")],buttonBehaviours:H([P.config({disabled:c}),Ov.config({}),Nv.config(o.tooltips.getConfig({tooltipText:u}))])}),g=e=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:e}),p=e=>Ml(e.element,"div.tox-focusable-wrapper").fold(I.none,e=>(xc(e),I.some(!0))),h=o=>G.parts.field({factory:gx,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:o?n:a,inputBehaviours:H([P.config({disabled:c}),Ov.config({}),B("size-input-toolbar-events",[L(dr(),(e,t)=>{T(e,i,{isField1:o})})]),U.config({mode:"special",onEnter:e,onEscape:p})]),selectOnFocus:!1}),f=e=>({dom:{tag:"label",classes:["tox-label"]},components:[bl(o.translate(e))]}),v=e=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[e],behaviours:H([Ov.config({}),W.config({}),U.config({mode:"special",onEnter:e=>Bl(e.element,"input").fold(I.none,e=>(xc(e),I.some(!0)))})])}),b=v(a_.parts.field1(g([G.parts.label(f("Width:")),h(!0)]))),x=v(a_.parts.field2(g([G.parts.label(f("Height:")),h(!1)]))),y=O(S),w=[Xy({onSetup:t.onSetup,getApi:s},y),Ky({getApi:s},y)];return a_.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[b,x,g([f(""),m])],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,o)=>{i_(A.getValue(e)).each(e=>{r(e).each(e=>{A.setValue(t,r_(e))})})},onInput:e=>_(e,IS),coupledFieldBehaviours:H([W.config({}),U.config({mode:"flow",focusInside:Lu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),P.config({disabled:c,onDisabled:e=>{a_.getField1(e).bind(G.getField).each(P.disable),a_.getField2(e).bind(G.getField).each(P.disable),a_.getLock(e).each(P.disable)},onEnabled:e=>{a_.getField1(e).bind(G.getField).each(P.enable),a_.getField2(e).bind(G.getField).each(P.enable),a_.getLock(e).each(P.enable)}}),ow(()=>o.checkUiComponentContext("mode:design")),B("size-input-toolbar-events2",[L(i,(e,t)=>{var t=t.event.isField1,o=t?a_.getField1(e):a_.getField2(e),t=t?a_.getField2(e):a_.getField1(e),e=o.map(A.getValue).getOr(""),o=t.map(A.getValue).getOr("");r=c_(e,o)}),L(IS,e=>t.onInput(LM(e))),...w])])})},WM=(e,t,o)=>G.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...e.toArray(),t],fieldBehaviours:H([P.config({disabled:()=>o.checkUiComponentContext("mode:design").shouldDisable,onDisabled:e=>{var t;t=e,Cc(t.element).each(e=>{Ml(e,'[tabindex="-1"]').each(e=>{xc(e)})}),G.getField(e).each(P.disable)},onEnabled:e=>{G.getField(e).each(P.enable)}})])}),jM=(t,o,e)=>{var n=O(S),a=t.label.map(e=>G.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[bl(o.translate(e))]})),e=G.parts.field({factory:gx,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:e=>(e=parseFloat(e),(isNaN(e)?I.none():I.some(e)).getOr(t.min())),toInputValue:e=>String(e),inputBehaviours:H([P.config({disabled:()=>o.checkUiComponentContext("mode:design").shouldDisable}),ow(()=>o.checkUiComponentContext("mode:design")),U.config({mode:"special",onEnter:e,onLeft:(e,t)=>(t.cut(),I.none()),onRight:(e,t)=>(t.cut(),I.none())}),B("slider-events",[Xy({onSetup:t.onSetup,getApi:LM,onBeforeSetup:U.focusIn},n),Ky({getApi:LM},n),L(pr(),e=>{t.onInput(LM(e))})])])});return WM(a,e,o)},GM=(t,o,e)=>{var n=O(S),a=t.label.map(e=>G.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[bl(o.translate(e))]})),r={...t.placeholder.map(e=>({placeholder:o.translate(e)})).getOr({})},r=G.parts.field({factory:gx,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:r,data:t.initValue(),selectOnFocus:!0,inputBehaviours:H([P.config({disabled:()=>o.checkUiComponentContext("mode:design").shouldDisable}),ow(()=>o.checkUiComponentContext("mode:design")),U.config({mode:"special",onEnter:e,onLeft:(e,t)=>(t.cut(),I.none()),onRight:(e,t)=>(t.cut(),I.none())}),B("input-events",[Xy({onSetup:t.onSetup,getApi:LM,onBeforeSetup:U.focusIn},n),Ky({getApi:LM},n),L(pr(),e=>{t.onInput(LM(e))})])])});return WM(a,r,o)},$M=(e,t,o)=>{let n=j(e(o,e=>r.findPrimary(e).orThunk(()=>i.findPrimary(e)).map(e=>(Xr(e),!0)))),a=fe(t.commands,e=>"start"===e.align),r=PM(n,a.pass,o),i=PM(n,a.fail,o);return ve([{title:I.none(),label:I.none(),items:r.asSpecs()},{title:I.none(),label:I.none(),items:[n.asSpec()]},{title:I.none(),label:I.none(),items:i.asSpecs()}],e=>0<e.items.length)},qM=(e,t)=>{switch(e.type){case"contextform":return $M(oe(GM,e),e,t);case"contextsliderform":return $M(oe(jM,e),e,t);case"contextsizeinputform":return $M(oe(UM,e),e,t)}},YM=(e,t,o)=>t.bottom-e.y>=o&&e.bottom-t.y>=o,XM=e=>{t=e.selection.getRng();var t=(o=t.getBoundingClientRect()).height<=0&&o.width<=0?(t=Ht(N(t.startContainer),t.startOffset).element,(yt(t)?Ft(t):I.some(t)).filter(xt).map(e=>e.dom.getBoundingClientRect()).getOr(o)):o;if(e.inline){let e=cn();return bn(e.left+t.left,e.top+t.top,t.width,t.height)}var o=yn(N(e.getBody()));return bn(o.x+t.left,o.y+t.top,t.width,t.height)},KM=(n,a,r,i=0)=>{let s=mn(window),l=xn(N(n.getContentAreaContainer())),e=ev(n)||nv(n)||rv(n),{x:c,width:d}=(u=l,g=s,m=i,{x:p=Math.max(u.x+m,g.x),width:Math.min(u.right-m,g.right)-p});var u,m,g,p,h;if(n.inline&&!e)return bn(c,s.y,d,s.height);{let e=a.header.isPositionedAtTop(),{y:t,bottom:o}=(u=n,m=l,g=s,p=e,a=r,n=i,r=N(u.getContainer()),i=Bl(r,".tox-editor-header").getOr(r),i=xn(i),h=i.y>=m.bottom,p=p&&!h,u.inline&&p?{y:Math.max(i.bottom+n,g.y),bottom:g.bottom}:u.inline&&!p?{y:g.y,bottom:Math.min(i.y-n,g.bottom)}:(h="line"===a?xn(r):m,p?{y:Math.max(i.bottom+n,g.y),bottom:Math.min(h.bottom-n,g.bottom)}:{y:Math.max(h.y+n,g.y),bottom:Math.min(i.y-n,g.bottom)}));return bn(c,t,d,o-t)}},JM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},QM={maxHeightFunction:Gc(),maxWidthFunction:SE()},ZM=e=>"node"===e,eD=(e,t,o,n,a)=>{let r=XM(e),i=n.lastElement().exists(e=>Tt(o,e));return l=o,e=e.selection.getRng(),c=Ht(N(e.startContainer),e.startOffset),e.startContainer===e.endContainer&&e.startOffset===e.endOffset-1&&Tt(c.element,l)?i?I1:A1:i?(s=t,e=n.getMode(),c=so(s,"position"),z(s,"position",e),e=YM(r,xn(t),-20)&&!n.isReposition()?N1:I1,c.each(e=>z(s,"position",e)),e):("fixed"===n.getMode()?a.y+cn().top:a.y)+(ho(t)+12)<=r.y?A1:M1;var s,l,c},tD=(i,e,s,t)=>{let o=e=>{return ZM(t)?[(r=e,(e,t,o,n,a)=>({...eD(i,n,r,s,a)({...e,y:a.y,height:a.height},t,o,n,a),alwaysFit:!0}))]:[];var r};return e?{onLtr:e=>[ic,tc,oc,nc,ac,rc].concat(o(e)),onRtl:e=>[ic,oc,tc,ac,nc,rc].concat(o(e))}:{onLtr:e=>[rc,ic,nc,tc,ac,oc].concat(o(e)),onRtl:e=>[rc,ic,ac,oc,nc,tc].concat(o(e))}},oD=(t,e)=>{var e=ve(e,e=>e.predicate(t.dom)),{pass:e,fail:o}=fe(e,e=>"contexttoolbar"===e.type);return{contextToolbars:e,contextForms:o}},nD=(i,s)=>{let l={},c=[],d=[],u={},m={},e=Re(i);return R(e,e=>{var t,o,n=i[e];if("contextform"===n.type||"contextsliderform"===n.type||"contextsizeinputform"===n.type){var a=e,r=n;let t=ha(pa("ContextForm",Cy,r));(l[a]=t).launch.map(e=>{u["form:"+a]={...r.launch,type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:()=>{s(t)}}}),("editor"===t.scope?d:c).push(t),m[a]=t}else"contexttoolbar"===n.type&&(t=e,e=o=n,pa("ContextToolbar",ky,e).each(e=>{("editor"===o.scope?d:c).push(e),m[t]=e}))}),{forms:l,inNodeScope:c,inEditorScope:d,lookupTable:m,formNavigators:u}},aD="tox-pop--transition",rD=(l,e,c,r)=>{let t=r.backstage,d=t.shared,u=Jo().deviceType.isTouch,m=On(),g=On(),p=On(),h=Sl((o=>{let n=O([]);return ef.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{n.set([]),ef.getContent(e).each(e=>{uo(e.element,"visibility")}),Bi(e.element,VM),uo(e.element,"width")},onHide:()=>{o.onHide()},inlineBehaviours:H([B("context-toolbar-events",[si(br(),(e,t)=>{"width"===t.event.raw.propertyName&&(Bi(e.element,VM),uo(e.element,"width"))}),L(zM,(t,e)=>{let o=t.element;uo(o,"width");var n=Co(o);uo(o,"left"),uo(o,"right"),uo(o,"max-width"),ef.setContent(t,e.event.contents),Mi(o,VM);let a=Co(o);z(o,"transition","none"),ef.reposition(t),uo(o,"transition"),z(o,"width",n+"px"),e.event.focus.fold(()=>IM(t),e=>{xc(e),Cc(o).isNone()&&IM(t)}),setTimeout(()=>{z(t.element,"width",a+"px")},0)}),L(RM,(t,e)=>{ef.getContent(t).each(e=>{n.set(n.get().concat([{bar:e,focus:Sc(Ut(t.element))}]))}),T(t,zM,{contents:e.event.forwardContents,focus:I.none()})}),L(NM,(t,e)=>{o.onBack(),Be(n.get()).each(e=>{n.set(n.get().slice(0,n.get().length-1)),T(t,zM,{contents:Cl(e.bar),focus:e.focus})})})]),U.config({mode:"special",onEscape:t=>Be(n.get()).fold(()=>o.onEscape(),e=>(_(t,NM),I.some(!0)))})]),lazySink:()=>V.value(o.sink)})})({sink:c,onEscape:()=>(l.focus(),jw(l),I.some(!0)),onHide:()=>{jw(l)},onBack:()=>{l.dispatch("ContextFormSlideBack")}})),f=()=>{var e=p.get().getOr("node"),t=ZM(e)?1:0;return KM(l,d,e,t)},v=()=>!(l.removed||u()&&t.isContextMenuOpen()),b=()=>{var e,t,o;return!v()||(e=f(),t=Ye(p.get(),"node")?(o=l,m.get().filter(e=>$t(e)&&bt(e)).map(yn).getOrThunk(()=>XM(o))):XM(l),e.height<=0)||!YM(t,e,.01)},o=()=>{m.clear(),g.clear(),p.clear(),ef.hide(h)},n=()=>{var e;ef.isOpen(h)&&(e=h.element,uo(e,"display"),b()?z(e,"display","none"):(g.set(0),ef.reposition(h)))},x=e=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:H([U.config({mode:"acyclic"}),B("pop-dialog-wrap-events",[li(e=>{l.shortcuts.add("ctrl+F9","focus statusbar",()=>U.focusIn(e))}),ci(e=>{l.shortcuts.remove("ctrl+F9")})])])}),i=Oo(()=>nD(e,e=>{e=y([e]);T(h,RM,{forwardContents:x(e)})})),y=e=>{let t=l.ui.registry.getAll().buttons,n={...t,...i().formNavigators},o=_f(l)===tf.scrolling?tf.scrolling:tf.default,a=Se(C(e,e=>{return"contexttoolbar"===e.type?(t=n,o={...o=e,items:$(o.items)?o.items:C(o.items,Oy)},xM(l,{buttons:t,toolbar:o.items,allowToolbarGroups:!1},r.backstage,I.some(["form:"]))):(t=e,o=d.providers,qM(t,o));var t,o}));return GE({type:o,uid:E("context-toolbar"),initGroups:a,onEscape:I.none,cyclicKeying:!0,providers:d.providers})},a=(e,t)=>{var o,n,a,r,i,s;w.cancel(),v()&&(o=y(e),e=e[0].position,n=t,n="node"===(s=e)?d.anchors.node(n):d.anchors.cursor(),r=l,s=s,a=u(),i={lastElement:m.get,isReposition:()=>Ye(g.get(),0),getMode:()=>ou.getMode(c)},r="line"===s?{bubble:Xc(12,0,JM),layouts:{onLtr:()=>[sc],onRtl:()=>[lc]},overrides:QM}:{bubble:Xc(0,12,JM,1/12),layouts:tD(r,a,i,s),overrides:QM},a=Vn(n,r),p.set(e),g.set(1),i=h.element,uo(i,"display"),s=t,Ye(Ke(s,m.get(),Tt),!0)||(Bi(i,aD),ou.reset(c,h)),ef.showWithinBounds(h,x(o),{anchor:a,transition:{classes:[aD],mode:"placement"}},()=>I.some(f())),t.fold(m.clear,m.set),b())&&z(i,"display","none")},s=!1,w=mO(()=>{!l.hasFocus()||l.removed||s||(Fi(h.element,aD)?w.throttle():((o,e)=>{let t=N(e.getBody()),a=e=>Tt(e,t),r=N(e.selection.getNode());return e=r,a(e)||Et(t,e)?((o,e,n)=>{var a=oD(o,e);if(0<a.contextForms.length)return I.some({elem:o,toolbars:[a.contextForms[0]]});{let t=oD(o,n);if(0<t.contextForms.length)return I.some({elem:o,toolbars:[t.contextForms[0]]});if(0<a.contextToolbars.length||0<t.contextToolbars.length){let e=(e=>{if(e.length<=1)return e;var t=t=>ge(e,e=>e.position===t),o=t=>ve(e,e=>e.position===t),n=t("selection"),t=t("node");if(n||t){if(t&&n){let e=o("node"),t=C(o("selection"),e=>({...e,position:"node"}));return e.concat(t)}return o(n?"selection":"node")}return o("line")})(a.contextToolbars.concat(t.contextToolbars));return I.some({elem:o,toolbars:e})}return I.none()}})(r,o.inNodeScope,o.inEditorScope).orThunk(()=>{return e=a,t=r,n=o,e(t)?I.none():Xa(t,e=>{var t,o;return xt(e)&&({contextToolbars:t,contextForms:o}=oD(e,n.inNodeScope),0<(o=0<o.length?o:(o=>{if(o.length<=1)return o;{let e=t=>ye(o,e=>e.position===t);return e("selection").orThunk(()=>e("node")).orThunk(()=>e("line")).map(e=>e.position).fold(()=>[],t=>ve(o,e=>e.position===t))}})(t)).length)?I.some({elem:e,toolbars:o}):I.none()},e);var e,t,n}):I.none()})(i(),l).fold(o,e=>{a(e.toolbars,I.some(e.elem))}))},17);l.on("init",()=>{l.on("remove",o),l.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",n),l.on("click keyup focus SetContent",w.throttle),l.on(FM,o),l.on("contexttoolbar-show",t=>{var e=i();k(e.lookupTable,t.toolbarKey).each(e=>{a([e],Qe(t.target!==l,t.target)),IM(h)})}),l.on("focusout",e=>{af.setEditorTimeout(l,()=>{Cc(c.element).isNone()&&Cc(h.element).isNone()&&o()},0)}),l.on("SwitchMode",()=>{l.mode.isReadOnly()&&o()}),l.on("DisabledStateChange",e=>{e.state&&o()}),l.on("ExecCommand",({command:e})=>{"toggleview"===e.toLowerCase()&&o()}),l.on("AfterProgressState",e=>{e.state?o():l.hasFocus()&&w.throttle()}),l.on("dragstart",()=>{s=!0}),l.on("dragend drop",()=>{s=!1}),l.on("NodeChange",e=>{Cc(h.element).fold(w.throttle,S)})})},iD=(i,s)=>{let t=()=>{let e=s.getOptions(i),a=s.getCurrent(i).map(s.hash),r=On();return C(e,n=>({type:"togglemenuitem",text:s.display(n),onSetup:t=>{var e=e=>{e&&(r.on(e=>e.setActive(!1)),r.set(t)),t.setActive(e)};e(Ye(a,s.hash(n)));let o=s.watcher(i,n,e);return()=>{r.clear(),o()}},onAction:()=>s.setCurrent(i,n)}))};i.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:e=>e(t()),onSetup:s.onToolbarSetup}),i.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:t,onSetup:s.onMenuSetup})},sD=t=>{var o,e;iD(t,(e=t,{name:"lineheight",text:"Line height",icon:"line-height",getOptions:ov,hash:e=>{return t=e,GA(t,["fixed","relative","empty"]).map(({value:e,unit:t})=>e+t).getOr(e);var t},display:x,watcher:(e,t,o)=>e.formatter.formatChanged("lineheight",o,!1,{value:t}).unbind,getCurrent:e=>I.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t),onToolbarSetup:$w(e),onMenuSetup:$w(e)})),o=t,I.from(kf(o)).map(e=>({name:"language",text:"Language",icon:"language",getOptions:F(e),hash:e=>q(e.customCode)?e.code:e.code+"/"+e.customCode,display:e=>e.title,watcher:(e,t,o)=>e.formatter.formatChanged("lang",o,!1,{value:t.code,customValue:null!=(e=t.customCode)?e:null}).unbind,getCurrent:e=>{e=N(e.selection.getNode());return Ka(e,e=>I.some(e).filter(xt).bind(t=>Qt(t,"lang").map(e=>({code:e,customCode:Qt(t,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:e=>{var t=kn();return e.setActive(o.formatter.match("lang",{},void 0,!0)),t.set(o.formatter.formatChanged("lang",e.setActive,!0)),Gw(t.clear,$w(o)(e))},onMenuSetup:$w(o)})).each(e=>iD(t,e))},lD=t=>Yw(t,"NodeChange",e=>{e.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),cD=(o,n)=>t=>{t.setActive(n.get());let e=e=>{n.set(e.state),t.setActive(e.state)};return o.on("PastePlainTextToggle",e),Gw(()=>o.off("PastePlainTextToggle",e),$w(o)(t))},dD=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},uD=e=>{var t,o,n,a=e,r=a;dO.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(e,t)=>{r.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:qw(r,e.name),onAction:dD(r,e.name),shortcut:e.shortcut})});for(let e=1;e<=6;e++){var i="h"+e,s="Access+"+e;r.ui.registry.addToggleButton(i,{text:i.toUpperCase(),tooltip:"Heading "+e,onSetup:qw(r,i),onAction:dD(r,i),shortcut:s})}o=a,dO.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],e=>{o.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:Kw(o,e.action),shortcut:e.shortcut,context:e.context})}),dO.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],e=>{o.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:$w(o),onAction:Kw(o,e.action)})}),t=a,dO.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],e=>{t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:Kw(t,e.action),onSetup:qw(t,e.name)})}),n=e,dO.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],e=>{n.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:Kw(n,e.action),context:e.context})}),dO.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],e=>{n.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onSetup:$w(n),onAction:Kw(n,e.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:$w(n),onAction:dD(n,"code")})},mD=(t,o)=>Yw(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",e=>{e.setEnabled(!t.mode.isReadOnly()&&t.undoManager[o]())}),gD=t=>Yw(t,"VisualAid",e=>{e.setActive(t.hasVisual)}),pD=(e,o)=>{a=e,R([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],e=>{a.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:Kw(a,e.cmd),onSetup:qw(a,e.name)})}),a.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:$w(a),onAction:Kw(a,"JustifyNone")}),uD(e);var t,n,r,a,i=e;{var s=i,l=o;let e=_A(l,BA(s));s.ui.registry.addNestedMenuItem("align",{text:l.shared.providers.translate("Align"),onSetup:$w(s),getSubmenuItems:()=>e.items.validateItems(e.getStyleItems())})}{l=i,s=o;let e=_A(s,UA(l));l.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),onSetup:$w(l),getSubmenuItems:()=>e.items.validateItems(e.getStyleItems())})}{s=i;let e={type:"advanced",...(l=o).styles},t=_A(l,tM(s,e));s.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:$w(s),getSubmenuItems:()=>t.items.validateItems(t.getStyleItems())})}{l=i,s=o;let e=_A(s,NA(l));l.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:$w(l),getSubmenuItems:()=>e.items.validateItems(e.getStyleItems())})}{s=i,l=o;let e=_A(l,ZA(s));s.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:$w(s),getSubmenuItems:()=>e.items.validateItems(e.getStyleItems())})}(o=i=e).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:mD(o,"hasUndo"),onAction:Kw(o,"undo")}),o.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:mD(o,"hasRedo"),onAction:Kw(o,"redo")}),(o=i).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:mD(o,"hasUndo"),onAction:Kw(o,"undo"),shortcut:"Meta+Z"}),o.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:mD(o,"hasRedo"),onAction:Kw(o,"redo"),shortcut:"Meta+Y"}),(r=l=e).addCommand("mceApplyTextcolor",(e,t)=>{var o,n,a;n=e,a=t,(o=r).undoManager.transact(()=>{o.focus(),o.formatter.apply(n,{value:a}),o.nodeChanged()})}),r.addCommand("mceRemoveTextcolor",e=>{var t,o;o=e,(t=r).undoManager.transact(()=>{t.focus(),t.formatter.remove(o,{value:null},void 0,!0),t.nodeChanged()})}),s=h0(l),i=f0(l),s=O(s),i=O(i),_0(l,"forecolor","forecolor",s),_0(l,"backcolor","hilitecolor",i),T0(l,"forecolor","forecolor","Text color",s),T0(l,"backcolor","hilitecolor","Background color",i),(s=o=e).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Kw(s,"mceToggleVisualAid"),context:"any"}),(s=o).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:gD(s),onAction:Kw(s,"mceToggleVisualAid"),context:"any"}),(l=e).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:lD(l),onAction:Kw(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:$w(l),onAction:Kw(l,"indent")}),sD(e),n=e,i=O(qf(n)),o=()=>n.execCommand("mceTogglePlainTextPaste"),n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:o,onSetup:cD(n,i)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:o,onSetup:cD(n,i)}),(t=e).ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",e=>t.mode.get()===e),t.ui.registry.addContext("any",se),t.ui.registry.addContext("formatting",e=>t.formatter.canApply(e)),t.ui.registry.addContext("insert",e=>t.schema.isValidChild(t.selection.getNode().tagName,e))},hD=t=>e=>e.options.get(t),fD=hD("contextmenu_never_use_native"),vD=hD("contextmenu_avoid_overlap"),bD=e=>{let t=e.ui.registry.getAll().contextMenus,o=e.options.get("contextmenu");return e.options.isSet("contextmenu")?o:ve(o,e=>$e(t,e))},xD=(e,t)=>({type:"makeshift",x:e,y:t}),yD=e=>"longpress"===e.type||0===e.type.indexOf("touch"),wD=(e,t)=>{return"contextmenu"===t.type||"longpress"===t.type?e.inline?(n=t,yD(n)?(a=n.touches[0],xD(a.pageX,a.pageY)):xD(n.pageX,n.pageY)):(a=e.getContentAreaContainer(),n=t,t=yD(n)?(t=n.touches[0],xD(t.clientX,t.clientY)):xD(n.clientX,n.clientY),a=rf.DOM.getPos(a),t=t,o=a.x,a=a.y,xD(t.x+o,t.y+a)):SD(e);var o,n,a},SD=e=>({type:"selection",root:N(e.selection.getNode())}),CD=(e,t,o)=>{switch(o){case"node":return n=e,{type:"node",node:I.some(N(n.selection.getNode())),root:N(n.getBody())};case"point":return wD(e,t);case"selection":return SD(e)}var n},kD=(e,t,o,n,a,r)=>{let i=o(),s=CD(e,t,r);XO(i,Gb.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:I.none()}).map(e=>{t.preventDefault(),ef.showMenuAt(a,{anchor:s},{menu:{markers:ix("normal")},data:e})})},OD={onLtr:()=>[ic,tc,oc,nc,ac,rc,A1,M1,E1,_1,T1,O1],onRtl:()=>[ic,oc,tc,ac,nc,rc,A1,M1,T1,O1,E1,_1]},_D={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},TD=(c,t,o,d,u,m)=>{let e=Jo(),g=e.os.isiOS(),p=e.os.isMacOS(),h=e.os.isAndroid(),f=e.deviceType.isTouch(),n=()=>{var e=o();{var n=c,a=t,r=d,i=u,s=m,l=!(h||g||p&&f);let o=((e,t,o)=>{e=CD(e,t,o);return{bubble:Xc(0,"point"===o?12:0,_D),layouts:OD,overrides:{maxWidthFunction:SE(),maxHeightFunction:Gc()},...e}})(n,a,s);XO(e,Gb.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!0,search:I.none()}).map(e=>{a.preventDefault();var t=l?Qp.HighlightMenuAndItem:Qp.HighlightNone;ef.showMenuWithinBounds(i,{anchor:o},{menu:{markers:ix("normal"),highlightOnOpen:t},data:e,type:"horizontal"},()=>I.some(KM(n,r.shared,"node"===s?"node":"selection"))),n.dispatch(FM)})}};if((p||g)&&"node"!==m){let e=()=>{{var r=c;let e=r.selection.getRng(),t=()=>{af.setEditorTimeout(r,()=>{r.selection.setRng(e)},10),a()},o=(r.once("touchend",t),e=>{e.preventDefault(),e.stopImmediatePropagation()}),n=(r.on("mousedown",o,!0),()=>a()),a=(r.once("longpresscancel",n),()=>{r.off("touchend",t),r.off("longpresscancel",n),r.off("mousedown",o)})}n()};((o,n)=>{var a=o.selection;if(a.isCollapsed()||n.touches.length<1)return!1;{let t=n.touches[0],e=a.getRng();return Dd(o.getWin(),yd.domRange(e)).exists(e=>e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)}})(c,t)?e():(c.once("selectionchange",e),c.once("touchend",()=>c.off("selectionchange",e)))}else n()},ED=e=>$(e)?"|"===e:"separator"===e.type,AD={type:"separator"},MD=t=>{var e=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if($(t))return t;switch(t.type){case"separator":return AD;case"submenu":return{type:"nestedmenuitem",...e(t),getSubmenuItems:()=>{var e=t.getSubmenuItems();return $(e)?e:C(e,MD)}};default:var o=t;return{type:"menuitem",...e(o),onAction:Z(o.onAction)}}},DD=(e,t)=>{var o;return 0===t.length?e:(o=Be(e).filter(e=>!ED(e)).fold(()=>[],e=>[AD]),e.concat(o).concat(t).concat([AD]))},BD=(e,t)=>{return!("longpress"===(o=t).type||$e(o,"touches"))&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType);var o},FD=(e,t)=>BD(e,t)?e.selection.getStart(!0):t.target,ID=(i,e,a)=>{let s=Jo().deviceType.isTouch,l=Sl(ef.sketch({dom:{tag:"div"},lazySink:e,onEscape:()=>i.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:H([B("dismissContextMenu",[L(Hr(),(e,t)=>{h.close(e),i.focus()})])])})),t=()=>ef.hide(l),o=r=>{var e,t,o,n;fD(i)&&r.preventDefault(),e=i,r.ctrlKey&&!fD(e)||(e=i,0===bD(e).length)||(e=i,t=r,o=vD(e),n=BD(e,t)?"selection":"point",t=rt(o)&&(e=FD(e,t),pS(N(e),o))?"node":n,(s()?TD:kD)(i,r,()=>{var e=FD(i,r),t=i.ui.registry.getAll(),o=bD(i),n=t.contextMenus,t=o,a=e;return 0<(t=xe(t,(o,e)=>k(n,e.toLowerCase()).map(e=>{var t=e.update(a);if($(t)&&rt(at(t)))return DD(o,t.split(" "));if(c(t)&&0<t.length){let e=C(t,MD);return DD(o,e)}return o}).getOrThunk(()=>o.concat([e])),[])).length&&ED(t[t.length-1])&&t.pop(),t},a,l,t))};i.on("init",()=>{var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(s()?"":" ResizeWindow");i.on(e,t),i.on("longpress contextmenu",o)})},RD=Ga([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ND=t=>e=>e.translate(-t.left,-t.top),zD=t=>e=>e.translate(t.left,t.top),VD=o=>(e,t)=>xe(o,(e,t)=>t(e),bo(e,t)),LD=(e,t,o)=>e.fold(VD([zD(o),ND(t)]),VD([ND(t)]),VD([])),HD=(e,t,o)=>e.fold(VD([zD(o)]),VD([]),VD([zD(t)])),PD=(e,t,o)=>e.fold(VD([]),VD([ND(o)]),VD([zD(t),ND(o)])),UD=(e,t,o)=>{e=e.fold((e,t)=>({position:I.some("absolute"),left:I.some(e+"px"),top:I.some(t+"px")}),(e,t)=>({position:I.some("absolute"),left:I.some(e-o.left+"px"),top:I.some(t-o.top+"px")}),(e,t)=>({position:I.some("fixed"),left:I.some(e+"px"),top:I.some(t+"px")}));return{right:I.none(),bottom:I.none(),...e}},WD=(e,r,i,s)=>{var t=(n,a)=>(e,t)=>{var o=n(r,i,s);return a(e.getOr(o.left),t.getOr(o.top))};return e.fold(t(PD,jD),t(HD,GD),t(LD,$D))},jD=RD.offset,GD=RD.absolute,$D=RD.fixed,qD=(e,t)=>{e=Jt(e,t);return q(e)?NaN:parseInt(e,10)},YD=(e,t,o,n,a,r)=>{c=o,d=n,o=t,n=(n=e).element,u=qD(n,o.leftAttr),n=qD(n,o.topAttr);let i=(isNaN(u)||isNaN(n)?I.none():I.some(bo(u,n))).fold(()=>c,e=>$D(e.left+d.left,e.top+d.top)),s=(t.mustSnap?KD:JD)(e,t,i,a,r),l=LD(i,a,r);var c,d,o=e,u=t,n=l;return o=o.element,w(o,u.leftAttr,n.left+"px"),w(o,u.topAttr,n.top+"px"),s.fold(()=>({coord:$D(l.left,l.top),extra:I.none()}),e=>({coord:e.output,extra:e.extra}))},XD=(e,o,n,a)=>Ie(e,e=>{var t=e.sensor;return((e,t,o,n,a,r)=>{e=HD(e,a,r),t=HD(t,a,r);return Math.abs(e.left-t.left)<=o&&Math.abs(e.top-t.top)<=n})(o,t,e.range.left,e.range.top,n,a)?I.some({output:WD(e.output,o,n,a),extra:e.extra}):I.none()}),KD=(e,t,a,r,i)=>{let o=t.getSnapPoints(e);return XD(o,a,r,i).orThunk(()=>xe(o,(t,o)=>{let e=o.sensor,n=((e,t,o,n)=>{e=HD(e,o,n),t=HD(t,o,n),o=Math.abs(e.left-t.left),n=Math.abs(e.top-t.top);return bo(o,n)})(a,e,(o.range.left,o.range.top,r),i);return t.deltas.fold(()=>({deltas:I.some(n),snap:I.some(o)}),e=>(n.left+n.top)/2<=(e.left+e.top)/2?{deltas:I.some(n),snap:I.some(o)}:t)},{deltas:I.none(),snap:I.none()}).snap.map(e=>({output:WD(e.output,a,r,i),extra:e.extra})))},JD=(e,t,o,n,a)=>{t=t.getSnapPoints(e);return XD(t,o,n,a)},QD=Object.freeze({__proto__:null,snapTo:(r,e,t,i)=>{var s,l=e.getTarget(r.element);if(e.repositionTarget){let e=At(r.element),t=cn(e),o=Hi(l),n=(r=i,i=t,s=o,{coord:WD(r.output,r.output,i,s),extra:r.extra}),a=UD(n.coord,0,o);ao(l,a)}}}),ZD="data-initial-z-index",eB=(e,t)=>{var o;e.getSystem().addToGui(t),o=t,Ft(o.element).filter(xt).each(t=>{so(t,"z-index").each(e=>{w(t,ZD,e)}),z(t,"z-index",ro(o.element,"z-index"))})},tB=e=>{var t;t=e,Ft(t.element).filter(xt).each(t=>{Qt(t,ZD).fold(()=>uo(t,"z-index"),e=>z(t,"z-index",e)),eo(t,ZD)}),e.getSystem().removeFromGui(e)},oB=(e,t,o)=>e.getSystem().build(kS.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:o})),nB=Na("snaps",[r("getSnapPoints"),e("onSensor"),r("leftAttr"),r("topAttr"),u("lazyViewport",Sn),u("mustSnap",!1)]),aB=[u("useFixed",ie),r("blockerClass"),u("getTarget",x),u("onDrag",S),u("repositionTarget",!0),u("onDrop",S),Ua("getBounds",Sn),nB],rB=t=>{return e=so(t,"left"),o=so(t,"top"),n=so(t,"position"),(e.isSome()&&o.isSome()&&n.isSome()?I.some((e=e.getOrDie(),o=o.getOrDie(),("fixed"===n.getOrDie()?$D:jD)(parseInt(e,10),parseInt(o,10)))):I.none()).getOrThunk(()=>{var e=yo(t);return GD(e.left,e.top)});var e,o,n},iB=(e,t)=>({bounds:e.getBounds(),height:fo(t.element),width:ko(t.element)}),sB=(l,c,e,t,o)=>{let n=e.update(t,o),d=e.getStartData().getOrThunk(()=>iB(c,l));n.each(e=>{var t,o,n,a,r,i,s;t=l,o=c,n=d,e=e,s=o.getTarget(t.element),o.repositionTarget&&(i=At(t.element),i=cn(i),a=Hi(s),r=rB(s),r=((r,i,s,l,c,d,u)=>{{i=i.fold(()=>{o=d.left,n=d.top;var o,n,e=s.fold((e,t)=>jD(e+o,t+n),(e,t)=>GD(e+o,t+n),(e,t)=>$D(e+o,t+n)),e=LD(e,l,c);return $D(e.left,e.top)},t=>{var e=YD(r,t,s,d,l,c);return e.extra.each(e=>{t.onSensor(r,e)}),e.coord});var m=l,g=c;let e=u.bounds,t=HD(i,m,g),o=Vs(t.left,e.x,e.x+e.width-u.width),n=Vs(t.top,e.y,e.y+e.height-u.height),a=GD(o,n);return i.fold(()=>{var e=PD(a,m,g);return jD(e.left,e.top)},F(a),()=>{var e=LD(a,m,g);return $D(e.left,e.top)})}})(t,o.snaps,r,i,a,e,n),i=UD(r,0,a),ao(s,i)),o.onDrag(t,s,e)})},lB=(o,e,t,n)=>{e.each(tB),t.snaps.each(e=>{var t;e=e,t=(t=o).element,eo(t,e.leftAttr),eo(t,e.topAttr)});e=t.getTarget(o.element);n.reset(),t.onDrop(o,e)},cB=e=>(t,o)=>{let n=e=>{o.setStartData(iB(t,e))};return Zr([L(Nr(),e=>{o.getStartData().each(()=>n(e))}),...e(t,o,n)])};var dB=Object.freeze({__proto__:null,getData:e=>I.from(bo(e.x,e.y)),getDelta:(e,t)=>bo(t.left-e.left,t.top-e.top)});let uB=(s,l,c)=>[L(rr(),(t,e)=>{if(0!==e.event.raw.button)return;e.stop();let o=()=>lB(t,I.some(r),s,l),n=hS(o,200),a={drop:o,delayDrop:n.schedule,forceDrop:o,move:e=>{n.cancel(),sB(t,s,l,dB,e)}},r=oB(t,s.blockerClass,(i=a,Zr([L(rr(),i.forceDrop),L(lr(),i.drop),L(ir(),(e,t)=>{i.move(t.event)}),L(sr(),i.delayDrop)])));var i;c(t),eB(t,r)})],mB=[...aB,Ms("dragger",{handlers:cB(uB)})];var gB,pB=Object.freeze({__proto__:null,getData:e=>{var e=e.raw.touches;return 1===e.length?(e=e[0],I.some(bo(e.clientX,e.clientY))):I.none()},getDelta:(e,t)=>bo(t.left-e.left,t.top-e.top)});let hB=(n,a,r)=>{let i=On(),s=e=>{lB(e,i.get(),n,a),i.clear()};return[L(tr(),(t,e)=>{e.stop();var o,e=()=>s(t),e={drop:e,delayDrop:S,forceDrop:e,move:e=>{sB(t,n,a,pB,e)}},e=oB(t,n.blockerClass,(o=e,Zr([L(tr(),o.forceDrop),L(nr(),o.drop),L(ar(),o.drop),L(or(),(e,t)=>{o.move(t.event)})])));i.set(e),r(t),eB(t,e)}),L(or(),(e,t)=>{t.stop(),sB(e,n,a,pB,t.event)}),L(nr(),(e,t)=>{t.stop(),s(e)}),L(ar(),s)]},fB=mB,vB=[...aB,Ms("dragger",{handlers:cB(hB)})],bB=[...aB,Ms("dragger",{handlers:cB((e,t,o)=>[...uB(e,t,o),...hB(e,t,o)])})],xB=Object.freeze({__proto__:null,mouse:fB,touch:vB,mouseOrTouch:bB}),yB=Object.freeze({__proto__:null,init:()=>{let a=I.none(),t=I.none();var e=F({});return xi({readState:e,reset:()=>{a=I.none(),t=I.none()},update:(n,e)=>n.getData(e).bind(e=>{return t=n,o=e,e=a.map(e=>t.getDelta(e,o)),a=I.some(o),e;var t,o}),getStartData:()=>t,setStartData:e=>{t=I.some(e)}})}}),wB=Ci({branchKey:"mode",branches:xB,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:I.from(e.extra)})},state:yB,apis:QD}),SB=(e,n,a,r,t,o)=>e.fold(()=>wB.snap({sensor:GD(a-20,r-20),range:bo(t,o),output:GD(I.some(a),I.some(r)),extra:{td:n}}),e=>{var t=a-20,o=r-20,e=e.element.dom.getBoundingClientRect();return wB.snap({sensor:GD(t,o),range:bo(40,40),output:GD(I.some(a-e.width/2),I.some(r-e.height/2)),extra:{td:n}})}),CB=(e,a,r)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,t)=>{var o,n,t=t.td;o=a.get(),n=t,o.exists(e=>Tt(e,n))||(a.set(t),r(t))},mustSnap:!0}),kB=e=>j(wv.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:H([wB.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),eC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),OB=(s,a)=>{let r=O([]),i=O([]),l=O(!1),c=On(),d=On(),t=e=>{var t=yn(e);return SB(u.getOpt(a),e,t.x,t.y,t.width,t.height)},o=e=>{var t=yn(e);return SB(m.getOpt(a),e,t.right,t.bottom,t.width,t.height)},e=CB(()=>C(r.get(),e=>t(e)),c,t=>{d.get().each(e=>{s.dispatch("TableSelectorChange",{start:t,finish:e})})}),n=CB(()=>C(i.get(),e=>o(e)),d,t=>{c.get().each(e=>{s.dispatch("TableSelectorChange",{start:e,finish:t})})}),u=kB(e),m=kB(n),g=Sl(u.asSpec()),p=Sl(m.asSpec()),h=(n,a,r,i)=>{r=r(a);wB.snapTo(n,r);{r=n,n=a.dom.getBoundingClientRect(),uo(r.element,"display");let e=Bt(N(s.getBody())).dom.innerHeight,t=n[i]<0,o=n[i]>e;(t||o)&&z(r.element,"display","none")}},f=e=>h(g,e,t,"top"),v=e=>h(p,e,o,"bottom");if(Jo().deviceType.isTouch()){let n=e=>C(e,N);s.on("TableSelectionChange",e=>{l.get()||(cu(a,g),cu(a,p),l.set(!0));let t=N(e.start),o=N(e.finish);c.set(t),d.set(o),I.from(e.otherCells).each(e=>{r.set(n(e.upOrLeftCells)),i.set(n(e.downOrRightCells)),f(t),v(o)})}),s.on("ResizeEditor ResizeWindow ScrollContent",()=>{c.get().each(f),d.get().each(v)}),s.on("TableSelectionClear",()=>{l.get()&&(mu(g),mu(p),l.set(!1)),c.clear(),d.clear()})}},_B=(r,e,i)=>{let t,s=null!=(t=e.delimiter)?t:"";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:H([U.config({mode:"flow",selector:"div[role=button]"}),P.config({disabled:i.isDisabled}),ow(()=>i.checkUiComponentContext("any")),Ov.config({}),D.config({}),B("elementPathEvents",[li((t,e)=>{r.shortcuts.add("alt+F11","focus statusbar elementpath",()=>U.focusIn(t)),r.on("NodeChange",e=>{e=(e=>{var t,o=[];let n=e.length;for(;0<n--;){var a=e[n];if(1===a.nodeType&&"BR"!==(t=a).nodeName&&!t.getAttribute("data-mce-bogus")&&"bookmark"!==t.getAttribute("data-mce-type")){let e=Ww(r,a);if(e.isDefaultPrevented()||o.push({name:e.name,element:a}),e.isPropagationStopped())break}}return o})(e.parents),e=0<e.length?xe(e,(e,t,o)=>{n=t.name,a=t.element,t=o;var n,a,t=wv.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":t}},components:[bl(n)],action:e=>{r.focus(),r.selection.select(a),r.nodeChanged()},buttonBehaviours:H([Nv.config({...i.tooltips.getConfig({tooltipText:i.translate(["Select the {0} element",a.nodeName.toLowerCase()]),onShow:(e,t)=>{var o;e=e.element,o=t.element,t=I.from(Jt(e,"id")).getOrThunk(()=>{var e=E("aria");return w(o,"id",e),e}),w(e,"aria-describedby",t)},onHide:e=>{e=e.element;eo(e,"aria-describedby")}})}),Gy(i.isDisabled),ow(()=>i.checkUiComponentContext("any"))])});return 0===o?e.concat([t]):e.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[bl(` ${s} `)]},t])},[]):[];D.set(t,e)})})])]),components:[]}},TB=((lA=gB=gB||{})[lA.None=0]="None",lA[lA.Both=1]="Both",lA[lA.Vertical=2]="Vertical",(e,t,o)=>{let n=N(e.getContainer()),a=((e,t,o,n,a)=>{n={height:_M(n+t.top,bf(e),yf(e))};return o===gB.Both&&(n.width=_M(a+t.left,vf(e),xf(e))),n})(e,t,o,ho(n),Co(n));ze(a,(e,t)=>{J(e)&&z(n,t,OM(e))}),e.dispatch("ResizeEditor")}),EB=(e,t,o,n)=>{o=bo(20*o,20*n);return TB(e,o,t),I.some(!0)},AB=(l,c)=>{return{dom:{tag:"div",classes:["tox-statusbar"]},components:(e=(()=>{let e=[],t=Kf(l),o=jf(l),n=Gf(l)||l.hasPlugin("wordcount");return o&&e.push(_B(l,{},c)),t&&e.push((s=lw("Alt+0"),{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[bl(Bb.translate(["Press {0} for help",s]))]})),n&&e.push((s=[],l.hasPlugin("wordcount")&&s.push(((e,n)=>{let a=(e,t,o)=>D.set(e,[bl(n.translate(["{0} "+o,t[o]]))]);return wv.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:H([Gy(n.isDisabled),ow(()=>n.checkUiComponentContext("any")),Ov.config({}),D.config({}),A.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),B("wordcount-events",[ui(e=>{var t=A.getValue(e),o="words"===t.mode?"characters":"words";A.setValue(e,{mode:o,count:t.count}),a(e,t.count,o)}),li(o=>{e.on("wordCountUpdate",e=>{var t=A.getValue(o).mode;A.setValue(o,{mode:t,count:e.wordCount}),a(o,e.wordCount,t)})})])]),eventOrder:{[Tr()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(l,c)),Gf(l)&&s.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":l.translate(["Build with {0}","TinyMCE"])},innerHtml:l.translate(["Build with {0}",'<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>\n'.trim()])},behaviours:H([W.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:s})),0<e.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(r="tox-statusbar__text-container--flex-start",i="tox-statusbar__text-container--flex-end",t?(a="tox-statusbar__text-container-3-cols",n||o?n&&!o?[a,i]:[a,r]:[a,"tox-statusbar__text-container--space-around"]):[n&&!o?i:r])]},components:e}]:[];var a,r,i,s})(),t=((n,e)=>{let a=(e=>{e=$f(e);return!1===e?gB.None:"both"===e?gB.Both:gB.Vertical})(n);var t;return a===gB.None?I.none():(t=a===gB.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",I.some(Pb("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":e.translate(t),"data-mce-name":"resize-handle"},behaviours:[wB.config({mode:"mouse",repositionTarget:!1,onDrag:(e,t,o)=>TB(n,o,a),blockerClass:"tox-blocker"}),U.config({mode:"special",onLeft:()=>EB(n,a,-1,0),onRight:()=>EB(n,a,1,0),onUp:()=>EB(n,a,0,-1),onDown:()=>EB(n,a,0,1)}),Ov.config({}),W.config({}),Nv.config(e.tooltips.getConfig({tooltipText:e.translate("Resize")}))]},e.icons)))})(l,c),e.concat(t.toArray()))};var e,t},MB=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),DB=(_,d)=>{let u=_.inline,m=u?BM:CM,g=uv(_)?jT:IT,p=(()=>{let t=On(),n=On(),o=On();return{dialogUi:t,popupUi:n,mainUi:o,getUiMotherships:()=>{let e=t.get().map(e=>e.mothership),o=n.get().map(e=>e.mothership);return e.fold(()=>o.toArray(),t=>o.fold(()=>[t],e=>Tt(t.element,e.element)?[t]:[t,e]))},lazyGetInOuterOrDie:(e,t)=>()=>o.get().bind(e=>t(e.outerContainer)).getOrDie(`Could not find ${e} element in OuterContainer`)}})(),h=On(),f=On(),v=On(),b=Jo().deviceType.isTouch()?["tox-platform-touch"]:[],x=iv(_),y=_f(_),T=j({dom:{tag:"div",classes:["tox-anchorbar"]}}),E=j({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),A=()=>p.mainUi.get().map(e=>e.outerContainer).bind(gA.getHeader),e=p.lazyGetInOuterOrDie("anchor bar",T.getOpt),t=p.lazyGetInOuterOrDie("bottom anchor bar",E.getOpt),M=p.lazyGetInOuterOrDie("toolbar",gA.getToolbar),D=p.lazyGetInOuterOrDie("throbber",gA.getThrobber),B=((e,a,t,o)=>{let n=O(!1),r=(e=>{let t=O(iv(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(a),i={icons:()=>a.ui.registry.getAll().icons,menuItems:()=>a.ui.registry.getAll().menuItems,translate:Bb.translate,isDisabled:()=>!a.ui.isEnabled(),getOption:a.options.get,tooltips:(e=>{let n=0,t=e=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[bl(e.tooltipText)]}];return{getConfig:o=>({delayForShow:()=>0<n?60:300,delayForHide:F(300),exclusive:!0,lazySink:e,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:t(o),onShow:(e,t)=>{n++,o.onShow&&o.onShow(e,t)},onHide:(e,t)=>{n--,o.onHide&&o.onHide(e,t)},onSetup:o.onSetup}),getComponents:t}})(e.dialog),checkUiComponentContext:e=>{if(pf(a))return{contextType:"disabled",shouldDisable:!0};let[t,o=""]=e.split(":"),n=a.ui.registry.getAll().contexts;return{contextType:t,shouldDisable:!k(n,t).fold(()=>k(n,"mode").map(e=>e("design")).getOr(!1),e=>"!"===o.charAt(0)?!e(o.slice(1)):e(o))}}},s=yT(a),l=(o=>{let n=e=>()=>o.formatter.match(e),a=t=>()=>{var e=o.formatter.get(t);return void 0!==e?I.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(t))}):I.none()},r=O([]),i=O([]),s=O(!1);return o.on("PreInit",e=>{var t=q1(o),t=X1(o,t,n,a);r.set(t)}),o.on("addStyleModifications",e=>{var t=X1(o,e.items,n,a);i.set(t),s.set(e.replace)}),{getData:()=>{var e=s.get()?[]:r.get(),t=i.get();return e.concat(t)}}})(a),c={colorPicker:(e,t)=>{E0(x)(e,t)},hasCustomColors:()=>p0(b),getColors:e=>d0(v,e),getColorCols:(f=v=b=x=a,e=>g0(f,e))},d={isDraggableModal:(h=a,()=>Uf(h))},u={shared:{providers:i,anchors:((e,t,o,n)=>{let a=lv(e),r=()=>N(e.getBody()),i=()=>N(e.getContentAreaContainer()),s=()=>a||!n();return{inlineDialog:V1(i,t,s),inlineBottomDialog:L1(e.inline,i,o,s),banner:H1(i,t,s),cursor:P1(e,r),node:U1(r)}})(a,t,o,r.isPositionedAtTop),header:r},urlinput:s,styles:l,colorinput:c,dialog:d,isContextMenuOpen:()=>n.get(),setContextMenuState:e=>n.set(e)},m=e=>I.none(),g={...u,shared:{...u.shared,interpreter:e=>b1(e,{},g,m),getSink:e.popup}},p={...u,shared:{...u.shared,interpreter:e=>b1(e,{},p,m),getSink:e.dialog}};var h,f,v,b,x;return{popup:g,dialog:p}})({popup:()=>V.fromOption(p.popupUi.get().map(e=>e.sink),"(popup) UI has not been rendered"),dialog:()=>V.fromOption(p.dialogUi.get().map(e=>e.sink),"UI has not been rendered")},_,e,t);return{popups:{backstage:B.popup,getMothership:()=>MB("popups",v)},dialogs:{backstage:B.dialog,getMothership:()=>MB("dialogs",f)},renderUI:()=>{r={attributes:{"data-alloy-vertical-dir":x?kl.BottomToTop:kl.TopToBottom}},o=gA.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:B.popup,onEscape:()=>{_.focus()}}),w=gA.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:B.popup.shared.getSink,providers:B.popup.shared.providers,onEscape:()=>{_.focus()},onToolbarToggled:e=>{_.dispatch("ToggleToolbarDrawer",{state:e})},type:y,lazyToolbar:M,lazyHeader:()=>A().getOrDie("Could not find header element"),...r}),n=gA.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:B.popup.shared.providers,onEscape:()=>{_.focus()},type:y}),e=rv(_),a=nv(_),t=ev(_),S=Xf(_),i=gA.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),S=S?[i,o]:[o],i=gA.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(e||a||t?[]:["tox-editor-header--empty"]),...r},components:Se([t?S:[],e?[n]:a?[w]:[],lv(_)?[]:[T.asSpec()]]),sticky:uv(_),editor:_,sharedBackstage:B.popup.shared}),o={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[gA.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),gA.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},r=gA.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:B.popup}),t=gA.parts.viewWrapper({backstage:B.popup}),S=Wf(_)&&!u?I.some(AB(_,B.popup.shared.providers)):I.none(),e=Se([x?[]:[i],u?[]:[o],x?[i]:[]]),n=gA.parts.editorContainer({components:Se([e,u?[]:[E.asSpec()]])}),a=dv(_),w={role:"application",...Bb.isRtl()?{dir:"rtl"}:{},...a?{"aria-hidden":"true"}:{}},o=Sl(gA.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(u?["tox-tinymce-inline"]:[]).concat(x?["tox-tinymce--toolbar-bottom"]:[]).concat(b),styles:{visibility:"hidden",...a?{opacity:"0",border:"0"}:{}},attributes:w},components:[n,...u?[]:[t,...S.toArray()],r],behaviours:H([ow(()=>B.popup.shared.providers.checkUiComponentContext("any")),P.config({disableClass:"tox-tinymce--disabled"}),U.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),i=OS(o),h.set(i);var e={mothership:i,outerContainer:o},t=(a=cv(_),a=Tt(qt(),a)&&"grid"===ro(a,"display"),w={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(b),attributes:{...Bb.isRtl()?{dir:"rtl"}:{}}},behaviours:H([ou.config({useFixed:()=>g.isDocked(A)})])},n={dom:{styles:{width:document.body.clientWidth+"px"}},events:Zr([L(zr(),e=>{z(e.element,"width",document.body.clientWidth+"px")})])},w=Sl(Vn(w,a?n:{})),a=OS(w),f.set(a),{sink:w,mothership:a}),o=mv(_)?(S={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(b),attributes:{...Bb.isRtl()?{dir:"rtl"}:{}}},behaviours:H([ou.config({useFixed:()=>g.isDocked(A),getBounds:()=>d.getPopupSinkBounds()})])},S=Sl(S),r=OS(S),v.set(r),{sink:S,mothership:r}):(i=t,v.set(i.mothership),i),n=(p.dialogUi.set(t),p.popupUi.set(o),p.mainUi.set(e),{popupUi:o,dialogUi:t,mainUi:e,uiMotherships:p.getUiMotherships()}),{mainUi:w,popupUi:a,uiMotherships:S}=n,{buttons:r,menuItems:i,contextToolbars:o,sidebars:t,views:e}=(Ve(Tf(_),(e,t)=>{_.ui.registry.addGroupToolbarButton(t,e)}),_.ui.registry.getAll()),s=av(_),i={menuItems:i,menus:gv(_),menubar:Ff(_),toolbar:s.getOrThunk(()=>If(_)),allowToolbarGroups:y===tf.floating,buttons:r,sidebar:t,views:e},l=w.outerContainer;_.addShortcut("alt+F9","focus menubar",()=>{gA.focusMenubar(l)}),_.addShortcut("alt+F10","focus toolbar",()=>{gA.focusToolbar(l)}),_.addCommand("ToggleToolbarDrawer",(e,t)=>{null!=t&&t.skipFocus?gA.toggleToolbarDrawerWithoutFocusing(l):gA.toggleToolbarDrawer(l)}),_.addQueryStateHandler("ToggleToolbarDrawer",()=>gA.isToolbarDrawerToggled(l));{var C=_,k=w.mothership,O=S;let o=(t,o)=>{R([k,...O],e=>{e.broadcastEvent(t,o)})},t=(t,o)=>{R([k,...O],e=>{e.broadcastOn([t],o)})},e=e=>t(Eu(),{target:e.target}),n=gn(),a=zc(n,"touchstart",e),r=zc(n,"touchmove",e=>o(Ir(),e)),i=zc(n,"touchend",e=>o(Rr(),e)),s=zc(n,"mousedown",e),l=zc(n,"mouseup",e=>{0===e.raw.button&&t(Mu(),{target:e.target})}),c=e=>t(Eu(),{target:N(e.target)}),d=e=>{0===e.button&&t(Mu(),{target:N(e.target)})},u=()=>{R(C.editorManager.get(),e=>{C!==e&&e.dispatch("DismissPopups",{relatedTarget:C})})},m=e=>o(Nr(),Lc(e)),g=e=>{t(Au(),{}),o(zr(),Lc(e))},p=Ut(N(C.getElement())),h=Vc(p,"scroll",t=>{requestAnimationFrame(()=>{var e;null!=C.getContainer()&&(e=xv(C,k.element).map(e=>[e.element,...e.others]).getOr([]),ge(e,e=>Tt(e,t.target)))&&(C.dispatch("ElementScroll",{target:t.target.dom}),o(jr(),t))})}),f=()=>t(Au(),{}),v=e=>{e.state&&t(Eu(),{target:N(C.getContainer())})},b=e=>{t(Eu(),{target:N(e.relatedTarget.getContainer())})},x=e=>C.dispatch("focusin",e),y=e=>C.dispatch("focusout",e);C.on("PostRender",()=>{C.on("click",c),C.on("tap",c),C.on("mouseup",d),C.on("mousedown",u),C.on("ScrollWindow",m),C.on("ResizeWindow",g),C.on("ResizeEditor",f),C.on("AfterProgressState",v),C.on("DismissPopups",b),R([k,...O],e=>{e.element.dom.addEventListener("focusin",x),e.element.dom.addEventListener("focusout",y)})}),C.on("remove",()=>{C.off("click",c),C.off("tap",c),C.off("mouseup",d),C.off("mousedown",u),C.off("ScrollWindow",m),C.off("ResizeWindow",g),C.off("ResizeEditor",f),C.off("AfterProgressState",v),C.off("DismissPopups",b),R([k,...O],e=>{e.element.dom.removeEventListener("focusin",x),e.element.dom.removeEventListener("focusout",y)}),s.unbind(),a.unbind(),r.unbind(),i.unbind(),l.unbind(),h.unbind()}),C.on("detach",()=>{R([k,...O],vu),R([k,...O],e=>e.destroy())})}g.setup(_,B.popup.shared,A),pD(_,B.popup),ID(_,B.popup.shared.getSink,B.popup);{var c=_;let n=c.ui.registry.getAll().sidebars;R(Re(n),t=>{let e=n[t],o=()=>Ye(I.from(c.queryCommandValue("ToggleSidebar")),t);c.ui.registry.addToggleButton(t,{icon:e.icon,tooltip:e.tooltip,onAction:e=>{c.execCommand("ToggleSidebar",!1,t),e.setActive(o())},onSetup:e=>{e.setActive(o());let t=()=>e.setActive(o());return c.on("ToggleSidebar",t),()=>{c.off("ToggleSidebar",t)}},context:"any"})})}return gE(_,D,B.popup.shared),rD(_,o,a.sink,{backstage:B.popup}),OB(_,a.sink),e={targetNode:_.getElement(),height:(s=w.outerContainer,r=OM((e=>{let t=hf(e),o=bf(e),n=yf(e);return kM(t).map(e=>_M(e,o,n))})(r=_).getOr(hf(r))),t=OM((t=_,TM(t).getOr(ff(t)))),_.inline||(co("div","width",t)&&z(s.element,"width",t),co("div","height",r)?z(s.element,"height",r):z(s.element,"height","400px")),r)},m.render(_,n,i,B.popup,e)}}},BB=F([r("lazySink"),d("dragBlockClass"),Ua("getBounds",Sn),u("useTabstopAt",se),u("firstTabstop",0),u("eventOrder",{}),$u("modalBehaviours",[U]),Ts("onExecute"),As("onEscape")]),FB={sketch:x},IB=F([wm({name:"draghandle",overrides:(e,t)=>({behaviours:H([wB.config({mode:"mouse",getTarget:e=>Ml(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),xm({schema:[r("dom")],name:"title"}),xm({factory:FB,schema:[r("dom")],name:"close"}),xm({factory:FB,schema:[r("dom")],name:"body"}),wm({factory:FB,schema:[r("dom")],name:"footer"}),ym({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[u("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),u("components",[])],name:"blocker"})]),RB=qm({name:"ModalDialog",configFields:BB(),partFields:IB(),factory:(r,e,t,n)=>{let a=On(),o=E("modal-events"),i={...r.eventOrder,[Vr()]:[o].concat(r.eventOrder["alloy.system.attached"]||[])},s=Jo();return{uid:r.uid,dom:r.dom,components:e,apis:{show:e=>{a.set(e);var t=r.lazySink(e).getOrDie(),o=n.blocker(),o=t.getSystem().build({...o,components:o.components.concat([Cl(e)]),behaviours:H([W.config({}),B("dialog-blocker-events",[si(dr(),()=>{uE.isBlocked(e)||U.focusIn(e)})])])});cu(t,o),U.focusIn(e)},hide:t=>{a.clear(),Ft(t.element).each(e=>{t.getSystem().getByDom(e).each(e=>{mu(e)})})},getBody:e=>Fm(e,r,"body"),getFooter:e=>Bm(e,r,"footer"),setIdle:e=>{uE.unblock(e)},setBusy:(e,t)=>{uE.block(e,t)}},eventOrder:i,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Yu(r.modalBehaviours,[D.config({}),U.config({mode:"cyclic",onEnter:r.onExecute,onEscape:r.onEscape,useTabstopAt:r.useTabstopAt,firstTabstop:r.firstTabstop}),uE.config({getRoot:a.get}),B(o,[li(e=>{let t=Fm(e,r,"title").element,o=t.dom.textContent;var n,a;s.os.isMacOS()&&X(o)?w(e.element,"aria-label",o):(e=e.element,n=t,a=Qt(e,"id").fold(()=>{var e=E("dialog-label");return w(n,"id",e),e},x),w(e,"aria-labelledby",a))})])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,o)=>{e.setBusy(t,o)},setIdle:(e,t)=>{e.setIdle(t)}}}),NB=i([Dx,Bx].concat(By)),zB=sa,VB=[ry("button"),$x,Ha("align","end",["start","end"]),ey,Zx,Fa("buttonType",["primary","secondary"]),La("context","mode:design")],LB=[...VB,Ix],HB=[Oa("type",["submit","cancel","custom"]),...LB],PB=[Oa("type",["menu"]),jx,qx,$x,Aa("items",NB),...VB],UB=[...VB,Oa("type",["togglebutton"]),qx,$x,jx,Pa("active",!1)],WB=ba("type",{submit:HB,cancel:HB,custom:HB,menu:PB,togglebutton:UB}),jB=[Dx,Ix,Oa("level",["info","warn","error","success"]),Nx,u("url","")],GB=i(jB),$B=[Dx,Ix,Zx,ry("button"),$x,Qx,Fa("buttonType",["primary","secondary","toolbar"]),ey,La("context","mode:design")],qB=i($B),YB=[Dx,Bx],XB=YB.concat([Yx]),KB=YB.concat([Fx,Zx,La("context","mode:design")]),JB=i(KB),QB=sa,ZB=XB.concat([ty("auto"),La("context","mode:design")]),eF=i(ZB),tF=oa([zx,Ix,Nx]),oF=XB.concat([La("storageKey","default"),La("context","mode:design")]),nF=i(oF),aF=ia,rF=i(XB),iF=ia,sF=YB.concat([La("tag","textarea"),ka("scriptId"),ka("scriptUrl"),Ia("onFocus"),za("settings",void 0,da)]),lF=YB.concat([La("tag","textarea"),_a("init")]),cF=ma(e=>pa("customeditor.old",Qn(lF),e).orThunk(()=>pa("customeditor.new",Qn(sF),e))),dF=ia,uF=XB.concat([La("context","mode:design")]),mF=i(uF),gF=Zn(qn),pF=[Dx,ka("html"),Ha("presets","presentation",["presentation","document"]),Ua("onInit",S),Pa("stretched",!1)],hF=i(pF),fF=XB.concat([Pa("border",!1),Pa("sandboxed",!0),Pa("streamContent",!1),Pa("transparent",!0)]),vF=i(fF),bF=ia,xF=i(YB.concat([Ba("height")])),yF=i([ka("url"),Da("zoom"),Da("cachedWidth"),Da("cachedHeight")]),wF=XB.concat([Ba("inputMode"),Ba("placeholder"),Pa("maximized",!1),Zx,La("context","mode:design")]),SF=i(wF),CF=ia,kF=[Ix,zx],OF=[Ix,Aa("items",xa(0,()=>_F))],_F=ea([i(kF),i(OF)]),TF=XB.concat([Aa("items",_F),Zx,La("context","mode:design")]),EF=i(TF),AF=ia,MF=XB.concat([Ea("items",[Ix,zx]),Va("size",1),Zx,La("context","mode:design")]),DF=i(MF),BF=ia,FF=XB.concat([Pa("constrain",!0),Zx,La("context","mode:design")]),IF=i(FF),RF=i([ka("width"),ka("height")]),NF=YB.concat([Fx,Va("min",0),Va("max",0)]),zF=i(NF),VF=ra,LF=[Dx,Aa("header",ia),Aa("cells",Zn(ia))],HF=i(LF),PF=XB.concat([Ba("placeholder"),Pa("maximized",!1),Zx,La("context","mode:design")]),UF=i(PF),WF=ia,jF=[Oa("type",["directory","leaf"]),Rx,ka("id"),Ma("menu",qT),Ba("customStateIcon"),Ba("customStateIconTooltip")],GF=i(jF),$F=jF.concat([Aa("children",xa(0,()=>ua("type",{directory:qF,leaf:GF})))]),qF=i($F),YF=ua("type",{directory:qF,leaf:GF}),XF=[Dx,Aa("items",YF),Ia("onLeafAction"),Ia("onToggleExpand"),Wa("defaultExpandedIds",[],ia),Ba("defaultSelectedId")],KF=i(XF),JF=XB.concat([Ha("filetype","file",["image","media","file"]),Zx,Ba("picker_text"),La("context","mode:design")]),QF=i(JF),ZF=i([zx,oy]),eI=t=>ya("items","items",{tag:"required",process:{}},Zn(ma(e=>pa("Checking item of "+t,tI,e).fold(e=>V.error(va(e)),e=>V.value(e))))),tI=Kn(()=>{return ua("type",{alertbanner:GB,bar:i((e=eI("bar"),[Dx,e])),button:qB,checkbox:JB,colorinput:nF,colorpicker:rF,dropzone:mF,grid:i((e=eI("grid"),[Dx,Ca("columns",ra),e])),iframe:vF,input:SF,listbox:EF,selectbox:DF,sizeinput:IF,slider:zF,textarea:UF,urlinput:QF,customeditor:cF,htmlpanel:hF,imagepreview:xF,collection:eF,label:i((e=eI("label"),[Dx,Fx,e,Ha("align","start",["start","center","end"]),Ba("for")])),table:HF,tree:KF,panel:nI});var e}),oI=[Dx,u("classes",[]),Aa("items",tI)],nI=i(oI),aI=[ry("tab"),Rx,Aa("items",tI)],rI=[Dx,Ea("tabs",aI)],iI=i(rI),sI=LB,lI=WB,cI=i([ka("title"),Ca("body",ua("type",{panel:nI,tabpanel:iI})),La("size","normal"),Wa("buttons",[],lI),u("initialData",{}),Ua("onAction",S),Ua("onChange",S),Ua("onSubmit",S),Ua("onClose",S),Ua("onCancel",S),Ua("onTabChange",S)]),dI=i([Oa("type",["cancel","custom"]),...sI]),uI=i([ka("title"),ka("url"),Da("height"),Da("width"),Ra("buttons",dI),Ua("onAction",S),Ua("onCancel",S),Ua("onClose",S),Ua("onMessage",S)]),mI=e=>v(e)?[e].concat(Ce(Ge(e),mI)):c(e)?Ce(e,mI):[],gI=e=>$(e.type)&&$(e.name),pI={checkbox:QB,colorinput:aF,colorpicker:iF,dropzone:gF,input:CF,iframe:bF,imagepreview:yF,selectbox:BF,sizeinput:RF,slider:VF,listbox:AF,size:RF,textarea:WF,urlinput:ZF,customeditor:dF,collection:tF,togglemenuitem:zB},hI=e=>{e=e;e=ve(mI(e),gI),e=Ce(e,t=>{return e=t,I.from(pI[e.type]).fold(()=>[],e=>[Ca(t.name,e)]);var e});return i(e)},fI=e=>({internalDialog:ha(pa("dialog",cI,e)),dataValidator:hI(e),initialData:null!=(e=e.initialData)?e:{}}),vI={open:(e,t)=>{t=fI(t);return e(t.internalDialog,t.initialData,t.dataValidator)},openUrl:(e,t)=>e(ha(pa("dialog",uI,t))),redial:e=>fI(e)},bI=Object.freeze({__proto__:null,events:(n,a)=>{let r=(t,o)=>{n.updateState.each(e=>{e=e(t,o);a.set(e)}),n.renderComponents.each(e=>{e=e(o,a.get());(n.reuseDom?lh:sh)(t,e)})};return Zr([L(_r(),(t,e)=>{var o=e;if(!o.universal){let e=n.channel;me(o.channels,e)&&r(t,o.data)}}),li((t,e)=>{n.initialData.each(e=>{r(t,e)})})])}}),xI=Object.freeze({__proto__:null,getState:(e,t,o)=>o}),yI=[r("channel"),d("renderComponents"),d("updateState"),d("initialData"),Pa("reuseDom",!0)],wI=wi({fields:yI,name:"reflecting",active:bI,apis:xI,state:Object.freeze({__proto__:null,init:()=>{let e=O(I.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(I.none())}}})}),SI=e=>{let o=[],n={};return ze(e,(e,t)=>{e.fold(()=>{o.push(t)},e=>{n[t]=e})}),0<o.length?V.error(o):V.value(n)},CI=(e,o,n,a)=>{var t,r=j($k.sketch(t=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:C(e.items,e=>f1(t,e,o,n,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[r.asSpec()]}],behaviours:H([U.config({mode:"acyclic",useTabstopAt:ne(xO)}),(t=r,M.config({find:t.getOpt})),nO(r,{postprocess:e=>SI(e).fold(e=>(console.error(e),{}),x)}),B("dialog-body-panel",[L(dr(),(e,t)=>{e.getSystem().broadcastOn([OO],{newFocus:I.some(t.event.target)})})])])}},kI=$m({name:"TabButton",configFields:[u("uid",void 0),r("value"),ya("dom","dom",Un(()=>({attributes:{role:"tab",id:E("aria"),"aria-selected":"false"}})),na()),d("action"),u("domModification",{}),$u("tabButtonBehaviours",[W,U,A]),r("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:Th(e.action),behaviours:Yu(e.tabButtonBehaviours,[W.config({}),U.config({mode:"execution",useSpace:!0,useEnter:!0}),A.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),OI=F([r("tabs"),r("dom"),u("clickToDismiss",!1),$u("tabbarBehaviours",[y,U]),Os(["tabClass","selectedClass"])]),_I=Sm({factory:kI,name:"tabs",unit:"tab",overrides:n=>({action:e=>{var t=e.getSystem().getByUid(n.uid).getOrDie(),o=y.isHighlighted(t,e);(o&&n.clickToDismiss?(e,t)=>{y.dehighlight(e,t),T(e,$r(),{tabbar:e,button:t})}:o?S:(e,t)=>{y.highlight(e,t),T(e,Gr(),{tabbar:e,button:t})})(t,e)},domModification:{classes:[n.markers.tabClass]}})}),TI=F([_I]),EI=qm({name:"Tabbar",configFields:OI(),partFields:TI(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Yu(e.tabbarBehaviours,[y.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{w(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{w(t.element,"aria-selected","false")}}),U.config({mode:"flow",getInitial:e=>y.getHighlighted(e).map(e=>e.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),AI=$m({name:"Tabview",configFields:[$u("tabviewBehaviours",[D])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Yu(e.tabviewBehaviours,[D.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),MI=F([u("selectFirst",!0),e("onChangeTab"),e("onDismissTab"),u("tabs",[]),$u("tabSectionBehaviours",[])]),DI=xm({factory:EI,schema:[r("dom"),Ta("markers",[r("tabClass"),r("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),BI=xm({factory:AI,name:"tabview"}),FI=F([DI,BI]),II=qm({name:"TabSection",configFields:MI(),partFields:FI(),factory:(a,e,t,o)=>{let n=(e,t)=>{Bm(e,a,"tabbar").each(e=>{t(e).each(Xr)})};return{uid:a.uid,dom:a.dom,components:e,behaviours:qu(a.tabSectionBehaviours),events:Zr(Se([a.selectFirst?[li((e,t)=>{n(e,y.getFirst)})]:[],[L(Gr(),(e,t)=>{{var n=t.event.button;let o=A.getValue(n);Bm(n,a,"tabview").each(t=>{ye(a.tabs,e=>e.value===o).each(e=>{e=e.view();Qt(n.element,"id").each(e=>{w(t.element,"aria-labelledby",e)}),D.set(t,e),a.onChangeTab(t,n,e)})})}}),L($r(),(e,t)=>{t=t.event.button;a.onDismissTab(e,t)})]])),apis:{getViewItems:e=>Bm(e,a,"tabview").map(e=>D.contents(e)).getOr([]),showTab:(e,o)=>{n(e,t=>{var e=y.getCandidates(t);return ye(e,e=>A.getValue(e)===o).filter(e=>!y.isHighlighted(t,e))})}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,o)=>{e.showTab(t,o)}}}),RI=(e,t)=>{z(e,"height",t+"px"),z(e,"flex-basis",t+"px")},NI=(e,s,t)=>{Ml(e,'[role="dialog"]').each(i=>{Bl(i,'[role="tablist"]').each(r=>{t.get().map(e=>{return z(s,"height","0"),z(s,"flex-basis","0"),Math.min(e,(e=i,t=s,o=r,n=Dt(e).dom,a=Ml(e,".tox-dialog-wrap").getOr(e),a="fixed"===ro(a,"position")?Math.max(n.clientHeight,window.innerHeight):Math.max(n.offsetHeight,n.scrollHeight),n=ho(t),t=t.dom.offsetLeft>=o.dom.offsetLeft+Co(o)?Math.max(ho(o),n):n,o=parseInt(ro(e,"margin-top"),10)||0,n=parseInt(ro(e,"margin-bottom"),10)||0,a-(ho(e)+o+n-t)));var t,o,n,a}).each(e=>{RI(s,e)})})})},zI=e=>Bl(e,'[role="tabpanel"]'),VI="send-data-to-section",LI="send-data-to-view",HI=(e,o,n,a)=>{let r=O({}),i=e=>{var e=A.getValue(e),e=SI(e).getOr({}),t=r.get(),t=Vn(t,e);r.set(t)},s=e=>{var t=r.get();A.setValue(e,t)},l=O(null),t=C(e.tabs,e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[bl(n.shared.providers.translate(e.title))],view:()=>[$k.sketch(t=>({dom:{tag:"div",classes:["tox-form"]},components:C(e.items,e=>f1(t,e,o,n,a)),formBehaviours:H([U.config({mode:"acyclic",useTabstopAt:ne(xO)}),B("TabView.form.events",[li(s),ci(i)]),vc.config({channels:qa([{key:VI,value:{onReceive:i}},{key:LI,value:{onReceive:s}}])})])}))]})),c=(r=>{let i=On(),e=[li(n=>{let a=n.element;zI(a).each(t=>{var e,o;z(t,"visibility","hidden"),n.getSystem().getByDom(t).toOptional().each(e=>{o=r,n=t,a=e;var o,n,a,e=C(o,(e,t)=>{D.set(a,o[t].view());t=n.dom.getBoundingClientRect();return D.set(a,[]),t.height});e=e,De(Ae(e,(e,t)=>t<e?-1:e<t?1:0)).fold(i.clear,i.set)}),NI(a,t,i),uo(t,"visibility"),e=r,o=n,De(e).each(e=>II.showTab(o,e.value)),requestAnimationFrame(()=>{NI(a,t,i)})})}),L(zr(),e=>{let t=e.element;zI(t).each(e=>{NI(t,e,i)})}),L(US,(e,t)=>{let a=e.element;zI(a).each(t=>{var e=Sc(Ut(t)),o=(z(t,"visibility","hidden"),so(t,"height").map(e=>parseInt(e,10)));uo(t,"height"),uo(t,"flex-basis");let n=t.dom.getBoundingClientRect().height;o.forall(e=>n>e)?(i.set(n),NI(a,t,i)):o.each(e=>{RI(t,e)}),uo(t,"visibility"),e.each(xc)})})];return{extraEvents:e,selectFirst:!1}})(t);return II.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,o)=>{t=A.getValue(t);T(e,PS,{name:t,oldName:l.get()}),l.set(t)},tabs:t,components:[II.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[EI.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:H([Ov.config({})])}),II.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:c.selectFirst,tabSectionBehaviours:H([B("tabpanel",c.extraEvents),U.config({mode:"acyclic"}),M.config({find:e=>De(II.getViewItems(e))}),aO(I.none(),e=>(e.getSystem().broadcastOn([VI],{}),r.get()),(e,t)=>{r.set(t),e.getSystem().broadcastOn([LI],{})})])})},PI=(e,t,o,n,a,r)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...o.map(e=>({id:e})).getOr({}),...a?{"aria-live":"polite"}:{}}},components:[],behaviours:H([tO(0),wI.config({channel:SO+"-"+t,updateState:(e,t)=>I.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{var t=e.body;return"tabpanel"===t.type?[HI(t,e.initialData,n,r)]:[CI(t,e.initialData,n,r)]},initialData:e})])}),UI=lf.deviceType.isTouch(),WI=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),jI=(e,t)=>RB.parts.close(wv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:H([Ov.config({})])})),GI=()=>RB.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),$I=(e,t)=>RB.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Sv(`<p>${Db(t.translate(e))}</p>`)}]}]}),qI=e=>RB.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),YI=(e,t)=>[kS.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),kS.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],XI=t=>{let e="tox-dialog",o=e+"-wrap",n=o+"__backdrop",a=e+"__disable-scroll";return RB.sketch({lazySink:t.lazySink,onEscape:e=>(t.onEscape(e),I.some(!0)),useTabstopAt:e=>!xO(e),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[e].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Sv(`<div class="${o}"></div>`),components:[{dom:{tag:"div",classes:UI?[n,n+"--opaque"]:[n]}}]}},dragBlockClass:o,modalBehaviours:H([W.config({}),B("dialog-events",t.dialogEvents.concat([si(dr(),(e,t)=>{uE.isBlocked(e)||U.focusIn(e)}),L(Ur(),(e,t)=>{e.getSystem().broadcastOn([OO],{newFocus:t.event.newFocus})})])),B("scroll-lock",[li(()=>{Mi(qt(),a)}),ci(()=>{Bi(qt(),a)})]),...t.extraBehaviours]),eventOrder:{[Tr()]:["dialog-events"],[Vr()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Lr()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},KI=e=>wv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:H([Ov.config({}),Nv.config(e.tooltips.getConfig({tooltipText:e.translate("Close")}))]),components:[Pb("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:e=>{_(e,NS)}}),JI=(e,t,o,n)=>({dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...o.map(e=>({id:e})).getOr({})}},components:[],behaviours:H([wI.config({channel:wO+"-"+t,initialData:e,renderComponents:e=>[bl(n.translate(e.title))]})])}),QI=()=>({dom:Sv('<div class="tox-dialog__draghandle"></div>')}),ZI=(e,t,o)=>{return e={title:o.shared.providers.translate(e),draggable:o.dialog.isDraggableModal()},t=t,o=o.shared.providers,t=RB.parts.title(JI(e,t,I.none(),o)),n=RB.parts.draghandle(QI()),o=RB.parts.close(KI(o)),t=[t].concat(e.draggable?[n]:[]).concat([o]),kS.sketch({dom:Sv('<div class="tox-dialog__header"></div>'),components:t});var n},eR=(e,t,o,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:n.getOr(0)+"px",position:"absolute"}},behaviours:t,components:[{dom:Sv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),tR=(e,a,t)=>({onClose:()=>t.closeWindow(),onBlock:o=>{let n=Bl(e().element,".tox-dialog__header").map(e=>ho(e));RB.setBusy(e(),(e,t)=>eR(o.message,t,a,n))},onUnblock:()=>{RB.setIdle(e())}}),oR="tox-dialog--fullscreen",nR="tox-dialog--width-lg",aR="tox-dialog--width-md",rR=e=>{switch(e){case"large":return I.some(nR);case"medium":return I.some(aR);default:return I.none()}},iR=(e,t)=>{let o=N(t.element.dom);Fi(o,oR)||(Ri(o,[nR,aR]),rR(e).each(e=>Mi(o,e)))},sR=(e,t)=>{var n,e=N(e.element.dom),o=Ni(e),o=ye(o,e=>e===nR||e===aR).or(rR(t));n=e,t=[oR,...o.toArray()],R(t,e=>{var t,o=n;_i(o)?o.dom.classList.toggle(e):(t=o,e=e,(me(Ti(t),e)?Ai:Ei)(t,e)),Di(o)})},lR=(e,t,o)=>Sl(XI({...e,firstTabstop:1,lazySink:o.shared.getSink,extraBehaviours:[iO({}),...e.extraBehaviours],onEscape:e=>{_(e,NS)},dialogEvents:t,eventOrder:{[_r()]:[wI.name(),vc.name()],[Vr()]:["scroll-lock",wI.name(),"messages","dialog-events","alloy.base.behaviour"],[Lr()]:["alloy.base.behaviour","dialog-events","messages",wI.name(),"scroll-lock"]}})),cR=(e,n={})=>C(e,e=>{return"menu"===e.type?(t=e,o=C(t.items,e=>{var t=k(n,e.name).getOr(O(!1));return{...e,storage:t}}),{...t,items:o}):e;var t,o}),dR=e=>xe(e,(e,t)=>"menu"===t.type?xe(t.items,(e,t)=>(e[t.name]=t.storage,e),e):e,{}),uR=(e,a)=>[ri(dr(),bO),e(RS,(e,t,o,n)=>{wc(n.element)&&Sc(Ut(n.element)).each(yc),a.onClose(),t.onClose()}),e(NS,(e,t,o,n)=>{t.onCancel(e),_(n,RS)}),L(HS,(e,t)=>a.onUnblock()),L(LS,(e,t)=>a.onBlock(t.event))],mR=(i,e,l)=>{let t=(e,r)=>L(e,(o,n)=>{var t,a;t=o,a=(e,t)=>{r(i(),e,n.event,o)},wI.getState(t).get().each(e=>{a(e.internalDialog,t)})});return[...uR(t,e),t(VS,(e,t)=>t.onSubmit(e)),t(FS,(e,t,o)=>{t.onChange(e,{name:o.name})}),t(zS,(e,t,o,n)=>{let a=()=>n.getSystem().isConnected()?U.focusIn(n):void 0,r=e=>Zt(e,"disabled")||Qt(e,"aria-disabled").exists(e=>"true"===e),i=Ut(n.element),s=Sc(i);t.onAction(e,{name:o.name,value:o.value}),Sc(i).fold(a,t=>{r(t)||s.exists(e=>Et(t,e)&&r(e))?a():l().toOptional().filter(e=>!Et(e.element,t)).each(a)})}),t(PS,(e,t,o)=>{t.onTabChange(e,{newTabName:o.name,oldTabName:o.oldName})}),ci(e=>{var t=i();A.setValue(e,t.getData())})]},gR=(e,t)=>{var t=t.map(e=>e.footerButtons).getOr([]),t=fe(t,e=>"start"===e.align),o=(e,t)=>kS.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:C(t,e=>e.memento.asSpec())});return[o("start",t.pass),o("end",t.fail)]},pR=(e,t,n)=>({dom:Sv('<div class="tox-dialog__footer"></div>'),components:[],behaviours:H([wI.config({channel:CO+"-"+t,initialData:e,updateState:(a,e)=>{let r=C(e.buttons,e=>{var t,o=j((o=e,t=n,a1(o,o.type,t)));return{name:e.name,align:e.align,memento:o}});return I.some({lookupByName:e=>{return t=a,o=r,n=e,ye(o,e=>e.name===n).bind(e=>e.memento.getOpt(t));var t,o,n},footerButtons:r})},renderComponents:gR})])}),hR=(e,t,o)=>RB.parts.footer(pR(e,t,o)),fR=(e,t)=>{var o;return e.getRoot().getSystem().isConnected()?(o=M.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper()),$k.getField(o,t).orThunk(()=>e.getFooter().bind(e=>wI.getState(e).get()).bind(e=>e.lookupByName(t)))):I.none()},vR=(i,r,s)=>{let e=e=>{var t=i.getRoot();t.getSystem().isConnected()&&e(t)},l={getData:()=>{var e=i.getRoot(),e=e.getSystem().isConnected()?i.getFormWrapper():e;return{...A.getValue(e),...Ve(s,e=>e.get())}},setData:r=>{e(e=>{let t=l.getData(),o=Vn(t,r),n=((e,t)=>{e=e.getRoot();return wI.getState(e).get().map(e=>ha(pa("data",e.dataValidator,t))).getOr(t)})(i,o),a=i.getFormWrapper();A.setValue(a,n),ze(s,(e,t)=>{$e(o,t)&&e.set(o[t])})})},setEnabled:(e,t)=>{fR(i,e).each(t?P.enable:P.disable)},focus:e=>{fR(i,e).each(W.focus)},block:t=>{if(!$(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");e(e=>{T(e,LS,{message:t})})},unblock:()=>{e(e=>{_(e,HS)})},showTab:o=>{e(e=>{var t=i.getBody();wI.getState(t).get().exists(e=>e.isTabPanel())&&M.getCurrent(t).each(e=>{II.showTab(e,o)})})},redial:a=>{e(e=>{var t=i.getId(),o=r(a),n=cR(o.internalDialog.buttons,s);e.getSystem().broadcastOn([yO+"-"+t],o),e.getSystem().broadcastOn([wO+"-"+t],o.internalDialog),e.getSystem().broadcastOn([SO+"-"+t],o.internalDialog),e.getSystem().broadcastOn([CO+"-"+t],{...o.internalDialog,buttons:n}),l.setData(o.initialData)})},close:()=>{e(e=>{_(e,RS)})},toggleFullscreen:i.toggleFullscreen};return l},bR=(e,t,a,o=!1,n)=>{let r=E("dialog"),i=E("dialog-label"),s=E("dialog-content"),l=e.internalDialog,c=O(l.size),d=rR(c.get()).toArray(),u=j((w={title:l.title,draggable:!0},S=r,C=i,k=a.shared.providers,kS.sketch({dom:Sv('<div class="tox-dialog__header"></div>'),components:[JI(w,S,I.some(C),k),QI(),KI(k)],containerBehaviours:H([wB.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>Fl(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),m=j((w={body:l.body,initialData:l.initialData},S=r,C=s,k=a,o=o,PI(w,S,I.some(C),k,o,e=>fR(x,e)))),g=cR(l.buttons),p=dR(g),h=Qe(0!==g.length,j((w={buttons:g},S=r,C=a,pR(w,S,C)))),f=mR(()=>y,{onBlock:n=>{uE.block(b,(e,t)=>{var o=u.getOpt(b).map(e=>ho(e.element));return eR(n.message,t,a.shared.providers,o)})},onUnblock:()=>{uE.unblock(b)},onClose:()=>t.closeWindow()},a.shared.getSink),v=Jo().os,b=Sl({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...d],attributes:{role:"dialog",...v.isMacOS()?{"aria-label":l.title}:{"aria-labelledby":i}}},eventOrder:{[_r()]:[wI.name(),vc.name()],[Tr()]:["execute-on-form"],[Vr()]:["reflecting","execute-on-form"]},behaviours:H([U.config({mode:"cyclic",onEscape:e=>(_(e,RS),I.some(!0)),useTabstopAt:e=>!xO(e)&&("button"!==ft(e)||"disabled"!==Jt(e,"disabled")),firstTabstop:1}),wI.config({channel:yO+"-"+r,updateState:(e,t)=>(c.set(t.internalDialog.size),iR(t.internalDialog.size,e),n(),I.some(t)),initialData:e}),W.config({}),B("execute-on-form",f.concat([si(dr(),(e,t)=>{U.focusIn(e)}),L(Ur(),(e,t)=>{e.getSystem().broadcastOn([OO],{newFocus:t.event.newFocus})})])),uE.config({getRoot:()=>I.some(b)}),D.config({}),iO({})]),components:[u.asSpec(),m.asSpec(),...h.map(e=>e.asSpec()).toArray()]}),x={getId:F(r),getRoot:F(b),getFooter:()=>h.map(e=>e.get(b)),getBody:()=>m.get(b),getFormWrapper:()=>{var e=m.get(b);return M.getCurrent(e).getOr(e)},toggleFullscreen:()=>{sR(b,c.get())}},y=vR(x,t.redial,p);var w,S,C,k;return{dialog:b,instanceApi:y}};var xR=tinymce.util.Tools.resolve("tinymce.util.URI");let yR=["insertContent","setContent","execCommand","close","block","unblock"],wR=e=>v(e)&&-1!==yR.indexOf(e.mceAction),SR=(i,e,s,t)=>{let o=E("dialog"),n=ZI(i.title,o,t),a=(e=>{e={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[fO(I.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:H([Ov.config({}),W.config({})])})]}],behaviours:H([U.config({mode:"acyclic",useTabstopAt:ne(xO)})])};return RB.parts.body(e)})(i),r=i.buttons.bind(e=>0===e.length?I.none():I.some(hR({buttons:e},o,t))),l=(e=>{let t=(e,a)=>L(e,(o,n)=>{r(o,(e,t)=>{a(f,e,n.event,o)})}),r=(t,o)=>{wI.getState(t).get().each(e=>{o(e,t)})};return[...uR(t,e),t(zS,(e,t,o)=>{t.onAction(e,{name:o.name})})]})(tR(()=>h,t.shared.providers,e)),c={...i.height.fold(()=>({}),e=>({height:e+"px","max-height":e+"px"})),...i.width.fold(()=>({}),e=>({width:e+"px","max-width":e+"px"}))},d=i.width.isNone()&&i.height.isNone()?["tox-dialog--width-lg"]:[],u=new xR(i.url,{base_uri:new xR(window.location.href)}),m=u.protocol+"://"+u.host+(u.port?":"+u.port:""),g=kn(),p=[wI.config({channel:yO+"-"+o,updateState:(e,t)=>I.some(t),initialData:i}),B("messages",[li(()=>{var e=zc(N(window),"message",e=>{if(u.isSameOrigin(new xR(e.raw.origin))){e=e.raw.data;if(wR(e)){var t=s,o=f,n=e;switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var a=!!b(n.ui)&&n.ui;t.execCommand(n.cmd,a,n.value);break;case"close":o.close();break;case"block":o.block(n.message);break;case"unblock":o.unblock()}}else r=e,!wR(r)&&v(r)&&$e(r,"mceAction")&&i.onMessage(f,e)}var r});g.set(e)}),ci(g.clear)]),vc.config({channels:{[kO]:{onReceive:(e,t)=>{Bl(e.element,"iframe").each(e=>{e=e.dom.contentWindow;X(e)&&e.postMessage(t,m)})}}}})],h=lR({id:o,header:n,body:a,footer:r,extraClasses:d,extraBehaviours:p,extraStyles:c},l,t),f=(t=>{let e=e=>{t.getSystem().isConnected()&&e(t)};return{block:t=>{if(!$(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");e(e=>{T(e,LS,{message:t})})},unblock:()=>{e(e=>{_(e,HS)})},close:()=>{e(e=>{_(e,RS)})},sendMessage:t=>{e(e=>{e.getSystem().broadcastOn([kO],t)})}}})(h);return{dialog:h,instanceApi:f}},CR=(e,t)=>ha(pa("data",t,e)),kR=e=>pS(e,".tox-alert-dialog")||pS(e,".tox-confirm-dialog"),OR=g=>{let p=g.editor,h=uv(p),o=(s=>{let l=s.shared;return{open:(e,t)=>{let o=()=>{RB.hide(i),t()},n=j(a1({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:I.some("primary"),align:"end",enabled:!0,icon:I.none()},"cancel",s)),a=GI(),r=jI(o,l.providers),i=Sl(XI({lazySink:()=>l.getSink(),header:WI(a,r),body:$I(e,l.providers),footer:I.some(qI(YI([],[n.asSpec()]))),onEscape:o,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[L(NS,o)],eventOrder:{}}));RB.show(i);e=n.get(i);W.focus(e)}}})(g.backstages.dialog),n=(l=>{let c=l.shared;return{open:(e,t)=>{let o=e=>{RB.hide(s),t(e)},n=j(a1({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:I.some("primary"),align:"end",enabled:!0,icon:I.none()},"submit",l)),a=a1({context:"any",name:"no",text:"No",primary:!1,buttonType:I.some("secondary"),align:"end",enabled:!0,icon:I.none()},"cancel",l),r=GI(),i=jI(()=>o(!1),c.providers),s=Sl(XI({lazySink:()=>c.getSink(),header:WI(r,i),body:$I(e,c.providers),footer:I.some(qI(YI([],[a,n.asSpec()]))),onEscape:()=>o(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[L(NS,()=>o(!1)),L(VS,()=>o(!0))],eventOrder:{}}));RB.show(s);e=n.get(s);W.focus(e)}}})(g.backstages.dialog),a=(e,r)=>vI.open((e,t,o)=>{let n=t,a=((e,t,o)=>{let n=E("dialog"),a=e.internalDialog,r=ZI(a.title,n,o),i=O(a.size),s=rR(i.get()).toArray(),l=((e,t,o)=>{e=PI(e,t,I.none(),o,!1,e=>fR(h,e));return RB.parts.body(e)})({body:a.body,initialData:a.initialData},n,o),c=cR(a.buttons),d=dR(c),u=Qe(0!==c.length,hR({buttons:c},n,o)),m=mR(()=>f,tR(()=>p,o.shared.providers,t),o.shared.getSink),g={id:n,header:r,body:l,footer:u,extraClasses:s,extraBehaviours:[wI.config({channel:yO+"-"+n,updateState:(e,t)=>(i.set(t.internalDialog.size),iR(t.internalDialog.size,e),I.some(t)),initialData:e})],extraStyles:{}},p=lR(g,m,o),h={getId:F(n),getRoot:F(p),getBody:()=>RB.getBody(p),getFooter:()=>RB.getFooter(p),getFormWrapper:()=>{var e=RB.getBody(p);return M.getCurrent(e).getOr(e)},toggleFullscreen:()=>{sR(p,i.get())}},f=vR(h,t.redial,d);return{dialog:p,instanceApi:f}})({dataValidator:o,initialData:n,internalDialog:e},{redial:vI.redial,closeWindow:()=>{RB.hide(a.dialog),r(a.instanceApi)}},g.backstages.dialog);return RB.show(a.dialog),a.instanceApi.setData(n),a.instanceApi},e),r=(e,d,u,m)=>vI.open((e,t,o)=>{let n=CR(t,o),a=On(),r=g.backstages.popup.shared.header.isPositionedAtTop(),i=()=>a.on(e=>{ef.reposition(e),h&&r||Is.refresh(e)}),s=bR({dataValidator:o,initialData:n,internalDialog:e},{redial:vI.redial,closeWindow:()=>{a.on(ef.hide),p.off("ResizeEditor",i),a.clear(),u(s.instanceApi)}},g.backstages.popup,m.ariaAttrs,i),l=Sl(ef.sketch({lazySink:g.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:m.persistent?{event:"doNotDismissYet"}:{},...r?{}:{fireRepositionEventInstead:{}},inlineBehaviours:H([B("window-manager-inline-events",[L(Hr(),(e,t)=>{_(s.dialog,NS)})]),...(c=p,t=h,o=r,t&&o?[]:[Is.config({contextual:{lazyContext:()=>I.some(xn(N(c.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:e=>xv(c,e.element).map(e=>({bounds:yv(e),optScrollEnv:I.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:yo(e.element).top})})).getOrThunk(()=>({bounds:Sn(),optScrollEnv:I.none()}))})])]),isExtraPart:(e,t)=>kR(t)}));var c;return a.set(l),ef.showWithinBounds(l,Cl(s.dialog),{anchor:d},()=>{var e=p.inline?qt():N(p.getContainer()),e=xn(e);return I.some(e)}),h&&r||(Is.refresh(l),p.on("ResizeEditor",i)),s.instanceApi.setData(n),U.focusIn(s.dialog),s.instanceApi},e);return{open:(e,t,o)=>{if(!q(t)){if("toolbar"===t.inline)return r(e,g.backstages.popup.shared.anchors.inlineDialog(),o,t);if("bottom"===t.inline)return n=e,c=g.backstages.popup.shared.anchors.inlineBottomDialog(),d=o,u=t,vI.open((e,t,o)=>{let n=CR(t,o),a=On(),r=g.backstages.popup.shared.header.isPositionedAtTop(),i=()=>a.on(e=>{ef.reposition(e),Is.refresh(e)}),s=bR({dataValidator:o,initialData:n,internalDialog:e},{redial:vI.redial,closeWindow:()=>{a.on(ef.hide),p.off("ResizeEditor ScrollWindow ElementScroll",i),a.clear(),d(s.instanceApi)}},g.backstages.popup,u.ariaAttrs,i),l=Sl(ef.sketch({lazySink:g.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:u.persistent?{event:"doNotDismissYet"}:{},...r?{}:{fireRepositionEventInstead:{}},inlineBehaviours:H([B("window-manager-inline-events",[L(Hr(),(e,t)=>{_(s.dialog,NS)})]),Is.config({contextual:{lazyContext:()=>I.some(xn(N(p.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:e=>xv(p,e.element).map(e=>({bounds:yv(e),optScrollEnv:I.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:yo(e.element).top})})).getOrThunk(()=>({bounds:Sn(),optScrollEnv:I.none()}))})]),isExtraPart:(e,t)=>kR(t)}));return a.set(l),ef.showWithinBounds(l,Cl(s.dialog),{anchor:c},()=>g.backstages.popup.shared.getSink().toOptional().bind(e=>{var e=xv(p,e.element).map(e=>yv(e)).getOr(Sn()),t=xn(N(p.getContentAreaContainer())),t=wn(t,e);return I.some(bn(t.x,t.y,t.width,t.height-15))})),Is.refresh(l),p.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",i),s.instanceApi.setData(n),U.focusIn(s.dialog),s.instanceApi},n);if("cursor"===t.inline)return r(e,g.backstages.popup.shared.anchors.cursor(),o,t)}var n,c,d,u;return a(e,o)},openUrl:(e,t)=>{return e=e,o=t,vI.openUrl(e=>{let t=SR(e,{closeWindow:()=>{RB.hide(t.dialog),o(t.instanceApi)}},p,g.backstages.dialog);return RB.show(t.dialog),t.instanceApi},e);var o},alert:(e,t)=>{o.open(e,t)},close:e=>{e.close()},confirm:(e,t)=>{n.open(e,t)}}},_R=e=>{var t,o,n,a;mf(e),o=(t=e).options.register,a=e=>J(e)&&0<e?{value:e,valid:!0}:{valid:!1,message:"Must be a positive number."},o("color_map",{processor:n=e=>Q(e,$)?{value:(e=e,s0(e.map((e,t)=>{return t%2==0?"#"+(t=a=e,(kw(t)?I.some({value:Ow(t)}):I.none()).orThunk(()=>Vw(a).map(Tw)).getOrThunk(()=>{var e=document.createElement("canvas"),t=(e.height=1,e.width=1,e.getContext("2d")),e=(t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=a,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data),t=e[0],o=e[1],n=e[2],e=e[3];return Tw(Fw(t,o,n,e))}).value):e;var a}))),valid:!0}:{valid:!1,message:"Must be an array of strings."},default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),o("color_map_raw",{processor:e=>Q(e,$)?{value:s0(e),valid:!0}:{valid:!1,message:"Must be an array of strings."}}),o("color_map_background",{processor:n}),o("color_map_foreground",{processor:n}),o("color_cols",{processor:a,default:u0(t)}),o("color_cols_foreground",{processor:a,default:m0(t,r0)}),o("color_cols_background",{processor:a,default:m0(t,i0)}),o("custom_colors",{processor:"boolean",default:!0}),o("color_default_foreground",{processor:"string",default:c0}),o("color_default_background",{processor:"string",default:c0}),(n=e.options.register)("contextmenu_avoid_overlap",{processor:"string",default:""}),n("contextmenu_never_use_native",{processor:"boolean",default:!1}),n("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:$(e)||Q(e,$)?{value:(e=e,$(e)?e.split(/[ ,]/):e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})};_n.add("silver",t=>{_R(t);let o=()=>Sn(),{dialogs:e,popups:n,renderUI:a}=DB(t,{getPopupSinkBounds:()=>o()}),r=(gS(t,n.backstage.shared),OR({editor:t,backstages:{popup:n.backstage,dialog:e.backstage}})),i=On();return{renderUI:()=>{var e=a();return xv(t,n.getMothership().element).each(e=>{o=()=>yv(e)}),e},getWindowManagerImpl:F(r),getNotificationManagerImpl:()=>jb(t,{backstage:n.backstage},n.getMothership(),i)}})})();
tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});
(()=>{let t=tinymce.util.Tools.resolve("tinymce.ModelManager"),o=o=>e=>{return r=typeof(e=e),(null===e?"null":"object"==r&&Array.isArray(e)?"array":"object"==r&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":r)===o;var t,r},n=t=>e=>typeof e===t,l=t=>e=>t===e,c=o("string"),q=o("object"),i=o("array"),U=l(null),a=n("boolean"),s=l(void 0),$=e=>!(null==e),G=n("function"),K=n("number"),f=()=>{},h=e=>()=>e,p=e=>e,Y=(e,t)=>e===t;function x(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}let J=t=>e=>!t(e),Q=e=>e(),X=h(!1),C=h(!0);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return $(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);let Z=Array.prototype.slice,ee=Array.prototype.indexOf,te=Array.prototype.push,g=(e,t)=>(e=e,t=t,-1<ee.call(e,t)),b=(r,o)=>{for(let e=0,t=r.length;e<t;e++)if(o(r[e],e))return!0;return!1},S=(t,r)=>{var o=[];for(let e=0;e<t;e++)o.push(r(e));return o},w=(r,o)=>{let e=r.length,n=new Array(e);for(let t=0;t<e;t++){let e=r[t];n[t]=o(e,t)}return n},y=(r,o)=>{for(let e=0,t=r.length;e<t;e++)o(r[e],e)},re=(r,o)=>{var n=[],l=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];(o(a,e)?n:l).push(a)}return{pass:n,fail:l}},T=(r,o)=>{var n=[];for(let e=0,t=r.length;e<t;e++){var l=r[e];o(l,e)&&n.push(l)}return n},oe=(e,t,r)=>{var o,n,l=e;for(let e=l.length-1;0<=e;e--)o=l[e],n=e,r=t(r,o,n);return r},ne=(e,r,o)=>(y(e,(e,t)=>{o=r(o,e,t)}),o),le=(e,t)=>{var r=e,o=t,n=X;for(let e=0,t=r.length;e<t;e++){var l=r[e];if(o(l,e))return v.some(l);if(n(l,e))break}return v.none()},ae=(r,o)=>{for(let e=0,t=r.length;e<t;e++)if(o(r[e],e))return v.some(e);return v.none()},se=r=>{var o=[];for(let e=0,t=r.length;e<t;++e){if(!i(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);te.apply(o,r[e])}return o},R=(e,t)=>se(w(e,t)),ie=(r,o)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==o(r[e],e))return!1;return!0},me=(r,o)=>{var n={};for(let e=0,t=r.length;e<t;e++){var l=r[e];n[String(l)]=o(l,e)}return n},de=(e,t)=>0<=t&&t<e.length?v.some(e[t]):v.none(),ce=e=>de(e,0),ue=e=>de(e,e.length-1),fe=(t,r)=>{for(let e=0;e<t.length;e++){var o=r(t[e],e);if(o.isSome())return o}return v.none()},ge=Object.keys,he=Object.hasOwnProperty,D=(r,o)=>{var n=ge(r);for(let e=0,t=n.length;e<t;e++){var l=n[e];o(r[l],l)}},pe=(e,r)=>ve(e,(e,t)=>({k:t,v:r(e,t)})),ve=(e,r)=>{let o={};return D(e,(e,t)=>{e=r(e,t);o[e.k]=e.v}),o},be=(e,r)=>{let o=[];return D(e,(e,t)=>{o.push(r(e,t))}),o},we=e=>be(e,p),ye=(e,t)=>he.call(e,t),xe="undefined"!=typeof window?window:Function("return this;")(),Ce=(e,r)=>{{var o=e.split(".");let t=null!=r?r:xe;for(let e=0;e<o.length&&null!=t;++e)t=t[o[e]];return t}},Se=Object.getPrototypeOf,Te=e=>{var t=Ce("ownerDocument.defaultView",e);return q(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=Ce("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Se(e).constructor.name))},O=e=>e.dom.nodeName.toLowerCase(),Re=e=>e.dom.nodeType,De=t=>e=>Re(e)===t,Oe=e=>8===Re(e)||"#comment"===O(e),ke=e=>Ee(e)&&Te(e.dom),Ee=De(1),Ne=De(3),_e=De(9),Be=De(11),k=t=>e=>Ee(e)&&O(e)===t,ze=(e,t,r)=>{if(!(c(r)||a(r)||K(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},E=(e,t,r)=>{ze(e.dom,t,r)},Ae=(e,t)=>{let r=e.dom;D(t,(e,t)=>{ze(r,t,e)})},Le=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},Me=(e,t)=>v.from(Le(e,t)),N=(e,t)=>{e.dom.removeAttribute(t)},We=e=>ne(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),je=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},_={fromHtml:(t,e)=>{e=(e||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length){let e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return je(e.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return je(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return je(t)},fromDom:je,fromPoint:(e,t,r)=>v.from(e.dom.elementFromPoint(t,r)).map(je)},B=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{let e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Pe=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Ie=(e,t)=>{t=void 0===t?document:t.dom;return Pe(t)?v.none():v.from(t.querySelector(e)).map(_.fromDom)},z=(e,t)=>e.dom===t.dom,Fe=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},He=B,Ve=e=>_.fromDom(e.dom.ownerDocument),qe=e=>_e(e)?e:Ve(e),Ue=e=>v.from(e.dom.parentNode).map(_.fromDom),$e=e=>v.from(e.dom.parentElement).map(_.fromDom),Ge=(e,t)=>{var r=G(t)?t:X;let o=e.dom;for(var n=[];null!=o.parentNode;){let e=o.parentNode,t=_.fromDom(e);if(n.push(t),!0===r(t))break;o=e}return n},Ke=e=>v.from(e.dom.previousSibling).map(_.fromDom),Ye=e=>v.from(e.dom.nextSibling).map(_.fromDom),m=e=>w(e.dom.childNodes,_.fromDom),Je=(e,t)=>{e=e.dom.childNodes;return v.from(e[t]).map(_.fromDom)},Qe=(t,r)=>{Ue(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},Xe=(e,t)=>{Ye(e).fold(()=>{Ue(e).each(e=>{u(e,t)})},e=>{Qe(e,t)})},Ze=(t,r)=>{var e;e=t,Je(e,0).fold(()=>{u(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},u=(e,t)=>{e.dom.appendChild(t.dom)},et=(e,t)=>{Qe(e,t),u(t,e)},tt=(r,o)=>{y(o,(e,t)=>{t=0===t?r:o[t-1];Xe(t,e)})},rt=(t,e)=>{y(e,e=>{u(t,e)})},ot=e=>{e.dom.textContent="",y(m(e),e=>{A(e)})},A=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},nt=e=>{var t=m(e);0<t.length&&tt(e,t),A(e)},lt=(e,t)=>_.fromDom(e.dom.cloneNode(t)),at=e=>lt(e,!1),st=e=>lt(e,!0),it=(e,t)=>{t=_.fromTag(t),e=We(e);return Ae(t,e),t},mt=["tfoot","thead","tbody","colgroup"],dt=(e,t,r)=>({element:e,rowspan:t,colspan:r}),ct=(e,t,r)=>({element:e,cells:t,section:r}),L=(e,t,r)=>({element:e,isNew:t,isLocked:r}),ut=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),ft=e=>Be(e)&&$(e.dom.host),gt=e=>_.fromDom(e.dom.getRootNode()),ht=e=>_.fromDom(e.dom.host),pt=e=>{let t=Ne(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return(e=>{e=gt(e);return ft(e)?v.some(e):v.none()})(_.fromDom(t)).fold(()=>r.body.contains(t),(o=pt,n=ht,e=>o(n(e))));var o,n},vt=()=>bt(_.fromDom(document)),bt=e=>{e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return _.fromDom(e)},wt=(e,t)=>{let r=[];return y(m(e),e=>{r=(r=t(e)?r.concat([e]):r).concat(wt(e,t))}),r},yt=(e,t,r)=>(e=e,r=r,T(Ge(e,r),e=>B(e,t))),xt=(e,t)=>(e=e,T(m(e),e=>B(e,t))),Ct=(e,t)=>(t=t,e=void 0===e?document:e.dom,Pe(e)?[]:w(e.querySelectorAll(t),_.fromDom));var St,Tt,Rt,Dt=(e,t,r,o,n)=>e(r,o)?v.some(r):G(n)&&n(r)?v.none():t(r,o,n);let Ot=(e,t,r)=>{let o=e.dom;for(var n=G(r)?r:X;o.parentNode;){o=o.parentNode;let e=_.fromDom(o);if(t(e))return v.some(e);if(n(e))break}return v.none()},kt=(e,t,r)=>Dt((e,t)=>t(e),Ot,e,t,r),Et=(e,t,r)=>Ot(e,e=>B(e,t),r),Nt=(e,t)=>(e=e,le(e.dom.childNodes,e=>(e=_.fromDom(e),B(e,t))).map(_.fromDom)),_t=(e,t)=>Ie(t,e),M=(e,t,r)=>Dt((e,t)=>B(e,t),Et,e,t,r),Bt=(e,t,r=Y)=>e.exists(e=>r(e,t)),zt=t=>{let r=[],o=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(o);return r},At=(e,t)=>e?v.some(t):v.none(),Lt=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,r=(e,t,r=0,o)=>{e=e.indexOf(t,r);return-1!==e&&(!!s(o)||e+t.length<=o)},Mt=(e,t)=>Lt(e,t,0),Wt=(e,t)=>Lt(e,t,e.length-t.length),jt=(St=/^\s+|\s+$/g,e=>e.replace(St,"")),Pt=e=>0<e.length,It=e=>void 0!==e.style&&G(e.style.getPropertyValue),Ft=(e,t,r)=>{if(!c(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);It(e)&&e.style.setProperty(t,r)},W=(e,t,r)=>{e=e.dom;Ft(e,t,r)},Ht=(e,t)=>{let r=e.dom;D(t,(e,t)=>{Ft(r,t,e)})},Vt=(e,t)=>{var r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||pt(e)?o:qt(r,t)},qt=(e,t)=>It(e)?e.style.getPropertyValue(t):"",Ut=(e,t)=>{e=e.dom,e=qt(e,t);return v.from(e).filter(e=>0<e.length)},$t=(e,t)=>{var r;r=e.dom,t=t,It(r)&&r.style.removeProperty(t),Bt(Me(e,"style").map(jt),"")&&N(e,"style")},Gt=(e,t,r=0)=>Me(e,t).map(e=>parseInt(e,10)).getOr(r),Kt=(e,t)=>Gt(e,t,1),Yt=e=>k("col")(e)?1<Gt(e,"span",1):1<Kt(e,"colspan"),Jt=(e,t)=>parseInt(Vt(e,t),10),Qt=h(10),Xt=h(10),Zt=(e,t)=>er(e,t,C),er=(e,t,r)=>R(m(e),e=>B(e,t)?r(e)?[e]:[]:er(e,t,r)),tr=(e,t)=>{return[e,t,r=X]=[["td","th"],e,t],r(t)?v.none():g(e,O(t))?v.some(t):Et(t,e.join(","),e=>B(e,"table")||r(e));var r},rr=e=>Zt(e,"th,td"),or=e=>B(e,"colgroup")?xt(e,"col"):R(lr(e),e=>xt(e,"col")),j=(e,t)=>M(e,"table",t),nr=e=>Zt(e,"tr"),lr=e=>j(e).fold(h([]),e=>xt(e,"colgroup")),ar=(e,r)=>w(e,t=>{if("colgroup"===O(t)){let e=w(or(t),e=>{var t=Gt(e,"span",1);return dt(e,1,t)});return ct(t,e,"colgroup")}var e=w(rr(t),e=>{var t=Gt(e,"rowspan",1),r=Gt(e,"colspan",1);return dt(e,t,r)});return ct(t,e,r(t))}),sr=e=>Ue(e).map(e=>{var t,e=O(e);return t=e,g(mt,t)?e:"tbody"}).getOr("tbody"),ir=e=>{var t=nr(e),e=[...lr(e),...t];return ar(e,sr)},mr=t=>{let r,o=!1;return(...e)=>(o||(o=!0,r=t.apply(null,e)),r)},dr=()=>cr(0,0),cr=(e,t)=>({major:e,minor:t}),ur={nu:cr,detect:(e,r)=>{var r=String(r).toLowerCase();if(0===e.length)return dr();{var o=r;let t=((t,r)=>{for(let e=0;e<t.length;e++){var o=t[e];if(o.test(r))return o}})(e,o);return t?(r=e=>Number(o.replace(t,"$"+e)),cr(r(1),r(2))):{major:0,minor:0}}},unknown:dr},fr=(e,t)=>{let r=String(t).toLowerCase();return le(e,e=>e.search(r))},gr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hr=t=>e=>r(e,t),pr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>r(e,"edge/")&&r(e,"chrome")&&r(e,"safari")&&r(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gr],search:e=>r(e,"chrome")&&!r(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>r(e,"msie")||r(e,"trident")},{name:"Opera",versionRegexes:[gr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hr("firefox")},{name:"Safari",versionRegexes:[gr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(r(e,"safari")||r(e,"mobile/"))&&r(e,"applewebkit")}],vr=[{name:"Windows",search:hr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>r(e,"iphone")||r(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:hr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hr("linux"),versionRegexes:[]},{name:"Solaris",search:hr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:hr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],br={browsers:h(pr),oses:h(vr)},wr="Chromium",yr="Firefox",xr=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isEdge:o("Edge"),isChromium:o(wr),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(yr),isSafari:o("Safari")}},Cr=()=>xr({current:void 0,version:ur.unknown()}),Sr=xr,Tr=(h("Edge"),h(wr),h("IE"),h("Opera"),h(yr),h("Safari"),"Windows"),Rr="Android",Dr="Solaris",Or="FreeBSD",kr="ChromeOS",Er=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isWindows:o(Tr),isiOS:o("iOS"),isAndroid:o(Rr),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Dr),isFreeBSD:o(Or),isChromeOS:o(kr)}},Nr=()=>Er({current:void 0,version:ur.unknown()}),_r=Er,Br=(h(Tr),h("iOS"),h(Rr),h("Linux"),h("macOS"),h(Dr),h(Or),h(kr),e=>window.matchMedia(e).matches),zr=mr(()=>{{var l=window.navigator.userAgent,a=v.from(window.navigator.userAgentData),s=Br,i,m,d,c,u,f,g;let t=br.browsers(),e=br.oses(),r=a.bind(e=>{return o=t,e=e,fe(e.brands,t=>{let r=t.brand.toLowerCase();return le(o,e=>r===(null==(e=e.brand)?void 0:e.toLowerCase())).map(e=>({current:e.name,version:ur.nu(parseInt(t.version,10),0)}))});var o}).orThunk(()=>{return e=t,r=l,fr(e,r).map(e=>{var t=ur.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(Cr,Sr),o=(a=e,g=l,fr(a,g).map(e=>{var t=ur.detect(e.versionRegexes,g);return{current:e.name,version:t}}).fold(Nr,_r)),n=(a=r,m=l,s=s,d=(i=o).isiOS()&&!0===/ipad/i.test(m),c=i.isiOS()&&!d,u=i.isiOS()||i.isAndroid(),f=u||s("(pointer:coarse)"),s=d||!c&&u&&s("(min-device-width:768px)"),u=c||u&&!s,a=a.isSafari()&&i.isiOS()&&!1===/safari/i.test(m),m=!u&&!s&&!a,{isiPad:h(d),isiPhone:h(c),isTablet:h(s),isPhone:h(u),isTouch:h(f),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:h(a),isDesktop:h(m)});return{browser:r,os:o,deviceType:n}}}),Ar=()=>zr(),Lr=(r,o)=>{let e=t=>{var e=o(t);if(e<=0||null===e){let e=Vt(t,r);return parseFloat(e)||0}return e},n=(r,e)=>ne(e,(e,t)=>{t=Vt(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!K(t)&&!t.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+t);e=e.dom;It(e)&&(e.style[r]=t+"px")},get:e,getOuter:e,aggregate:n,max:(e,t,r)=>{e=n(e,r);return e<t?t-e:0}}},Mr=(e,t,r)=>(e=Vt(e,t),t=r,e=parseFloat(e),(isNaN(e)?v.none():v.some(e)).getOr(t)),Wr=Lr("width",e=>e.dom.offsetWidth),jr=e=>Wr.get(e),Pr=e=>Wr.getOuter(e),Ir=e=>{return t=(t=(e=e).dom).getBoundingClientRect().width||t.offsetWidth,e=e,t-Mr(e,"padding-left",0)-Mr(e,"padding-right",0)-Mr(e,"border-left-width",0)-Mr(e,"border-right-width",0);var t},Fr=(e,t,r)=>{var o=e.cells,n=o.slice(0,t),o=o.slice(t),t=n.concat(r).concat(o);return qr(e,t)},Hr=(e,t,r)=>Fr(e,t,[r]),Vr=(e,t,r)=>{e.cells[t]=r},qr=(e,t)=>ut(e.element,t,e.section,e.isNew),Ur=(e,t)=>e.cells[t],P=(e,t)=>Ur(e,t).element,$r=e=>e.cells.length,I=e=>{e=re(e,e=>"colgroup"===e.section);return{rows:e.fail,cols:e.pass}},Gr=(e,t,r)=>{r=w(e.cells,r);return ut(t(e.element),r,e.section,!0)},Kr="data-snooker-locked-cols",Yr=e=>Me(e,Kr).bind(e=>v.from(e.match(/\d+/g))).map(e=>me(e,C)),Jr=e=>{e=ne(I(e).rows,(r,e)=>(y(e.cells,(e,t)=>{e.isLocked&&(r[t]=!0)}),r),{}),e=be(e,(e,t)=>parseInt(t,10));return(e=Z.call(e,0)).sort(void 0),e},Qr=(e,t)=>e+","+t,Xr=(e,t)=>{e=R(e.all,e=>e.cells);return T(e,t)},Zr=e=>{let s={},t=[],i=ce(e).map(e=>e.element).bind(j).bind(Yr).getOr({}),r=0,m=0,d=0;var{pass:e,fail:o}=re(e,e=>"colgroup"===e.section),{columns:o,colgroups:e}=(y(o,e=>{let a=[];y(e.cells,e=>{let n=0;for(;void 0!==s[Qr(d,n)];)n++;r=i,o=n.toString();let t=ye(r,o)&&null!=r[o],l={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:d,column:n,isLocked:t};var r,o;for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){let e=n+o,t=Qr(d+r,e);s[t]=l,m=Math.max(m,e+1)}a.push(l)}),r++,t.push(ct(e.element,a,e.section)),d++}),ue(e).map(e=>{let t=(e=>{let o={},n=0;return y(e.cells,t=>{let r=t.colspan;S(r,e=>{e=n+e;o[e]={element:t.element,colspan:r,column:e}}),n+=r}),o})(e),r={element:e.element,columns:we(t)};return{colgroups:[r],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})));return{grid:{rows:r,columns:m},access:s,all:t,columns:o,colgroups:e}},F=e=>{e=ir(e);return Zr(e)},eo=Zr,to=(e,t,r)=>v.from(e.access[Qr(t,r)]),ro=(e,t,r)=>{e=Xr(e,e=>r(t,e.element));return 0<e.length?v.some(e[0]):v.none()},oo=Xr,no=e=>R(e.all,e=>e.cells),lo=e=>we(e.columns),ao=e=>0<ge(e.columns).length,so=(e,t)=>v.from(e.columns[t]),io=(r,o=C)=>{let e=r.grid,t=S(e.columns,p),n=S(e.rows,p);return w(t,t=>mo(()=>R(n,e=>to(r,e,t).filter(e=>e.column===t).toArray()),e=>1===e.colspan&&o(e.element),()=>to(r,0,t)))},mo=(e,t,r)=>{let o=e();return le(o,t).orThunk(()=>v.from(o[0]).orThunk(r)).map(e=>e.element)},co=r=>{let e=r.grid,t=S(e.rows,p),o=S(e.columns,p);return w(t,t=>mo(()=>R(o,e=>to(r,t,e).filter(e=>e.row===t).fold(h([]),e=>[e])),e=>1===e.rowspan,()=>to(r,t,0)))},uo=(t,r)=>e=>"rtl"===fo(e)?r:t,fo=e=>"rtl"===Vt(e,"direction")?"rtl":"ltr",go=Lr("height",e=>{var t=e.dom;return pt(e)?t.getBoundingClientRect().height:t.offsetHeight}),ho=e=>go.get(e),po=e=>go.getOuter(e),vo=(r,o)=>({left:r,top:o,translate:(e,t)=>vo(r+e,o+t)}),bo=vo,wo=(e,t)=>void 0!==e?e:void 0!==t?t:0,yo=e=>{var t,r,o=e.dom.ownerDocument,n=o.body,l=o.defaultView,o=o.documentElement;return n===e.dom?bo(n.offsetLeft,n.offsetTop):(t=wo(null==l?void 0:l.pageYOffset,o.scrollTop),l=wo(null==l?void 0:l.pageXOffset,o.scrollLeft),r=wo(o.clientTop,n.clientTop),o=wo(o.clientLeft,n.clientLeft),xo(e).translate(l-o,t-r))},xo=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?bo(r.offsetLeft,r.offsetTop):pt(e)?(r=t.getBoundingClientRect(),bo(r.left,r.top)):bo(0,0)},Co=(e,t)=>({row:e,y:t}),So=(e,t)=>({col:e,x:t}),To=e=>yo(e).left+Pr(e),Ro=e=>yo(e).left,Do=(e,t)=>So(e,Ro(t)),Oo=(e,t)=>So(e,To(t)),ko=e=>yo(e).top,Eo=(e,t)=>Co(e,ko(t)),No=(e,t)=>Co(e,ko(t)+po(t)),_o=(r,t,o)=>{var e,n;return 0===o.length?[]:(e=w(o.slice(1),(e,t)=>e.map(e=>r(t,e))),n=o[o.length-1].map(e=>t(o.length-1,e)),e.concat([n]))},Bo={delta:p,positions:e=>_o(Eo,No,e),edge:ko},zo=uo({delta:p,edge:Ro,positions:e=>_o(Do,Oo,e)},{delta:e=>-e,edge:To,positions:e=>_o(Oo,Do,e)}),Ao={delta:(e,t)=>zo(t).delta(e,t),positions:(e,t)=>zo(t).positions(e,t),edge:e=>zo(e).edge(e)},Lo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Mo=(Rt="[eE][+-]?"+(Tt="[0-9]+"),Tt=["Infinity",Tt+"\\."+(Sl=e=>`(?:${e})?`)(Tt)+Sl(Rt),"\\."+Tt+Sl(Rt),Tt+Sl(Rt)].join("|"),new RegExp(`^([+-]?(?:${Tt}))(.*)$`)),Wo=/(\d+(\.\d+)?)%/,jo=/(\d+(\.\d+)?)px|em/,Po=k("col"),Io=k("tr"),Fo=(e,t,r)=>{var o=$e(e).getOrThunk(()=>bt(Ve(e)));return t(e)/r(o)*100},Ho=(e,t)=>{W(e,"width",t+"px")},Vo=(e,t)=>{W(e,"width",t+"%")},qo=(e,t)=>{W(e,"height",t+"px")},Uo=e=>{s=e;var t,r,o,n,l,a,s=Mr(s,"height",s.dom.offsetHeight)+"px";return s?(s=s,t=e,r=ho,o=qo,a=parseFloat(s),Wt(s,"%")&&"table"!==O(t)?(s=t,n=a,l=r,t=o,r=j(s).map(e=>{e=l(e);return Math.floor(n/100*e)}).getOr(n),t(s,r),r):a):ho(e)},$o=(e,t)=>Ut(e,t).orThunk(()=>Me(e,t).map(e=>e+"px")),Go=e=>$o(e,"width"),Ko=e=>Fo(e,jr,Ir),Yo=e=>Po(e)?jr(e):Mr(e,"width",e.dom.offsetWidth),Jo=e=>Io(e)?ho(e):(e=e,Uo(e)/Kt(e,"rowspan")),Qo=(e,t,r)=>{W(e,"width",t+r)},Xo=e=>Fo(e,jr,Ir)+"%",Zo=h(Wo),en=k("col"),tn=e=>Go(e).getOrThunk(()=>Yo(e)+"px"),rn=e=>{return t=e,$o(t,"height").getOrThunk(()=>Jo(e)+"px");var t},on=(e,t,r,o,n,l)=>e.filter(o).fold(()=>l(((t,r)=>{if(r<0||r>=t.length-1)return v.none();let e=t[r].fold(()=>{var e=(e=>{e=Z.call(e,0);return e.reverse(),e})(t.slice(0,r));return fe(e,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>v.some({value:e,delta:0})),o=t[r+1].fold(()=>{var e=t.slice(r+1);return fe(e,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>v.some({value:e,delta:1}));return e.bind(r=>o.map(e=>{var t=e.delta+r.delta;return Math.abs(e.value-r.value)/t}))})(r,t)),e=>n(e)),nn=(e,t,n,l)=>{let a=io(e),r=ao(e)?(e=e,w(lo(e),e=>v.from(e.element))):a,s=[v.some(Ao.edge(t))].concat(w(Ao.positions(a,t),e=>e.map(e=>e.x))),i=J(Yt);return w(r,(e,o)=>on(e,o,s,i,e=>{if(r=e,t=(t=Ar().browser).isChromium()||t.isFirefox(),!en(r)||t)return n(e);var t,r;{let e=null!=(r=a[o])?p(r):v.none();return on(e,o,s,i,e=>l(v.some(jr(e))),l)}},l))},ln=e=>e.map(e=>e+"px").getOr(""),an=(e,t,r)=>nn(e,t,Yo,e=>e.getOrThunk(r.minCellWidth)),sn=(e,t,r,o)=>{let n=co(e),l=w(e.all,e=>v.some(e.element)),a=[v.some(Bo.edge(t))].concat(w(Bo.positions(n,t),e=>e.map(e=>e.y)));return w(l,(e,t)=>on(e,t,a,C,r,o))},mn=(e,t)=>()=>pt(e)?t(e):parseFloat(Ut(e,"width").getOr("0")),dn=n=>{let r=mn(n,e=>parseFloat(Xo(e))),t=mn(n,jr);return{width:r,pixelWidth:t,getWidths:(e,t)=>{return e=e,r=n,o=t,nn(e,r,Ko,e=>e.fold(()=>o.minCellWidth(),e=>e/o.pixelWidth()*100));var r,o},getCellDelta:e=>e/t()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Qt()/t()*100,setElementWidth:Vo,adjustTableWidth:e=>{var t=r();Vo(n,t+e/100*t)},isRelative:!0,label:"percent"}},cn=r=>{let t=mn(r,jr);return{width:t,pixelWidth:t,getWidths:(e,t)=>an(e,r,t),getCellDelta:p,singleColumnWidth:(e,t)=>[Math.max(Qt(),e+t)-e],minCellWidth:Qt,setElementWidth:Ho,adjustTableWidth:e=>{e=t()+e;Ho(r,e)},isRelative:!1,label:"pixel"}},un=o=>Go(o).fold(()=>{return r=o,e=mn(r,jr),t=h(0),{width:e,pixelWidth:e,getWidths:(e,t)=>an(e,r,t),getCellDelta:t,singleColumnWidth:h([0]),minCellWidth:t,setElementWidth:f,adjustTableWidth:f,isRelative:!0,label:"none"};var r,e,t},e=>{return t=o,e=e,(null!==Zo().exec(e)?dn:cn)(t);var t}),fn=cn,gn=dn,hn=(e,t,r)=>{e=e[r].element,r=_.fromTag("td");u(r,_.fromTag("br")),(t?u:Ze)(e,r)},pn=(r=>{let t=e=>r(e)?v.from(e.dom.nodeValue):v.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(Ne),vn=e=>pn.get(e),bn=e=>pn.getOption(e),wn=(e,t)=>pn.set(e,t),yn=e=>"img"===O(e)?1:bn(e).fold(()=>m(e).length,e=>e.length),xn=["img","br"],Cn=e=>bn(e).filter(e=>0!==e.trim().length||-1<e.indexOf("")).isSome()||g(xn,O(e))||(e=e,ke(e)&&"false"===Le(e,"contenteditable")),Sn=e=>{{var n=Cn;let o=t=>{for(let e=0;e<t.childNodes.length;e++){var r=_.fromDom(t.childNodes[e]);if(n(r))return v.some(r);r=o(t.childNodes[e]);if(r.isSome())return r}return v.none()};return o(e.dom)}},Tn=e=>Rn(e,Cn),Rn=(e,o)=>{let n=e=>{var t=m(e);for(let e=t.length-1;0<=e;e--){var r=t[e];if(o(r))return v.some(r);r=n(r);if(r.isSome())return r}return v.none()};return n(e)},Dn={scope:["row","col"]},On=t=>()=>{var e=_.fromTag("td",t.dom);return u(e,_.fromTag("br",t.dom)),e},kn=e=>()=>_.fromTag("col",e.dom),En=e=>()=>_.fromTag("colgroup",e.dom),Nn=e=>()=>_.fromTag("tr",e.dom),_n=(e,t,r)=>{let o=((e,t)=>{t=it(e,t),e=m(st(e));return rt(t,e),t})(e,t);return D(r,(e,t)=>{null===e?N(o,t):E(o,t,e)}),o},Bn=e=>e,zn=(i,m,d)=>{let c=(e,t)=>{var r,o;r=e.element.dom,o=t.dom,It(r)&&It(o)&&(o.style.cssText=r.style.cssText),$t(t,"height"),1!==e.colspan&&$t(t,"width")};return{col:e=>{var t=_.fromTag(O(e.element),m.dom);return c(e,t),i(e.element,t),t},colgroup:En(m),row:Nn(m),cell:e=>{var r,o,n,l,a,t=_.fromTag(O(e.element),m.dom),s=d.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),s=0<s.length?(r=e.element,o=t,n=s,Sn(r).map(e=>{var t=n.join(","),e=yt(e,t,e=>z(e,r));return oe(e,(e,t)=>{t=at(t);return u(e,t),t},o)}).getOr(o)):t;return u(s,_.fromTag("br")),c(e,t),l=e.element,a=t,D(Dn,(t,r)=>Me(l,r).filter(e=>g(t,e)).each(e=>E(a,r,e))),i(e.element,t),t},replace:_n,colGap:kn(m),gap:On(m)}},An=e=>({col:kn(e),colgroup:En(e),row:Nn(e),cell:On(e),replace:Bn,colGap:kn(e),gap:On(e)}),Ln=t=>e=>e.options.get(t),Mn="100%",Wn=e=>{var t=e.dom,t=null!=(t=t.getParent(e.selection.getStart(),t.isBlock))?t:e.getBody();return Ir(_.fromDom(t))+"px"},jn=e=>v.from(e.options.get("table_clone_elements")),Pn=Ln("table_header_type"),In=Ln("table_column_resizing"),Fn=e=>"preservetable"===In(e),Hn=e=>"resizetable"===In(e),Vn=Ln("table_sizing_mode"),qn=e=>"relative"===Vn(e),Un=e=>"fixed"===Vn(e),$n=e=>"responsive"===Vn(e),Gn=Ln("table_resize_bars"),Kn=Ln("table_style_by_css"),Yn=Ln("table_merge_content_on_paste"),Jn=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:(t=e,e=r,$n(t)||Kn(t)?e:Un(t)?{...e,width:Wn(t)}:{...e,width:Mn})},Qn=Ln("table_use_colgroups"),Xn=Ln("fixed_toolbar_container"),Zn=Ln("fixed_toolbar_container_target"),el=Ln("ui_mode"),tl=e=>M(e,"[contenteditable]"),rl=(e,t=!1)=>pt(e)?e.dom.isContentEditable:tl(e).fold(h(t),e=>"true"===ol(e)),ol=e=>e.dom.contentEditable,nl=e=>_.fromDom(e.getBody()),ll=t=>e=>z(e,nl(t)),al=e=>{N(e,"data-mce-style");var t=e=>N(e,"data-mce-style");y(rr(e),t),y(or(e),t),y(nr(e),t)},sl=e=>_.fromDom(e.selection.getStart()),il=e=>e.getBoundingClientRect().width,ml=e=>e.getBoundingClientRect().height,dl=r=>(e,t)=>{e=e.dom.getStyle(t,r)||e.dom.getAttrib(t,r);return v.from(e).filter(Pt)},cl=dl("width"),ul=dl("height"),fl=e=>kt(e,k("table")).exists(rl),gl=(e,t)=>t.column<=e.finishCol&&t.column+t.colspan-1>=e.startCol&&t.row<=e.finishRow&&t.row+t.rowspan-1>=e.startRow,hl=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,pl=(e,t,r)=>{let o=ro(e,t,z),n=ro(e,r,z);return o.bind(r=>n.map(e=>{return t=r,e=e,{startRow:Math.min(t.row,e.row),startCol:Math.min(t.column,e.column),finishRow:Math.max(t.row+t.rowspan-1,e.row+e.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,e.column+e.colspan-1)};var t}))},vl=(t,e,r)=>pl(t,e,r).map(e=>{e=oo(t,x(gl,e));return w(e,e=>e.element)}),bl=(e,t)=>ro(e,t,(e,t)=>Fe(t,e)).map(e=>e.element),wl=(e,t,r)=>{e=xl(e);return vl(e,t,r)},yl=(e,t,r,o,n)=>{let l=xl(e),a=z(e,r)?v.some(t):bl(l,t),s=z(e,n)?v.some(o):bl(l,o);return a.bind(t=>s.bind(e=>vl(l,t,e)))},xl=F;var Cl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Sl=()=>({up:h({selector:Et,closest:M,predicate:Ot,all:Ge}),down:h({selector:Ct,predicate:wt}),styles:h({get:Vt,getRaw:Ut,set:W,remove:$t}),attrs:h({get:Le,set:E,remove:N,copyTo:(e,t)=>{e=We(e);Ae(t,e)}}),insert:h({before:Qe,after:Xe,afterAll:tt,append:u,appendAll:rt,prepend:Ze,wrap:et}),remove:h({unwrap:nt,remove:A}),create:h({nu:_.fromTag,clone:e=>_.fromDom(e.dom.cloneNode(!1)),text:_.fromText}),query:h({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Ke,nextSibling:Ye}),property:h({children:m,name:O,parent:Ue,document:e=>qe(e).dom,isText:Ne,isComment:Oe,isElement:Ee,isSpecial:e=>{e=O(e);return g(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:e=>Ee(e)?Me(e,"lang"):v.none(),getText:vn,setText:wn,isBoundary:e=>!!Ee(e)&&("body"===O(e)||g(Cl,O(e))),isEmptyTag:e=>!!Ee(e)&&g(["br","img","hr","input"],O(e)),isNonEditable:e=>Ee(e)&&"false"===Le(e,"contenteditable")}),eq:z,is:He});let Tl=(r,o,e,t)=>{e=o(r,e);return oe(t,(e,t)=>{t=o(r,t);return Rl(r,e,t)},e)},Rl=(t,e,r)=>e.bind(e=>r.filter(x(t.eq,e))),Dl=Sl(),Ol=(r,e)=>{return t=Dl,0<e.length?(t=t,o=(e,t)=>r(t),e=e,Tl(t,o,e[0],e.slice(1))):v.none();var t,o},kl=e=>Et(e,"table"),El=(l,a,r)=>{let s=t=>e=>void 0!==r&&r(e)||z(e,t);return z(l,a)?v.some({boxes:v.some([l]),start:l,finish:a}):kl(l).bind(n=>kl(a).bind(o=>{if(z(n,o))return v.some({boxes:wl(n,l,a),start:l,finish:a});if(Fe(n,o)){let e=yt(a,"td,th",s(n)),t=0<e.length?e[e.length-1]:a;return v.some({boxes:yl(n,l,n,a,o),start:l,finish:t})}if(Fe(o,n)){let e=yt(l,"td,th",s(o)),t=0<e.length?e[e.length-1]:l;return v.some({boxes:yl(o,l,n,a,o),start:l,finish:t})}return((a,s)=>{{var[i,a,s,m=X]=[Dl,a,s,void 0];let e=[a].concat(i.up().all(a)),t=[s].concat(i.up().all(s)),r=t=>ae(t,m).fold(()=>t,e=>t.slice(0,e+1)),o=r(e),n=r(t),l=le(o,e=>b(n,x(i.eq,e)));return{firstpath:o,secondpath:n,shared:l}}})(l,a).shared.bind(e=>M(e,"table",r).bind(e=>{var t=yt(a,"td,th",s(e)),t=0<t.length?t[t.length-1]:a,r=yt(l,"td,th",s(e)),r=0<r.length?r[r.length-1]:l;return v.some({boxes:yl(e,l,n,a,o),start:r,finish:t})}))}))},Nl=(e,t)=>{e=Ct(e,t);return 0<e.length?v.some(e):v.none()},_l=(e,t,o)=>_t(e,t).bind(r=>_t(e,o).bind(t=>Ol(kl,[r,t]).map(e=>({first:r,last:t,table:e})))),Bl=(e,r,o,n,t)=>{return e=e,l=t,le(e,e=>B(e,l)).bind(e=>{return t=e,l=r,a=o,j(t).bind(e=>{return r=xl(e),e=t,o=l,n=a,ro(r,e,z).bind(e=>{var t=0<o?e.row+e.rowspan-1:e.row,e=0<n?e.column+e.colspan-1:e.column;return to(r,t+o,e+n).map(e=>e.element)});var r,o,n}).bind(e=>{return t=e,r=n,Et(t,"table").bind(e=>_t(e,r).bind(e=>El(e,t).bind(t=>t.boxes.map(e=>({boxes:e,start:t.start,finish:t.finish})))));var t,r});var t,l,a});var l},zl=(e,t)=>Nl(e,t),Al=(o,e,t)=>_l(o,e,t).bind(n=>{let e=e=>z(o,e),t="thead,tfoot,tbody,table",r=Et(n.first,t,e),l=Et(n.last,t,e);return r.bind(o=>l.bind(e=>{return z(o,e)?(e=n.table,t=n.first,r=n.last,a=xl(e),e=t,t=r,pl(a,e,t).bind(e=>{{var o=a,n=e;let r=!0;var l=x(hl,n);for(let t=n.startRow;t<=n.finishRow;t++)for(let e=n.startCol;e<=n.finishCol;e++)r=r&&to(o,t,e).exists(l);return r?v.some(n):v.none()}})):v.none();var t,r,a}))}),Ll=p,Ml=e=>{let t=(e,t)=>Me(e,t).exists(e=>1<parseInt(e,10));return 0<e.length&&ie(e,e=>t(e,"rowspan")||t(e,"colspan"))?v.some(e):v.none()},Wl=(e,t,r)=>t.length<=1?v.none():Al(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),jl="data-mce-selected",Pl="data-mce-first-selected",Il="data-mce-last-selected",Fl="["+jl+"]",Hl={selected:jl,selectedSelector:"td["+jl+"],th["+jl+"]",firstSelected:Pl,firstSelectedSelector:"td["+Pl+"],th["+Pl+"]",lastSelected:Il,lastSelectedSelector:"td["+Il+"],th["+Il+"]"},Vl=(e,t,r)=>({element:r,mergable:Wl(t,e,Hl),unmergable:Ml(e),selection:Ll(e)}),ql=o=>(e,t)=>{var r=O(e),r="col"===r||"colgroup"===r?j(r=e).bind(e=>zl(e,Hl.firstSelectedSelector)).fold(h(r),e=>e[0]):e;return M(r,o,t)},Ul=ql("th,td,caption"),$l=ql("th,td"),Gl=e=>(e=e.model.table.getSelectedCells(),w(e,_.fromDom)),Kl=(s,i)=>{s.on("BeforeGetContent",l=>{var t,r=e=>{l.preventDefault(),e=e,j(e[0]).map(e=>{e=((e,t)=>{let r=e=>B(e.element,t),o=st(e),n=ir(o),l=un(e),a=eo(n),s=((e,t)=>{var r=e.grid.columns;let l=e.grid.rows,a=r,s=0,i=0,o=[],m=[];return D(e.access,n=>{if(o.push(n),t(n)){m.push(n);let e=n.row,t=e+n.rowspan-1,r=n.column,o=r+n.colspan-1;e<l?l=e:t>s&&(s=t),r<a?a=r:o>i&&(i=o)}}),{minRow:l,minCol:a,maxRow:s,maxCol:i,allCells:o,selectedCells:m}})(a,r),i="th:not("+t+"),td:not("+t+")",m=er(o,"th,td",e=>B(e,i));y(m,A);var d=n,c=a,u=s,f=r,g=T(d,e=>"colgroup"!==e.section),h=c.grid.columns,p=c.grid.rows;for(let r=0;r<p;r++){let t=!1;for(let e=0;e<h;e++)r<u.minRow||r>u.maxRow||e<u.minCol||e>u.maxCol||(to(c,r,e).filter(f).isNone()?hn(g,t,r):t=!0)}d=e,e=F(e),w=l;var v=0===(v=s).minCol&&e.grid.columns===v.maxCol+1?0:(e=an(e,d,w),d=ne(e,(e,t)=>e+t,0),e=ne(e.slice(v.minCol,v.maxCol+1),(e,t)=>e+t,0)/d*w.pixelWidth()-w.pixelWidth(),w.getCellDelta(e)),d=o,b=s,w=a,e=v;return D(w.columns,e=>{(e.column<b.minCol||e.column>b.maxCol)&&A(e.element)}),w=T(Zt(d,"tr"),e=>0===e.dom.childElementCount),y(w,A),b.minCol!==b.maxCol&&b.minRow!==b.maxRow||y(Zt(d,"th,td"),e=>{N(e,"rowspan"),N(e,"colspan")}),N(d,Kr),N(d,"data-snooker-col-series"),un(d).adjustTableWidth(e),o})(e,Fl);return al(e),[e]}).each(e=>{var t,r,o,n="text"===l.format?(o=e,n=(r=s).getDoc(),r=gt(_.fromDom(r.getBody())),n=_.fromTag("div",n),E(n,"data-mce-bogus","all"),Ht(n,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"}),r=r,r=ft(r)?r:_.fromDom(qe(r).dom.body),rt(n,o),u(r,n),o=n.dom.innerText,A(n),o):(t=s,r=e,w(r,e=>t.selection.serializer.serialize(e.dom,{})).join(""));l.content=n})};if(!0===l.selection){t=s;let e=T(Gl(t),e=>B(e,Hl.selectedSelector));1<=e.length&&r(e)}}),s.on("BeforeSetContent",a=>{var e;!0===a.selection&&!0===a.paste&&(e=Gl(s),ce(e).each(l=>{j(l).each(o=>{let n=T((t=a.content,(r=document.createElement("div")).innerHTML=t,m(_.fromDom(r))),e=>"meta"!==O(e)),e=k("table");var t,r;if(Yn(s)&&1===n.length&&e(n[0])){a.preventDefault();let e=_.fromDom(s.getDoc()),t=An(e),r={element:l,clipboard:n[0],generators:t};i.pasteCells(o,r).each(()=>{s.focus()})}})}))})},Yl=(e,t)=>({element:e,offset:t}),Jl=(t,e,r)=>t.property().isText(e)&&0===t.property().getText(e).trim().length||t.property().isComment(e)?r(e).bind(e=>Jl(t,e,r).orThunk(()=>v.some(e))):v.none(),Ql=(e,t)=>(e.property().isText(t)?e.property().getText(t):e.property().children(t)).length,Xl=(e,t)=>{var r,t=Jl(e,t,e.query().prevSibling).getOr(t);return!e.property().isText(t)&&0<(r=e.property().children(t)).length?Xl(e,r[r.length-1]):Yl(t,Ql(e,t))},Zl=Xl,ea=Sl(),ta=(r,o)=>{var e;Yt(r)||(e=r,Go(e).bind(e=>{return e=e,n=["fixed","relative","empty"],v.from(Mo.exec(e)).bind(e=>{var t,r,o=Number(e[1]),e=e[2];return t=e,r=n,b(r,e=>b(Lo[e],e=>t===e))?v.some({value:o,unit:e}):v.none()});var n}).each(e=>{var t=e.value/2;Qo(r,t,e.unit),Qo(o,t,e.unit)}))},ra=e=>w(e,h(0)),oa=(e,t,r,o,n)=>n(e.slice(0,t)).concat(o).concat(n(e.slice(r))),na=e=>(r,o,n,l)=>{if(e(n)){let e=Math.max(l,r[o]-Math.abs(n)),t=Math.abs(e-r[o]);return 0<=n?t:-t}return n},la=na(e=>e<0),aa=na(C),sa=()=>{let a=(e,r,t,o)=>{let n=(100+t)/100,l=Math.max(o,(e[r]+t)/n);return w(e,(e,t)=>(t===r?l:e/n)-e)},s=(e,t,r,o,n,l)=>l?a(e,t,o,n):(l=e,e=t,t=r,r=o,o=n,r=la(l,e,r,o),oa(l,e,t+1,[r,0],ra));return{resizeTable:(e,t)=>e(t),clampTableDelta:la,calcLeftEdgeDeltas:s,calcMiddleDeltas:(e,t,r,o,n,l,a)=>s(e,r,o,n,l,a),calcRightEdgeDeltas:(t,e,r,o,n,l)=>{if(l)return a(t,r,o,n);{let e=la(t,r,o,n);return ra(t.slice(0,r)).concat([e])}},calcRedestributedWidths:(r,o,n,e)=>{if(e){let t=(o+n)/o,e=w(r,e=>e/t);return{delta:100*t-100,newSizes:e}}return{delta:n,newSizes:r}}}},ia=()=>{let a=(e,t,r,o,n)=>{o=aa(e,0<=o?r:t,o,n);return oa(e,t,r+1,[o,-o],ra)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(t,e,r,o,n)=>{if(n){if(0<=r)return r;{let e=ne(t,(e,t)=>e+t-o,0);return Math.max(-e,r)}}return la(t,e,r,o)},calcLeftEdgeDeltas:a,calcMiddleDeltas:(e,t,r,o,n,l)=>a(e,r,o,n,l),calcRightEdgeDeltas:(t,e,r,o,n,l)=>{if(l)return ra(t);{let e=o/t.length;return w(t,h(e))}},calcRedestributedWidths:(e,t,r,o)=>({delta:0,newSizes:e})}},ma=e=>F(e).grid,da=k("th"),ca=e=>ie(e,e=>da(e.element)),ua=(e,t)=>e&&t?"sectionCells":e?"section":"cells",fa=e=>{var t="thead"===e.section,r=Bt(ga(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:ua(t,r)}:{type:"body"}},ga=e=>{var t=T(e,e=>da(e.element));return 0===t.length?v.some("td"):t.length===e.length?v.some("th"):v.none()},ha=(e,t,r)=>L(r(e.element,t),!0,e.isLocked),pa=(e,t)=>e.section!==t?ut(e.element,e.cells,t,e.isNew):e,va=()=>({transformRow:pa,transformCell:(e,t,r)=>{var o,r=r(e.element,t),n="td"!==O(r)?(t=r,o=it(t,"td"),Xe(t,o),n=m(t),rt(o,n),A(t),o):r;return L(n,e.isNew,e.isLocked)}}),ba=()=>({transformRow:pa,transformCell:ha}),wa=()=>({transformRow:(e,t)=>pa(e,"thead"===t?"tbody":t),transformCell:ha}),ya=va,xa=ba,Ca=wa,Sa=()=>({transformRow:p,transformCell:ha}),Ta=(e,t,r,o)=>{r===o?N(e,t):E(e,t,r)},Ra=(e,t,r)=>{ue(xt(e,t)).fold(()=>Ze(e,r),e=>Xe(e,r))},Da=(a,e)=>{let r=[],o=[],s=e=>w(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return ot(t),y(e.cells,e=>{e.isNew&&o.push(e.element),Ta(e.element,"colspan",e.colspan,1),Ta(e.element,"rowspan",e.rowspan,1),u(t,e.element)}),t}),i=e=>R(e,e=>w(e.cells,e=>(Ta(e.element,"span",e.colspan,1),e.element))),t=(e,t)=>{var r,o,n,l;0<e.length?(e=e,o=a,n=r=t,l=Nt(o,n).getOrThunk(()=>{var e=_.fromTag(n,Ve(o).dom);return"thead"===n?Ra(o,"caption,colgroup",e):"colgroup"===n?Ra(o,"caption",e):u(o,e),e}),ot(l),r=("colgroup"===r?i:s)(e),rt(l,r)):(e=t,Nt(a,e).each(A))},n=[],l=[],m=[],d=[];return y(e,e=>{switch(e.section){case"thead":n.push(e);break;case"tbody":l.push(e);break;case"tfoot":m.push(e);break;case"colgroup":d.push(e)}}),t(d,"colgroup"),t(n,"thead"),t(l,"tbody"),t(m,"tfoot"),{newRows:r,newCells:o}},Oa=(e,t)=>{if(0===e.length)return 0;let r=e[0];return ae(e,e=>!t(r.element,e.element)).getOr(e.length)},ka=(g,h)=>{let p=w(g,e=>w(e.cells,X));return w(g,(e,f)=>{var t=R(e.cells,(e,t)=>{if(!1===p[f][t]){m=t,d=h,u=(s=g)[i=f],r="colgroup"===u.section;var r={colspan:Oa(u.cells.slice(m),d),rowspan:r?1:Oa((u=s.slice(i),c=m,w(u,e=>Ur(e,c))),d)},o=f,n=t,l=r.rowspan,a=r.colspan;for(let t=o;t<o+l;t++)for(let e=n;e<n+a;e++)p[t][e]=!0;return[{element:e.element,rowspan:r.rowspan,colspan:r.colspan,isNew:e.isNew}]}var s,i,m,d,c,u,r;return[]});return{element:e.element,cells:t,section:e.section,isNew:e.isNew}})},Ea=(o,n,l)=>{let a=[];y(o.colgroups,e=>{var r=[];for(let t=0;t<o.grid.columns;t++){let e=so(o,t).map(e=>L(e.element,l,!1)).getOrThunk(()=>L(n.colGap(),!0,!1));r.push(e)}a.push(ut(e.element,r,"colgroup",l))});for(let t=0;t<o.grid.rows;t++){var r=[];for(let e=0;e<o.grid.columns;e++){var s=to(o,t,e).map(e=>L(e.element,l,e.isLocked)).getOrThunk(()=>L(n.gap(),!0,!1));r.push(s)}var e=o.all[t],e=ut(e.element,r,e.section,l);a.push(e)}return a},Na=e=>ka(e,z),_a=(e,t)=>fe(e.all,e=>le(e.cells,e=>z(t,e.element))),Ba=(t,e,r)=>{e=w(e.selection,e=>tr(e).bind(e=>_a(t,e)).filter(r)),e=zt(e);return At(0<e.length,e)},e=(i,t,m,d,c)=>(n,e,o,l)=>{let a=F(n),s=v.from(null==l?void 0:l.section).getOrThunk(Sa);return t(a,e).map(e=>{t=a,r=o;var t=Ea(t,r,!1),r=i(t,e,z,c(o),s),t=Jr(r.grid);return{info:e,grid:Na(r.grid),cursor:r.cursor,lockedColumns:t}}).bind(e=>{var t=Da(n,e.grid),r=v.from(null==l?void 0:l.sizing).getOrThunk(()=>un(n)),o=v.from(null==l?void 0:l.resize).getOrThunk(ia);return m(n,e.grid,e.info,{sizing:r,resize:o,section:s}),d(n),N(n,Kr),0<e.lockedColumns.length&&E(n,Kr,e.lockedColumns.join(",")),v.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},za=(e,t)=>Ba(e,t,C).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),Aa=(e,t)=>Ba(e,t,C),La=(e,t)=>Ba(e,t,e=>!e.isLocked),Ma=(r,e)=>ie(e,e=>{return t=r,e=e,_a(t,e).exists(e=>!e.isLocked);var t}),Wa=(e,r,o,n)=>{var l=I(e).rows;let a=!0;for(let t=0;t<l.length;t++)for(let e=0;e<$r(l[0]);e++){var s=l[t],i=Ur(s,e),m=o(i.element,r);m&&!a?Vr(s,e,L(n(),!0,i.isLocked)):m&&(a=!1)}return e},ja=r=>{let e=e=>e(r),t=h(r),o=()=>n,n={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:C,isError:X,map:e=>Ia.value(e(r)),mapError:o,bind:e,exists:e,forall:e,getOr:t,or:o,getOrThunk:t,orThunk:o,getOrDie:t,each:e=>{e(r)},toOptional:()=>v.some(r)};return n},Pa=r=>{let e=()=>t,t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:X,isError:C,map:e,mapError:e=>Ia.error(e(r)),bind:e,exists:X,forall:C,getOr:p,or:p,getOrThunk:Q,orThunk:Q,getOrDie:(o=String(r),()=>{throw new Error(o)}),each:f,toOptional:v.none};var o;return t},Ia={value:ja,error:Pa,fromOption:(e,t)=>e.fold(()=>Pa(t),ja)},Fa=(e,t)=>({rowDelta:0,colDelta:$r(e[0])-$r(t[0])}),Ha=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Va=(e,t,r,o)=>{let n="colgroup"===t.section?r.col:r.cell;return S(e,e=>L(n(),!0,o(e)))},qa=(e,t,r,o)=>{let n=e[e.length-1];return e.concat(S(t,()=>{var e="colgroup"===n.section?r.colgroup:r.row,e=Gr(n,e,p),t=Va(e.cells.length,e,r,e=>ye(o,e.toString()));return qr(e,t)}))},Ua=(e,r,o,n)=>w(e,e=>{var t=Va(r,e,o,X);return Fr(e,n,t)}),$a=(e,t,r)=>{let o=t.colDelta<0?Ua:p,n=t.rowDelta<0?qa:p,l=Jr(e),a=$r(e[0]),s=b(l,e=>e===a-1),i=o(e,Math.abs(t.colDelta),r,s?a-1:a),m=Jr(i);return n(i,Math.abs(t.rowDelta),r,me(m,C))},Ga=(t,r,e)=>T(e,e=>e>=t.column&&e<=$r(r[0])+t.column),Ka=(r,e,t,o,n)=>{var l,a,s,i;l=e,a=r,s=n,i=o.cell,0<a&&a<l[0].cells.length&&y(l,e=>{var t=e.cells[a-1];let r=0;for(var o=i();e.cells.length>a+r&&s(t.element,e.cells[a+r].element);)Vr(e,a+r,L(o,!0,e.cells[a+r].isLocked)),r++});let m=Ha(t,e),d=$a(t,m,o),c=Ha(e,d),u=$a(e,c,o);return w(u,(e,t)=>Fr(e,r,d[t].cells))},Ya=(e,t,r,o,n)=>{{var l=t,s=e,i=n,m=o.cell,d;let a=I(l).rows;if(0<s&&s<a.length){n=a[s-1].cells,d=i;let e=ne(n,(e,t)=>b(e,e=>d(e.element,t.element))?e:e.concat([t]),[]);y(e,n=>{let l=v.none();for(let e=s;e<a.length;e++)for(let o=0;o<$r(a[0]);o++){let t=a[e],r=Ur(t,o);i(r.element,n.element)&&(l=l.isNone()?v.some(m()):l).each(e=>{Vr(t,o,L(e,!0,r.isLocked))})}})}}var a,c,l=Jr(t),n=Fa(t,r),n={...n,colDelta:n.colDelta-l.length},l=$a(t,n,o),{cols:n,rows:u}=I(l),l=Jr(l),t=Fa(r,t),t={...t,colDelta:t.colDelta+l.length},l=(a=o,c=l,w(r,o=>ne(c,(e,t)=>{var r=Va(1,o,a,C)[0];return Hr(e,t,r)},o))),r=$a(l,t,o);return[...n,...u.slice(0,e),...r,...u.slice(e,u.length)]},Ja=(e,r,t,o,n)=>{let{rows:l,cols:a}=I(e),s=l.slice(0,r),i=l.slice(r);return[...a,...s,(e=l[t],m=o,d=n,Gr(e,e=>d(e,m),(e,t)=>r>0&&r<l.length&&o(P(l[r-1],t),P(l[r],t))?Ur(l[r],t):L(n(e.element,o),!0,e.isLocked))),...i];var m,d},Qa=(e,r,o,n,l)=>w(e,e=>{let a=0<r&&r<$r(e)&&n(P(e,r-1),P(e,r)),t=((t,e,r,o,n,l)=>{if("colgroup"!==r&&a)return Ur(t,e);{let e=Ur(t,o);return L(l(e.element,n),!0,!1)}})(e,r,e.section,o,n,l);return Hr(e,r,t)}),Xa=(e,t,r,o)=>{return n=e,l=t,a=r,s=o,void 0!==P(n[l],a)&&0<l&&s(P(n[l-1],a),P(n[l],a))||(s=e[t],0<(n=r)&&o(P(s,n-1),P(s,n)));var n,l,a,s},Za=(e,r,t,o)=>{var n=e=>{return("row"===e?(t=r,1<Kt(t,"rowspan")):Yt(r))?e+"group":e;var t};return e?da(r)?n(t):null:o&&da(r)?n("row"===t?"col":"row"):null},es=(e,t,r)=>L(r(e.element,t),!0,e.isLocked),ts=(e,n,l,a,s,i,m)=>w(e,(e,o)=>{return t=(e=e).cells,t=w(t,(e,r)=>{if(t=e,b(n,e=>l(t.element,e.element))){let t=m(e,o,r)?s(e,l,a):e;return i(t,o,r).each(e=>{var r=t.element,e={scope:v.from(e)};D(e,(e,t)=>{e.fold(()=>{N(r,t)},e=>{ze(r.dom,t,e)})})}),t}var t;return e}),ut(e.element,t,e.section,e.isNew);var t}),rs=(r,o,n)=>R(r,(e,t)=>Xa(r,t,o,n)?[]:[Ur(e,o)]),os=(e,t,r,o,n)=>{let l=I(e).rows,a=R(t,e=>rs(l,e,o)),s=w(l,e=>ca(e.cells)),i=(t=a,u=s,ie(u,p)&&ca(t)?C:(e,t,r)=>!("th"===O(e.element)&&u[t])),m=(d=r,c=s,(e,t)=>v.some(Za(d,e.element,"row",c[t])));var d,c,u;return ts(e,a,o,n,es,m,i)},ns=(e,t,r,o)=>{let n=I(e).rows,l=w(t,e=>Ur(n[e.row],e.column));return ts(e,l,r,o,es,v.none,C)},ls=l=>{if(!i(l))throw new Error("cases must be an array");if(0===l.length)throw new Error("there must be at least one case");let a=[],s={};return y(l,(e,t)=>{var r=ge(e);if(1!==r.length)throw new Error("one and only one name per case");let o=r[0],n=e[o];if(void 0!==s[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!i(n))throw new Error("case arguments must be an array");a.push(o),s[o]=(...r)=>{var e=r.length;if(e!==n.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+n.length+" ("+n+"), got "+e);return{fold:(...e)=>{if(e.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{let t=ge(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(ie(a,e=>g(t,e)))return e[o].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:e=>{console.log(e,{constructors:a,constructor:o,params:r})}}}}),s},as={...ls([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ss=(e,t,r)=>{e=e,t=t;e=(ao(e)?(e,r)=>{e=lo(e);return w(e,(e,t)=>({element:e.element,width:r[t],colspan:e.colspan}))}:(e,r)=>{e=no(e);return w(e,e=>{var t=((t,r,o)=>{let n=0;for(let e=t;e<r;e++)n+=void 0!==o[e]?o[e]:0;return n})(e.column,e.column+e.colspan,r);return{element:e.element,width:t,colspan:e.colspan}})})(e,t);y(e,e=>{r.setElementWidth(e.element,e.width)})},is=(e,t,r,o,n)=>{let l=F(e),a=n.getCellDelta(t),s=n.getWidths(l,n),i=r===l.grid.columns-1,m=o.clampTableDelta(s,r,a,n.minCellWidth(),i),d=((e,t,o,n,l)=>{let a=e.slice(0),r=(t=t,0===(e=e).length?as.none():1===e.length?as.only(0):0===t?as.left(0,1):t===e.length-1?as.right(t-1,t):0<t&&t<e.length-1?as.middle(t-1,t,t+1):as.none()),s=h(w(a,h(0)));return r.fold(s,e=>n.singleColumnWidth(a[e],o),(e,t)=>l.calcLeftEdgeDeltas(a,e,t,o,n.minCellWidth(),n.isRelative),(e,t,r)=>l.calcMiddleDeltas(a,e,t,r,o,n.minCellWidth(),n.isRelative),(e,t)=>l.calcRightEdgeDeltas(a,e,t,o,n.minCellWidth(),n.isRelative))})(s,r,m,n,o),c=w(d,(e,t)=>e+s[t]);ss(l,c,n),o.resizeTable(n.adjustTableWidth,m,i)},ms=(e,r,o)=>{var n,t=F(e),l=(l=t,a=e,sn(l,a,Jo,e=>e.getOrThunk(Xt))),a=w(l,(e,t)=>o===t?Math.max(r+e,Xt()):e),l=(l=t,n=a,w(l.all,(e,t)=>({element:e.element,height:n[t]}))),l=(y(l,e=>{qo(e.element,e.height)}),y(no(t),e=>{e=e.element,$t(e,"height")}),oe(a,(e,t)=>e+t,0));qo(e,l)},ds=e=>ne(e,(e,t)=>b(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),cs=k("col"),us=k("colgroup"),fs=e=>"tr"===O(e)||us(e),gs=e=>Me(e,"scope").map(e=>e.substr(0,3)),hs=(o,n=e=>({element:e,colspan:Gt(e,"colspan",1),rowspan:Gt(e,"rowspan",1)}))=>{let l=r=>{if(fs(r))return us((e={element:r}).element)?o.colgroup(e):o.row(e);{let e=r,t=(r=n(e),cs(r.element)?o.col(r):o.cell(r));return a=v.some({item:e,replacement:t}),t}var e},a=v.none();return{getOrInit:(t,r)=>a.fold(()=>l(t),e=>r(t,e.item)?e.replacement:l(t))}},ps=o=>r=>{let a=[],s=e=>{var t=r.replace(e,o,"td"===o?{scope:null}:{});return a.push({item:e,sub:t}),t};return{replaceOrInit:(r,o)=>{if(fs(r)||cs(r))return r;{let t=r;return n=t,l=o,le(a,e=>l(e.item,n)).fold(()=>s(t),e=>o(r,e.item)?e.sub:s(t))}var n,l}}},vs=o=>({unmerge:r=>{let e=gs(r);return e.each(e=>E(r,"scope",e)),()=>{let t=o.cell({element:r,colspan:1,rowspan:1});return $t(t,"width"),$t(r,"width"),e.each(e=>E(t,"scope",e)),t}},merge:t=>($t(t[0],"width"),(()=>{var e=zt(w(t,gs));if(0===e.length)return v.none();{let t=e[0],r=["row","col"];return b(e,e=>e!==t&&g(r,e))?v.none():v.from(t)}})().fold(()=>N(t[0],"scope"),e=>E(t[0],"scope",e+"group")),h(t[0]))}),bs=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ws=Sl(),ys=e=>{var t=ws;return t=t.property().name(e),g(bs,t)},xs=e=>{var t=ws;return t=t.property().name(e),g(["ol","ul"],t)},Cs=e=>{let l=k("br"),o=n=>Tn(n).bind(r=>{let o=Ye(r).map(e=>{return!!ys(e)||(t=ws,r=e,!!g(["br","img","hr","input"],t.property().name(r))&&"img"!==O(e));var t,r}).getOr(!1);return Ue(r).map(e=>{return!0===o||"li"===O(t=e)||Ot(t,xs).isSome()||l(r)||ys(e)&&!z(n,e)?[]:[_.fromTag("br")];var t})}).getOr([]),t=0===(r=R(e,e=>{var t,r=m(e);return t=r,ie(t,e=>l(e)||Ne(e)&&0===vn(e).trim().length)?[]:r.concat(o(e))})).length?[_.fromTag("br")]:r;var r;ot(e[0]),rt(e[0],t)},Ss=e=>rl(e,!0),Ts=e=>{0===rr(e).length&&A(e)},Rs=(e,t)=>({grid:e,cursor:t}),d=(e,t,r)=>{t=((e,t,r)=>{let o,n,l=I(e).rows;return v.from(null==(n=null==(o=l[t])?void 0:o.cells[r])?void 0:n.element).filter(Ss).orThunk(()=>{return e=l,fe(e,e=>fe(e.cells,e=>{e=e.element;return At(Ss(e),e)}));var e})})(e,t,r);return Rs(e,t)},Ds=e=>ne(e,(e,t)=>b(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),Os=(a,s)=>(e,t,r,o,n)=>{var l=Ds(t),e=((e,t,r,o,l,n,a)=>{let{cols:s,rows:i}=I(e),m=i[t[0]],d=R(t,e=>{return r=i,n=l,e=r[o=e],R(e.cells,(e,t)=>Xa(r,o,t,n)?[]:[e]);var r,o,n}),c=w(m.cells,(e,t)=>ca(rs(i,t,l))),u=[...i];y(t,e=>{u[e]=a.transformRow(i[e],r)});var f,g,h,e=[...s,...u],t=(t=m,h=c,ie(h,p)&&ca(t.cells)?C:(e,t,r)=>!("th"===O(e.element)&&h[r])),o=(f=o,g=c,(e,t,r)=>v.some(Za(f,e.element,"col",g[r])));return ts(e,d,l,n,a.transformCell,o,t)})(e,w(l,e=>e.row),a,s,r,o.replaceOrInit,n);return d(e,t[0].row,t[0].column)},ks=Os("thead",!0),Es=Os("tbody",!1),Ns=Os("tfoot",!1),_s=(e,t,r)=>{e=e,o=r.section;var o,r=ar(e,()=>o),e=eo(r);return Ea(e,t,!0)},Bs=(e,t,r,o)=>{var n;t=t,o=o.sizing,t=eo(t),n=o.getWidths(t,o),ss(t,n,o)},zs=(e,t,r,o)=>{var n=o.sizing,o=o.resize,t=eo(t),l=n.getWidths(t,n),a=n.pixelWidth(),{newSizes:o,delta:l}=o.calcRedestributedWidths(l,a,r.pixelDelta,n.isRelative);ss(t,o,n),n.adjustTableWidth(l)},As=(e,t)=>b(t,e=>0===e.column&&e.isLocked),Ls=(t,e)=>b(e,e=>e.column+e.colspan>=t.grid.columns&&e.isLocked),Ms=(e,t)=>{let r=io(e),o=ds(t);return ne(o,(e,t)=>e+r[t.column].map(Pr).getOr(0),0)},Ws=r=>(t,e)=>Aa(t,e).filter(e=>!(r?As:Ls)(t,e)).map(e=>({details:e,pixelDelta:Ms(t,e)})),js=r=>(t,e)=>za(t,e).filter(e=>!(r?As:Ls)(t,e.cells)),Ps=ps("th"),Is=ps("td"),Fs=e((e,t,r,o)=>{let n=t[0].row,l=Ds(t),a=oe(l,(e,t)=>({grid:Ja(e.grid,n,t.row+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return d(a,n,t[0].column)},Aa,f,f,hs),Hs=e((e,t,r,o)=>{let n=Ds(t),l=n[n.length-1],a=l.row+l.rowspan,s=oe(n,(e,t)=>Ja(e,a,t.row,r,o.getOrInit),e);return d(s,a,t[0].column)},Aa,f,f,hs),Vs=e((e,t,r,o)=>{let n=t.details,l=ds(n),a=l[0].column,s=oe(l,(e,t)=>({grid:Qa(e.grid,a,t.column+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return d(s,n[0].row,a)},Ws(!0),zs,f,hs),qs=e((e,t,r,o)=>{let n=t.details,l=n[n.length-1],a=l.column+l.colspan,s=ds(n),i=oe(s,(e,t)=>Qa(e,a,t.column,r,o.getOrInit),e);return d(i,n[0].row,a)},Ws(!1),zs,f,hs),Us=e((e,t,r,o)=>{var n,t=ds(t.details),e=(e=e,n=w(t,e=>e.column),R(e,e=>{var t=e.cells,t=oe(n,(e,t)=>0<=t&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,t);return 0<t.length?[ut(e.element,t,e.section,e.isNew)]:[]})),l=0<e.length?e[0].cells.length-1:0;return d(e,t[0].row,Math.min(t[0].column,l))},(t,e)=>La(t,e).map(e=>({details:e,pixelDelta:-Ms(t,e)})),zs,Ts,hs),$s=e((e,t,r,o)=>{var n=Ds(t),e=((e,t,r)=>{var{rows:e,cols:o}=I(e);return[...o,...e.slice(0,t),...e.slice(r+1)]})(e,n[0].row,n[n.length-1].row),n=Math.max(I(e).rows.length-1,0);return d(e,Math.min(t[0].row,n),t[0].column)},Aa,f,Ts,hs),Gs=e((e,t,r,o)=>{var n=ds(t),n=w(n,e=>e.column),e=os(e,n,!0,r,o.replaceOrInit);return d(e,t[0].row,t[0].column)},La,f,f,Ps),Ks=e((e,t,r,o)=>{var n=ds(t),n=w(n,e=>e.column),e=os(e,n,!1,r,o.replaceOrInit);return d(e,t[0].row,t[0].column)},La,f,f,Is),Ys=e(ks,Aa,f,f,Ps),Js=e(Es,Aa,f,f,Is),Qs=e(Ns,Aa,f,f,Is),Xs=e((e,t,r,o)=>{e=ns(e,t,r,o.replaceOrInit);return d(e,t[0].row,t[0].column)},La,f,f,Ps),Zs=e((e,t,r,o)=>{e=ns(e,t,r,o.replaceOrInit);return d(e,t[0].row,t[0].column)},La,f,f,Is),ei=e((e,t,r,o)=>{var n=t.cells,e=(Cs(n),((e,t,n)=>{var l=I(e).rows;if(0!==l.length)for(let o=t.startRow;o<=t.finishRow;o++)for(let r=t.startCol;r<=t.finishCol;r++){let e=l[o],t=Ur(e,r).isLocked;Vr(e,r,L(n(),!1,t))}return e})(e,t.bounds,o.merge(n)));return Rs(e,v.from(n[0]))},(t,e)=>e.mergable.filter(e=>Ma(t,e.cells)),Bs,f,vs),ti=e((e,t,r,o)=>{e=oe(t,(e,t)=>Wa(e,t,r,o.unmerge(t)),e);return Rs(e,v.from(t[0]))},(t,e)=>e.unmergable.filter(e=>Ma(t,e)),Bs,f,vs),ri=e((e,t,r,o)=>{var n=((e,t)=>{e=F(e);return Ea(e,t,!0)})(t.clipboard,t.generators);return((e,t,r,a,b)=>{let o=Jr(t),w=(l=e,e=t,i=o,m=$r(e[0]),e=I(e).cols.length+l.row,d=S(m-l.column,e=>e+l.column),{row:e,column:le(d,t=>ie(i,e=>e!==t)).getOr(m-1)}),y=I(r).rows,s=Ga(w,y,o),n=(e=w,d=y,e.row>=(m=t).length||e.column>$r(m[0])?Ia.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column):(e=(m=m.slice(e.row))[0].cells.slice(e.column),r=$r(d[0]),d=d.length,Ia.value({rowDelta:m.length-d,colDelta:e.length-r})));var l,i,m,d;return n.map(o=>{var m,d,c,u,f,o={...o,colDelta:o.colDelta-s.length},o=$a(t,o,a),n=Jr(o),n=Ga(w,y,n);{var l=w,g=o,h=y,p=a,v=b;o=n;let s=l.row,i=l.column,e=s+h.length,t=i+$r(h[0])+o.length,r=me(o,C);for(let a=s;a<e;a++){let l=0;for(let n=i;n<t;n++)if(r[n])l++;else{m=g,d=a,c=n,f=void 0,u=x(u=v,Ur(m[d],c).element),f=m[d],1<m.length&&1<$r(f)&&(0<c&&u(P(f,c-1))||c<f.cells.length-1&&u(P(f,c+1))||0<d&&u(P(m[d-1],c))||d<m.length-1&&u(P(m[d+1],c)))&&Wa(g,P(g[a],n),v,p.cell);let e=n-i-l,t=Ur(h[a-s],e),r=t.element,o=p.replace(r);Vr(g[a],n,L(o,!0,t.isLocked))}}return g}})})({row:t.row,column:t.column},e,n,t.generators,r).fold(()=>Rs(e,v.some(t.element)),e=>d(e,t.row,t.column))},(t,r)=>tr(r.element).bind(e=>_a(t,e).map(e=>({...e,generators:r.generators,clipboard:r.clipboard}))),Bs,f,hs),oi=e((e,t,r,o)=>{var n=I(e).rows,l=t.cells[0].column,n=n[t.cells[0].row],n=_s(t.clipboard,t.generators,n),l=Ka(l,e,n,t.generators,r);return d(l,t.cells[0].row,t.cells[0].column)},js(!0),f,f,hs),ni=e((e,t,r,o)=>{var n=I(e).rows,l=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,n=n[t.cells[0].row],n=_s(t.clipboard,t.generators,n),e=Ka(l,e,n,t.generators,r);return d(e,t.cells[0].row,l)},js(!1),f,f,hs),li=e((e,t,r,o)=>{var n=I(e).rows,l=t.cells[0].row,n=n[l],n=_s(t.clipboard,t.generators,n),l=Ya(l,e,n,t.generators,r);return d(l,t.cells[0].row,t.cells[0].column)},za,f,f,hs),ai=e((e,t,r,o)=>{var n=I(e).rows,l=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,n=n[t.cells[0].row],n=_s(t.clipboard,t.generators,n),e=Ya(l,e,n,t.generators,r);return d(e,l,t.cells[0].column)},za,f,f,hs),si=(e,t)=>{let l=F(e);return Aa(l,t).bind(e=>{let t=e[e.length-1],r=e[0].column,o=t.column+t.colspan,n=se(w(l.all,e=>T(e.cells,e=>e.column>=r&&e.column<o)));return ga(n)}).getOr("")},ii=(e,t)=>{e=F(e);return Aa(e,t).bind(ga).getOr("")},mi=(e,t)=>{let n=F(e);return Aa(n,t).bind(t=>{var r=t[t.length-1],t=t[0].row,r=r.row+r.rowspan,e=n.all.slice(t,r),t=w(e,e=>fa(e).type),r=g(t,"header"),o=g(t,"footer");if(r||o){let e=g(t,"body");return!r||e||o?r||e||!o?v.none():v.some("footer"):v.some("header")}return v.some("body")}).getOr("")},di=(e,t)=>e.dispatch("NewRow",{node:t}),ci=(e,t)=>e.dispatch("NewCell",{node:t}),ui=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},fi={structure:!1,style:!0},H={structure:!0,style:!1},gi={structure:!0,style:!0},hi=(e,t)=>(qn(e)?gn:Un(e)?fn:un)(t),pi=(m,d,c)=>{let t=e=>"table"===O(nl(e)),u=jn(m),e=Hn(m)?f:ta,r=(l,a,s,i)=>(t,e,o=!1)=>{al(t);var r=_.fromDom(m.getDoc()),r=zn(s,r,u),n={sizing:hi(m,t),resize:(Hn(m)?sa:ia)(),section:(e=>{switch(Pn(m)){case"section":return ya();case"sectionCells":return xa();case"cells":return Ca();default:var t=e;switch(t=F(t),fe(t.all,e=>{e=fa(e);return"header"===e.type?v.from(e.subType):v.none()}).getOr("section")){case"section":return va();case"sectionCells":return ba();case"cells":return wa()}return}})(t)};return a(t)?l(t,e,r,n).bind(e=>{d.refresh(t.dom),y(e.newRows,e=>{di(m,e.dom)}),y(e.newCells,e=>{ci(m,e.dom)});r=t;var r,e=e.cursor.fold(()=>{var e=rr(r);return ce(e).filter(pt).map(e=>{c.clearSelectedCells(r.dom);var t=m.dom.createRng();return t.selectNode(e.dom),m.selection.setRng(t),E(e,"data-mce-selected","1"),t})},e=>{var e=Zl(ea,e),t=m.dom.createRng();return t.setStart(e.element.dom,e.offset),t.setEnd(e.element.dom,e.offset),m.selection.setRng(t),c.clearSelectedCells(r.dom),v.some(t)});return pt(t)&&(al(t),o||ui(m,t.dom,i)),e.map(e=>({rng:e,effect:i}))}):v.none()},o=r($s,e=>!t(m)||1<ma(e).rows,f,H),n=r(Us,e=>!t(m)||1<ma(e).columns,f,H);return{deleteRow:o,deleteColumn:n,insertRowsBefore:r(Fs,C,f,H),insertRowsAfter:r(Hs,C,f,H),insertColumnsBefore:r(Vs,C,e,H),insertColumnsAfter:r(qs,C,e,H),mergeCells:r(ei,C,f,H),unmergeCells:r(ti,C,f,H),pasteColsBefore:r(oi,C,f,H),pasteColsAfter:r(ni,C,f,H),pasteRowsBefore:r(li,C,f,H),pasteRowsAfter:r(ai,C,f,H),pasteCells:r(ri,C,f,gi),makeCellsHeader:r(Xs,C,f,H),unmakeCellsHeader:r(Zs,C,f,H),makeColumnsHeader:r(Gs,C,f,H),unmakeColumnsHeader:r(Ks,C,f,H),makeRowsHeader:r(Ys,C,f,H),makeRowsBody:r(Js,C,f,H),makeRowsFooter:r(Qs,C,f,H),getTableRowType:mi,getTableCellType:ii,getTableColType:si}},vi=(e,t,r)=>{var o=Gt(e,t,1);1===r||o<=1?N(e,t):E(e,t,Math.min(r,o))},bi=(r,o)=>e=>{var t=e.column+e.colspan-1;return r<=t&&e.column<o},wi=ls([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),yi=(e,t,r)=>{var e=r.substring(0,r.length-e.length),o=parseFloat(e);return e===o.toString()?t(o):wi.invalid(r)},xi={...wi,from:e=>Wt(e,"%")?yi("%",wi.percent,e):Wt(e,"px")?yi("px",wi.pixels,e):wi.invalid(e)},Ci=(e,t,r)=>{let o=xi.from(r),n=ie(e,e=>"0px"===e)?((e,t)=>{e=e.fold(()=>h(""),e=>h(e/t+"px"),()=>h(100/t+"%"));return S(t,e)})(o,e.length):(l=e,a=t,o.fold(()=>l,e=>{{var r=l,o=e;let t=o/a;return w(r,e=>xi.from(e).fold(()=>e,e=>e*t+"px",e=>e/100*o+"px"))}},e=>{return t=l,r=a,w(t,e=>xi.from(e).fold(()=>e,e=>e/r*100+"%",e=>e+"%"));var t,r}));var l,a;return Ri(n)},Si=(e,t)=>0===e.length?t:oe(e,(e,t)=>xi.from(t).fold(h(0),p,p)+e,0),Ti=(e,t)=>xi.from(e).fold(h(e),e=>e+t+"px",e=>e+t+"%"),Ri=e=>{var t;return 0===e.length?e:(t=(e=oe(e,(e,t)=>{var r=xi.from(t).fold(()=>({value:t,remainder:0}),e=>{return e=e,{value:(t=Math.floor(e))+"px",remainder:e-t};var t},e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0})).output).slice(0,t.length-1).concat([Ti(t[t.length-1],Math.round(e.remainder))])},Di=xi.from,Oi=(m,e,t)=>{let d=F(m),l=d.all,c=no(d),u=lo(d);e.each(e=>{var r,o,n,l,t=Di(e).fold(h("px"),h("px"),h("%")),a=jr(m),s=(s=d,i=m,nn(s,i,tn,ln)),i=Ci(s,a,e);ao(d)?(n=i,s=u,l=t,y(s,(e,t)=>{t=Si([n[t]],Qt());W(e.element,"width",t+l)})):(r=i,a=c,o=t,y(a,e=>{var t=r.slice(e.column,e.colspan+e.column),t=Si(t,Qt());W(e.element,"width",t+o)})),W(m,"width",e)}),t.each(e=>{var r,t,o=ho(m),n=(n=d,t=m,sn(n,t,rn,ln));r=Ci(n,o,e),t=l,n=c,y(n,e=>{$t(e.element,"height")}),y(t,(e,t)=>{W(e.element,"height",r[t])}),W(m,"height",e)})},ki=e=>Go(e).exists(e=>Wo.test(e)),Ei=e=>Go(e).exists(e=>jo.test(e)),Ni=e=>Go(e).isNone(),_i=e=>{N(e,"width"),N(e,"height")},Bi=e=>{var t=Xo(e);Oi(e,v.some(t),v.none()),_i(e)},zi=e=>{t=e;var t=jr(t)+"px";Oi(e,v.some(t),v.none()),_i(e)},Ai=e=>{$t(e,"width");var t=or(e),t=0<t.length?t:rr(e);y(t,e=>{$t(e,"width"),_i(e)}),_i(e)},Li=(e,t,s,i)=>S(e,e=>{var r=t,o=s,n=i,l=e,a=_.fromTag("tr");for(let t=0;t<r;t++){let e=_.fromTag(l<o||t<n?"th":"td");t<n&&E(e,"scope","row"),l<o&&E(e,"scope","col"),u(e,_.fromTag("br")),u(a,e)}return a}),Mi=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Wi=(l,r,o,n,a)=>{t=(e=l).options,m=t.get("table_default_styles");let s=t.isSet("table_default_styles")?m:(t=e,e=m,$n(t)||!Kn(t)?e:Un(t)?{...e,width:Wn(t)}:{...e,width:Mn}),i={styles:s,attributes:Jn(l),colGroups:Qn(l)};var e,t,m;return l.undoManager.ignore(()=>{var e,t=((e,r,o,n,l,t)=>{var a=_.fromTag("table"),s="cells"!==l,i=(Ht(a,t.styles),Ae(a,t.attributes),t.colGroups&&u(a,(e=>{let t=_.fromTag("colgroup");return S(e,()=>u(t,_.fromTag("col"))),t})(r)),Math.min(e,o));if(s&&0<o){let e=_.fromTag("thead"),t=(u(a,e),Li(o,r,"sectionCells"===l?i:0,n));rt(e,t)}t=_.fromTag("tbody"),u(a,t),l=Li(s?e-i:e,r,s?0:o,n);return rt(t,l),a})(o,r,a,n,Pn(l),i),t=(E(t,"data-mce-id","__mce"),t=t,e=_.fromTag("div"),t=_.fromDom(t.dom.cloneNode(!0)),u(e,t),e.dom.innerHTML);l.insertContent(t),l.addVisual()}),_t(nl(l),'table[data-mce-id="__mce"]').map(e=>{return Un(l)?zi(e):$n(l)?Ai(e):(qn(l)||(n=s.width,c(n)&&-1!==n.indexOf("%")))&&Bi(e),al(e),N(e,"data-mce-id"),o=l,n=e,y(Ct(n,"tr"),e=>{di(o,e.dom),y(Ct(e,"th,td"),e=>{ci(o,e.dom)})}),t=l,r=e,_t(r,"td,th").each(x(Mi,t)),e.dom;var t,r,o,n}).getOrNull()};var ji=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let Pi="x-tinymce/dom-table-",Ii=Pi+"rows",Fi=Pi+"columns",Hi=e=>{e=ji.FakeClipboardItem(e);ji.write([e])},Vi=t=>{var e=null!=(e=ji.read())?e:[];return fe(e,e=>v.from(e.getType(t)))},qi=e=>{Vi(e).isSome()&&ji.clear()},Ui=e=>{e.fold(Gi,e=>Hi({[Ii]:e}))},$i=()=>Vi(Ii),Gi=()=>qi(Ii),Ki=e=>{e.fold(Ji,e=>Hi({[Fi]:e}))},Yi=()=>Vi(Fi),Ji=()=>qi(Fi),Qi=e=>Ul(sl(e),ll(e)).filter(fl),Xi=(m,t)=>{let o=ll(m),d=e=>j(e,o),s=r=>{return e=m,$l(sl(e),ll(e)).filter(fl).bind(t=>d(t).map(e=>r(e,t)));var e},i=e=>{m.focus()},n=(r,o=!1)=>s((e,t)=>{t=Vl(Gl(m),e,t);r(e,t,o).each(i)}),e=()=>s((e,t)=>{{var o=e,n=(e=Vl(Gl(m),e,t),zn(f,_.fromDom(m.getDoc()),v.none()));let r=F(o);return Aa(r,e).bind(e=>{var t=Ea(r,n,!1),t=I(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=R(t,e=>{var t=T(e.cells,e=>!e.isLocked);return 0<t.length?[{...e,cells:t}]:[]}),t=Na(e);return At(0<t.length,t)}).map(e=>w(e,e=>{let r=at(e.element);return y(e.cells,e=>{var t=st(e.element);Ta(t,"colspan",e.colspan,1),Ta(t,"rowspan",e.rowspan,1),u(r,t)}),r}))}}),r=()=>s((e,t)=>{{var r=e;e=Vl(Gl(m),e,t);let i=F(r);return La(i,e).map(e=>{var r,o,t,n,l,a=e[e.length-1],e=e[0].column,a=a.column+a.colspan,s=(s=i,t=e,n=a,ao(s)?(s=T(lo(s),bi(t,n)),s=w(s,e=>{e=st(e.element);return vi(e,"span",n-t),e}),l=_.fromTag("colgroup"),rt(l,s),[l]):[]),e=(l=i,r=e,o=a,w(l.all,e=>{var e=T(e.cells,bi(r,o)),e=w(e,e=>{e=st(e.element);return vi(e,"colspan",o-r),e}),t=_.fromTag("tr");return rt(t,e),t}));return[...s,...e]})}}),l=(a,e)=>e().each(e=>{let l=w(e,e=>st(e));s((e,t)=>{var r,o=An(_.fromDom(m.getDoc())),n=(n=Gl(m),r=l,o=o,{selection:Ll(n),clipboard:r,generators:o});a(e,n).each(i)})}),a=o=>(e,t)=>{return r=t,(ye(r,"type")?v.from(r.type):v.none()).each(e=>{n(o(e),t.no_events)});var r};D({mceTableSplitCells:()=>n(t.unmergeCells),mceTableMergeCells:()=>n(t.mergeCells),mceTableInsertRowBefore:()=>n(t.insertRowsBefore),mceTableInsertRowAfter:()=>n(t.insertRowsAfter),mceTableInsertColBefore:()=>n(t.insertColumnsBefore),mceTableInsertColAfter:()=>n(t.insertColumnsAfter),mceTableDeleteCol:()=>n(t.deleteColumn),mceTableDeleteRow:()=>n(t.deleteRow),mceTableCutCol:()=>r().each(e=>{Ki(e),n(t.deleteColumn)}),mceTableCutRow:()=>e().each(e=>{Ui(e),n(t.deleteRow)}),mceTableCopyCol:()=>r().each(e=>Ki(e)),mceTableCopyRow:()=>e().each(e=>Ui(e)),mceTablePasteColBefore:()=>l(t.pasteColsBefore,Yi),mceTablePasteColAfter:()=>l(t.pasteColsAfter,Yi),mceTablePasteRowBefore:()=>l(t.pasteRowsBefore,$i),mceTablePasteRowAfter:()=>l(t.pasteRowsAfter,$i),mceTableDelete:()=>Qi(m).each(e=>{j(e,o).filter(J(o)).each(e=>{var t=_.fromText("");if(Xe(e,t),A(e),m.dom.isEmpty(m.getBody()))m.setContent(""),m.selection.setCursorLocation();else{let e=m.dom.createRng();e.setStart(t.dom,0),e.setEnd(t.dom,0),m.selection.setRng(e),m.nodeChanged()}})}),mceTableCellToggleClass:(e,n)=>{s(e=>{let t=Gl(m),r=ie(t,e=>m.formatter.match("tablecellclass",{value:n},e.dom)),o=r?m.formatter.remove:m.formatter.apply;y(t,e=>o("tablecellclass",{value:n},e.dom)),ui(m,e.dom,fi)})},mceTableToggleClass:(e,t)=>{s(e=>{m.formatter.toggle("tableclass",{value:t},e.dom),ui(m,e.dom,fi)})},mceTableToggleCaption:()=>{Qi(m).each(t=>{j(t,o).each(o=>{Nt(o,"caption").fold(()=>{var e,t,r=_.fromTag("caption");u(r,_.fromText("Caption")),e=o,t=r,Je(e,0).fold(()=>{u(e,t)},e=>{Qe(e,t)}),m.selection.setCursorLocation(r.dom,0)},e=>{k("caption")(t)&&Ie("td",o).each(e=>m.selection.setCursorLocation(e.dom,0)),A(e)}),ui(m,o.dom,H)})})},mceTableSizingMode:(e,t)=>{return r=t,Qi(m).each(e=>{$n(m)||Un(m)||qn(m)||j(e,o).each(e=>{"relative"!==r||ki(e)?"fixed"!==r||Ei(e)?"responsive"!==r||Ni(e)||Ai(e):zi(e):Bi(e),al(e),ui(m,e.dom,H)})});var r},mceTableCellType:a(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:a(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:a(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(e,t)=>m.addCommand(t,e)),m.addCommand("mceInsertTable",(e,r)=>{{var[r,o,n,l={}]=[m,r.rows,r.columns,r.options];let e=e=>K(e)&&0<e;if(e(o)&&e(n)){let e=l.headerRows||0,t=l.headerColumns||0;void Wi(r,n,o,t,e)}else console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")}}),m.addCommand("mceTableApplyCellStyle",(e,t)=>{let n=e=>"tablecell"+e.toLowerCase().replace("-","");if(q(t)){let o=T(Gl(m),fl);var r,l,a,s,i;0===o.length||(t=t,r=(e,t)=>m.formatter.has(n(t))&&c(e),s=i={},l=(e,t)=>{s[t]=e},a=f,D(t,(e,t)=>{(r(e,t)?l:a)(e,t)}),(e=>{for(var t in e)if(he.call(e,t))return!1;return!0})(t=i))||(D(t,(t,e)=>{let r=n(e);y(o,e=>{""===t?m.formatter.remove(r,{value:null},e.dom,!0):m.formatter.apply(r,{value:t},e.dom)})}),d(o[0]).each(e=>ui(m,e.dom,fi)))}})},Zi=ls([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),V={before:Zi.before,on:Zi.on,after:Zi.after,cata:(e,t,r,o)=>e.fold(t,r,o),getStart:e=>e.fold(p,p,p)},em=(e,t)=>({selection:e,kill:t}),tm=(e,t)=>{e=e.document.createRange();return e.selectNode(t.dom),e},rm=(e,t)=>{e=e.document.createRange();return om(e,t),e},om=(e,t)=>e.selectNodeContents(t.dom),nm=(e,t,r)=>{var o,e=e.document.createRange(),n=e;return t.fold(e=>{n.setStartBefore(e.dom)},(e,t)=>{n.setStart(e.dom,t)},e=>{n.setStartAfter(e.dom)}),o=e,r.fold(e=>{o.setEndBefore(e.dom)},(e,t)=>{o.setEnd(e.dom,t)},e=>{o.setEndAfter(e.dom)}),e},lm=(e,t,r,o,n)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(o.dom,n),e},am=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),sm=ls([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),im=(e,t,r)=>t(_.fromDom(r.startContainer),r.startOffset,_.fromDom(r.endContainer),r.endOffset),mm=(t,r)=>{n=t;var n,t=r.match({domRange:e=>({ltr:h(e),rtl:v.none}),relative:(e,t)=>({ltr:mr(()=>nm(n,e,t)),rtl:mr(()=>v.some(nm(n,t,e)))}),exact:(e,t,r,o)=>({ltr:mr(()=>lm(n,e,t,r,o)),rtl:mr(()=>v.some(lm(n,r,o,e,t)))})});{let e=(r=t).ltr();return e.collapsed?r.rtl().filter(e=>!1===e.collapsed).map(e=>sm.rtl(_.fromDom(e.endContainer),e.endOffset,_.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>im(0,sm.ltr,e)):im(0,sm.ltr,e)}},dm=(l,e)=>mm(l,e).match({ltr:(e,t,r,o)=>{var n=l.document.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,o),n},rtl:(e,t,r,o)=>{var n=l.document.createRange();return n.setStart(r.dom,o),n.setEnd(e.dom,t),n}}),cm=(sm.ltr,sm,(e,t,r,o)=>({start:e,soffset:t,finish:r,foffset:o})),um=(e,t,r,o)=>({start:V.on(e,t),finish:V.on(r,o)}),fm=(e,t)=>{e=dm(e,t);return cm(_.fromDom(e.startContainer),e.startOffset,_.fromDom(e.endContainer),e.endOffset)},gm=um,hm=(r,e,o,t,n)=>z(o,t)?v.none():El(o,t,e).bind(e=>{var t=e.boxes.getOr([]);return 1<t.length?(n(r,t,e.start,e.finish),v.some(em(v.some(gm(o,0,o,yn(o))),!0))):v.none()}),pm=(e,t)=>({item:e,mode:t}),vm=(e,t,r,o=bm)=>e.property().parent(t).map(e=>pm(e,o)),bm=(e,t,r,o=wm)=>r.sibling(e,t).map(e=>pm(e,o)),wm=(e,t,r,o=wm)=>{e=e.property().children(t);return r.first(e).map(e=>pm(e,o))},ym=[{current:vm,next:bm,fallback:v.none()},{current:bm,next:wm,fallback:v.some(vm)},{current:wm,next:wm,fallback:v.some(bm)}],xm=(t,r,o,n,e=ym)=>le(e,e=>e.current===o).bind(e=>e.current(t,r,n,e.next).orThunk(()=>e.fallback.bind(e=>xm(t,r,e,n)))),Cm=(t,e,r,o,n,l)=>xm(t,e,o,n).bind(e=>l(e.item)?v.none():r(e.item)?v.some(e.item):Cm(t,e.item,r,e.mode,n,l)),Sm=t=>e=>0===t.property().children(e).length,Tm=(e,t,r,o)=>Cm(e,t,r,bm,{sibling:(e,t)=>e.query().prevSibling(t),first:e=>0<e.length?v.some(e[e.length-1]):v.none()},o),Rm=(e,t,r,o)=>Cm(e,t,r,bm,{sibling:(e,t)=>e.query().nextSibling(t),first:e=>0<e.length?v.some(e[0]):v.none()},o),Dm=Sl(),Om=(e,t)=>{return r=Dm,e=e,t=t,Tm(r,e,Sm(r),t);var r},km=(e,t)=>{return r=Dm,e=e,t=t,Rm(r,e,Sm(r),t);var r},Em=ls([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Nm=e=>M(e,"tr"),_m={...Em,verify:(l,e,t,r,a,s,o)=>M(r,"td,th",o).bind(n=>M(e,"td,th",o).map(o=>z(n,o)?z(r,n)&&yn(n)===a?s(o):Em.none("in same cell"):Ol(Nm,[n,o]).fold(()=>{return t=n,r=(e=l).getRect(o),(e=e.getRect(t)).right>r.left&&e.left<r.right?Em.success():s(o);var e,t,r},e=>s(o)))).getOr(Em.none("default")),cata:(e,t,r,o,n)=>e.fold(t,r,o,n)},Bm=k("br"),zm=(e,t,r)=>t(e,r).bind(e=>Ne(e)&&0===vn(e).trim().length?zm(e,t,r):v.some(e)),Am=(t,e,r,o)=>{return n=e,l=r,Je(n,l).filter(Bm).orThunk(()=>Je(n,l-1).filter(Bm)).bind(e=>o.traverse(e).fold(()=>zm(e,o.gather,t).map(o.relative),e=>{return n=e,Ue(n).bind(t=>{let r=m(t);return e=r,o=n,ae(e,x(z,o)).map(e=>({parent:t,children:r,element:n,index:e}));var e,o}).map(e=>V.on(e.parent,e.index));var n}));var n,l},Lm=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Mm=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Wm=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),jm=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Pm=(e,t)=>v.some(e.getRect(t)),Im=(e,t,r)=>Ee(t)?Pm(e,t).map(jm):Ne(t)?(e=e,t=t,(0<=(r=r)&&r<yn(t)?e.getRangedRect(t,r,t,r+1):0<r?e.getRangedRect(t,r-1,t,r):v.none()).map(jm)):v.none(),Fm=(e,t)=>Ee(t)?Pm(e,t).map(jm):Ne(t)?e.getRangedRect(t,0,t,yn(t)).map(jm):v.none(),Hm=ls([{none:[]},{retry:["caret"]}]),Vm=(t,e,r)=>kt(e,ys).fold(X,e=>Fm(t,e).exists(e=>{return e=e,(t=r).left<e.left||Math.abs(e.right-t.left)<1||t.left>e.right;var t})),qm={point:e=>e.bottom,adjuster:(e,t,r,o,n)=>{var l=Lm(n,5);return Math.abs(r.bottom-o.bottom)<1||r.top>n.bottom?Hm.retry(l):r.top===n.bottom?Hm.retry(Lm(n,1)):Vm(e,t,n)?Hm.retry(Wm(l,5,0)):Hm.none()},move:Lm,gather:km},Um=(r,o,n,l,a)=>{return 0===a?v.some(l):(s=r,i=l.left,m=o.point(l),s.elementFromPoint(i,m).filter(e=>"table"===O(e)).isSome()?(s=r,i=o,m=n,e=l,t=a-1,Um(s,i,m,i.move(e,5),t)):r.situsFromPoint(l.left,o.point(l)).bind(e=>e.start.fold(v.none,t=>Fm(r,t).bind(e=>o.adjuster(r,t,e,n,l).fold(v.none,e=>Um(r,o,n,e,a-1))).orThunk(()=>v.some(l)),v.none)));var e,t,s,i,m},$m=(t,r,e)=>{let o=t.move(e,5),n=Um(r,t,e,o,100).getOr(o);return e=n,a=r,((l=t).point(e)>a.getInnerHeight()?v.some(l.point(e)-a.getInnerHeight()):l.point(e)<0?v.some(-l.point(e)):v.none()).fold(()=>r.situsFromPoint(n.left,t.point(n)),e=>(r.scrollBy(0,e),r.situsFromPoint(n.left,t.point(n)-e)));var l,a},Gm={tryUp:x($m,{point:e=>e.top,adjuster:(e,t,r,o,n)=>{var l=Mm(n,5);return Math.abs(r.top-o.top)<1||r.bottom<n.top?Hm.retry(l):r.bottom===n.top?Hm.retry(Mm(n,1)):Vm(e,t,n)?Hm.retry(Wm(l,5,0)):Hm.none()},move:Mm,gather:Om}),tryDown:x($m,qm),getJumpSize:h(5)},Km=(i,m,d)=>i.getSelection().bind(t=>{return e=m,r=t.finish,o=t.foffset,n=d,(Bm(r)?(l=e,a=r,(s=n).traverse(a).orThunk(()=>zm(a,s.gather,l)).map(s.relative)):Am(e,r,o,n)).map(e=>({start:e,finish:e})).fold(()=>v.some(Yl(t.finish,t.foffset)),e=>{var e=i.fromSitus(e),e=_m.verify(i,t.finish,t.foffset,e.finish,e.foffset,d.failure,m);return _m.cata(e,e=>v.none(),()=>v.none(),e=>v.some(Yl(e,0)),e=>v.some(Yl(e,yn(e))))});var e,r,o,n,l,a,s}),Ym=(r,o,n,l,a,s)=>0===s?v.none():Xm(r,o,n,l,a).bind(e=>{var t=r.fromSitus(e),t=_m.verify(r,n,l,t.finish,t.foffset,a.failure,o);return _m.cata(t,()=>v.none(),()=>v.some(e),e=>z(n,e)&&0===l?Jm(r,n,l,Mm,a):Ym(r,o,e,0,a,s-1),e=>z(n,e)&&l===yn(e)?Jm(r,n,l,Lm,a):Ym(r,o,e,yn(e),a,s-1))}),Jm=(t,e,r,o,n)=>Im(t,e,r).bind(e=>Qm(t,n,o(e,Gm.getJumpSize()))),Qm=(e,t,r)=>{var o=Ar().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,r):v.none()},Xm=(t,e,r,o,n)=>Im(t,r,o).bind(e=>Qm(t,n,e)),Zm=(s,i,m,e,d)=>M(e,"td,th",i).bind(a=>M(a,"table",i).bind(e=>{return n=d,l=e,Ot(n,e=>Ue(e).exists(e=>z(e,l)),void 0).isSome()?(t=s,r=i,o=m,Km(t,r,o).bind(e=>Ym(t,r,e.element,e.offset,o,20).map(t.fromSitus)).bind(t=>M(t.finish,"td,th",i).map(e=>({start:a,finish:e,range:t})))):v.none();var t,r,o,n,l})),ed=(e,t,r,o,n,l)=>l(o,t).orThunk(()=>Zm(e,t,r,o,n).map(e=>{e=e.range;return em(v.some(gm(e.start,e.soffset,e.finish,e.foffset)),!0)})),td=(e,o)=>M(e,"tr",o).bind(r=>M(r,"table",o).bind(e=>{var t=Ct(e,"tr");return z(r,t[0])?(t=e,e=o,Tm(Dm,t,e=>Tn(e).isSome(),e).map(e=>{var t=yn(e);return em(v.some(gm(e,t,e,t)),!0)})):v.none()})),rd=(e,o)=>M(e,"tr",o).bind(r=>M(r,"table",o).bind(e=>{var t=Ct(e,"tr");return z(r,t[t.length-1])?(t=e,e=o,Rm(Dm,t,e=>Sn(e).isSome(),e).map(e=>em(v.some(gm(e,0,e,0)),!0))):v.none()})),od=(e,t,r,o,n,l,a)=>Zm(e,r,o,n,l).bind(e=>hm(t,r,e.start,e.finish,a)),nd=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},ld=()=>{let t=(e=>{let t=nd(v.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(v.some(e))}}})(f);return{...t,on:e=>t.get().each(e)}},ad=(e,t)=>M(e,"td,th",t),sd=e=>$e(e).exists(rl),id={traverse:Ye,gather:km,relative:V.before,retry:Gm.tryDown,failure:_m.failedDown},md={traverse:Ke,gather:Om,relative:V.before,retry:Gm.tryUp,failure:_m.failedUp},dd=t=>e=>e===t,cd=dd(38),ud=dd(40),fd=e=>37<=e&&e<=40,gd={isBackward:dd(37),isForward:dd(39)},hd={isBackward:dd(39),isForward:dd(37)},pd=ls([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vd={domRange:pd.domRange,relative:pd.relative,exact:pd.exact,exactFromRange:e=>pd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>_.fromDom(e.startContainer),relative:(e,t)=>V.getStart(e),exact:(e,t,r,o)=>e});return _.fromDom(qe(e).dom.defaultView)},range:cm},bd=(e,t)=>{var r=O(e);return"input"===r?V.after(e):g(["br","img"],r)?0===t?V.before(e):V.after(e):V.on(e,t)},wd=e=>v.from(e.getSelection()),yd=(e,t)=>{wd(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},xd=(e,t,r,o,n)=>{t=lm(e,t,r,o,n);yd(e,t)},Cd=(i,e)=>mm(i,e).match({ltr:(e,t,r,o)=>{xd(i,e,t,r,o)},rtl:(n,l,a,s)=>{wd(i).each(e=>{if(e.setBaseAndExtent)e.setBaseAndExtent(n.dom,l,a.dom,s);else if(e.extend)try{r=a,o=s,(t=e).collapse(n.dom,l),t.extend(r.dom,o)}catch(e){xd(i,a,s,n,l)}else xd(i,a,s,n,l);var t,r,o})}}),Sd=(e,t,r,o,n)=>{t=((e,t,r,o)=>{e=bd(e,t),t=bd(r,o);return vd.relative(e,t)})(t,r,o,n);Cd(e,t)},Td=(e,t,r)=>{r=r,t=t.fold(V.before,bd,V.after),r=r.fold(V.before,bd,V.after);t=vd.relative(t,r);Cd(e,t)},Rd=e=>{var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),v.some(cm(_.fromDom(t.startContainer),t.startOffset,_.fromDom(e.endContainer),e.endOffset))):v.none()},Dd=e=>{var t,r,o,n,l,a,s,i,m,d,c;return null!==e.anchorNode&&null!==e.focusNode&&(t=_.fromDom(e.anchorNode),r=_.fromDom(e.focusNode),o=t,n=e.anchorOffset,d=o,c=n,s=l=r,i=a=e.focusOffset,(m=Ve(d).dom.createRange()).setStart(d.dom,c),m.setEnd(s.dom,i),d=m,c=z(o,l)&&n===a,d.collapsed)&&!c?v.some(cm(t,e.anchorOffset,r,e.focusOffset)):Rd(e)},Od=(e,t,r=!0)=>{r=(r?rm:tm)(e,t);yd(e,r)},kd=e=>(e=e,wd(e).filter(e=>0<e.rangeCount).bind(Dd).map(e=>vd.exact(e.start,e.soffset,e.finish,e.foffset))),Ed=(e,t,r)=>{return e=e.document,t=t,r=r,(e.caretPositionFromPoint?(o=e,n=t,l=r,v.from(null==(a=o.caretPositionFromPoint)?void 0:a.call(o,n,l)).bind(e=>{var t;return null===e.offsetNode?v.none():((t=o.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),v.some(t))})):e.caretRangeFromPoint?(a=e,n=t,l=r,v.from(null==(e=a.caretRangeFromPoint)?void 0:e.call(a,n,l))):v.none()).map(e=>cm(_.fromDom(e.startContainer),e.startOffset,_.fromDom(e.endContainer),e.endOffset));var o,n,l,a},Nd=l=>({elementFromPoint:(e,t)=>_.fromPoint(_.fromDom(l.document),e,t),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(e,t,r,o)=>{e=vd.exact(e,t,r,o);return t=l,r=e,t=dm(t,r),0<(r=0<(r=t.getClientRects()).length?r[0]:t.getBoundingClientRect()).width||0<r.height?v.some(r).map(am):v.none()},getSelection:()=>kd(l).map(e=>fm(l,e)),fromSitus:e=>{e=vd.relative(e.start,e.finish);return fm(l,e)},situsFromPoint:(e,t)=>Ed(l,e,t).map(e=>um(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{var e;e=l,wd(e).each(e=>e.removeAllRanges())},collapseSelection:(n=!1)=>{kd(l).each(e=>e.fold(e=>e.collapse(n),(e,t)=>{e=n?e:t;Td(l,e,e)},(e,t,r,o)=>{e=n?e:r,r=n?t:o;Sd(l,e,r,e,r)}))},setSelection:e=>{Sd(l,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:(e,t)=>{Td(l,e,t)},selectNode:e=>{Od(l,e,!1)},selectContents:e=>{Od(l,e)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>{return e=void 0!==(e=_.fromDom(l.document))?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop,bo(t,e).top;var e,t},scrollBy:(e,t)=>{var r=_.fromDom(l.document);(r=(void 0!==r?r.dom:document).defaultView)&&r.scrollBy(e,t)}}),_d=(e,t)=>({rows:e,cols:t}),Bd=e=>kt(e,ke).exists(rl),zd=(e,t)=>Bd(e)||Bd(t),Ad=e=>void 0!==e.dom.classList,Ld=(e,t)=>(t=(e=>{e=Le(e,"class");return void 0===e||""===e?[]:e.split(" ")})(e).concat([t]),E(e,"class",t.join(" ")),!0),Md=(e,t)=>{Ad(e)?e.dom.classList.add(t):Ld(e,t)},Wd=(e,t)=>Ad(e)&&e.dom.classList.contains(t),jd=()=>({tag:"none"}),Pd=e=>({tag:"multiple",elements:e}),Id=e=>({tag:"single",element:e}),Fd=e=>{var t,r,o,n=_.fromDom((e=>{if($(e.target)){var t=_.fromDom(e.target);if(Ee(t)&&$(t.dom.shadowRoot)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return ce(t)}}return v.from(e.target)})(e).getOr(e.target)),l=()=>e.stopPropagation(),a=()=>e.preventDefault(),s=(t=a,r=l,(...e)=>t(r.apply(null,e)));return o=e.clientX,{target:n,x:o,y:e.clientY,stop:l,prevent:a,kill:s,raw:e}},Hd=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},Vd=C,qd=(e,t,r)=>{return e=e,t=t,o=Vd,t=t,n=o,l=r=r,o=e=>{n(e)&&l(Fd(e))},(r=e).dom.addEventListener(t,o,!1),{unbind:x(Hd,r,t,o,!1)};var o,n,l},Ud=Fd,$d=e=>!Wd(_.fromDom(e.target),"ephox-snooker-resizer-bar"),Gd=(d,c)=>{e=Hl.selectedSelector;let o={get:()=>zl(_.fromDom(d.getBody()),e).fold(()=>$l(sl(d),ll(d)).fold(jd,Id),Pd)},u=((s,t)=>{let r=e=>{N(e,s.selected),N(e,s.firstSelected),N(e,s.lastSelected)},i=e=>{E(e,s.selected,"1")},m=e=>{o(e),t()},o=e=>{e=Ct(e,s.selectedSelector+`,${s.firstSelectedSelector},`+s.lastSelectedSelector);y(e,r)};return{clearBeforeUpdate:o,clear:m,selectRange:(e,t,r,o)=>{var n,l,a;m(e),y(t,i),E(r,s.firstSelected,"1"),E(o,s.lastSelected,"1"),n=t,l=r,a=o,j(l).each(e=>{var t,r=w(n,e=>e.dom),o=jn(d),o=zn(f,_.fromDom(d.getDoc()),o),e=((e,t,s)=>{let i=F(e);return Aa(i,t).map(e=>{let t=Ea(i,s,!1),r=I(t).rows,o=(l=e,a=r.slice(0,l[l.length-1].row+1),a=Na(a),R(a,e=>{e=e.cells.slice(0,l[l.length-1].column+1);return w(e,e=>e.element)})),n=((e,t)=>{e=e.slice(t[0].row+t[0].rowspan-1,e.length),e=Na(e);return R(e,e=>{e=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return w(e,e=>e.element)})})(r,e);var l,a;return{upOrLeftCells:o,downOrRightCells:n}})})(e,{selection:Gl(d)},o).map(e=>pe(e,e=>w(e,e=>e.dom))).getOrUndefined();o=l.dom,t=a.dom,d.dispatch("TableSelectionChange",{cells:r,start:o,finish:t,otherCells:e})})},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}})(Hl,()=>{d.dispatch("TableSelectionClear")});var e;return d.on("init",e=>{let r=d.getWin(),o=nl(d),t=ll(d),n=((e,t,r,o)=>{e=((r,l,o,a)=>{let t=ld(),n=t.clear,s=n=>{t.on(e=>{a.clearBeforeUpdate(l),ad(n.target,o).each(t=>{El(e,t,o).each(e=>{var o=e.boxes.getOr([]);if(1===o.length){let e=o[0],t="false"===ol(e),r=Bt(tl(n.target),e,z);t&&r&&a.selectRange(l,o,e,e)}else 1<o.length&&(a.selectRange(l,o,e.start,e.finish),r.selectContents(t))})})})};return{clearstate:n,mousedown:e=>{a.clear(l),ad(e.target,o).filter(sd).each(t.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),n()}}})(Nd(e),t,r,o);return{clearstate:e.clearstate,mousedown:e.mousedown,mouseover:e.mouseover,mouseup:e.mouseup}})(r,o,t,u),l=((e,u,f,g)=>{let d=Nd(e),c=()=>(g.clear(u),v.none());return{keydown:(e,t,r,o,n,a)=>{let l=e.raw,s=l.which,i=!0===l.shiftKey,m=Nl(u,g.selectedSelector).fold(()=>(fd(s)&&!i&&g.clearBeforeUpdate(u),fd(s)&&i&&!zd(t,o)?v.none:ud(s)&&i?x(od,d,u,f,id,o,t,g.selectRange):cd(s)&&i?x(od,d,u,f,md,o,t,g.selectRange):ud(s)?x(ed,d,f,id,o,t,rd):cd(s)?x(ed,d,f,md,o,t,td):v.none),l=>{var e=e=>()=>fe(e,e=>{return t=e.rows,e=e.cols,r=u,o=l,n=g,Bl(o,t,e,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>(n.clearBeforeUpdate(r),n.selectRange(r,e.boxes,e.start,e.finish),e.boxes));var t,r,o,n}).fold(()=>_l(u,g.firstSelectedSelector,g.lastSelectedSelector).map(e=>{var t=ud(s)||a.isForward(s)?V.after:V.before;return d.setRelativeSelection(V.on(e.first,0),t(e.table)),g.clear(u),em(v.none(),!0)}),e=>v.some(em(v.none(),!0)));return fd(s)&&i&&!zd(t,o)?v.none:ud(s)&&i?e([_d(1,0)]):cd(s)&&i?e([_d(-1,0)]):a.isBackward(s)&&i?e([_d(0,-1),_d(-1,0)]):a.isForward(s)&&i?e([_d(0,1),_d(1,0)]):fd(s)&&!i?c:v.none});return m()},keyup:(s,i,m,d,c)=>Nl(u,g.selectedSelector).fold(()=>{var r,o,e,t,n,l=s.raw,a=l.which;return!0!==l.shiftKey||!fd(a)||!zd(i,d)||(r=u,o=f,l=i,a=m,e=d,t=c,n=g.selectRange,z(l,e)&&a===t)?v.none():M(l,"td,th",o).bind(t=>M(e,"td,th",o).bind(e=>hm(r,o,t,e,n)))},v.none)}})(r,o,t,u),a=((e,o,t,n)=>{let l=Nd(e);return(e,r)=>{n.clearBeforeUpdate(o),El(e,r,t).each(e=>{var t=e.boxes.getOr([]);n.selectRange(o,t,e.start,e.finish),l.selectContents(r),l.collapseSelection()})}})(r,o,t,u),s=(d.on("TableSelectorChange",e=>a(e.start,e.finish)),(e,t)=>{!0===e.raw.shiftKey&&(t.kill&&e.kill(),t.selection.each(e=>{e=vd.relative(e.start,e.finish),e=dm(r,e);d.selection.setRng(e)}))}),i=e=>0===e.button,m=(()=>{let n=nd(_.fromDom(o)),l=nd(0);return{touchEnd:e=>{var t,r,o=_.fromDom(e.target);(k("td")(o)||k("th")(o))&&(t=n.get(),r=l.get(),z(t,o))&&e.timeStamp-r<300&&(e.preventDefault(),a(o,o)),n.set(o),l.set(e.timeStamp)}}})();d.on("dragstart",e=>{n.clearstate()}),d.on("mousedown",e=>{i(e)&&$d(e)&&n.mousedown(Ud(e))}),d.on("mouseover",e=>{(void 0===e.buttons||1&e.buttons)&&$d(e)&&n.mouseover(Ud(e))}),d.on("mouseup",e=>{i(e)&&$d(e)&&n.mouseup(Ud(e))}),d.on("touchend",m.touchEnd),d.on("keyup",e=>{let o=Ud(e);if(o.raw.shiftKey&&fd(o.raw.which)){let e=d.selection.getRng(),t=_.fromDom(e.startContainer),r=_.fromDom(e.endContainer);l.keyup(o,t,e.startOffset,r,e.endOffset).each(e=>{s(o,e)})}}),d.on("keydown",e=>{let t=Ud(e);c.hide();var e=d.selection.getRng(),r=_.fromDom(e.startContainer),o=_.fromDom(e.endContainer),n=uo(gd,hd)(_.fromDom(d.selection.getStart()));l.keydown(t,r,e.startOffset,o,e.endOffset,n).each(e=>{s(t,e)}),c.show()}),d.on("NodeChange",()=>{var e=d.selection,t=_.fromDom(e.getStart()),e=_.fromDom(e.getEnd());Ol(j,[t,e]).fold(()=>u.clear(o),f)})}),d.on("PreInit",()=>{d.serializer.addTempAttr(Hl.firstSelected),d.serializer.addTempAttr(Hl.lastSelected)}),{getSelectedCells:()=>{var e,t=o.get(),r=h([]);switch(t.tag){case"none":return r();case"single":return[t.element.dom];case"multiple":return e=t.elements,w(e,e=>e.dom)}},clearSelectedCells:e=>u.clear(_.fromDom(e))}},Kd=e=>{let n=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:t=>{n=T(n,e=>e!==t)},trigger:(...r)=>{let o={};y(e,(e,t)=>{o[e]=r[t]}),y(n,e=>{e(o)})}}},Yd=e=>({registry:pe(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:pe(e,e=>e.trigger)}),Jd=e=>e.slice(0).sort(),Qd=(t,e)=>{var e=T(e,e=>!g(t,e));if(0<e.length)throw e=e,new Error("Unsupported keys for object: "+Jd(e).join(", "))},Xd=e=>{var n=Qd,l=e,a={validate:G,label:"function"};if(0===l.length)throw new Error("You must specify at least one required field.");e=l;if(!i(e))throw new Error("The required fields must be an array. Was: "+e+".");y(e,e=>{if(!c(e))throw new Error("The value "+e+" in the required fields was not a string.")});{e=l;let r=Jd(e);le(r,(e,t)=>t<r.length-1&&e===r[t+1]).each(e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})}return t=>{let r=ge(t);{var e,o;if(!ie(l,e=>g(r,e)))throw e=l,o=r,new Error("All required keys ("+Jd(e).join(", ")+") were not specified. Specified keys were: "+Jd(o).join(", ")+".")}n(l,r);e=T(l,e=>!a.validate(t[e],e));if(0<e.length)throw o=e,new Error("All values need to be of type: "+a.label+". Keys ("+Jd(o).join(", ")+") were not.");return t}},Zd=Xd(["compare","extract","mutate","sink"]),ec=Xd(["element","start","stop","destroy"]),tc=Xd(["forceDrop","drop","move","delayDrop"]),rc=()=>{r=Yd({move:Kd(["info"])});let e={onEvent:f,reset:f,events:r.registry},t=(()=>{let n=v.none(),l=Yd({move:Kd(["info"])});return{onEvent:(e,o)=>{o.extract(e).each(e=>{var t,r;t=o,r=e,e=n.map(e=>t.compare(e,r)),n=v.some(r),e.each(e=>{l.trigger.move(e)})})},reset:()=>{n=v.none()},events:l.registry}})();var r;let o=e;return{on:()=>{o.reset(),o=t},off:()=>{o.reset(),o=e},isOn:()=>o===t,onEvent:(e,t)=>{o.onEvent(e,t)},events:t.events}},oc=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},nc=oc("ephox-dragster").resolve;var lc=Zd({compare:(e,t)=>bo(t.left-e.left,t.top-e.top),extract:e=>v.some(bo(e.x,e.y)),sink:(e,t)=>{let r=(e=>{let t={layerClass:nc("blocker"),...e},r=_.fromTag("div");return E(r,"role","presentation"),Ht(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Md(r,nc("blocker")),Md(r,t.layerClass),{element:h(r),destroy:()=>{A(r)}}})(t),o=qd(r.element(),"mousedown",e.forceDrop),n=qd(r.element(),"mouseup",e.drop),l=qd(r.element(),"mousemove",e.move),a=qd(r.element(),"mouseout",e.delayDrop);return ec({element:r.element,start:e=>{u(e,r.element())},stop:()=>{A(r.element())},destroy:()=>{r.destroy(),n.unbind(),l.unbind(),a.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let ac=oc("ephox-snooker").resolve,sc=ac("resizer-bar"),ic=ac("resizer-rows"),mc=ac("resizer-cols"),dc=e=>{e=Ct(e.parent(),"."+sc);y(e,A)},cc=(t,e,r)=>{let o=t.origin();y(e,e=>{e.each(e=>{e=r(o,e);Md(e,sc),u(t.parent(),e)})})},uc=(e,t,r,o,n)=>{let l=yo(r),a=t.isResizable,s=0<o.length?Bo.positions(o,r):[],i=0<s.length?(o=e,m=a,R(o.all,(e,t)=>m(e.element)?[t]:[])):[];var m,d,c,u,f,g;o=t,u=T(s,(e,t)=>b(i,e=>t===e)),d=l,c=Pr(r),cc(o,u,(e,t)=>{r=t.row,n=d.left-e.left,t=t.y-e.top,e=c,o=_.fromTag("div"),Ht(o,{position:"absolute",left:n+"px",top:t-3.5+"px",height:"7px",width:e+"px"}),Ae(o,{"data-row":r,role:"presentation"});var r,o,n=o;return Md(n,ic),n});let h=0<n.length?Ao.positions(n,r):[],p=0<h.length?((r,o)=>{let t=[];return S(r.grid.columns,e=>{so(r,e).map(e=>e.element).forall(o)&&t.push(e)}),T(t,t=>{var e=oo(r,e=>e.column===t);return ie(e,e=>o(e.element))})})(e,a):[];o=t,u=T(h,(e,t)=>b(p,e=>t===e)),f=l,g=po(r),cc(o,u,(e,t)=>{r=t.col,t=t.x-e.left,e=f.top-e.top,o=g,n=_.fromTag("div"),Ht(n,{position:"absolute",left:t-3.5+"px",top:e+"px",height:o+"px",width:"7px"}),Ae(n,{"data-column":r,role:"presentation"});var r,o,n,t=n;return Md(t,mc),t})},fc=(e,t)=>{var r,o,n;dc(e),e.isResizable(t)&&(r=F(t),o=co(r),n=io(r),uc(r,e,t,o,n))},gc=(e,t)=>{e=Ct(e.parent(),"."+sc);y(e,t)},hc=e=>{gc(e,e=>{W(e,"display","none")})},pc=e=>{gc(e,e=>{W(e,"display","block")})},vc=ac("resizer-bar-dragging"),bc=n=>{let r=(()=>{let r=Yd({drag:Kd(["xDelta","yDelta","target"])}),o=v.none();var e=(()=>{let r=Yd({drag:Kd(["xDelta","yDelta"])});return{mutate:(e,t)=>{r.trigger.drag(e,t)},events:r.registry}})();return e.events.drag.bind(t=>{o.each(e=>{r.trigger.drag(t.xDelta,t.yDelta,e)})}),{assign:e=>{o=v.some(e)},get:()=>o,mutate:e.mutate,events:r.registry}})(),o=((s,i)=>{{var m=s,d=null!=(s=i.mode)?s:lc;s=i;let r=!1,t=Yd({start:Kd([]),stop:Kd([])}),o=rc(),e=()=>{a.stop(),o.isOn()&&(o.off(),t.trigger.stop())},n=(t=>{let r=null,o=()=>{U(r)||(clearTimeout(r),r=null)};return{cancel:o,throttle:(...e)=>{o(),r=setTimeout(()=>{r=null,t.apply(null,e)},200)}}})(e),l=(o.events.move.bind(e=>{d.mutate(m,e.info)}),t=>(...e)=>{r&&t.apply(null,e)}),a=d.sink(tc({forceDrop:e,drop:l(e),move:l(e=>{n.cancel(),o.onEvent(e,d)}),delayDrop:l(n.throttle)}),s);return{element:a.element,go:e=>{a.start(e),o.on(),t.trigger.start()},on:()=>{r=!0},off:()=>{r=!1},isActive:()=>r,destroy:()=>{a.destroy()},events:t.registry}}})(r,{}),l=v.none(),e=(e,t)=>v.from(Le(e,t)),a=(r.events.drag.bind(r=>{e(r.target,"data-row").each(e=>{var t=Jt(r.target,"top");W(r.target,"top",t+r.yDelta+"px")}),e(r.target,"data-column").each(e=>{var t=Jt(r.target,"left");W(r.target,"left",t+r.xDelta+"px")})}),(e,t)=>Jt(e,t)-Gt(e,"data-initial-"+t,0)),s=(o.events.stop.bind(()=>{r.get().each(o=>{l.each(r=>{e(o,"data-row").each(e=>{var t=a(o,"top");N(o,"data-initial-top"),d.trigger.adjustHeight(r,t,parseInt(e,10))}),e(o,"data-column").each(e=>{var t=a(o,"left");N(o,"data-initial-left"),d.trigger.adjustWidth(r,t,parseInt(e,10))}),fc(n,r)})})}),(e,t)=>{d.trigger.startAdjust(),r.assign(e),E(e,"data-initial-"+t,Jt(e,t)),Md(e,vc),W(e,"opacity","0.2"),o.go(n.dragContainer())}),t=qd(n.parent(),"mousedown",e=>{var t=e.target;Wd(t,ic)&&s(e.target,"top"),t=e.target,Wd(t,mc)&&s(e.target,"left")}),i=e=>z(e,n.view()),m=qd(n.view(),"mouseover",e=>{var t=e.target;M(t,"table",i).filter(rl).fold(()=>{pt(e.target)&&dc(n)},e=>{o.isActive()&&(l=v.some(e),fc(n,e))})}),d=Yd({adjustHeight:Kd(["table","delta","row"]),adjustWidth:Kd(["table","delta","column"]),startAdjust:Kd([])});return{destroy:()=>{t.unbind(),m.unbind(),o.destroy(),dc(n)},refresh:e=>{fc(n,e)},on:o.on,off:o.off,hideBars:x(hc,n),showBars:x(pc,n),events:d.registry}},wc=0,yc=(e,t)=>{var r,o,n,l,a=!((i=e).inline&&((a=i).inline?0<(s=null!=(s=Xn(a))?s:"").length?_t(vt(),s):(s=Zn(a),$(s)?v.some(_.fromDom(s)):v.none()):v.none()).isSome())&&"split"===el(i),s=_.fromDom(e.getBody()),e=(i=a?"relative":"static",e=(new Date).getTime(),e="resizer-container_"+Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9)+ ++wc+String(e),r=_.fromTag("div"),E(r,"id",e),Ht(r,{position:i,height:"0",width:"0",padding:"0",margin:"0",border:"0"}),r),i=vt();return a?(Xe(s,e),r=s,o=e,n=i,l=t,{parent:h(o),view:h(r),dragContainer:h(n),origin:()=>yo(o),isResizable:l}):(u(i,e),r=s,n=e,l=t,{parent:h(n),view:h(r),dragContainer:h(n),origin:h(bo(0,0)),isResizable:l})},xc=e=>$(e)&&"TABLE"===e.nodeName,Cc="bar-",Sc=e=>"false"!==Le(e,"data-mce-resize"),Tc=s=>{let l=ld(),o=ld(),n=ld(),i,m,d,c,u=e=>hi(s,e),f=()=>(Fn(s)?ia:sa)(),t=(s.on("init",()=>{r=s,t=Sc;var e,t,r=r.inline?yc(r,t):(r=_.fromDom(r.getDoc()),t=t,e=_e(r)?(e=r,_.fromDom(qe(e).dom.documentElement)):r,{parent:h(e),view:h(r),dragContainer:h(e),origin:h(bo(0,0)),isResizable:t});if(n.set(r),t=s.options.get("object_resizing"),g(t.split(","),"table")&&Gn(s)){let e=((e,n,l)=>{let o=Bo,a=Ao,t=bc(e),s=Yd({beforeResize:Kd(["table","type"]),afterResize:Kd(["table","type"]),startDrag:Kd([])});return t.events.adjustHeight.bind(e=>{var t=e.table,r=(s.trigger.beforeResize(t,"row"),o.delta(e.delta,t));ms(t,r,e.row),s.trigger.afterResize(t,"row")}),t.events.startAdjust.bind(e=>{s.trigger.startDrag()}),t.events.adjustWidth.bind(e=>{var t=e.table,r=(s.trigger.beforeResize(t,"col"),a.delta(e.delta,t)),o=l(t);is(t,r,e.column,n,o),s.trigger.afterResize(t,"col")}),{on:t.on,off:t.off,refreshBars:t.refresh,hideBars:t.hideBars,showBars:t.showBars,destroy:t.destroy,events:s.registry}})(r,f(),u);s.mode.isReadOnly()||e.on(),e.events.startDrag.bind(e=>{l.set(s.selection.getRng())}),e.events.beforeResize.bind(e=>{var t,r,o,n=e.table.dom;t=s,r=n,o=il(n),n=ml(n),e=Cc+e.type,t.dispatch("ObjectResizeStart",{target:r,width:o,height:n,origin:e})}),e.events.afterResize.bind(e=>{var t,r,o=e.table,n=o.dom;al(o),l.on(e=>{s.selection.setRng(e),s.focus()}),o=s,t=n,r=il(n),n=ml(n),e=Cc+e.type,o.dispatch("ObjectResized",{target:t,width:r,height:n,origin:e}),s.undoManager.add()}),o.set(e)}}),s.on("ObjectResizeStart",e=>{var t,r=e.target;xc(r)&&!s.mode.isReadOnly()&&(t=_.fromDom(r),y(s.dom.select(".mce-clonedresizable"),e=>{s.dom.addClass(e,"mce-"+In(s)+"-columns")}),!Ei(t)&&Un(s)?zi(t):!ki(t)&&qn(s)&&Bi(t),Ni(t)&&Mt(e.origin,Cc)&&Bi(t),i=e.width,m=$n(s)?"":cl(s,r).getOr(""),d=e.height,c=ul(s,r).getOr(""))}),s.on("ObjectResized",e=>{var t,r,o=e.target;xc(o)&&(o=_.fromDom(o),t=e.origin,r=t,Mt(r,"corner-")&&((o,t,n,r)=>{t=t;var l,e,t=Mt(t=t,"corner-")?t.substring(7):t,a=Wt(t,"e"),t=Mt(t,"n");if(""===m&&Bi(o),""===c&&(l=e=o,l=ho(l)+"px",Oi(e,v.none(),v.some(l)),_i(e)),n!==i&&""!==m){W(o,"width",m);let e=f(),t=u(o),r=Fn(s)||a?(l=o,ma(l).columns-1):0;is(o,n-i,r,e,t)}else if(/^(\d+(\.\d+)?)%$/.test(m)){let e=parseFloat(m.replace("%",""));W(o,"width",n*e/i+"%")}if(/^(\d+(\.\d+)?)px$/.test(m)&&(e=o,a=F(e),ao(a)||y(rr(e),e=>{var t=Vt(e,"width");W(e,"width",t),N(e,"width")})),r!==d&&""!==c){W(o,"height",c);let e=t?0:(n=o,ma(n).rows-1);ms(o,r-d,e)}})(o,t,e.width,e.height),al(o),ui(s,o.dom,fi))}),()=>{o.on(e=>{e.on(),e.showBars()})}),r=()=>{o.on(e=>{e.off(),e.hideBars()})};return s.on("DisabledStateChange",e=>{(e.state?r:t)()}),s.on("SwitchMode",()=>{(s.mode.isReadOnly()?r:t)()}),s.on("dragstart dragend",e=>{("dragstart"===e.type?r:t)()}),s.on("remove",()=>{o.on(e=>{e.destroy()}),n.on(e=>{e=e,s.inline&&A(e.parent())})}),{refresh:t=>{o.on(e=>e.refreshBars(_.fromDom(t)))},hide:()=>{o.on(e=>e.hideBars())},show:()=>{o.on(e=>e.showBars())}}};t.add("dom",e=>({table:(r=>{(o=r.options.register)("table_clone_elements",{processor:"string[]"}),o("table_use_colgroups",{processor:"boolean",default:!0}),o("table_header_type",{processor:e=>{var t=g(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),o("table_sizing_mode",{processor:"string",default:"auto"}),o("table_default_attributes",{processor:"object",default:{border:"1"}}),o("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),o("table_column_resizing",{processor:e=>{var t=g(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),o("table_resize_bars",{processor:"boolean",default:!0}),o("table_style_by_css",{processor:"boolean",default:!0}),o("table_merge_content_on_paste",{processor:"boolean",default:!0});var o=Tc(r),e=Gd(r,o),o=pi(r,o,e);Xi(r,o);{var n=r,l=o;let e=ll(n),t=o=>$l(sl(n)).bind(r=>j(r,e).map(e=>{var t=Vl(Gl(n),e,r);return o(e,t)})).getOr("");D({mceTableRowType:()=>t(l.getTableRowType),mceTableCellType:()=>t(l.getTableCellType),mceTableColType:()=>t(l.getTableColType)},(e,t)=>n.addQueryValueHandler(t,e))}return Kl(r,o),{getSelectedCells:e.getSelectedCells,clearSelectedCells:e.clearSelectedCells}})(e)}))})();
(()=>{let e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=e=>"function"==typeof e;var i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Tools");let o=o=>e=>e.options.get(o),l=o("save_enablewhendirty"),r=o("save_onsavecallback"),s=o("save_oncancelcallback"),d=(e,o)=>{e.notificationManager.open({text:o,type:"error"})},m=t=>e=>{let o=()=>{e.setEnabled(!l(t)||t.isDirty())};return o(),t.on("NodeChange dirty",o),()=>t.off("NodeChange dirty",o)};e.add("save",e=>{var n,o,t;(t=e.options.register)("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"}),(o=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>o.execCommand("mceSave"),onSetup:m(o),shortcut:"Meta+S"}),o.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>o.execCommand("mceCancel"),onSetup:m(o)}),o.addShortcut("Meta+S","","mceSave"),(n=e).addCommand("mceSave",()=>{var e,o,t;e=n,t=i.DOM.getParent(e.id,"form"),l(e)&&!e.isDirty()||(e.save(),o=r(e),a(o)?(o.call(e,e),e.nodeChanged()):t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():d(e,"Error: Form submit field collision.")),e.nodeChanged()):d(e,"Error: No form element found."))}),n.addCommand("mceCancel",()=>{var e,o,t;e=n,o=c.trim(e.startContent),t=s(e),a(t)?t.call(e,e):e.resetContent(o)})})})();
tinymce.util.Tools.resolve("tinymce.PluginManager").add("code",e=>{return(a=e).addCommand("mceCodeEditor",()=>{var n,e;e=(n=a).getContent({source_view:!0}),n.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:e},onSubmit:e=>{var o,t;o=n,t=e.getData().code,o.focus(),o.undoManager.transact(()=>{o.setContent(t)}),o.selection.setCursorLocation(),o.nodeChanged(),e.close()}})}),t=()=>o.execCommand("mceCodeEditor"),(o=e).ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),o.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t}),{};var o,t,a});
(()=>{let t=tinymce.util.Tools.resolve("tinymce.PluginManager"),F=l=>e=>{return o=typeof(e=e),(null===e?"null":"object"==o&&Array.isArray(e)?"array":"object"==o&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":o)===l;var t,o},q=t=>e=>typeof e===t,L=F("string"),j=F("array"),H=q("boolean"),V=e=>void 0===e,W=e=>!(null==e),u=q("function"),z=q("number"),$=()=>{},p=e=>()=>e,U=e=>e;function b(t,...o){return(...e)=>{e=o.concat(e);return t.apply(null,e)}}let G=e=>{e()},h=p(!1),g=p(!0);class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return W(e)?f.some(e):f.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);let c=Object.keys,K=Object.hasOwnProperty,i=(o,l)=>{var r=c(o);for(let e=0,t=r.length;e<t;e++){var n=r[e];l(o[n],n)}},J=(e,t)=>{var o,l,r,n={};return e=e,l=t,o=n,r=$,i(e,(e,t)=>{(l(e,t)?(e,t)=>{o[t]=e}:r)(e,t)}),n},y=e=>c(e).length,d=(e,t)=>w(e,t)?f.from(e[t]):f.none(),w=(e,t)=>K.call(e,t),Q=(e,t)=>w(e,t)&&null!=e[t],X=Array.prototype.indexOf,Y=Array.prototype.push,v=(e,t)=>(e=e,t=t,-1<X.call(e,t)),Z=(o,l)=>{for(let e=0,t=o.length;e<t;e++)if(l(o[e],e))return!0;return!1},ee=(t,o)=>{var l=[];for(let e=0;e<t;e++)l.push(o(e));return l},s=(o,l)=>{let e=o.length,r=new Array(e);for(let t=0;t<e;t++){let e=o[t];r[t]=l(e,t)}return r},S=(o,l)=>{for(let e=0,t=o.length;e<t;e++)l(o[e],e)},C=(o,l)=>{var r=[];for(let e=0,t=o.length;e<t;e++){var n=o[e];l(n,e)&&r.push(n)}return r},te=(e,o,l)=>(S(e,(e,t)=>{l=o(l,e,t)}),l),oe=(e,t)=>{var o=e,l=t,r=h;for(let e=0,t=o.length;e<t;e++){var n=o[e];if(l(n,e))return f.some(n);if(r(n,e))break}return f.none()},n=(e,t)=>{var o=s(e,t),l=[];for(let e=0,t=o.length;e<t;++e){if(!j(o[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+o);Y.apply(l,o[e])}return l},le=(o,l)=>{for(let e=0,t=o.length;e<t;++e)if(!0!==l(o[e],e))return!1;return!0},re=(e,t)=>0<=t&&t<e.length?f.some(e[t]):f.none(),ne=(t,o)=>{for(let e=0;e<t.length;e++){var l=o(t[e],e);if(l.isSome())return l}return f.none()},l=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},T={fromHtml:(t,e)=>{e=(e||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length){let e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return l(e.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return l(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return l(t)},fromDom:l,fromPoint:(e,t,o)=>f.from(e.dom.elementFromPoint(t,o)).map(l)},x=(e,t)=>{var o=e.dom;if(1!==o.nodeType)return!1;{let e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ae=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,A=(e,t)=>e.dom===t.dom,se=x,R=("undefined"!=typeof window||Function("return this;")(),e=>e.dom.nodeName.toLowerCase()),ce=e=>e.dom.nodeType,ie=t=>e=>ce(e)===t,o=ie(1),me=ie(3),de=ie(9),ue=ie(11),pe=t=>e=>o(e)&&R(e)===t,be=e=>f.from(e.dom.parentNode).map(T.fromDom),ge=e=>f.from(e.dom.nextSibling).map(T.fromDom),r=e=>s(e.dom.childNodes,T.fromDom),he=e=>T.fromDom(e.dom.host),fe=e=>{let t=me(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return e=e=T.fromDom(t),e=T.fromDom(e.dom.getRootNode()),(ue(l=e)&&W(l.dom.host)?f.some(e):f.none()).fold(()=>o.body.contains(t),(r=fe,n=he,e=>r(n(e))));var l,r,n};var ye,we=(e,t,o,l,r)=>e(o,l)?f.some(o):u(r)&&r(o)?f.none():t(o,l,r);let ve=(e,t,o)=>{let l=e.dom;for(var r=u(o)?o:h;l.parentNode;){l=l.parentNode;let e=T.fromDom(l);if(t(e))return f.some(e);if(r(e))break}return f.none()},a=(e,t,o)=>ve(e,e=>x(e,t),o),Se=(e,t)=>(t=t,e=void 0===e?document:e.dom,ae(e)?f.none():f.from(e.querySelector(t)).map(T.fromDom)),Ce=(e,t,o)=>we((e,t)=>x(e,t),a,e,t,o),Te=(e,t=!1)=>fe(e)?e.dom.isContentEditable:(e=e,Ce(e,"[contenteditable]").fold(p(t),e=>"true"===xe(e))),xe=e=>e.dom.contentEditable,O=t=>e=>A(e,(e=t,T.fromDom(e.getBody()))),_=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Ae=e=>T.fromDom(e.selection.getStart()),Re=(e,t)=>{let o=[];return S(r(e),e=>{o=(o=t(e)?o.concat([e]):o).concat(Re(e,t))}),o},Oe=(e,t)=>(e=e,C(r(e),e=>x(e,t))),_e=(e,t)=>(t=t,e=void 0===e?document:e.dom,ae(e)?[]:s(e.querySelectorAll(t),T.fromDom)),De=(e,t,o)=>{if(!(L(o)||H(o)||z(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},Ie=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},D=(e,t)=>f.from(Ie(e,t)),Ne=(e,t)=>{e.dom.removeAttribute(t)},Me=(e,t,o=(e,t)=>e===t)=>e.exists(e=>o(e,t)),Pe=(e,t,o)=>e.isSome()&&t.isSome()?f.some(o(e.getOrDie(),t.getOrDie())):f.none(),ke=(e,t)=>(e=e,""===(t=t)||e.length>=t.length&&e.substr(0,0+t.length)===t),Ee=(ye=/^\s+|\s+$/g,e=>e.replace(ye,"")),Be=e=>0<e.length,Fe=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?f.none():f.some(e)},qe=e=>void 0!==e.style&&u(e.style.getPropertyValue),Le=(e,t)=>{var o=e.dom,l=window.getComputedStyle(o).getPropertyValue(t);return""!==l||fe(e)?l:je(o,t)},je=(e,t)=>qe(e)?e.style.getPropertyValue(t):"",I=(e,t)=>{e=e.dom,e=je(e,t);return f.from(e).filter(e=>0<e.length)},He=(e,t,o=0)=>D(e,t).map(e=>parseInt(e,10)).getOr(o),Ve=(e,t)=>We(e,t,g),We=(e,t,o)=>n(r(e),e=>x(e,t)?o(e)?[e]:[]:We(e,t,o)),ze=["tfoot","thead","tbody","colgroup"],$e=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Ue=(e,t,o)=>({element:e,cells:t,section:o}),N=(e,t)=>Ce(e,"table",t),Ge=e=>Ve(e,"tr"),Ke=e=>N(e).fold(p([]),e=>Oe(e,"colgroup")),Je=e=>be(e).map(e=>{var t,e=R(e);return t=e,v(ze,t)?e:"tbody"}).getOr("tbody"),Qe=e=>D(e,"data-snooker-locked-cols").bind(e=>f.from(e.match(/\d+/g))).map(e=>{var o=e,l=g,r={};for(let e=0,t=o.length;e<t;e++){var n=o[e];r[String(n)]=l(n,e)}return r}),Xe=(e,t)=>e+","+t,Ye=e=>{let a={},t=[],o,l=(o=e,re(o,0).map(e=>e.element).bind(N).bind(Qe).getOr({})),r=0,s=0,c=0;var{pass:e,fail:n}=(o=>{var l=[],r=[];for(let e=0,t=o.length;e<t;e++){var n=o[e];("colgroup"===n.section?l:r).push(n)}return{pass:l,fail:r}})(e),{columns:e,colgroups:n}=(S(n,e=>{let o=[];S(e.cells,e=>{let r=0;for(;void 0!==a[Xe(c,r)];)r++;let t=Q(l,r.toString()),n={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:c,column:r,isLocked:t};for(let l=0;l<e.colspan;l++)for(let o=0;o<e.rowspan;o++){let e=r+l,t=Xe(c+o,e);a[t]=n,s=Math.max(s,e+1)}o.push(n)}),r++,t.push(Ue(e.element,o,e.section)),c++}),n=e,re(n,n.length-1).map(e=>{let t=(e=>{let l={},r=0;return S(e.cells,t=>{let o=t.colspan;ee(o,e=>{e=r+e;l[e]={element:t.element,colspan:o,column:e}}),r+=o}),l})(e),o={element:e.element,columns:((e,o)=>{const l=[];return i(e,(e,t)=>{l.push(o(e,t))}),l})(t,U)};return{colgroups:[o],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})));return{grid:{rows:r,columns:s},access:a,all:t,columns:e,colgroups:n}},Ze=e=>{e=e,t=Ge(e),e=[...Ke(e),...t],l=Je;var l,t=s(e,t=>{if("colgroup"===R(t)){let e=s((o=t,x(o,"colgroup")?Oe(o,"col"):n(Ke(o),e=>Oe(e,"col"))),e=>{var t=He(e,"span",1);return $e(e,1,t)});return Ue(t,e,"colgroup")}var o,e=s((o=t,Ve(o,"th,td")),e=>{var t=He(e,"rowspan",1),o=He(e,"colspan",1);return $e(e,t,o)});return Ue(t,e,l(t))});return Ye(t)},et=(e,t,o)=>f.from(e.access[Xe(t,o)]),tt=(e,t,o)=>{e=(e=>{e=n(e.all,e=>e.cells);return C(e,e=>o(t,e.element))})(e);return 0<e.length?f.some(e[0]):f.none()},ot=(e,t)=>f.from(e.columns[t]);var lt=tinymce.util.Tools.resolve("tinymce.util.Tools");let rt=(t,e,o)=>{var l=t.select("td,th",e);let r;for(let e=0;e<l.length;e++){var n=t.getStyle(l[e],o);if((r=V(r)?n:r)!==n)return""}return r},nt=(t,o,l)=>{lt.each("left center right".split(" "),e=>{e!==l&&t.formatter.remove("align"+e,{},o)}),l&&t.formatter.apply("align"+l,{},o)},at=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},st=(e,t,o)=>(e=Le(e,t),t=o,e=parseFloat(e),(isNaN(e)?f.none():f.some(e)).getOr(t)),ct=e=>{return t=(t=(e=e).dom).getBoundingClientRect().width||t.offsetWidth,e=e,t-st(e,"padding-left",0)-st(e,"padding-right",0)-st(e,"border-left-width",0)-st(e,"border-right-width",0);var t};var it=tinymce.util.Tools.resolve("tinymce.Env");let mt=ee(5,e=>{e=e+1+"px";return{title:e,value:e}}),dt=s(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),ut="100%",pt=e=>{var t=e.dom,t=null!=(t=t.getParent(e.selection.getStart(),t.isBlock))?t:e.getBody();return ct(T.fromDom(t))+"px"},e=t=>e=>e.options.get(t),bt=e("table_sizing_mode"),gt=e("table_border_widths"),ht=e("table_border_styles"),ft=e("table_cell_advtab"),yt=e("table_row_advtab"),M=e("table_advtab"),wt=e("table_appearance_options"),vt=e("table_grid"),P=e("table_style_by_css"),St=e("table_cell_class_list"),Ct=e("table_row_class_list"),Tt=e("table_class_list"),xt=e("table_toolbar"),At=e("table_background_color_map"),Rt=e("table_border_color_map"),Ot=e=>"fixed"===bt(e),_t=e=>"responsive"===bt(e),Dt=e=>{var t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:(t=e,e=o,_t(t)||!P(t)?e:Ot(t)?{...e,width:pt(t)}:{...e,width:ut})},It=e=>{var t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:(t=e,e=o,_t(t)||P(t)?e:Ot(t)?{...e,width:pt(t)}:{...e,width:ut})},Nt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Mt=(t,e,o)=>((e,t,o)=>{let l=tt(e,t,A),r=tt(e,o,A);return l.bind(o=>r.map(e=>{return t=o,e=e,{startRow:Math.min(t.row,e.row),startCol:Math.min(t.column,e.column),finishRow:Math.max(t.row+t.rowspan-1,e.row+e.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,e.column+e.colspan-1)};var t}))})(t,e,o).bind(e=>{{var l=t,r=e;let o=!0;var n=b(Nt,r);for(let t=r.startRow;t<=r.finishRow;t++)for(let e=r.startCol;e<=r.finishCol;e++)o=o&&et(l,t,e).exists(n);return o?f.some(r):f.none()}}),Pt=Ze,kt=(t,o)=>{be(t).each(e=>{e.dom.insertBefore(o.dom,t.dom)})},Et=(e,t)=>{ge(e).fold(()=>{be(e).each(e=>{m(e,t)})},e=>{kt(e,t)})},m=(e,t)=>{e.dom.appendChild(t.dom)},Bt=(o,l)=>{S(l,(e,t)=>{t=0===t?o:l[t-1];Et(t,e)})},Ft=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},qt=(o=>{let t=e=>o(e)?f.from(e.dom.nodeValue):f.none();return{get:e=>{if(o(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!o(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(me);var Lt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let jt=(o,l,e,t)=>{var r,e=l(o,e),n=(e,t)=>{t=l(o,t);return Ht(o,e,t)},a=e,s=t;for(let e=s.length-1;0<=e;e--)r=s[e],e,a=n(a,r);return a},Ht=(t,e,o)=>e.bind(e=>o.filter(b(t.eq,e))),Vt={up:p({selector:a,closest:Ce,predicate:ve,all:(e,t)=>{var o=u(t)?t:h;let l=e.dom;for(var r=[];null!=l.parentNode;){let e=l.parentNode,t=T.fromDom(e);if(r.push(t),!0===o(t))break;l=e}return r}}),down:p({selector:_e,predicate:Re}),styles:p({get:Le,getRaw:I,set:(e,t,o)=>{e=e.dom;if(!L(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);qe(e)&&e.style.setProperty(t,o)},remove:(e,t)=>{var o;o=e.dom,t=t,qe(o)&&o.style.removeProperty(t),Me(D(e,"style").map(Ee),"")&&Ne(e,"style")}}),attrs:p({get:Ie,set:(e,t,o)=>{De(e.dom,t,o)},remove:Ne,copyTo:(e,t)=>{{e=te(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{});let o=t.dom;i(e,(e,t)=>{De(o,t,e)})}}}),insert:p({before:kt,after:Et,afterAll:Bt,append:m,appendAll:(t,e)=>{S(e,e=>{m(t,e)})},prepend:(t,o)=>{var e;e=(e=t).dom.childNodes,f.from(e[0]).map(T.fromDom).fold(()=>{m(t,o)},e=>{t.dom.insertBefore(o.dom,e.dom)})},wrap:(e,t)=>{kt(e,t),m(t,e)}}),remove:p({unwrap:e=>{var t=r(e);0<t.length&&Bt(e,t),Ft(e)},remove:Ft}),create:p({nu:T.fromTag,clone:e=>T.fromDom(e.dom.cloneNode(!1)),text:T.fromText}),query:p({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>f.from(e.dom.previousSibling).map(T.fromDom),nextSibling:ge}),property:p({children:r,name:R,parent:be,document:e=>(e=e,(de(e)?e:T.fromDom(e.dom.ownerDocument)).dom),isText:me,isComment:e=>8===ce(e)||"#comment"===R(e),isElement:o,isSpecial:e=>{e=R(e);return v(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:e=>o(e)?D(e,"lang"):f.none(),getText:e=>qt.get(e),setText:(e,t)=>qt.set(e,t),isBoundary:e=>!!o(e)&&("body"===R(e)||v(Lt,R(e))),isEmptyTag:e=>!!o(e)&&v(["br","img","hr","input"],R(e)),isNonEditable:e=>o(e)&&"false"===Ie(e,"contenteditable")}),eq:A,is:se},Wt=e=>a(e,"table"),zt=(e,t,o)=>Se(e,t).bind(n=>Se(e,o).bind(t=>{return l=Wt,r=[n,t],e=Vt,(0<r.length?(e=e,o=(e,t)=>l(t),r=r,jt(e,o,r[0],r.slice(1))):f.none()).map(e=>({first:n,last:t,table:e}));var e,o,l,r})),$t=e=>s(e,T.fromDom),Ut="data-mce-selected",Gt="data-mce-first-selected",Kt="data-mce-last-selected",Jt={selected:Ut,selectedSelector:"td["+Ut+"],th["+Ut+"]",firstSelected:Gt,firstSelectedSelector:"td["+Gt+"],th["+Gt+"]",lastSelected:Kt,lastSelectedSelector:"td["+Kt+"],th["+Kt+"]"},Qt=l=>(e,t)=>{var o=R(e),o="col"===o||"colgroup"===o?N(o=e).bind(e=>{return e=e,t=Jt.firstSelectedSelector,0<(e=_e(e,t)).length?f.some(e):f.none();var t}).fold(p(o),e=>e[0]):e;return Ce(o,l,t)},Xt=Qt("th,td,caption"),Yt=Qt("th,td"),Zt=e=>$t(e.model.table.getSelectedCells()),eo=(e,o)=>{var e=Yt(e),t=e.bind(e=>N(e)).map(e=>Ge(e));return Pe(e,t,(t,e)=>C(e,e=>Z($t(e.dom.cells),e=>"1"===Ie(e,o)||A(e,t)))).getOr([])},to=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],oo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ro=e=>(e=e,(ke(e,"#")?e.substring(1):e).toUpperCase()),no=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},ao=e=>(e=no(e.red)+no(e.green)+no(e.blue),{value:ro(e)}),so=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,co=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,io=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),mo=(e,t,o,l)=>{e=parseInt(e,10),t=parseInt(t,10),o=parseInt(o,10),l=parseFloat(l);return io(e,t,o,l)},uo=e=>{var t=so.exec(e);return null!==t?f.some(mo(t[1],t[2],t[3],"1")):null!==(t=co.exec(e))?f.some(mo(t[1],t[2],t[3],t[4])):f.none()},po=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},bo=e=>Q(e,"menu"),go=e=>s(e,e=>{var t=e.text||e.title||"";return bo(e)?{text:t,items:go(e.menu)}:{text:t,value:e.value}}),ho=e=>e.length?f.some(go([{text:"Select...",value:"mce-no-match"},...e])):f.none(),k=(o,e,l,r)=>s(e,e=>{var n,a,s,t=e.text||e.title;return bo(e)?{type:"nestedmenuitem",text:t,getSubmenuItems:()=>k(o,e.menu,l,r)}:{text:t,type:"togglemenuitem",onAction:()=>r(e.value),onSetup:(n=o,a=l,s=e.value,o=>{let l=(e=>{let t=po(f.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(f.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(f.some(e))}}})(e=>e.unbind()),r=!Be(s),e=()=>{var e=Zt(n),t=e=>n.formatter.match(a,{value:s},e.dom,r);r?(o.setActive(!Z(e,t)),l.set(n.formatter.formatChanged(a,e=>o.setActive(!e),!0))):(o.setActive(le(e,t)),l.set(n.formatter.formatChanged(a,o.setActive,!1,{value:s})))};return n.initialized?e():n.on("init",e),l.clear})}}),E=(t,o)=>e=>{t.execCommand("mceTableApplyCellStyle",!1,{[o]:e})},B=e=>n(e,e=>bo(e)?[{...e,menu:B(e.menu)}]:Be(e.value)?[e]:[]),fo=(t,o,l,r)=>e=>e(k(t,o,l,r)),yo=(t,e,o)=>{e=s(e,e=>{return{text:e.title,value:"#"+(t=e=r=e.value,(oo.test(t)||lo.test(t)?f.some({value:ro(e)}):f.none()).orThunk(()=>uo(r).map(ao)).getOrThunk(()=>{var e=document.createElement("canvas"),t=(e.height=1,e.width=1,e.getContext("2d")),e=(t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=r,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data),t=e[0],o=e[1],l=e[2],e=e[3];return ao(io(t,o,l,e))}).value),type:"choiceitem"};var t,r});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<e.length?e:void 0,allowCustomColors:!1},onAction:e=>{e="remove"===e.value?"":e.value;t.execCommand("mceTableApplyCellStyle",!1,{[o]:e})}}]},wo=t=>()=>{var e="header"===t.queryCommandValue("mceTableRowType")?"body":"header";t.execCommand("mceTableRowType",!1,{type:e})},vo=t=>()=>{var e="th"===t.queryCommandValue("mceTableColType")?"td":"th";t.execCommand("mceTableColType",!1,{type:e})},So=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:to}],Co=e=>So.concat((e=e,ho(St(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})).toArray())),To=(e,t)=>{e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(go(ht(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},xo=(o,l)=>{let r=o.dom;return{setAttrib:(e,t)=>{r.setAttrib(l,e,t)},setStyle:(e,t)=>{r.setStyle(l,e,t)},setFormat:(e,t)=>{""===t?o.formatter.remove(e,{value:null},l,!0):o.formatter.apply(e,{value:t},l)}}},Ao=pe("th"),Ro=e=>{var t=s(e,e=>{return o="thead"===(e=e).section,l=Me((t=e.cells,0===(l=C(t,e=>Ao(e.element))).length?f.some("td"):l.length===t.length?f.some("th"):f.none()),"th"),("tfoot"===e.section?{type:"footer"}:o||l?{type:"header",subType:(t=l,(e=o)&&t?"sectionCells":e?"section":"cells")}:{type:"body"}).type;var t,o,l}),o=v(t,"header"),l=v(t,"footer");if(o||l){let e=v(t,"body");return!o||e||l?o||e||!l?f.none():f.some("footer"):f.some("header")}return f.some("body")},Oo=(e,t)=>ne(e.all,e=>oe(e.cells,e=>A(t,e.element))),_o=(l,e,r)=>{var e=(t=>{let o=[],l=e=>{o.push(e)};for(let e=0;e<t.length;e++)t[e].each(l);return o})(s(e.selection,e=>{return t=["td","th"],e=e,o=void 0,((o=h)(e)?f.none():v(t,R(e))?f.some(e):a(e,t.join(","),e=>x(e,"table")||o(e))).bind(e=>Oo(l,e)).filter(r);var t,o})),t=e;return 0<e.length?f.some(t):f.none()},Do=(e,t)=>_o(e,t,g),Io=(o,e)=>le(e,e=>{return t=o,e=e,Oo(t,e).exists(e=>!e.isLocked);var t}),No=((n=>{if(!j(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");let a=[],s={};S(n,(e,t)=>{var o=c(e);if(1!==o.length)throw new Error("one and only one name per case");let l=o[0],r=e[l];if(void 0!==s[l])throw new Error("duplicate key detected:"+l);if("cata"===l)throw new Error("cannot have a case named cata (sorry)");if(!j(r))throw new Error("case arguments must be an array");a.push(l),s[l]=(...o)=>{var e=o.length;if(e!==r.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+r.length+" ("+r+"), got "+e);return{fold:(...e)=>{if(e.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);return e[t].apply(null,o)},match:e=>{let t=c(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(le(a,e=>v(t,e)))return e[l].apply(null,o);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:e=>{console.log(e,{constructors:a,constructor:l,params:o})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{let o=Ze(e);return Do(o,t).bind(e=>{var t=e[e.length-1],e=e[0].row,t=t.row+t.rowspan,e=o.all.slice(e,t);return Ro(e)}).getOr("")}),Mo=e=>{return ke(e,"rgb")?uo(t=e).map(ao).map(e=>"#"+e.value).getOr(t):e;var t},Po=e=>{e=T.fromDom(e);return{borderwidth:I(e,"border-width").getOr(""),borderstyle:I(e,"border-style").getOr(""),bordercolor:I(e,"border-color").map(Mo).getOr(""),backgroundcolor:I(e,"background-color").map(Mo).getOr("")}},ko=e=>{let r=e[0],t=e.slice(1);return S(t,e=>{S(c(r),l=>{i(e,(e,t)=>{var o=r[l];""!==o&&l===t&&o!==e&&(r[l]="class"===l?"mce-no-match":"")})})}),r},Eo=(e,t,o,l)=>oe(e,e=>!V(o.formatter.matchNode(l,t+e))).getOr(""),Bo=b(Eo,["left","center","right"],"align"),Fo=b(Eo,["top","middle","bottom"],"valign"),qo=o=>N(T.fromDom(o)).map(e=>{var t={selection:$t(o.cells)};return No(e,t)}).getOr(""),Lo=(e,o)=>{let t=Ze(e),l=(e=t,n(e.all,e=>e.cells)),r=C(l,t=>Z(o,e=>A(t.element,e)));return s(r,e=>({element:e.element.dom,column:ot(t,e.column).map(e=>e.element.dom)}))},jo=(e,t,l,o)=>{let c=o.getData();o.close(),e.undoManager.transact(()=>{{var n=e,a=t,o=l,s=c;let r=J(s,(e,t)=>o[t]!==e);0<y(r)&&1<=a.length&&N(a[0]).each(e=>{var t=Lo(e,a),o=0<y(J(r,(e,t)=>"scope"!==t&&"celltype"!==t)),l=w(r,"celltype");if(o||w(r,"scope")){var d=n,u=s,p=b(w,r);let m=1===t.length;S(t,e=>{var t,o,l,r,n,a,s=e.element,c=m?g:p,i=xo(d,s);r=i,e=e.column.map(e=>xo(d,e)).getOr(i),n=u,(a=c)("scope")&&r.setAttrib("scope",n.scope),a("class")&&"mce-no-match"!==n.class&&r.setAttrib("class",n.class),a("width")&&e.setStyle("width",_(n.width)),ft(d)&&(r=i,a=u,(e=c)("backgroundcolor")&&r.setFormat("tablecellbackgroundcolor",a.backgroundcolor),e("bordercolor")&&r.setFormat("tablecellbordercolor",a.bordercolor),e("borderstyle")&&r.setFormat("tablecellborderstyle",a.borderstyle),e("borderwidth"))&&r.setFormat("tablecellborderwidth",_(a.borderwidth)),p("halign")&&nt(d,s,u.halign),p("valign")&&(t=d,o=s,l=u.valign,lt.each("top middle bottom".split(" "),e=>{e!==l&&t.formatter.remove("valign"+e,{},o)}),l)&&t.formatter.apply("valign"+l,{},o)})}l&&n.execCommand("mceTableCellType",!1,{type:s.celltype,no_events:!0}),at(n,e.dom,{structure:l,style:o})})}e.focus()})},Ho=e=>{var t,o,n,l,r,a=Zt(e);0!==a.length&&(n=e,l=a,r=N(l[0]).map(e=>s(Lo(e,l),e=>{return t=n,o=e.element,l=ft(n),e=e.column,r=t.dom,{width:(e=e.getOr(o),r.getStyle(e,"width")||r.getAttrib(e,"width")),scope:r.getAttrib(o,"scope"),celltype:o.nodeName.toLowerCase(),class:r.getAttrib(o,"class",""),halign:Bo(t,o),valign:Fo(t,o),...l?Po(o):{}};var t,o,l,r})),r=ko(r.getOrDie()),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:Co(e)},To(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:Co(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:ft(e)?t:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:b(jo,e,a,r)}))},Vo=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Wo=e=>Vo.concat((e=e,ho(Ct(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})).toArray())),zo=(t,a,d,e)=>{let u=e.getData();e.close(),t.undoManager.transact(()=>{var l=t,e=a,o=d,r=u,n=J(r,(e,t)=>o[t]!==e);if(0<y(n)){let t=w(n,"type"),o=!t||1<y(n);if(o){var s=l;var c=e;var i=r;var m=b(w,n);let a=1===c.length?g:m;S(c,e=>{var t,o,l,r=Oe(T.fromDom(e),"td,th"),n=xo(s,e);t=n,o=i,(l=a)("class")&&"mce-no-match"!==o.class&&t.setAttrib("class",o.class),l("height")&&t.setStyle("height",_(o.height)),yt(s)&&(l=n,t=i,(o=a)("backgroundcolor")&&l.setStyle("background-color",t.backgroundcolor),o("bordercolor")&&l.setStyle("border-color",t.bordercolor),o("borderstyle"))&&l.setStyle("border-style",t.borderstyle),m("height")&&S(r,e=>{s.dom.setStyle(e.dom,"height",null)}),m("align")&&nt(s,e,i.align)})}t&&l.execCommand("mceTableRowType",!1,{type:r.type,no_events:!0}),N(T.fromDom(e[0])).each(e=>at(l,e.dom,{structure:t,style:o}))}t.focus()})},$o=r=>{var e,t,o,l=eo(Ae(r),Jt.selected);0!==l.length&&(e=s(l,e=>{return t=r,e=e.dom,o=yt(r),{height:(l=t.dom).getStyle(e,"height")||l.getAttrib(e,"height"),class:l.getAttrib(e,"class",""),type:qo(e),align:Bo(t,e),...o?Po(e):{}};var t,o,l}),e=ko(e),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:Wo(r)},To(r,"row")]},o={type:"panel",items:[{type:"grid",columns:2,items:Wo(r)}]},r.windowManager.open({title:"Row Properties",size:"normal",body:yt(r)?t:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:b(zo,r,s(l,e=>e.dom),e)}))},Uo=(e,t,o)=>{o=o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],e=wt(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],t=0<t.length?[{name:"class",type:"listbox",label:"Class",items:t}]:[];return o.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(e).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(t)},Go=(t,o,l,r)=>{if("TD"===o.tagName||"TH"===o.tagName)L(l)&&W(r)?t.setStyle(o,l,r):t.setStyles(o,l);else if(o.children)for(let e=0;e<o.children.length;e++)Go(t,o.children[e],l,r)},Ko=(d,u,o,e)=>{let p=d.dom,b=e.getData(),g=J(b,(e,t)=>o[t]!==e);e.close(),d.undoManager.transact(()=>{if(u||(l=Fe(b.cols).getOr(1),e=Fe(b.rows).getOr(1),d.execCommand("mceInsertTable",!1,{rows:e,columns:l}),u=Yt(Ae(d),O(d)).bind(e=>N(e,O(d))).map(e=>e.dom).getOrDie()),0<y(g)){var e={border:w(g,"border"),bordercolor:w(g,"bordercolor"),cellpadding:w(g,"cellpadding")},t=d,o=u,l=b,r=t.dom,n={},a={},s=P(t),c=M(t),i=0===parseFloat(l.border);if(V(l.class)||"mce-no-match"===l.class||(n.class=l.class),a.height=_(l.height),s?a.width=_(l.width):r.getAttrib(o,"width")&&(n.width=(m=l.width)?m.replace(/px$/,""):""),s?(i?(n.border=0,a["border-width"]=""):(a["border-width"]=_(l.border),n.border=1),a["border-spacing"]=_(l.cellspacing)):(n.border=i?0:l.border,n.cellpadding=l.cellpadding,n.cellspacing=l.cellspacing),s&&o.children){let t={};if(i?t["border-width"]="":e.border&&(t["border-width"]=_(l.border)),e.cellpadding&&(t.padding=_(l.cellpadding)),c&&e.bordercolor&&(t["border-color"]=l.bordercolor),!(e=>{for(var t in e)if(K.call(e,t))return!1;return!0})(t))for(let e=0;e<o.children.length;e++)Go(r,o.children[e],t)}if(c){let e=l;a["background-color"]=e.backgroundcolor,a["border-color"]=e.bordercolor,a["border-style"]=e.borderstyle}r.setStyles(o,{...Dt(t),...a}),r.setAttribs(o,{...It(t),...n});var m=p.select("caption",u)[0];(m&&!b.caption||!m&&b.caption)&&d.execCommand("mceTableToggleCaption"),nt(d,u,b.align)}d.focus(),d.addVisual(),0<y(g)&&(i=!(s=w(g,"caption"))||1<y(g),at(d,u,{structure:s,style:i}))})},Jo=(e,t)=>{var o,l,r,n=e.dom;let a,s=((e,t)=>{let o=Dt(e),l=It(e),r=t?{borderstyle:d(o,"border-style").getOr(""),bordercolor:Mo(d(o,"border-color").getOr("")),backgroundcolor:Mo(d(o,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...l,...r,...(t=o["border-width"],P(e)&&t?{border:t}:d(l,"border").fold(()=>({}),e=>({border:e}))),...{...d(o,"border-spacing").or(d(l,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...d(o,"border-padding").or(d(l,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,M(e));t?(s.cols="1",s.rows="1",M(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor="")):(a=n.getParent(e.selection.getStart(),"table",e.getBody()))?s=(n=e,o=a,l=M(e),r=n.dom,i=P(n)?r.getStyle(o,"border-spacing")||r.getAttrib(o,"cellspacing"):r.getAttrib(o,"cellspacing")||r.getStyle(o,"border-spacing"),m=P(n)?rt(r,o,"padding")||r.getAttrib(o,"cellpadding"):r.getAttrib(o,"cellpadding")||rt(r,o,"padding"),{width:r.getStyle(o,"width")||r.getAttrib(o,"width"),height:r.getStyle(o,"height")||r.getAttrib(o,"height"),cellspacing:null!=i?i:"",cellpadding:null!=m?m:"",border:(i=r,m=o,c=I(T.fromDom(m),"border-width"),P(n)&&c.isSome()?c.getOr(""):i.getAttrib(m,"border")||rt(n.dom,m,"border-width")||rt(n.dom,m,"border")||""),caption:!!r.select("caption",o)[0],class:r.getAttrib(o,"class",""),align:Bo(n,o),...l?Po(o):{}}):M(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor="");var c=ho(Tt(e)),i=(c.isSome()&&s.class&&(s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")),{type:"grid",columns:2,items:Uo(e,c.getOr([]),t)}),m=M(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},To(e,"table")]}:{type:"panel",items:[i]};e.windowManager.open({title:"Table Properties",size:"normal",body:m,onSubmit:b(Ko,e,a,s),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s})},Qo=r=>{i({mceTableProps:b(Jo,r,!1),mceTableRowProps:b($o,r),mceTableCellProps:b(Ho,r),mceInsertTableDialog:b(Jo,r,!0)},(l,e)=>r.addCommand(e,()=>{var e,t,o=l;e=Ae(r),t=pe("table"),we((e,t)=>t(e),ve,e,t,void 0).forall(Te)&&o()}))},Xo=U,Yo=(e,t,o)=>{return t.length<=1?f.none():(l=e,e=o.firstSelectedSelector,o=o.lastSelectedSelector,zt(l,e,o).bind(r=>{let e=e=>A(l,e),t="thead,tfoot,tbody,table",o=a(r.first,t,e),n=a(r.last,t,e);return o.bind(l=>n.bind(e=>{var t,o;return A(l,e)?(e=r.table,t=r.first,o=r.last,e=Pt(e),Mt(e,t,o)):f.none()}))}).map(e=>({bounds:e,cells:t})));var l},Zo=r=>{let e=po(f.none()),o=po([]),l=f.none(),n=pe("caption"),t=t=>l.forall(e=>!e[t]),a=()=>Xt(Ae(r),O(r)).bind(o=>{return Pe(N(o),Xt((e=r,T.fromDom(e.selection.getEnd())),O(r)).bind(N),(e,t)=>A(e,t)?n(o)?f.some({element:t=o,mergable:f.none(),unmergable:f.none(),selection:[t]}):f.some((t=Zt(r),e=e,{element:o,mergable:Yo(e,t,Jt),unmergable:(e=>{let t=(e,t)=>D(e,t).exists(e=>1<parseInt(e,10));return 0<e.length&&le(e,e=>t(e,"rowspan")||t(e,"colspan"))?f.some(e):f.none()})(t),selection:Xo(t)})):f.none()).bind(U);var e}),s=a=>N(a.element).map(e=>{let o=Ze(e),t=Do(o,a).getOr([]),l=te(t,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:(n=o,a.mergable.filter(e=>Io(n,e.cells)).isSome()),unmergeable:(r=o,a.unmergable.filter(e=>Io(r,e)).isSome()),locked:l};var r,n}),c=()=>{e.set((t=>{let o,l=!1;return(...e)=>(l||(l=!0,o=t.apply(null,e)),o)})(a)()),l=e.get().bind(s),S(o.get(),G)},i=t=>(t(),o.set(o.get().concat([t])),()=>{o.set(C(o.get(),e=>e!==t))}),m=(t,o)=>i(()=>e.get().fold(()=>{t.setEnabled(!1)},e=>{t.setEnabled(!o(e)&&r.selection.isEditable())})),d=(t,o,l)=>i(()=>e.get().fold(()=>{t.setEnabled(!1),t.setActive(!1)},e=>{t.setEnabled(!o(e)&&r.selection.isEditable()),t.setActive(l(e))})),u=t=>l.exists(e=>e.locked[t]),p=(t,o)=>e=>d(e,e=>n(e.element),()=>r.queryCommandValue(t)===o),b=p("mceTableRowType","header"),g=p("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",c),{onSetupTable:e=>m(e,e=>!1),onSetupCellOrRow:e=>m(e,e=>n(e.element)),onSetupColumn:t=>e=>m(e,e=>n(e.element)||u(t)),onSetupPasteable:t=>e=>m(e,e=>n(e.element)||t().isNone()),onSetupPasteableColumn:(t,o)=>e=>m(e,e=>n(e.element)||t().isNone()||u(o)),onSetupMergeable:e=>m(e,e=>t("mergeable")),onSetupUnmergeable:e=>m(e,e=>t("unmergeable")),resetTargets:c,onSetupTableWithCaption:e=>d(e,h,e=>N(e.element,O(r)).exists(e=>{return t="caption",e=e=e,oe(e.dom.childNodes,e=>(e=T.fromDom(e),x(e,t))).map(T.fromDom).isSome();var t})),onSetupTableRowHeaders:b,onSetupTableColumnHeaders:g,targets:e.get}};var el=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let tl=t=>{var e=null!=(e=el.read())?e:[];return ne(e,e=>f.from(e.getType(t)))},ol=()=>tl("x-tinymce/dom-table-rows"),ll=()=>tl("x-tinymce/dom-table-columns"),rl=o=>e=>{let t=()=>{e.setEnabled(o.selection.isEditable())};return o.on("NodeChange",t),t(),()=>{o.off("NodeChange",t)}},nl=o=>e=>{let t=()=>{e.setEnabled(o.selection.isEditable())};return o.on("NodeChange",t),t(),()=>{o.off("NodeChange",t)}};t.add("table",c=>{var t,i=Zo(c);(r=c.options.register)("table_border_widths",{processor:"object[]",default:mt}),r("table_border_styles",{processor:"object[]",default:dt}),r("table_cell_advtab",{processor:"boolean",default:!0}),r("table_row_advtab",{processor:"boolean",default:!0}),r("table_advtab",{processor:"boolean",default:!0}),r("table_appearance_options",{processor:"boolean",default:!0}),r("table_grid",{processor:"boolean",default:!it.deviceType.isTouch()}),r("table_cell_class_list",{processor:"object[]",default:[]}),r("table_row_class_list",{processor:"object[]",default:[]}),r("table_class_list",{processor:"object[]",default:[]}),r("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),r("table_background_color_map",{processor:"object[]",default:[]}),r("table_border_color_map",{processor:"object[]",default:[]}),Qo(c);{var m=c,d=i;let o=e=>()=>m.execCommand(e),e=(e,t)=>!!m.queryCommandSupported(t.command)&&(m.ui.registry.addMenuItem(e,{...t,onAction:u(t.onAction)?t.onAction:o(t.command)}),!0),t=(e,t)=>{m.queryCommandSupported(t.command)&&m.ui.registry.addToggleMenuItem(e,{...t,onAction:u(t.onAction)?t.onAction:o(t.command)})},l=[e("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:d.onSetupCellOrRow}),e("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:d.onSetupCellOrRow}),e("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:d.onSetupCellOrRow}),e("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:d.onSetupCellOrRow}),e("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:d.onSetupCellOrRow}),e("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:d.onSetupCellOrRow}),e("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:d.onSetupPasteable(ol)}),e("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:d.onSetupPasteable(ol)})],r=[e("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:d.onSetupColumn("onFirst")}),e("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:d.onSetupColumn("onLast")}),e("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:d.onSetupColumn("onAny")}),e("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:d.onSetupColumn("onAny")}),e("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:d.onSetupColumn("onAny")}),e("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:d.onSetupPasteableColumn(ll,"onFirst")}),e("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:d.onSetupPasteableColumn(ll,"onLast")})],n=[e("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:d.onSetupCellOrRow}),e("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:d.onSetupMergeable}),e("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:d.onSetupUnmergeable})],a=(vt(m)?m.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:e=>{m.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})}}],onSetup:nl(m)}):m.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:nl(m)}),m.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:nl(m)}),e("tableprops",{text:"Table properties",onSetup:d.onSetupTable,command:"mceTableProps"}),e("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:d.onSetupTable,command:"mceTableDelete"}),v(l,!0)&&m.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:p("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),v(r,!0)&&m.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:p("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),v(n,!0)&&m.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:p("tablecellprops tablemergecells tablesplitcells")}),m.ui.registry.addContextMenu("table",{update:()=>(d.resetTargets(),d.targets().fold(p(""),e=>"caption"===R(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))}),B(Tt(m))),s=(0!==a.length&&m.queryCommandSupported("mceTableToggleClass")&&m.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>k(m,a,"tableclass",e=>m.execCommand("mceTableToggleClass",!1,e)),onSetup:d.onSetupTable}),B(St(m)));0!==s.length&&m.queryCommandSupported("mceTableCellToggleClass")&&m.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>k(m,s,"tablecellclass",e=>m.execCommand("mceTableCellToggleClass",!1,e)),onSetup:d.onSetupCellOrRow}),m.queryCommandSupported("mceTableApplyCellStyle")&&(m.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>k(m,to,"tablecellverticalalign",E(m,"vertical-align")),onSetup:d.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>k(m,gt(m),"tablecellborderwidth",E(m,"border-width")),onSetup:d.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>k(m,ht(m),"tablecellborderstyle",E(m,"border-style")),onSetup:d.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>yo(m,At(m),"background-color"),onSetup:d.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>yo(m,Rt(m),"border-color"),onSetup:d.onSetupCellOrRow})),t("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:d.onSetupTableWithCaption}),t("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(m),onSetup:d.onSetupTableRowHeaders}),t("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vo(m),onSetup:d.onSetupTableRowHeaders})}{var l=c,r=i,i,i;l.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:rl(l),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});let o=e=>()=>l.execCommand(e),e=(e,t)=>{l.queryCommandSupported(t.command)&&l.ui.registry.addButton(e,{...t,onAction:u(t.onAction)?t.onAction:o(t.command)})},t=(e,t)=>{l.queryCommandSupported(t.command)&&l.ui.registry.addToggleButton(e,{...t,onAction:u(t.onAction)?t.onAction:o(t.command)})};e("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:r.onSetupTable}),e("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:r.onSetupTable}),e("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:r.onSetupCellOrRow}),e("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:r.onSetupMergeable}),e("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:r.onSetupUnmergeable}),e("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:r.onSetupCellOrRow}),e("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:r.onSetupCellOrRow}),e("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:r.onSetupCellOrRow}),e("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:r.onSetupCellOrRow}),e("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:r.onSetupColumn("onFirst")}),e("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:r.onSetupColumn("onLast")}),e("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:r.onSetupColumn("onAny")}),e("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:r.onSetupCellOrRow}),e("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:r.onSetupCellOrRow}),e("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:r.onSetupPasteable(ol)}),e("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:r.onSetupPasteable(ol)}),e("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:r.onSetupColumn("onAny")}),e("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:r.onSetupColumn("onAny")}),e("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:r.onSetupPasteableColumn(ll,"onFirst")}),e("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:r.onSetupPasteableColumn(ll,"onLast")}),e("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:rl(l)}),0!==(i=B(Tt(l))).length&&l.queryCommandSupported("mceTableToggleClass")&&l.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:fo(l,i,"tableclass",e=>l.execCommand("mceTableToggleClass",!1,e)),onSetup:r.onSetupTable}),0!==(i=B(St(l))).length&&l.queryCommandSupported("mceTableCellToggleClass")&&l.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:fo(l,i,"tablecellclass",e=>l.execCommand("mceTableCellToggleClass",!1,e)),onSetup:r.onSetupCellOrRow}),l.queryCommandSupported("mceTableApplyCellStyle")&&(l.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:fo(l,to,"tablecellverticalalign",E(l,"vertical-align")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:fo(l,gt(l),"tablecellborderwidth",E(l,"border-width")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:fo(l,ht(l),"tablecellborderstyle",E(l,"border-style")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:e=>e(yo(l,At(l),"background-color")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:e=>e(yo(l,Rt(l),"border-color")),onSetup:r.onSetupCellOrRow})),t("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:r.onSetupTableWithCaption}),t("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(l),onSetup:r.onSetupTableRowHeaders}),t("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vo(l),onSetup:r.onSetupTableColumnHeaders})}t=c,0<(i=xt(t)).length&&t.ui.registry.addContextToolbar("table",{predicate:e=>t.dom.is(e,"table")&&t.getBody().contains(e)&&t.dom.isEditable(e.parentNode),items:i,scope:"node",position:"node"})})})();
(()=>{let t=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=n=>e=>{return r=typeof(e=e),(null===e?"null":"object"==r&&Array.isArray(e)?"array":"object"==r&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":r)===n;var t,r},n=t=>e=>typeof e===t,o=r("string"),c=r("object"),_=r("array"),F=n("boolean"),u=e=>!(null==e),s=n("function"),V=n("number"),j=()=>{},K=e=>()=>e,z=(e,t)=>e===t,Q=t=>e=>!t(e),W=K(!1);class m{constructor(e,t){this.tag=e,this.value=t}static some(e){return new m(!0,e)}static none(){return m.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?m.some(e(this.value)):m.none()}bind(e){return this.tag?e(this.value):m.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:m.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?m.some(e):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);let q=Array.prototype.slice,Z=Array.prototype.indexOf,G=Array.prototype.push,J=(e,t)=>(e=e,t=t,-1<Z.call(e,t)),X=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},l=(r,n)=>{let e=r.length,o=new Array(e);for(let t=0;t<e;t++){let e=r[t];o[t]=n(e,t)}return o},p=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},g=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];n(i,e)&&o.push(i)}return o},h=(e,r,n)=>(p(e,(e,t)=>{n=r(n,e,t)}),n),a=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var i=r[e];if(n(i,e))return m.some(i);if(o(i,e))break}return m.none()},d=(e,t)=>a(e,t,W),Y=(e,t)=>{var r=l(e,t),n=[];for(let e=0,t=r.length;e<t;++e){if(!_(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);G.apply(n,r[e])}return n},ee=e=>{e=q.call(e,0);return e.reverse(),e},te=(e,t)=>0<=t&&t<e.length?m.some(e[t]):m.none(),f=e=>te(e,0),re=e=>te(e,e.length-1),ne=(r,n)=>{let o=[],i=s(n)?t=>X(o,e=>n(e,t)):e=>J(o,e);for(let e=0,t=r.length;e<t;e++){var a=r[e];i(a)||o.push(a)}return o},oe=(e,t,r=z)=>e.exists(e=>r(e,t)),ie=(e,t,r)=>e.isSome()&&t.isSome()?m.some(r(e.getOrDie(),t.getOrDie())):m.none(),ae=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},se=(t,e)=>{e=(e||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length){let e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return ae(e.childNodes[0])},le=(e,t)=>{t=(t||document).createElement(e);return ae(t)},v=ae,de=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{let e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},me=(e,t)=>e.dom===t.dom,ue=de,ce="undefined"!=typeof window?window:Function("return this;")(),pe=(e,r)=>{{var n=e.split(".");let t=null!=r?r:ce;for(let e=0;e<n.length&&null!=t;++e)t=t[n[e]];return t}},ge=Object.getPrototypeOf,he=e=>{var t=pe("ownerDocument.defaultView",e);return c(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=pe("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ge(e).constructor.name))},y=e=>e.dom.nodeName.toLowerCase(),fe=e=>e.dom.nodeType,ve=t=>e=>fe(e)===t,ye=e=>Ce(e)&&he(e.dom),Ce=ve(1),be=ve(3),Ne=ve(11),Se=t=>e=>Ce(e)&&y(e)===t,Le=e=>m.from(e.dom.parentNode).map(v),C=e=>l(e.dom.childNodes,v),Oe=(e,t)=>{e=e.dom.childNodes;return m.from(e[t]).map(v)},Ae=e=>Oe(e,0),Te=e=>Oe(e,e.dom.childNodes.length-1),Ee=e=>v(e.dom.host),ke=e=>{let t=be(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return e=e=v(t),e=v(e.dom.getRootNode()),(Ne(n=e)&&u(n.dom.host)?m.some(e):m.none()).fold(()=>r.body.contains(t),(o=ke,i=Ee,e=>o(i(e))));var n,o,i};var we=(e,t,r,n,o)=>e(r,n)?m.some(r):s(o)&&o(r)?m.none():t(r,n,o);let xe=(e,t,r)=>{let n=e.dom;for(var o=s(r)?r:W;n.parentNode;){n=n.parentNode;let e=v(n);if(t(e))return m.some(e);if(o(e))break}return m.none()},De=(e,t,r)=>we((e,t)=>t(e),xe,e,t,r),Be=(e,t,r)=>xe(e,e=>de(e,t),r),Me=(t,r)=>{Le(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},i=(e,t)=>{e.dom.appendChild(t.dom)},Pe=(t,e)=>{p(e,e=>{i(t,e)})},Ie=e=>{e.dom.textContent="",p(C(e),e=>{Re(e)})},Re=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)};var Ue=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),$e=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),He=tinymce.util.Tools.resolve("tinymce.util.VK");let _e=e=>l(e,v),Fe=Object.keys,Ve=(r,n)=>{var o=Fe(r);for(let e=0,t=o.length;e<t;e++){var i=o[e];n(r[i],i)}},b=(e,t)=>{let n=e.dom;Ve(t,(e,t)=>{var r=n;if(!(o(e)||F(e)||V(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(t,e+"")})},je=e=>h(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),Ke=e=>(e=e,v(e.dom.cloneNode(!0))),ze=(e,t)=>{var r,t=((e,t)=>{t=le(t),e=je(e);return b(t,e),t})(e,t),n=t,o=(o=r=e,m.from(o.dom.nextSibling).map(v).fold(()=>{Le(r).each(e=>{i(e,n)})},e=>{Me(e,n)}),C(e));return Pe(t,o),Re(e),t};var Qe,We=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),N=tinymce.util.Tools.resolve("tinymce.util.Tools");let qe=t=>e=>u(e)&&e.nodeName.toLowerCase()===t,e=t=>e=>u(e)&&t.test(e.nodeName),S=e=>u(e)&&3===e.nodeType,L=e=>u(e)&&1===e.nodeType,O=e(/^(OL|UL|DL)$/),Ze=e(/^(OL|UL)$/),Ge=qe("ol"),Je=e(/^(LI|DT|DD)$/),Xe=e(/^(DT|DD)$/),Ye=e(/^(TH|TD)$/),A=qe("br"),et=(e,t)=>u(t)&&t.nodeName in e.schema.getTextBlockElements(),tt=(e,t)=>u(e)&&e.nodeName in t,rt=(e,t)=>u(t)&&t.nodeName in e.schema.getVoidElements(),T=(e,t,r)=>{var n=e.isEmpty(t);return!(r&&0<e.select("span[data-mce-type=bookmark]",t).length)&&n},nt=(e,t)=>e.isChildOf(t,e.getRoot()),ot=t=>e=>e.options.get(t),it=ot("lists_indent_on_tab"),at=ot("forced_root_block"),st=ot("forced_root_block_attrs"),lt=(e,t,r={})=>{var n=e.dom,o=e.schema.getBlockElements(),i=n.createFragment(),a=at(e),s=st(e);let l,d,m=!1;for(d=n.create(a,{...s,...r.style?{style:r.style}:{}}),tt(t.firstChild,o)||i.appendChild(d);l=t.firstChild;){let e=l.nodeName;m||"SPAN"===e&&"bookmark"===l.getAttribute("data-mce-type")||(m=!0),tt(l,o)?(i.appendChild(l),d=null):(d||(d=n.create(a,s),i.appendChild(d)),d.appendChild(l))}return!m&&d&&d.appendChild(n.create("br",{"data-mce-bogus":"1"})),i},E=We.DOM,dt=Se("dd"),mt=Se("dt"),ut=(s,l)=>{var e;dt(l)?ze(l,"dt"):mt(l)&&(e=l,m.from(e.dom.parentElement).map(v).each(n=>{{var o=s,i=(n=n.dom,l.dom);let e=E.select('span[data-mce-type="bookmark"]',n),t=lt(o,i),r=E.createRng();r.setStartAfter(i),r.setEndAfter(n);var a=r.extractContents();for(let e=a.firstChild;e;e=e.firstChild)if("LI"===e.nodeName&&o.dom.isEmpty(e)){E.remove(e);break}if(o.dom.isEmpty(a)||E.insertAfter(a,n),E.insertAfter(t,n),(a=i.parentElement)&&T(o.dom,a)){let t=a.parentNode;t&&N.each(e,e=>{t.insertBefore(e,i.parentNode)}),E.remove(a)}E.remove(i),T(o.dom,n)&&E.remove(n)}}))},ct=e=>{mt(e)&&ze(e,"dd")},pt=(e,t)=>{var r;return S(e)?{container:e,offset:t}:(r=Ue.getNode(e,t),S(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&S(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&S(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t})},gt=e=>{var t=e.cloneRange(),r=pt(e.startContainer,e.startOffset),r=(t.setStart(r.container,r.offset),pt(e.endContainer,e.endOffset));return t.setEnd(r.container,r.offset),t},ht=["OL","UL","DL"],ft=ht.join(","),k=(e,t)=>{t=t||e.selection.getStart(!0);return e.dom.getParent(t,ft,w(e,t))},vt=e=>{var t,r=e.selection.getSelectedBlocks();return g((t=e,e=N.map(r,e=>t.dom.getParent(e,"li,dd,dt",w(t,e))||e),ne(e)),Je)},yt=(e,t)=>{t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},w=(n,e)=>{e=n.dom.getParents(e,n.dom.isBlock);return d(e,e=>{return e.nodeName.toLowerCase()!==at(n)&&(t=n.schema,!O(r=e))&&!Je(r)&&X(ht,e=>t.isValidChild(r.nodeName,e));var t,r}).getOr(n.getBody())},Ct=(e,t)=>{e=e.dom.getParents(t,"ol,ul",w(e,t));return re(e)},bt=(t,e)=>{e=l(e,e=>Ct(t,e).getOr(e));return ne(e)},x=e=>/\btox\-/.test(e.className),Nt=(e,t)=>a(e,O,Ye).exists(e=>e.nodeName===t&&!x(e)),St=(e,t)=>null!==t&&!e.dom.isEditable(t),D=(e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return St(e,t)||!e.selection.isEditable()},Lt=(e,t)=>{var r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},Ot=(e,t)=>{let r=(t||document).createDocumentFragment();return p(e,e=>{r.appendChild(e.dom)}),v(r)},B=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),At=(Qe=/^\s+|\s+$/g,e=>e.replace(Qe,"")),Tt=(e,t,r)=>{var n,e=e.dom;if(!o(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);void 0!==(n=e).style&&s(n.style.getPropertyValue)&&e.style.setProperty(t,r)},M=e=>ue(e,"OL,UL"),Et=e=>Ae(e).exists(M),P=e=>"listAttributes"in e,kt=e=>"isComment"in e,wt=e=>0<e.depth,xt=e=>e.isSelected,Dt=e=>{var t=C(e),e=Te(e).exists(M)?t.slice(0,-1):t;return l(e,Ke)},Bt=(e,t)=>{i(e.item,t.list)},Mt=(e,t)=>{t={list:le(t,e),item:le("li",e)};return i(t.list,t.item),t},Pt=(n,e,o)=>{e=e.slice(0,o.depth);return re(e).each(t=>{if(P(o)){var e=((e,t,r)=>{e=le("li",e);return b(e,t),Pe(e,r),e})(n,o.itemAttributes,o.content);r=t,e=e,i(r.list,e),r.item=e,r=t,e=o,y(r.list)!==e.listType&&(r.list=ze(r.list,e.listType)),b(r.list,e.listAttributes)}else if("isFragment"in o)Pe(t.item,o.content);else{let e=se(`<!--${o.content}-->`);i(t.list,e)}var r}),e},It=(l,e)=>{let d=m.none(),t=h(e,(e,t,r)=>{{if(kt(t))return 0===r?(d=m.some(t),e):Pt(l,e,t);if(t.depth>e.length){r=e;var n=t,o=((t,r,n)=>{var o=[];for(let e=0;e<n;e++)o.push(Mt(t,P(r)?r.listType:r.parentListType));return o})(l,n,n.depth-r.length),i=o;for(let e=1;e<i.length;e++)Bt(i[e-1],i[e]);var a=o,s=n;for(let e=0;e<a.length-1;e++)Tt(a[e].item,"list-style-type","none");return re(a).each(e=>{P(s)&&(b(e.list,s.listAttributes),b(e.item,s.itemAttributes)),Pe(e.item,s.content)}),n=o,ie(re(r),f(n),Bt),r.concat(o)}return Pt(l,e,t)}},[]);return d.each(e=>{let n=se(`<!--${e.content}-->`);f(t).each(e=>{var t,r;t=e.list,r=n,Ae(t).fold(()=>{i(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})})}),f(t).map(e=>e.list)},Rt=t=>(p(t,(i,e)=>{((e,t)=>{let r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return a(ee(e.slice(0,t)),n,o).orThunk(()=>a(e.slice(t+1),n,o))})(t,e).fold(()=>{var e,r,n,o,t;i.dirty&&P(i)&&((e=i).listAttributes=(t={},e=e.listAttributes,n=(e,t)=>"start"!==t,r=t,o=j,Ve(e,(e,t)=>{(n(e,t)?(e,t)=>{r[t]=e}:o)(e,t)}),t))},e=>{var t;P(t=i)&&P(e)&&(t.listType=e.listType,t.listAttributes={...e.listAttributes})})}),t),Ut=(t,r,n,o)=>{if(8===fe(e=o)||"#comment"===y(e))return[{depth:t+1,content:null!=(e=o.dom.nodeValue)?e:"",dirty:!1,isSelected:!1,isComment:!0}];r.each(e=>{me(e.start,o)&&n.set(!0)});i=o,a=t,s=n.get();var i,a,s,e=Le(i).filter(Ce).map(e=>({depth:a,dirty:!1,isSelected:s,content:Dt(i),itemAttributes:je(i),listAttributes:je(e),listType:y(e),isInPreviousLi:!1})),l=(r.each(e=>{me(e.end,o)&&n.set(!1)}),Te(o).filter(M).map(e=>Ht(t,r,n,e)).getOr([]));return e.toArray().concat(l)},$t=(o,i,a,t)=>Ae(t).filter(M).fold(()=>Ut(o,i,a,t),n=>{var e=h(C(t),(t,r,e)=>{if(0===e)return t;if(ue(r,"LI"))return t.concat(Ut(o,i,a,r));{let e={isFragment:!0,depth:o,content:[r],isSelected:!1,dirty:!1,parentListType:y(n)};return t.concat(e)}},[]);return Ht(o,i,a,n).concat(e)}),Ht=(t,r,n,e)=>Y(C(e),e=>(M(e)?Ht:$t)(t+1,r,n,e)),_t=(i,e,a)=>{e=((e,t)=>{let r=(()=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return l(e,e=>({sourceList:e,entries:Ht(0,t,r,e)}))})(e,(e=>{e=l(vt(e),v);return ie(d(e,Q(Et)),d(ee(e),Q(Et)),(e,t)=>({start:e,end:t}))})(i));p(e,e=>{o=e.entries,r=a,p(g(o,xt),e=>{var t=e;switch(r){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0}),t=i,o=e.entries;var r,t,n,o=Y(((o,i)=>{if(0===o.length)return[];{let r=i(o[0]);var a=[];let n=[];for(let e=0,t=o.length;e<t;e++){var s=o[e],l=i(s);l!==r&&(a.push(n),n=[]),r=l,n.push(s)}return 0!==n.length&&a.push(n),a}})(o,wt),e=>(f(e).exists(wt)?(e,t)=>{t=Rt(t);return It(e.contentDocument,t).toArray()}:(r,e)=>{e=Rt(e);return l(e,e=>{var t=kt(e)?Ot([se(`<!--${e.content}-->`)]):Ot(e.content),e=P(e)?e.itemAttributes:{};return v(lt(r,t.dom,e))})})(t,e));p(o,e=>{B(i,"Indent"===a?"IndentList":"OutdentList",e.dom)}),n=e.sourceList,p(o,e=>{Me(n,e)}),Re(e.sourceList)})},Ft=(e,t)=>{var r,n,o=_e((e=>{n=e,o=Ct(n,n.selection.getStart()),n=g(n.selection.getSelectedBlocks(),Ze);let t=o.toArray().concat(n),r=(n=(o=e).selection.getStart(),o.dom.getParents(n,"ol,ul",w(o,n)));var n,o;return d(r,e=>(e=v(e),Le(e).exists(e=>Je(e.dom)&&Ae(e).exists(e=>!O(e.dom))&&Te(e).exists(e=>!O(e.dom))))).fold(()=>bt(e,t),e=>[e])})(e)),i=_e((i=e,g(vt(i),Xe)));let a=!1;return(o.length||i.length)&&(r=e.selection.getBookmark(),_t(e,o,t),n=e,o=t,t=i,p(t,"Indent"===o?ct:e=>ut(n,e)),e.selection.moveToBookmark(r),e.selection.setRng(gt(e.selection.getRng())),e.nodeChanged(),a=!0),a},Vt=(e,t)=>{return r=e,n=k(r),!(St(r,n)||!r.selection.isEditable())&&Ft(e,t);var r,n},jt=e=>Vt(e,"Indent"),Kt=e=>Vt(e,"Outdent"),zt=e=>Vt(e,"Flatten"),Qt=e=>"\ufeff"===e;var Wt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let I=We.DOM,R=e=>{let o={},t=t=>{let r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(L(r)){let e=I.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(n=Math.min(n,r.childNodes.length-1),t?r.insertBefore(e,r.childNodes[n]):I.insertAfter(e,r.childNodes[n])):r.appendChild(e),r=e,n=0}o[t?"startContainer":"endContainer"]=r,o[t?"startOffset":"endOffset"]=n};return t(!0),e.collapsed||t(),o},U=n=>{var e=e=>{let t=n[e?"startContainer":"endContainer"],r=n[e?"startOffset":"endOffset"];if(t){if(L(t)&&t.parentNode){let e=t;r=(e=>{let t,r=null==(t=e.parentNode)?void 0:t.firstChild,n=0;for(;r;){if(r===e)return n;L(r)&&"bookmark"===r.getAttribute("data-mce-type")||n++,r=r.nextSibling}return-1})(t),t=t.parentNode,I.remove(e),!t.hasChildNodes()&&I.isBlock(t)&&t.appendChild(I.create("br"))}n[e?"startContainer":"endContainer"]=t,n[e?"startOffset":"endOffset"]=r}},e=(e(!0),e(),I.createRng());return e.setStart(n.startContainer,n.startOffset),n.endContainer&&e.setEnd(n.endContainer,n.endOffset),gt(e)},$=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},qt=(r,e)=>{N.each(e,(e,t)=>{r.setAttribute(t,e)})},H=(e,t,r)=>{var n,o=e,i=r;i=i["list-style-type"]||null,o.setStyle(t,"list-style-type",i),o=e,i=t,n=r,qt(i,n["list-attributes"]),N.each(o.select("li",i),e=>{qt(e,n["list-item-attributes"])})},Zt=(e,t)=>u(t)&&!tt(t,e.schema.getBlockElements()),Gt=(a,e,t,s)=>{let r=e[t?"startContainer":"endContainer"];e=e[t?"startOffset":"endOffset"],L(r)&&(r=r.childNodes[Math.min(e,r.childNodes.length-1)]||r),!t&&A(r.nextSibling)&&(r=r.nextSibling),e=(e,t)=>{for(var r,n,o=new $e(e,(e=>{for(;!a.dom.isBlock(e)&&e.parentNode&&s!==e;)e=e.parentNode;return e})(e)),i=t?"next":"prev";n=o[i]();)if(!rt(a,n)&&!Qt(n.textContent)&&0!==(null==(r=n.textContent)?void 0:r.length))return m.some(n);return m.none()};if(t&&S(r))if(Qt(r.textContent))r=e(r,!1).getOr(r);else for(null!==r.parentNode&&Zt(a,r.parentNode)&&(r=r.parentNode);null!==r.previousSibling&&(Zt(a,r.previousSibling)||S(r.previousSibling));)r=r.previousSibling;if(!t&&S(r))if(Qt(r.textContent))r=e(r,!0).getOr(r);else for(null!==r.parentNode&&Zt(a,r.parentNode)&&(r=r.parentNode);null!==r.nextSibling&&(Zt(a,r.nextSibling)||S(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==s;){let e=r.parentNode;if(et(a,r))return r;if(/^(TD|TH)$/.test(e.nodeName))return r;r=e}return r},Jt=(a,s,l)=>{var e,t,r,n,o,i,d=a.selection.getRng();let m="LI",u=w(a,(e=d,n=(o=a).selection.getStart(!0),o=Gt(o,e,!0,o.getBody()),o=v(o),i=v(e.commonAncestorContainer),t=me,r=[i],i=(...e)=>{e=r.concat(e);return t.apply(null,e)},xe(o,i,void 0).isSome()?e.commonAncestorContainer:n)),c=a.dom;"false"!==c.getContentEditable(a.selection.getNode())&&("DL"===(s=s.toUpperCase())&&(m="DT"),o=R(d),i=g(((r,e,n)=>{let o=[],i=r.dom,t=Gt(r,e,!0,n),a=Gt(r,e,!1,n),s;var l=[];for(let e=t;e&&(l.push(e),e!==a);e=e.nextSibling);return N.each(l,e=>{var t;et(r,e)?(o.push(e),s=null):i.isBlock(e)||A(e)?(A(e)&&i.remove(e),s=null):(t=e.nextSibling,Wt.isBookmarkNode(e)&&(O(t)||et(r,t)||!t&&e.parentNode===n)?s=null:(s||(s=i.create("p"),null!=(t=e.parentNode)&&t.insertBefore(s,e),o.push(s)),s.appendChild(e)))}),o})(a,d,u),a.dom.isEditable),N.each(i,e=>{let t;var r,n,o=e.previousSibling,i=e.parentNode;Je(i)||(o&&O(o)&&o.nodeName===s&&((e,t)=>{e=e.getStyle(o,"list-style-type"),t=t?t["list-style-type"]:"";return e===(null===t?"":t)})(c,l)?(t=o,e=c.rename(e,m),o.appendChild(e)):(t=c.create(s),i.insertBefore(t,e),t.appendChild(e),e=c.rename(e,m)),r=c,n=e,N.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],e=>r.setStyle(n,e,"")),H(c,t,l),Yt(a.dom,t))}),a.selection.setRng(U(o)))},Xt=(e,t,r)=>{return n=t,o=r,O(n)&&n.nodeName===(null==o?void 0:o.nodeName)&&(n=r,(o=e).getStyle(t,"list-style-type",!0)===o.getStyle(n,"list-style-type",!0))&&t.className===r.className;var n,o},Yt=(e,t)=>{let r,n=t.nextSibling;if(Xt(e,t,n)){for(var o=n;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,Xt(e,t,n)){for(var i=n;r=i.lastChild;)t.insertBefore(r,t.firstChild);e.remove(i)}},er=(e,t,r,n)=>{var o;t.nodeName!==r?(o=e.dom.rename(t,r),H(e.dom,o,n),B(e,$(r),o)):(H(e.dom,t,n),B(e,$(r),t))},tr=(e,n,t,r)=>{var o;n.classList.forEach((e,t,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length)&&n.removeAttribute("class")}),n.nodeName!==t?(o=e.dom.rename(n,t),H(e.dom,o,r),B(e,$(t),o)):(H(e.dom,n,r),B(e,$(t),n))},rr=e=>"list-style-type"in e,nr=(e,t,r)=>{var n=k(e);if(!D(e,n)){var o,i=(e=>{let t=k(e),r=e.selection.getSelectedBlocks();return e=t,n=r,u(e)&&1===n.length&&n[0]===e?(n=t,g(n.querySelectorAll(ft),O)):g(r,e=>O(e)&&t!==e);var n})(e),r=c(r)?r:{};if(0<i.length){var a=e;var s=n;var l=t;var d=r;var m=O(s);if(!m||s.nodeName!==l||rr(d)||x(s)){Jt(a,l,d);let e=R(a.selection.getRng()),t=m?[s,...i]:i,r=m&&x(s)?tr:er;N.each(t,e=>{r(a,e,l,d)}),a.selection.setRng(U(e))}else zt(a)}else i=t,m=r,(o=n)!==(s=e).getBody()&&(o?o.nodeName!==i||rr(m)||x(o)?(t=R(s.selection.getRng()),x(o)&&o.classList.forEach((e,t,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length)&&o.removeAttribute("class")}),H(s.dom,o,m),r=s.dom.rename(o,i),Yt(s.dom,r),s.selection.setRng(U(t)),Jt(s,i,m),B(s,$(i),r)):zt(s):(Jt(s,i,m),B(s,$(i),o)))}},or=We.DOM,ir=(o,e)=>{e=N.grep(o.select("ol,ul",e));N.each(e,t=>{var e,r=o,n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t&&((e=n.previousSibling)&&"LI"===e.nodeName?(e.appendChild(t),T(r,n)&&or.remove(n)):or.setStyle(n,"listStyleType","none")),O(n)){let e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})},ar=(e,t,r,n)=>{let o=t.startContainer;t=t.startOffset;if(S(o)&&(r?t<o.data.length:0<t))return o;for(var i=e.schema.getNonEmptyElements(),t=(L(o)&&(o=Ue.getNode(o,t)),new $e(o,n)),a=(r&&(n=e.dom,e=o,!!A(e))&&n.isBlock(e.nextSibling)&&!A(e.previousSibling)&&t.next(),(r?t.next:t.prev2).bind(t));o=a();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(S(o)&&0<o.data.length)return o}return null},sr=(e,t)=>{t=t.childNodes;return 1===t.length&&!O(t[0])&&e.isBlock(t[0])},lr=e=>m.from(e).map(v).filter(ye).exists(e=>{return t=e,(ke(t)?t.dom.isContentEditable:(t=t,we((e,t)=>de(e,t),Be,t,"[contenteditable]",void 0).fold(K(!1),e=>"true"===e.dom.contentEditable)))&&!J(["details"],y(e));var t}),dr=(e,t,r)=>{var n,o,i=sr(e,r)?r.firstChild:r;if(r=e,o=t,sr(r,o)&&lr(o.firstChild)&&r.remove(o.firstChild,!0),!T(e,t,!0))for(;n=t.firstChild;)i.appendChild(n)},mr=(t,e,r)=>{let n;var o=e.parentNode;nt(t,e)&&nt(t,r)&&(O(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&A(o.previousSibling)&&t.remove(o.previousSibling),(o=r.lastChild)&&A(o)&&e.hasChildNodes()&&t.remove(o),T(t,r,!0)&&Ie(v(r)),dr(t,e,r),n&&r.appendChild(n),o=((e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)})(v(r),v(e))?t.getParents(e,O,r):[],t.remove(e),p(o,e=>{T(t,e)&&e!==t.getRoot()&&t.remove(e)}))},ur=(m,u)=>{let r=m.dom,n=m.selection,e=n.getStart(),o=yt(m,e),c=r.getParent(n.getStart(),"LI",o);if(c){let e=c.parentElement;if(e===m.getBody()&&T(r,e))return!0;let l=gt(n.getRng()),d=r.getParent(ar(m,l,u,o),"LI",o),t=d&&(u?r.isChildOf(c,d):r.isChildOf(d,c));if(d&&d!==c&&!t)return m.undoManager.transact(()=>{var e,t,r,n;{var o,i,a,s;u?(e=m,o=l,a=d,s=c,(i=e.dom).isEmpty(s)?(t=e,r=a,n=s,Ie(v(n)),mr(t.dom,r,n),t.selection.setCursorLocation(n,0)):(r=R(o),mr(i,a,s),e.selection.setRng(U(r)))):(null==(n=(t=c).parentNode)?void 0:n.firstChild)===t?Kt(m):(o=m,i=l,a=c,s=d,i=R(i),mr(o.dom,a,s),a=U(i),o.selection.setRng(a))}}),!0;if(t&&!u&&d!==c)return m.undoManager.transact(()=>{var e,t;l.commonAncestorContainer.parentElement&&(e=R(l),t=l.commonAncestorContainer.parentElement,dr(r,l.commonAncestorContainer.parentElement,d),t.remove(),t=U(e),m.selection.setRng(t))}),!0;if(!d&&!u&&0===l.startOffset&&0===l.endOffset)return m.undoManager.transact(()=>{zt(m)}),!0}return!1},cr=e=>{var t=e.selection.getStart(),r=yt(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||0<vt(e).length},pr=(e,t)=>{var r,n=e.selection;return!D(e,n.getNode())&&(n.isCollapsed()?(n=e,t=t,ur(n,t)||((i,a)=>{let s=i.dom,e=i.selection.getStart(),l=yt(i,e),d=s.getParent(e,s.isBlock,l);if(d&&s.isEmpty(d,void 0,{checkRootAsContent:!0})){let e=gt(i.selection.getRng()),o=s.getParent(ar(i,e,a,l),"LI",l);if(o)return t=e=>J(["td","th","caption"],y(e)),r=e=>e.dom===l,[t,r,n=z]=[De(v(o),t,r),De(v(e.startContainer),t,r),me],!!ie(t,r,n).getOr(t.isNone()&&r.isNone())&&(i.undoManager.transact(()=>{var e=o.parentNode,t=s,r=d,n=l;n=t.getParent(r.parentNode,t.isBlock,n),t.remove(r),n&&t.isEmpty(n)&&t.remove(n),Yt(s,e),i.selection.select(o,!0),i.selection.collapse(a)}),!0)}var t,r,n;return!1})(n,t)):(r=e,!!cr(r)&&(r.undoManager.transact(()=>{let e=!0;var t=()=>e=!1;r.on("input",t),r.execCommand("Delete"),r.off("input",t),e&&r.dispatch("input"),ir(r.dom,r.getBody())}),!0)))},gr=e=>{e=ee(At(e).split("")),e=l(e,(e,t)=>{e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e});return h(e,(e,t)=>e+t,0)},hr=e=>{var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),hr(e)+String.fromCharCode("A".charCodeAt(0)+t))},fr=(t,r)=>()=>{var e=k(t);return u(e)&&e.nodeName===r},vr=n=>{n.addCommand("mceListProps",()=>{var t,e,r;t=n,r=k(t),Ge(r)&&!D(t,r)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(r={start:t.dom.getAttrib(r,"start","1"),listStyleType:m.from(t.dom.getStyle(r,"list-style-type"))},e=parseInt(r.start,10),oe(r.listStyleType,"upper-alpha")?hr(e):oe(r.listStyleType,"lower-alpha")?hr(e).toLowerCase():r.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:e=>{(e=>{switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return m.some({listStyleType:m.none(),start:e});case 0:return m.some({listStyleType:m.some("upper-alpha"),start:gr(e).toString()});case 1:return m.some({listStyleType:m.some("lower-alpha"),start:gr(e).toString()});case 3:return m.some({listStyleType:m.none(),start:""});case 4:return m.none()}var t})(e.getData().start).each(e=>{t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})})};var yr=tinymce.util.Tools.resolve("tinymce.html.Node");let Cr=e=>3===e.type,br=e=>0===e.length,Nr=n=>{let r=(e,t)=>{let r=yr.create("li");p(e,e=>r.append(e)),t?n.insert(r,t,!0):n.append(r)},e=h(n.children(),(e,t)=>Cr(t)?[...e,t]:br(e)||Cr(t)?e:(r(e,t),[]),[]);br(e)||r(e)},Sr=(r,n)=>t=>(t.setEnabled(r.selection.isEditable()),Lt(r,e=>{t.setActive(Nt(e.parents,n)),t.setEnabled(!D(r,e.element)&&r.selection.isEditable())}));t.add("lists",e=>{return(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0}),(u=e).on("PreInit",()=>{var e=u.parser;e.addNodeFilter("ul,ol",e=>p(e,Nr))}),e.hasPlugin("rtc",!0)?vr(e):(l=e,it(l)&&(m=l).on("keydown",e=>{e.keyCode!==He.TAB||He.metaKeyPressed(e)||m.undoManager.transact(()=>{(e.shiftKey?Kt:jt)(m)&&e.preventDefault()})}),(d=l).on("ExecCommand",e=>{e=e.command.toLowerCase();"delete"!==e&&"forwarddelete"!==e||!cr(d)||ir(d.dom,d.getBody())}),d.on("keydown",e=>{e.keyCode===He.BACKSPACE?pr(d,!1)&&e.preventDefault():e.keyCode===He.DELETE&&pr(d,!0)&&e.preventDefault()}),(s=e).on("BeforeExecCommand",e=>{e=e.command.toLowerCase();"indent"===e?jt(s):"outdent"===e&&Kt(s)}),s.addCommand("InsertUnorderedList",(e,t)=>{nr(s,"UL",t)}),s.addCommand("InsertOrderedList",(e,t)=>{nr(s,"OL",t)}),s.addCommand("InsertDefinitionList",(e,t)=>{nr(s,"DL",t)}),s.addCommand("RemoveList",()=>{zt(s)}),vr(s),s.addCommand("mceListUpdate",(e,t)=>{if(c(t)){var n=s,o=t;let r=k(n);null===r||D(n,r)||n.undoManager.transact(()=>{c(o.styles)&&n.dom.setStyles(r,o.styles),c(o.attrs)&&Ve(o.attrs,(e,t)=>n.dom.setAttrib(r,t,e))})}}),s.addQueryStateHandler("InsertUnorderedList",fr(s,"UL")),s.addQueryStateHandler("InsertOrderedList",fr(s,"OL")),s.addQueryStateHandler("InsertDefinitionList",fr(s,"DL"))),l=e=>()=>a.execCommand(e),(a=e).hasPlugin("advlist")||(a.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:l("InsertOrderedList"),onSetup:Sr(a,"OL")}),a.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:l("InsertUnorderedList"),onSetup:Sr(a,"UL")})),i={text:"List properties...",icon:"ordered-list",onAction:()=>r.execCommand("mceListProps"),onSetup:(o="OL",t=>Lt(n,e=>t.setEnabled(Nt(e.parents,o)&&!D(n,e.element))))},(n=r=e).ui.registry.addMenuItem("listprops",i),r.ui.registry.addContextMenu("lists",{update:e=>{e=k(r,e);return Ge(e)?["listprops"]:[]}}),t=e,{backspaceDelete:e=>{pr(t,e)}};var t,r,n,o,i,a,s,l,d,m,u})})();
(()=>{let B=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=r=>e=>{return n=typeof(e=e),(null===e?"null":"object"==n&&Array.isArray(e)?"array":"object"==n&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":n)===r;var t,n},t=t=>e=>typeof e===t,o=e("string"),l=e("object"),a=e("array"),I=e=>null===e,i=t("boolean"),r=e=>!(null==e),s=t("function"),u=(n,r)=>{if(a(n)){for(let e=0,t=n.length;e<t;++e)if(!r(n[e]))return!1;return!0}return!1},m=()=>{},K=(e,t)=>e===t;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return r(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);let j=Array.prototype.indexOf,U=Array.prototype.push,p=n=>{var r=[];for(let e=0,t=n.length;e<t;++e){if(!a(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);U.apply(r,n[e])}return r},f=(t,n)=>{for(let e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return h.none()},v=(e,t,n=K)=>e.exists(e=>n(e,t)),c=(e,t)=>e?h.some(t):h.none(),n=t=>e=>e.options.get(t),q=n("link_assume_external_targets"),F=n("link_context_toolbar"),V=n("link_list"),k=n("link_default_target"),$=n("link_default_protocol"),z=n("link_target_list"),G=n("link_rel_list"),H=n("link_class_list"),J=n("link_title"),W=n("allow_unsafe_link_target"),Q=n("link_quicklink"),X=n("link_attributes_postprocess"),Y=Object.keys,Z=Object.hasOwnProperty,g=(e,t)=>Z.call(e,t);var ee=tinymce.util.Tools.resolve("tinymce.util.URI"),te=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");let ne=e=>r(e)&&"a"===e.nodeName.toLowerCase(),b=e=>ne(e)&&!!x(e),re=(t,n)=>{if(t.collapsed)return[];{var t=t.cloneContents(),r=t.firstChild,l=new te(r,t),o=[];let e=r;for(;n(e)&&o.push(e),e=l.next(););return o}},le=e=>/^\w+:/i.test(e),x=e=>{var t;return null!=(t=null!=(t=e.getAttribute("data-mce-href"))?t:e.getAttribute("href"))?t:""},oe=(e,t)=>{let n=["noopener"],r=e?e.split(/\s+/):[],l=e=>e.filter(e=>-1===d.inArray(n,e)),o=t?(e=r,0<(e=l(r)).length?e.concat(n):n):l(r);return 0<o.length?d.trim(o.sort().join(" ")):""},y=(e,t)=>(t=t||w(e.selection.getRng())[0]||e.selection.getNode(),O(t)?h.from(e.dom.select("a[href]",t)[0]):h.from(e.dom.getParent(t,"a[href]"))),_=(e,t)=>y(e,t).isSome(),ae=(e,t)=>t.fold(()=>e.getContent({format:"text"}),e=>e.innerText||e.textContent||"").replace(/\uFEFF/g,""),w=e=>re(e,b),C=e=>d.grep(e,b),ie=e=>0<C(e).length,se=e=>{let t=e.schema.getTextInlineElements();return!(y(e).exists(e=>e.hasAttribute("data-mce-block"))||!(e=e.selection.getRng()).collapsed&&0!==re(e,e=>1===e.nodeType&&!ne(e)&&!g(t,e.nodeName.toLowerCase())).length)},O=e=>r(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),ue=(o,e,a)=>{let i=o.selection.getNode(),t=y(o,i),s=(e=>{var t,n={...(e=>{return t=["title","rel","class","target"],n=(t,n)=>(e[n].each(e=>{t[n]=e.length>0?e:null}),t),r={href:e.href},((n,r)=>{for(let e=0,t=n.length;e<t;e++)r(n[e],e)})(t,(e,t)=>{r=n(r,e)}),r;var t,n,r})(a)};if(0===G(e).length&&!W(e)){let e=oe(n.rel,"_blank"===n.target);n.rel=e||null}return h.from(n.target).isNone()&&!1===z(e)&&(n.target=k(e)),n.href=(t=n.href,"http"!==(e=q(e))&&"https"!==e||le(t)?t:e+"://"+t),n})(o),n=X(o);r(n)&&n(s),o.undoManager.transact(()=>{a.href===e.href&&e.attach(),t.fold(()=>{{var r=o,e=i,t=a.text,l=s;let n=r.dom;O(e)?me(n,e,l):t.fold(()=>{r.execCommand("mceInsertLink",!1,l);var e=r.selection.getEnd(),t=n.createRng();t.setStartAfter(e),t.setEndAfter(e),r.selection.setRng(t)},e=>{r.insertContent(n.createHTML("a",l,n.encode(e)))})}},e=>{o.focus();var t=o,n=e,e=a.text,r=s;e.each(e=>{g(n,"innerText")?n.innerText=e:n.textContent=e}),t.dom.setAttribs(n,r),(e=t.dom.createRng()).setStartAfter(n),e.setEndAfter(n),t.selection.setRng(e)})})},ce=e=>{var n,r,{class:e,href:t,rel:l,target:o,text:a,title:i}=e,s={},e={class:e.getOrNull(),href:t,rel:l.getOrNull(),target:o.getOrNull(),text:a.getOrNull(),title:i.getOrNull()},u=(n=s,m),c=e,g=Y(c);for(let e=0,t=g.length;e<t;e++){var d=g[e];((e=>!1===I(e))(r=c[d],d=d)?(e,t)=>{n[t]=e}:u)(r,d)}return s},ge=(e,t,n)=>{n=n,r={allow_html_data_urls:(r=e.options.get)("allow_html_data_urls"),allow_script_urls:r("allow_script_urls"),allow_svg_data_urls:r("allow_svg_data_urls")},l=n.href;var r,l,n={...n,href:ee.isDomSafe(l,"a",r)?l:""};e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ce(n)):ue(e,t,n)},S=e=>{var a;e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(a=e).undoManager.transact(()=>{var e,t,n,r,l,o=a.selection.getNode();O(o)?de(a,o):(e=(o=a).dom,n=(t=o.selection).getBookmark(),r=t.getRng().cloneRange(),l=e.getParent(r.startContainer,"a[href]",o.getBody()),e=e.getParent(r.endContainer,"a[href]",o.getBody()),l&&r.setStartBefore(l),e&&r.setEndAfter(e),t.setRng(r),o.execCommand("unlink"),t.moveToBookmark(n)),a.focus()})},de=(e,t)=>{var n,r=e.dom.select("img",t)[0];r&&(t=e.dom.getParents(r,"a[href]",t)[0])&&(null!=(n=t.parentNode)&&n.insertBefore(r,t),e.dom.remove(t))},me=(t,e,n)=>{var r=t.select("img",e)[0];if(r){let e=t.create("a",n);null!=(t=r.parentNode)&&t.insertBefore(e,r),e.appendChild(r)}},A=e=>o(e.value)?e.value:"",he=(e,r)=>{let l=[];return d.each(e,t=>{n=t;var n=o(n.text)?n.text:o(n.title)?n.title:"";if(void 0!==t.menu){let e=he(t.menu,r);l.push({text:n,items:e})}else{let e=r(t);l.push({text:n,value:e})}}),l},pe=(t=A)=>e=>h.from(e).map(e=>he(e,t)),N=e=>pe(A)(e),fe=pe,E=(t,n)=>e=>({name:t,type:"listbox",label:n,items:e}),ve=A,ke=(n,e)=>f(e,e=>{return t=e,g(t=t,"items")&&null!=t.items?ke(n,e.items):c(e.value===n,e);var t}),be=(e,a)=>{let i={text:e.text,title:e.title};return{onChange:(e,t)=>{var n,r,l,t=t.name;return"url"===t?(n=e(),r=n.url,l=c(i.text.length<=0,h.from(null==(l=r.meta)?void 0:l.text).getOr(r.value)),r=n.url,n=c(i.title.length<=0,h.from(null==(r=r.meta)?void 0:r.title).getOr("")),l.isSome()||n.isSome()?h.some({...l.map(e=>({text:e})).getOr({}),...n.map(e=>({title:e})).getOr({})}):h.none()):(r=t,-1<j.call(["anchor","link"],r)?((n,r)=>{var l=("link"===r?a.link:"anchor"===r?a.anchor:h.none()).getOr([]);{var o=i.text;let e=n[r],t=0<o.length;return void 0!==e?ke(e,l).map(e=>({url:{value:e.value,meta:{text:t?o:e.text,attach:m}},text:t?o:e.text})):h.none()}})(e(),t):(("text"===t||"title"===t)&&(i[t]=e()[t]),h.none()))}}};var xe=tinymce.util.Tools.resolve("tinymce.util.Delay");let ye=e=>{let t=e.href;return 0<t.indexOf("@")&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?h.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>({...e,href:"mailto:"+t})}):h.none()},_e=e=>{e=e.dom.select("a:not([href])"),e=p((n=>{let e=n.length,r=new Array(e);for(let t=0;t<e;t++){let e=n[t];r[t]=(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]})(e,t)}return r})(e));return 0<e.length?h.some([{text:"None",value:""}].concat(e)):h.none()},we=e=>{e=H(e);return 0<e.length?N(e):h.none()},Ce=e=>{try{return h.some(JSON.parse(e))}catch(e){return h.none()}},Oe=(n,r)=>{var l=G(n);if(0<l.length){let t=v(r,"_blank"),e=e=>oe(ve(e),t);return(!1===W(n)?fe(e):N)(l)}return h.none()},Se=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ae=e=>{e=z(e);return a(e)?N(e).orThunk(()=>h.some(Se)):!1===e?h.none():h.some(Se)},R=(e,t,n)=>{e=e.getAttrib(t,n);return null!==e&&0<e.length?h.some(e):h.none()},Ne=d=>{var e,n,r,t;e=d,t=y(e),r=t,(t=>{let n=e=>t.convertURL(e.value||e.url||"","href"),e=V(t);return new Promise(t=>{o(e)?fetch(e).then(e=>e.ok?e.text().then(Ce):Promise.reject()).then(t,()=>t(h.none())):s(e)?e(e=>t(h.some(e))):t(h.from(e))}).then(e=>e.bind(fe(n)).map(e=>0<e.length?[{text:"None",value:""}].concat(e):e))})(n=e).then(e=>{var t=((e,t)=>{let n=e.dom,r=se(e)?h.some(ae(e.selection,t)):h.none(),l=t.bind(e=>h.from(n.getAttrib(e,"href"))),o=t.bind(e=>h.from(n.getAttrib(e,"target"))),a=t.bind(e=>R(n,e,"rel")),i=t.bind(e=>R(n,e,"class"));return{url:l,text:r,title:t.bind(e=>R(n,e,"title")),target:o,rel:a,linkClass:i}})(n,r);return{anchor:t,catalogs:{targets:Ae(n),rels:Oe(n,t.target),classes:we(n),anchor:_e(n),link:e},optNode:r,flags:{titleEnabled:J(n)}}}).then(o=>{s=d,u=o;var s,u,a,i,c=e=>{let r=e.getData();if(r.url.value){let e=t=>h.from(r[t]).filter(e=>!v(u.anchor[t],e)),t={href:r.url.value,text:e("text"),target:e("target"),rel:e("rel"),class:e("linkClass"),title:e("title")},n={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:m};var o,a,l,i;o=s,a=t,f([ye,(l=q(o),i=$(o),e=>{let t=e.href;return 1===l&&!le(t)||0===l&&/^\s*www(\.|\d\.)/i.test(t)?h.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${i}:// prefix?`,preprocess:e=>({...e,href:i+"://"+t})}):h.none()})],e=>e(a)).fold(()=>Promise.resolve(a),l=>new Promise(n=>{{var r=o,e=l.message;let t=r.selection.getRng();xe.setEditorTimeout(r,()=>{r.windowManager.confirm(e,e=>{r.selection.setRng(t),n(e?l.preprocess(a):a)})})}})).then(e=>{ge(s,n,e)})}else S(s);e.close()};{var g=d;let e=o.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),t=o.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],n=(a=o,g=h.from(k(g)),{url:{value:i=(a=a.anchor).url.getOr(""),meta:{original:{value:i}}},text:a.text.getOr(""),title:a.title.getOr(""),anchor:i,link:i,rel:a.rel.getOr(""),target:a.target.or(g).getOr(""),linkClass:a.linkClass.getOr("")}),r=o.catalogs,l=be(n,r);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:p([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],e,t,(t=>{let n=[],r=e=>{n.push(e)};for(let e=0;e<t.length;e++)t[e].each(r);return n})([r.anchor.map(E("anchor","Anchors")),r.rels.map(E("rel","Rel")),r.targets.map(E("target","Open link in...")),r.link.map(E("link","Link list")),r.classes.map(E("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onChange:(t,{name:e})=>{l.onChange(t.getData,{name:e}).each(e=>{t.setData(e)})},onSubmit:c}}}).then(e=>{d.windowManager.open(e)})};var Ee=tinymce.util.Tools.resolve("tinymce.util.VK");let T=(t,e)=>{if(e){var n=x(e);if(/^#/.test(n)){let e=t.dom.select(`${n},[name="${n=n,(r=n).length>="#".length&&"#"===r.substr(0,0+"#".length)?n.substring(1):n}"]`);e.length&&t.selection.scrollIntoView(e[0],!0)}else r=e.href,(n=document.createElement("a")).target="_blank",n.href=r,n.rel="noreferrer noopener",r=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}),document.dispatchEvent(r),n=n,r=r,document.body.appendChild(n),n.dispatchEvent(r),document.body.removeChild(n)}var r},L=(e,t)=>{e=C(e.dom.getParents(t));return c(1===e.length,e[0])},Re=e=>{return e.selection.isCollapsed()||(n=(t=e).selection.getRng(),r=n.startContainer,b(r)&&n.startContainer===n.endContainer&&1===t.dom.select("img",r).length)?L(e,e.selection.getStart()):(n=e,t=w(n.selection.getRng()),c(0<t.length,t[0]).or(L(n,n.selection.getNode())));var t,n,r},Te=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},P=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),M=n=>e=>{var t=()=>{e.setActive(!n.mode.isReadOnly()&&_(n,n.selection.getNode())),e.setEnabled(n.selection.isEditable())};return t(),P(n,t)},D=r=>t=>{let e=r.dom.getParents(r.selection.getStart()),n=e=>{t.setEnabled((e=e,(ie(e)||(e=r.selection.getRng(),0<w(e).length))&&r.selection.isEditable()))};return n(e),P(r,e=>n(e.parents))},Le=e=>{var r,t,n,l,o,a,i,s=(n=>{let r=(()=>{let t=(e=>{let t=(()=>{let t=h.none();return{get:()=>t,set:e=>{t=e}}})(),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(h.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(h.some(e))}}})(m);return{...t,on:e=>t.get().each(e)}})(),e=()=>r.get().or(Re(n));return n.on("contextmenu",e=>{L(n,e.target).each(r.set)}),n.on("SelectionChange",()=>{r.isSet()||Re(n).each(r.set)}),n.on("click",e=>{r.clear();var t=C(n.dom.getParents(e.target));1===t.length&&Ee.metaKeyPressed(e)&&(e.preventDefault(),T(n,t[0]))}),n.on("keydown",t=>{r.clear(),t.isDefaultPrevented()||13!==t.keyCode||!0!==t.altKey||!1!==t.shiftKey||!1!==t.ctrlKey||!1!==t.metaKey||e().each(e=>{t.preventDefault(),T(n,e)})}),{gotoSelectedLink:()=>e().each(e=>T(n,e))}})(e);i=s,(a=e).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Te(a),onSetup:M(a)}),a.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:i.gotoSelectedLink,onSetup:D(a)}),a.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>S(a),onSetup:D(a)}),(l=e).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:s.gotoSelectedLink,onSetup:D(l)}),l.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Te(l),onSetup:(o=l,e=>{var t=()=>{e.setEnabled(o.selection.isEditable())};return t(),P(o,t)})}),l.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>S(l),onSetup:D(l)}),(n=e).ui.registry.addContextMenu("link",{update:e=>n.dom.isEditable(e)?ie(n.dom.getParents(e,"a"))?"link unlink openlink":"link":""}),t=s,i=e=>{var t=r.selection.getNode();return e.setEnabled(_(r,t)&&r.selection.isEditable()),m},(r=e).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:M(r)},label:"Link",predicate:e=>F(r)&&_(r,e),initValue:()=>y(r).fold(()=>"",x),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:e=>{var t=r.selection.getNode();return e.setActive(_(r,t)),M(r)(e)},onAction:e=>{var t=e.getValue(),n=(t=>{let n=y(r),e=se(r);if(n.isNone()&&e){let e=ae(r.selection,n);return c(0===e.length,t)}return h.none()})(t);ge(r,{href:t,attach:m},{href:t,text:n,title:h.none(),rel:h.none(),target:h.from(k(r)),class:h.none()}),r.selection.collapse(!1),e.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:i,onAction:e=>{S(r),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:i,onAction:e=>{t.gotoSelectedLink(),e.hide()}}]})};B.add("link",e=>{var t,n,r;(r=e.options.register)("link_assume_external_targets",{processor:e=>{var t=o(e)||i(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),r("link_context_toolbar",{processor:"boolean",default:!1}),r("link_list",{processor:e=>o(e)||s(e)||u(e,l)}),r("link_default_target",{processor:"string"}),r("link_default_protocol",{processor:"string",default:"https"}),r("link_target_list",{processor:e=>i(e)||u(e,l),default:!0}),r("link_rel_list",{processor:"object[]",default:[]}),r("link_class_list",{processor:"object[]",default:[]}),r("link_title",{processor:"boolean",default:!0}),r("allow_unsafe_link_target",{processor:"boolean",default:!1}),r("link_quicklink",{processor:"boolean",default:!1}),r("link_attributes_postprocess",{processor:"function"}),(n=e).addCommand("mceLink",(e,t)=>{!0!==(null==t?void 0:t.dialog)&&Q(n)?n.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Ne(n)}),Le(e),(t=e).addShortcut("Meta+K","",()=>{t.execCommand("mceLink")})})})();
(e=>{("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define(e):e()})(function(){function t(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function r(t,o){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var e,n=1===t._state?o.onFulfilled:o.onRejected;if(null!==n){try{e=n(t._value)}catch(e){return void u(o.promise,e)}f(o.promise,e)}else(1===t._state?f:u)(o.promise,t._value)})):t._deferreds.push(o)}function f(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof i)return n._state=3,n._value=e,c(n);if("function"==typeof t)return l((o=t,r=e,function(){o.apply(r,arguments)}),n)}n._state=1,n._value=e,c(n)}catch(e){u(n,e)}var o,r}function u(e,n){e._state=2,e._value=n,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)r(e,e._deferreds[n]);e._deferreds=null}function l(e,n){var t=!1;try{e(function(e){t||(t=!0,f(n,e))},function(e){t||(t=!0,u(n,e))})}catch(e){t||(t=!0,u(n,e))}}var n=setTimeout,e=(i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(o,e){var n=new this.constructor(t);return r(this,new function(e,n,t){this.onFulfilled="function"==typeof o?o:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(0,e,n)),n},i.prototype.finally=function(n){var t=this.constructor;return this.then(function(e){return t.resolve(n()).then(function(){return e})},function(e){return t.resolve(n()).then(function(){return t.reject(e)})})},i.all=function(n){return new i(function(r,i){if(!n||void 0===n.length)throw new TypeError("Promise.all accepts an array");var f=Array.prototype.slice.call(n);if(0===f.length)return r([]);for(var u=f.length,e=0;f.length>e;e++)!function n(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(e){n(t,e)},i)}f[t]=e,0==--u&&r(f)}catch(e){i(e)}}(e,f[e])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(e){e(n)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(r){return new i(function(e,n){for(var t=0,o=r.length;t<o;t++)r[t].then(e,n)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){n(e,0)},i._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},(()=>{if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")})());e.Promise||(e.Promise=i)});
(t=>{var e,r,s,o,n,i,a,h,u,f;function d(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function y(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function b(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function m(t){var e=new FileReader,r=b(e);return e.readAsArrayBuffer(t),r}function w(t){var e;return t.slice?t.slice(0):((e=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),e.buffer)}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(o&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(n&&s&&a(t))this._bodyArrayBuffer=w(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!n||!ArrayBuffer.prototype.isPrototypeOf(t)&&!h(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=w(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,r=c(this);if(r)return r;if(this._bodyBlob)return r=this._bodyBlob,t=new FileReader,e=b(t),t.readAsText(r),e;if(this._bodyArrayBuffer)return Promise.resolve((t=>{for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")})(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function A(t,e){var r,o=(e=e||{}).body;if(t instanceof A){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(t=e.method||this.method||"GET",r=t.toUpperCase(),-1<u.indexOf(r)?r:t),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(e=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(e),decodeURIComponent(t)))}),r}function B(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&(()=>{try{return new Blob,!0}catch(t){return!1}})(),o="FormData"in t,(n="ArrayBuffer"in t)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},h=ArrayBuffer.isView||function(t){return t&&-1<i.indexOf(Object.prototype.toString.call(t))}),l.prototype.append=function(t,e){t=d(t),e=y(e);var r=this.map[t];this.map[t]=r?r+","+e:e},l.prototype.delete=function(t){delete this.map[d(t)]},l.prototype.get=function(t){return t=d(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(d(t))},l.prototype.set=function(t,e){this.map[d(t)]=y(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),p(r)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},l.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),p(r)},r&&(l.prototype[Symbol.iterator]=l.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},_.call(A.prototype),_.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},B.error=function(){var t=new B(null,{status:0,statusText:""});return t.type="error",t},f=[301,302,303,307,308],B.redirect=function(t,e){if(-1===f.indexOf(e))throw new RangeError("Invalid status code");return new B(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=A,t.Response=B,t.fetch=function(r,i){return new Promise(function(o,t){var e=new A(r,i),n=new XMLHttpRequest;n.onload=function(){var r,t={status:n.status,statusText:n.statusText,headers:(t=n.getAllResponseHeaders()||"",r=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var t=t.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),r.append(e,t))}),r)},e=(t.url="responseURL"in n?n.responseURL:t.headers.get("X-Request-URL"),"response"in n?n.response:n.responseText);o(new B(e,t))},n.onerror=function(){t(new TypeError("Network request failed"))},n.ontimeout=function(){t(new TypeError("Network request failed"))},n.open(e.method,e.url,!0),"include"===e.credentials?n.withCredentials=!0:"omit"===e.credentials&&(n.withCredentials=!1),"responseType"in n&&s&&(n.responseType="blob"),e.headers.forEach(function(t,e){n.setRequestHeader(e,t)}),n.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)})("undefined"!=typeof self?self:this);
((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Immutable=e()})(this,function(){function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function a(t){return c(t)?t:e(t)}function s(t){return h(t)?t:v(t)}function K(t){return f(t)?t:y(t)}function n(t){return c(t)&&!L(t)?t:tt(t)}function c(t){return!(!t||!t[Ze])}function h(t){return!(!t||!t[$e])}function f(t){return!(!t||!t[tr])}function L(t){return h(t)||f(t)}function T(t){return!(!t||!t[er])}function B(t){return t.value=!1,t}function d(t){t&&(t.value=!0)}function W(){}function C(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function J(t){return void 0===t.size&&(t.size=t.__iterate(P)),t.size}function N(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295==r)return NaN;e=r}return e<0?J(t)+e:e}function P(){return!0}function H(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&r<=e)}function V(t,e){return Q(t,e,0)}function Y(t,e){return Q(t,e,e)}function Q(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function _(t){this.next=t}function p(t,e,r,n){t=0===t?e:1===t?r:[e,r];return n?n.value=t:n={value:t,done:!1},n}function l(){return{value:void 0,done:!0}}function X(t){return Z(t)}function F(t){return t&&"function"==typeof t.next}function G(t){var e=Z(t);return e&&e.call(t)}function Z(t){t=t&&(ar&&t[ar]||t[hr]);return"function"==typeof t?t:void 0}function $(t){return t&&"number"==typeof t.length}function e(t){{if(null==t)return ut();if(c(t))return t.toSeq();var e=ht(t)||"object"==typeof t&&new rt(t);if(e)return e;throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t)}}function v(t){return null==t?ut().toKeyedSeq():c(t)?h(t)?t.toSeq():t.fromEntrySeq():st(t)}function y(t){return null==t?ut():c(t)?h(t)?t.entrySeq():t.toIndexedSeq():at(t)}function tt(t){return(null==t?ut():c(t)?h(t)?t.entrySeq():t:at(t)).toSetSeq()}function et(t){this._array=t,this.size=t.length}function rt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function nt(t){this._iterable=t,this.size=t.length||t.size}function it(t){this._iterator=t,this._iteratorCache=[]}function ot(t){return!(!t||!t[fr])}function ut(){return Xe=Xe||new et([])}function st(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():F(t)?new it(t).fromEntrySeq():X(t)?new nt(t).fromEntrySeq():"object"==typeof t?new rt(t):void 0;if(e)return e;throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t)}function at(t){var e=ht(t);if(e)return e;throw new TypeError("Expected Array or iterable object of values: "+t)}function ht(t){return $(t)?new et(t):F(t)?new it(t):X(t)?new nt(t):void 0}function ct(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,u=0;u<=o;u++){var s=i[r?o-u:u];if(!1===e(s[1],n?s[0]:u,t))return u+1}return u}return t.__iterateUncached(e,r)}function ft(t,e,r,n){var i,o,u=t._cache;return u?(i=u.length-1,o=0,new _(function(){var t=u[r?i-o:o];return o++>i?l():p(e,n?t[0]:o-1,t[1])})):t.__iteratorUncached(e,r)}function _t(t,e){return e?function r(n,i,t,e){return Array.isArray(i)?n.call(e,t,y(i).map(function(t,e){return r(n,t,e,i)})):lt(i)?n.call(e,t,v(i).map(function(t,e){return r(n,t,e,i)})):i}(e,t,"",{"":t}):pt(t)}function pt(t){return Array.isArray(t)?y(t).map(pt).toList():lt(t)?v(t).map(pt).toMap():t}function lt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function m(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function vt(r,t){var n,i,o,u,e;return r===t||!(!c(t)||void 0!==r.size&&void 0!==t.size&&r.size!==t.size||void 0!==r.__hash&&void 0!==t.__hash&&r.__hash!==t.__hash||h(r)!==h(t)||f(r)!==f(t)||T(r)!==T(t))&&(0===r.size&&0===t.size||(n=!L(r),T(r)?(i=r.entries(),t.every(function(t,e){var r=i.next().value;return r&&m(r[1],t)&&(n||m(r[0],e))})&&i.next().done):(o=!1,void 0===r.size&&(void 0===t.size?"function"==typeof r.cacheResult&&r.cacheResult():(o=!0,e=r,r=t,t=e)),u=!0,e=t.__iterate(function(t,e){return(n?r.has(t):o?m(t,r.get(e,k)):m(r.get(e,k),t))?void 0:u=!1}),u&&r.size===e)))}function i(t,e){if(!(this instanceof i))return new i(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Fe)return Fe;Fe=this}}function yt(t,e){if(!t)throw Error(e)}function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);if(yt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Ge)return Ge;Ge=this}}function dt(){throw TypeError("Abstract")}function mt(){}function gt(){}function wt(){}function St(t){return t>>>1&1073741824|3221225471&t}function w(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,r,n=typeof t;if("number"==n){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);4294967295<t;)i^=t/=4294967295;return St(i)}if("string"==n)return t.length>gr?(void 0===(e=zr[o=t])&&(e=zt(o),Sr===wr&&(Sr=0,zr={}),Sr++,zr[o]=e),e):zt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"==n){var o=t;if((!yr||void 0===(r=_r.get(o)))&&void 0===(r=o[mr])){if(!vr){if(void 0!==(r=o.propertyIsEnumerable&&o.propertyIsEnumerable[mr]))return r;if(void 0!==(r=(t=>{if(t&&0<t.nodeType)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}})(o)))return r}if(r=++dr,1073741824&dr&&(dr=0),yr)_r.set(o,r);else{if(void 0!==lr&&!1===lr(o))throw Error("Non-extensible objects are not allowed as keys.");if(vr)Object.defineProperty(o,mr,{enumerable:!1,configurable:!1,writable:!1,value:r});else if(void 0!==o.propertyIsEnumerable&&o.propertyIsEnumerable===o.constructor.prototype.propertyIsEnumerable)o.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},o.propertyIsEnumerable[mr]=r;else{if(void 0===o.nodeType)throw Error("Unable to set a non-enumerable property on object.");o[mr]=r}}}return r}if("function"==typeof t.toString)return zt(""+t);throw Error("Value type "+n+" cannot be hashed.")}function zt(t){for(var e=0,r=0;t.length>r;r++)e=31*e+t.charCodeAt(r)|0;return St(e)}function g(t){yt(t!==1/0,"Cannot perform this action with an infinite size.")}function S(e){return null==e?jt():It(e)&&!T(e)?e:jt().withMutations(function(r){var t=s(e);g(t.size),t.forEach(function(t,e){return r.set(e,t)})})}function It(t){return!(!t||!t[Ir])}function bt(t,e){this.ownerID=t,this.entries=e}function qt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function Dt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function Mt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function Et(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function Ot(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&kt(t._root)}function xt(t,e){return p(t,e[0],e[1])}function kt(t,e){return{node:t,index:0,__prev:e}}function At(t,e,r,n){var i=Object.create(A);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function jt(){return br=br||At(0)}function Rt(t,e,r){if(t._root){var n=B(nr),i=B(ir),o=Ut(t._root,t.__ownerID,0,void 0,e,r,n,i);if(!i.value)return t;i=t.size+(n.value?r===k?-1:1:0)}else{if(r===k)return t;i=1,o=new bt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=o,t.__hash=void 0,t.__altered=!0,t):o?At(i,o):jt()}function Ut(t,e,r,n,i,o,u,s){return t?t.update(e,r,n,i,o,u,s):o===k?t:(d(s),d(u),new Et(e,n,[i,o]))}function Kt(t){return t.constructor===Et||t.constructor===Mt}function Lt(t,e,r,n,i){var o,u;return t.keyHash===n?new Mt(e,n,[t.entry,i]):new qt(e,1<<(o=(0===r?t.keyHash:t.keyHash>>>r)&x)|1<<(u=(0===r?n:n>>>r)&x),o==u?[Lt(t,e,r+O,n,i)]:(r=new Et(e,n,i),o<u?[t,r]:[r,t]))}function Tt(t,e,r){for(var n=[],i=0;r.length>i;i++){var o=r[i],u=s(o);c(o)||(u=u.map(function(t){return _t(t)})),n.push(u)}return Ct(t,e,n)}function Bt(t,e,r){return t&&t.mergeDeep&&c(e)?t.mergeDeep(e):m(t,e)?t:e}function Wt(n){return function(t,e,r){return t&&t.mergeDeepWith&&c(e)?t.mergeDeepWith(n,e):m(t,e=n(t,e,r))?t:e}}function Ct(t,i,r){return 0===(r=r.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(n){for(var t=i?function(e,r){n.update(r,k,function(t){return t===k?e:i(t,e,r)})}:function(t,e){n.set(e,t)},e=0;r.length>e;e++)r[e].forEach(t)}):t.constructor(r[0])}function Jt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t=(t+=t>>8)+(t>>16))}function Nt(t,e,r,n){n=n?t:C(t);return n[e]=r,n}function r(t){var e,n,r=Qt();return null==t?r:Pt(t)?t:(e=K(t),0===(n=e.size)?r:(g(n),0<n&&n<rr?Yt(0,n,O,null,new Ht(e.toArray())):r.withMutations(function(r){r.setSize(n),e.forEach(function(t,e){return r.set(e,t)})})))}function Pt(t){return!(!t||!t[Er])}function Ht(t,e){this.array=t,this.ownerID=e}function Vt(t,l){function v(t,e,r){return 0===e?(h=t,f=(c=r)===m?g&&g.array:h&&h.array,_=y<c?0:y-c,rr<(p=d-c)&&(p=rr),function(){var t;return _===p?Rr:(t=l?--p:_++,f&&f[t])}):(n=e,i=r,u=(h=t)&&h.array,s=y<i?0:y-i>>n,rr<(a=1+(d-i>>n))&&(a=rr),function(){for(;;){if(o){var t=o();if(t!==Rr)return t;o=null}if(s===a)return Rr;t=l?--a:s++;o=v(u&&u[t],n-O,i+(t<<n))}});var n,i,o,u,s,a,h,c,f,_,p}var y=t._origin,d=t._capacity,m=te(d),g=t._tail;return v(t._root,t._level,0)}function Yt(t,e,r,n,i,o,u){var s=Object.create(j);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=u,s.__altered=!1,s}function Qt(){return Or=Or||Yt(0,0,O)}function Xt(t,e,r,n,i,o){var u,s,a=n>>>r&x,h=t&&t.array.length>a;return h||void 0!==i?0<r?(r=Xt(s=t&&t.array[a],e,r-O,n,i,o))===s?t:((u=Ft(t,e)).array[a]=r,u):h&&t.array[a]===i?t:(d(o),u=Ft(t,e),void 0===i&&a==u.array.length-1?u.array.pop():u.array[a]=i,u):t}function Ft(t,e){return e&&t&&e===t.ownerID?t:new Ht(t?t.array.slice():[],e)}function Gt(t,e){if(e>=te(t._capacity))return t._tail;if(e<1<<t._level+O){for(var r=t._root,n=t._level;r&&0<n;)r=r.array[e>>>n&x],n-=O;return r}}function Zt(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new W,i=t._origin,o=t._capacity,u=i+e,e=void 0===r?o:r<0?o+r:i+r;if(u===i&&e===o)return t;if(e<=u)return t.clear();for(var s=t._level,a=t._root,h=0;u+h<0;)a=new Ht(a&&a.array.length?[void 0,a]:[],n),h+=1<<(s+=O);h&&(u+=h,i+=h,e+=h,o+=h);for(var c=te(o),f=te(e);1<<s+O<=f;)a=new Ht(a&&a.array.length?[a]:[],n),s+=O;var r=t._tail,_=f<c?Gt(t,e-1):c<f?new Ht([],n):r;if(r&&c<f&&u<o&&r.array.length){for(var p=a=Ft(a,n),l=s;O<l;l-=O)var v=c>>>l&x,p=p.array[v]=Ft(p.array[v],n);p.array[c>>>O&x]=r}if(e<o&&(_=_&&_.removeAfter(n,0,e)),f<=u)u-=f,e-=f,s=O,a=null,_=_&&_.removeBefore(n,0,u);else if(i<u||f<c){for(h=0;a;){var y=u>>>s&x;if(y!=f>>>s&x)break;y&&(h+=(1<<s)*y),s-=O,a=a.array[y]}(a=a&&i<u?a.removeBefore(n,s,u-h):a)&&f<c&&(a=a.removeAfter(n,s,f-h)),h&&(u-=h,e-=h)}return t.__ownerID?(t.size=e-u,t._origin=u,t._capacity=e,t._level=s,t._root=a,t._tail=_,t.__hash=void 0,t.__altered=!0,t):Yt(u,e,s,a,_)}function $t(t,e,r){for(var n=[],i=0,o=0;r.length>o;o++){var u=r[o],s=K(u);s.size>i&&(i=s.size),c(u)||(s=s.map(function(t){return _t(t)})),n.push(s)}return Ct(t=i>t.size?t.setSize(i):t,e,n)}function te(t){return t<rr?0:t-1>>>O<<O}function z(e){return null==e?ne():ee(e)?e:ne().withMutations(function(r){var t=s(e);g(t.size),t.forEach(function(t,e){return r.set(e,t)})})}function ee(t){return It(t)&&T(t)}function re(t,e,r,n){var i=Object.create(z.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function ne(){return xr=xr||re(jt(),Qt())}function ie(t,e,r){var n,i,o=t._map,u=t._list,s=o.get(e),a=void 0!==s;if(r===k){if(!a)return t;u.size>=rr&&u.size>=2*o.size?(n=(i=u.filter(function(t,e){return void 0!==t&&s!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=s===u.size-1?u.pop():u.set(s,void 0))}else if(a){if(r===u.get(s)[1])return t;n=o,i=u.set(s,[e,r])}else n=o.set(e,u.size),i=u.set(u.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):re(n,i)}function u(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ue(t){this._iter=t,this.size=t.size}function se(t){this._iter=t,this.size=t.size}function ae(i){var t=ze(i);return t._iter=i,t.size=i.size,t.flip=function(){return i},t.reverse=function(){var t=i.reverse.apply(this);return t.flip=function(){return i.reverse()},t},t.has=function(t){return i.includes(t)},t.includes=function(t){return i.has(t)},t.cacheResult=Ie,t.__iterateUncached=function(r,t){var n=this;return i.__iterate(function(t,e){return!1!==r(e,t,n)},t)},t.__iteratorUncached=function(t,e){var r;return t===sr?(r=i.__iterator(t,e),new _(function(){var t,e=r.next();return e.done||(t=e.value[0],e.value[0]=e.value[1],e.value[1]=t),e})):i.__iterator(t===ur?or:ur,e)},t}function he(o,u,s){var t=ze(o);return t.size=o.size,t.has=function(t){return o.has(t)},t.get=function(t,e){var r=o.get(t,k);return r===k?e:u.call(s,r,t,o)},t.__iterateUncached=function(n,t){var i=this;return o.__iterate(function(t,e,r){return!1!==n(u.call(s,t,e,r),e,i)},t)},t.__iteratorUncached=function(n,t){var i=o.__iterator(sr,t);return new _(function(){var t,e,r=i.next();return r.done?r:(e=(t=r.value)[0],p(n,e,u.call(s,t[1],e,o),r))})},t}function ce(i,r){var t=ze(i);return t._iter=i,t.size=i.size,t.reverse=function(){return i},i.flip&&(t.flip=function(){var t=ae(i);return t.reverse=function(){return i.flip()},t}),t.get=function(t,e){return i.get(r?t:-1-t,e)},t.has=function(t){return i.has(r?t:-1-t)},t.includes=function(t){return i.includes(t)},t.cacheResult=Ie,t.__iterate=function(r,t){var n=this;return i.__iterate(function(t,e){return r(t,e,n)},!t)},t.__iterator=function(t,e){return i.__iterator(t,!e)},t}function fe(u,s,a,h){var t=ze(u);return h&&(t.has=function(t){var e=u.get(t,k);return e!==k&&!!s.call(a,e,t,u)},t.get=function(t,e){var r=u.get(t,k);return r!==k&&s.call(a,r,t,u)?r:e}),t.__iterateUncached=function(n,t){var i=this,o=0;return u.__iterate(function(t,e,r){return s.call(a,t,e,r)?(o++,n(t,h?e:o-1,i)):void 0},t),o},t.__iteratorUncached=function(n,t){var i=u.__iterator(sr,t),o=0;return new _(function(){for(;;){var t=i.next();if(t.done)return t;var e=t.value,r=e[0],e=e[1];if(s.call(a,e,r,u))return p(n,h?r:o++,e,t)}})},t}function _e(s,t,e,a){var h,c,r=s.size;return void 0!==t&&(t|=0),H(t,e=void 0!==e?e===1/0?r:0|e:e,r)?s:(h=V(t,r),r=Y(e,r),h!=h||r!=r?_e(s.toSeq().cacheResult(),t,e,a):((t=r-h)==t&&(c=t<0?0:t),(e=ze(s)).size=0===c?c:s.size&&c||void 0,!a&&ot(s)&&0<=c&&(e.get=function(t,e){return 0<=(t=N(this,t))&&t<c?s.get(t+h,e):e}),e.__iterateUncached=function(r,t){var n,i,o,u=this;return 0===c?0:t?this.cacheResult().__iterate(r,t):(i=!(n=0),o=0,s.__iterate(function(t,e){return(i=i&&n++<h)?void 0:(o++,!1!==r(t,a?e:o-1,u)&&o!==c)}),o)},e.__iteratorUncached=function(e,t){var r,n,i;return 0!==c&&t?this.cacheResult().__iterator(e,t):(r=0!==c&&s.__iterator(e,t),i=n=0,new _(function(){for(;n++<h;)r.next();var t;return++i>c?l():(t=r.next(),a||e===ur?t:p(e,i-1,e===or?void 0:t.value[1],t))}))},e))}function pe(e,h,c,f){var t=ze(e);return t.__iterateUncached=function(n,t){var i,o,u=this;return t?this.cacheResult().__iterate(n,t):(i=!0,o=0,e.__iterate(function(t,e,r){return(i=i&&h.call(c,t,e,r))?void 0:(o++,n(t,f?e:o-1,u))}),o)},t.__iteratorUncached=function(i,t){var o,u,s,a=this;return t?this.cacheResult().__iterator(i,t):(o=e.__iterator(sr,t),u=!0,s=0,new _(function(){var t;do{if((t=o.next()).done)return f||i===ur?t:p(i,s++,i===or?void 0:t.value[1],t);var e=t.value,r=e[0],n=e[1]}while(u=u&&h.call(c,n,r,a));return i===sr?t:p(i,r,n,t)}))},t}function le(t,a,h){var e=ze(t);return e.__iterateUncached=function(o,e){var u=0,s=!1;return function r(t,n){var i=this;t.__iterate(function(t,e){return(!a||n<a)&&c(t)?r(t,n+1):!1===o(t,h?e:u++,i)&&(s=!0),!s},e)}(t,0),u},e.__iteratorUncached=function(r,n){var i=t.__iterator(r,n),o=[],u=0;return new _(function(){for(;i;){var t=i.next();if(!1===t.done){var e=t.value;if(r===sr&&(e=e[1]),a&&!(o.length<a)||!c(e))return h?t:p(r,u++,e,t);o.push(i),i=e.__iterator(r,n)}else i=o.pop()}return l()})},e}function ve(r,n,i){n=n||be;var t=h(r),o=0,u=r.toSeq().map(function(t,e){return[e,t,o++,i?i(t,e,r):t]}).toArray();return u.sort(function(t,e){return n(t[3],e[3])||t[2]-e[2]}).forEach(t?function(t,e){u[e].length=2}:function(t,e){u[e]=t[1]}),(t?v:f(r)?y:tt)(u)}function ye(r,n,i){var t;return n=n||be,i?(t=r.toSeq().map(function(t,e){return[t,i(t,e,r)]}).reduce(function(t,e){return de(n,t[1],e[1])?e:t}))&&t[0]:r.reduce(function(t,e){return de(n,t,e)?e:t})}function de(t,e,r){t=t(r,e);return 0===t&&r!==e&&(null==r||r!=r)||0<t}function me(t,u,s){t=ze(t);return t.size=new et(s).map(function(t){return t.size}).min(),t.__iterate=function(t,e){for(var r,n=this.__iterator(ur,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},t.__iteratorUncached=function(e,r){var n=s.map(function(t){return t=a(t),G(r?t.reverse():t)}),i=0,o=!1;return new _(function(){var t;return o||(t=n.map(function(t){return t.next()}),o=t.some(function(t){return t.done})),o?l():p(e,i++,u.apply(null,t.map(function(t){return t.value})))})},t}function I(t,e){return ot(t)?e:t.constructor(e)}function ge(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function we(t){return g(t.size),J(t)}function Se(t){return h(t)?s:f(t)?K:n}function ze(t){return Object.create((h(t)?v:f(t)?y:tt).prototype)}function Ie(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):e.prototype.cacheResult.call(this)}function be(t,e){return e<t?1:t<e?-1:0}function qe(t){var e=G(t);if(!e){if(!$(t))throw new TypeError("Expected iterable or array-like: "+t);e=G(a(t))}return e}function b(i,o){function u(t){if(t instanceof u)return t;if(!(this instanceof u))return new u(t);if(!s){s=!0;var e=Object.keys(i),r=a,n=e;try{n.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){yt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,r))}catch(t){}a.size=e.length,a._name=o,a._keys=e,a._defaultValues=i}this._map=S(t)}var s,a=u.prototype=Object.create(R);return a.constructor=u}function De(t,e,r){t=Object.create(Object.getPrototypeOf(t));return t._map=e,t.__ownerID=r,t}function Me(t){return t._name||t.constructor.name||"Record"}function q(r){return null==r?ke():Ee(r)&&!T(r)?r:ke().withMutations(function(e){var t=n(r);g(t.size),t.forEach(function(t){return e.add(t)})})}function Ee(t){return!(!t||!t[Ur])}function Oe(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function xe(t,e){var r=Object.create(U);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function ke(){return kr=kr||xe(jt())}function Ae(r){return null==r?Ue():je(r)?r:Ue().withMutations(function(e){var t=n(r);g(t.size),t.forEach(function(t){return e.add(t)})})}function je(t){return Ee(t)&&T(t)}function Re(t,e){var r=Object.create(Kr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Ue(){return Ar=Ar||Re(ne())}function D(t){return null==t?Te():Ke(t)?t:Te().unshiftAll(t)}function Ke(t){return!(!t||!t[Lr])}function Le(t,e,r,n){var i=Object.create(Tr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Te(){return jr=jr||Le(0)}function Be(e,r){function t(t){e.prototype[t]=r[t]}Object.keys(r).forEach(t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(t)}function We(t,e){return e}function Ce(t,e){return[e,t]}function Je(t){return function(){return!t.apply(this,arguments)}}function Ne(t){return function(){return-t.apply(this,arguments)}}function Pe(t){return"string"==typeof t?JSON.stringify(t):t+""}function He(){return C(arguments)}function Ve(t,e){return t<e?1:e<t?-1:0}function Ye(t){var r,e,n;return t.size===1/0?0:(n=T(t),e=h(t),r=n?1:0,t=t.__iterate(e?n?function(t,e){r=31*r+Qe(w(t),w(e))|0}:function(t,e){r=r+Qe(w(t),w(e))|0}:n?function(t){r=31*r+w(t)|0}:function(t){r=r+w(t)|0}),e=t,n=pr(n=r,3432918353),n=pr(n<<15|n>>>-15,461845907),n=pr(n<<13|n>>>-13,5),n=pr((n=(n+3864292196|0)^e)^n>>>16,2246822507),n=St((n=pr(n^n>>>13,3266489909))^n>>>16))}function Qe(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Xe,Fe,Ge,M=Array.prototype.slice,Ze=(t(s,a),t(K,a),t(n,a),a.isIterable=c,a.isKeyed=h,a.isIndexed=f,a.isAssociative=L,a.isOrdered=T,a.Keyed=s,a.Indexed=K,a.Set=n,"@@__IMMUTABLE_ITERABLE__@@"),$e="@@__IMMUTABLE_KEYED__@@",tr="@@__IMMUTABLE_INDEXED__@@",er="@@__IMMUTABLE_ORDERED__@@",E="delete",O=5,rr=1<<O,x=rr-1,k={},nr={value:!1},ir={value:!1},or=0,ur=1,sr=2,ar="function"==typeof Symbol&&Symbol.iterator,hr="@@iterator",cr=ar||hr,fr=(_.prototype.toString=function(){return"[Iterator]"},_.KEYS=or,_.VALUES=ur,_.ENTRIES=sr,_.prototype.inspect=_.prototype.toSource=function(){return""+this},_.prototype[cr]=function(){return this},t(e,a),e.of=function(){return e(arguments)},e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){return ct(this,t,e,!0)},e.prototype.__iterator=function(t,e){return ft(this,t,e,!0)},t(v,e),v.prototype.toKeyedSeq=function(){return this},t(y,e),y.of=function(){return y(arguments)},y.prototype.toIndexedSeq=function(){return this},y.prototype.toString=function(){return this.__toString("Seq [","]")},y.prototype.__iterate=function(t,e){return ct(this,t,e,!1)},y.prototype.__iterator=function(t,e){return ft(this,t,e,!1)},t(tt,e),tt.of=function(){return tt(arguments)},tt.prototype.toSetSeq=function(){return this},e.isSeq=ot,e.Keyed=v,e.Set=tt,e.Indexed=y,"@@__IMMUTABLE_SEQ__@@");e.prototype[fr]=!0,t(et,y),et.prototype.get=function(t,e){return this.has(t)?this._array[N(this,t)]:e},et.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},et.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new _(function(){return n<i?l():p(t,i,r[e?n-i++:i++])})},t(rt,v),rt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},rt.prototype.has=function(t){return this._object.hasOwnProperty(t)},rt.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;o<=i;o++){var u=n[e?i-o:o];if(!1===t(r[u],u,this))return o+1}return o},rt.prototype.__iterator=function(e,r){var n=this._object,i=this._keys,o=i.length-1,u=0;return new _(function(){var t=i[r?o-u:u];return u++>o?l():p(e,t,n[t])})},rt.prototype[er]=!0,t(nt,y),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r,n=G(this._iterable),i=0;if(F(n))for(;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},nt.prototype.__iteratorUncached=function(e,t){var r,n;return t?this.cacheResult().__iterator(e,t):F(r=G(this._iterable))?(n=0,new _(function(){var t=r.next();return t.done?t:p(e,n++,t.value)})):new _(l)},t(it,y),it.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;n.length>i;)if(!1===t(n[i],i++,this))return i;for(;!(o=r.next()).done;){var o=o.value;if(!1===t(n[i]=o,i++,this))break}return i},it.prototype.__iteratorUncached=function(e,t){var r,n,i;return t?this.cacheResult().__iterator(e,t):(r=this._iterator,n=this._iteratorCache,i=0,new _(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return p(e,i,n[i++])}))},t(i,y),i.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},i.prototype.get=function(t,e){return this.has(t)?this._value:e},i.prototype.includes=function(t){return m(this._value,t)},i.prototype.slice=function(t,e){var r=this.size;return H(t,e,r)?this:new i(this._value,Y(e,r)-V(t,r))},i.prototype.reverse=function(){return this},i.prototype.indexOf=function(t){return m(this._value,t)?0:-1},i.prototype.lastIndexOf=function(t){return m(this._value,t)?this.size:-1},i.prototype.__iterate=function(t,e){for(var r=0;this.size>r;r++)if(!1===t(this._value,r,this))return r+1;return r},i.prototype.__iterator=function(t,e){var r=this,n=0;return new _(function(){return r.size>n?p(t,n++,r._value):l()})},i.prototype.equals=function(t){return t instanceof i?m(this._value,t._value):vt(t)},t(o,y),o.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},o.prototype.get=function(t,e){return this.has(t)?this._start+N(this,t)*this._step:e},o.prototype.includes=function(t){t=(t-this._start)/this._step;return 0<=t&&this.size>t&&t===Math.floor(t)},o.prototype.slice=function(t,e){return H(t,e,this.size)?this:(t=V(t,this.size),(e=Y(e,this.size))<=t?new o(0,0):new o(this.get(t,this._end),this.get(e,this._end),this._step))},o.prototype.indexOf=function(t){t-=this._start;if(t%this._step==0){t=t/this._step;if(0<=t&&this.size>t)return t}return-1},o.prototype.lastIndexOf=function(t){return this.indexOf(t)},o.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;o<=r;o++){if(!1===t(i,o,this))return o+1;i+=e?-n:n}return o},o.prototype.__iterator=function(e,r){var n=this.size-1,i=this._step,o=r?this._start+n*i:this._start,u=0;return new _(function(){var t=o;return o+=r?-i:i,n<u?l():p(e,u++,t)})},o.prototype.equals=function(t){return t instanceof o?this._start===t._start&&this._end===t._end&&this._step===t._step:vt(this,t)},t(dt,a),t(mt,dt),t(gt,dt),t(wt,dt),dt.Keyed=mt,dt.Indexed=gt,dt.Set=wt;var _r,pr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},lr=Object.isExtensible,vr=(()=>{try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}})(),yr="function"==typeof WeakMap,dr=(yr&&(_r=new WeakMap),0),mr="__immutablehash__",gr=("function"==typeof Symbol&&(mr=Symbol(mr)),16),wr=255,Sr=0,zr={},Ir=(t(S,mt),S.of=function(){var r=M.call(arguments,0);return jt().withMutations(function(t){for(var e=0;r.length>e;e+=2){if(e+1>=r.length)throw Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},S.prototype.toString=function(){return this.__toString("Map {","}")},S.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},S.prototype.set=function(t,e){return Rt(this,t,e)},S.prototype.setIn=function(t,e){return this.updateIn(t,k,function(){return e})},S.prototype.remove=function(t){return Rt(this,t,k)},S.prototype.deleteIn=function(t){return this.updateIn(t,function(){return k})},S.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},S.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);t=function t(e,r,n,i){var o=e===k,u=r.next();if(u.done)return(a=i(s=o?n:e))===s?e:a;yt(o||e&&e.set,"invalid keyPath");var s=u.value,a=o?k:e.get(s,k),u=t(a,r,n,i);return u===a?e:u===k?e.remove(s):(o?jt():e).set(s,u)}(this,qe(t),e,r);return t===k?void 0:t},S.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):jt()},S.prototype.merge=function(){return Tt(this,void 0,arguments)},S.prototype.mergeWith=function(t){return Tt(this,t,M.call(arguments,1))},S.prototype.mergeIn=function(t){var e=M.call(arguments,1);return this.updateIn(t,jt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},S.prototype.mergeDeep=function(){return Tt(this,Bt,arguments)},S.prototype.mergeDeepWith=function(t){return Tt(this,Wt(t),M.call(arguments,1))},S.prototype.mergeDeepIn=function(t){var e=M.call(arguments,1);return this.updateIn(t,jt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},S.prototype.sort=function(t){return z(ve(this,t))},S.prototype.sortBy=function(t,e){return z(ve(this,e,t))},S.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},S.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new W)},S.prototype.asImmutable=function(){return this.__ensureOwner()},S.prototype.wasAltered=function(){return this.__altered},S.prototype.__iterator=function(t,e){return new Ot(this,t,e)},S.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},S.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?At(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},S.isMap=It,"@@__IMMUTABLE_MAP__@@"),A=S.prototype;A[Ir]=!0,A[E]=A.remove,A.removeIn=A.deleteIn,bt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(m(r,i[o][0]))return i[o][1];return n},bt.prototype.update=function(t,e,r,n,i,o,u){for(var s=i===k,a=this.entries,h=0,c=a.length;h<c&&!m(n,a[h][0]);h++);var f=h<c;if(f?a[h][1]===i:s)return this;if(d(u),!s&&f||d(o),!s||1!==a.length){if(!f&&!s&&a.length>=qr){for(var _=t,p=a,u=n,o=i,l=new Et(_=_||new W,w(u),[u,o]),v=0;p.length>v;v++)var y=p[v],l=l.update(_,0,void 0,y[0],y[1]);return l}return o=(u=t&&t===this.ownerID)?a:C(a),f?s?h===c-1?o.pop():o[h]=o.pop():o[h]=[n,i]:o.push([n,i]),u?(this.entries=o,this):new bt(t,o)}},qt.prototype.get=function(t,e,r,n){void 0===e&&(e=w(r));var i=1<<((0===t?e:e>>>t)&x),o=this.bitmap;return 0==(o&i)?n:this.nodes[Jt(o&i-1)].get(t+O,e,r,n)},qt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=w(n));var s=(0===e?r:r>>>e)&x,a=1<<s,h=this.bitmap,c=0!=(h&a);if(!c&&i===k)return this;var f=Jt(h&a-1),_=this.nodes,p=c?_[f]:void 0,e=Ut(p,t,e+O,r,n,i,o,u);if(e===p)return this;if(!c&&e&&_.length>=Dr){for(var r=t,l=_,v=h,n=s,i=e,y=0,d=Array(rr),m=0;0!==v;m++,v>>>=1)d[m]=1&v?l[y++]:void 0;return d[n]=i,new Dt(r,y+1,d)}return c&&!e&&2===_.length&&Kt(_[1^f])?_[1^f]:c&&e&&1===_.length&&Kt(e)?e:(o=t&&t===this.ownerID,u=c?e?h:h^a:h|a,p=c?e?Nt(_,f,e,o):((t,e,r)=>{var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=Array(n),o=0,u=0;u<n;u++)i[u]=t[u+(o=u===e?1:o)];return i})(_,f,o):((t,e,r,n)=>{var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=Array(i),u=0,s=0;s<i;s++)s===e?(o[s]=r,u=-1):o[s]=t[s+u];return o})(_,f,e,o),o?(this.bitmap=u,this.nodes=p,this):new qt(t,u,p))},Dt.prototype.get=function(t,e,r,n){void 0===e&&(e=w(r));var i=this.nodes[(0===t?e:e>>>t)&x];return i?i.get(t+O,e,r,n):n},Dt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=w(n));var s=(0===e?r:r>>>e)&x,a=i===k,h=this.nodes,c=h[s];if(a&&!c)return this;a=Ut(c,t,e+O,r,n,i,o,u);if(a===c)return this;e=this.count;if(c){if(!a&&--e<Mr){r=t;var f=h;n=e;var _=s;for(var p=0,l=0,v=Array(n),y=0,d=1,m=f.length;y<m;y++,d<<=1){var g=f[y];void 0!==g&&y!==_&&(p|=d,v[l++]=g)}return new qt(r,p,v);return}}else e++;i=t&&t===this.ownerID,o=Nt(h,s,a,i);return i?(this.count=e,this.nodes=o,this):new Dt(t,e,o)},Mt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(m(r,i[o][0]))return i[o][1];return n},Mt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=w(n));var s=i===k;if(r!==this.keyHash)return s?this:(d(u),d(o),Lt(this,t,e,r,[n,i]));for(var a=this.entries,h=0,c=a.length;h<c&&!m(n,a[h][0]);h++);e=h<c;return(e?a[h][1]===i:s)?this:(d(u),!s&&e||d(o),s&&2===c?new Et(t,this.keyHash,a[1^h]):(u=(r=t&&t===this.ownerID)?a:C(a),e?s?h===c-1?u.pop():u[h]=u.pop():u[h]=[n,i]:u.push([n,i]),r?(this.entries=u,this):new Mt(t,this.keyHash,u)))},Et.prototype.get=function(t,e,r,n){return m(r,this.entry[0])?this.entry[1]:n},Et.prototype.update=function(t,e,r,n,i,o,u){var s=i===k,a=m(n,this.entry[0]);return(a?i===this.entry[1]:s)?this:(d(u),s?void d(o):a?t&&t===this.ownerID?(this.entry[1]=i,this):new Et(t,this.keyHash,[n,i]):(d(o),Lt(this,t,e,w(n),[n,i])))},bt.prototype.iterate=Mt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},qt.prototype.iterate=Dt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},Et.prototype.iterate=function(t,e){return t(this.entry)},t(Ot,_),Ot.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0==i)return xt(t,n.entry)}else if(n.entries){if(i<=(r=n.entries.length-1))return xt(t,n.entries[this._reverse?r-i:i])}else if(i<=(r=n.nodes.length-1)){n=n.nodes[this._reverse?r-i:i];if(n){if(n.entry)return xt(t,n.entry);e=this._stack=kt(n,e)}continue}e=this._stack=this._stack.__prev}return l()};var br,qr=rr/4,Dr=rr/2,Mr=rr/4,Er=(t(r,gt),r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("List [","]")},r.prototype.get=function(t,e){var r;return 0<=(t=N(this,t))&&this.size>t?(r=Gt(this,t+=this._origin))&&r.array[t&x]:e},r.prototype.set=function(t,e){var r=this,n=t,i=e;if((n=N(r,n))!=n)return r;if(n>=r.size||n<0)return r.withMutations(function(t){n<0?Zt(t,n).set(0,i):Zt(t,0,n+1).set(n,i)});n+=r._origin;var t=r._tail,e=r._root,o=B(ir);return n>=te(r._capacity)?t=Xt(t,r.__ownerID,0,n,i,o):e=Xt(e,r.__ownerID,r._level,n,i,o),o.value?r.__ownerID?(r._root=e,r._tail=t,r.__hash=void 0,r.__altered=!0,r):Yt(r._origin,r._capacity,r._level,e,t):r},r.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},r.prototype.insert=function(t,e){return this.splice(t,0,e)},r.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=O,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Qt()},r.prototype.push=function(){var r=arguments,n=this.size;return this.withMutations(function(t){Zt(t,0,n+r.length);for(var e=0;e<r.length;e++)t.set(n+e,r[e])})},r.prototype.pop=function(){return Zt(this,0,-1)},r.prototype.unshift=function(){var r=arguments;return this.withMutations(function(t){Zt(t,-r.length);for(var e=0;e<r.length;e++)t.set(e,r[e])})},r.prototype.shift=function(){return Zt(this,1)},r.prototype.merge=function(){return $t(this,void 0,arguments)},r.prototype.mergeWith=function(t){return $t(this,t,M.call(arguments,1))},r.prototype.mergeDeep=function(){return $t(this,Bt,arguments)},r.prototype.mergeDeepWith=function(t){return $t(this,Wt(t),M.call(arguments,1))},r.prototype.setSize=function(t){return Zt(this,0,t)},r.prototype.slice=function(t,e){var r=this.size;return H(t,e,r)?this:Zt(this,V(t,r),Y(e,r))},r.prototype.__iterator=function(e,t){var r=0,n=Vt(this,t);return new _(function(){var t=n();return t===Rr?l():p(e,r++,t)})},r.prototype.__iterate=function(t,e){for(var r,n=0,i=Vt(this,e);(r=i())!==Rr&&!1!==t(r,n++,this););return n},r.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Yt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},r.isList=Pt,"@@__IMMUTABLE_LIST__@@"),j=r.prototype;j[Er]=!0,j[E]=j.remove,j.setIn=A.setIn,j.deleteIn=j.removeIn=A.removeIn,j.update=A.update,j.updateIn=A.updateIn,j.mergeIn=A.mergeIn,j.mergeDeepIn=A.mergeDeepIn,j.withMutations=A.withMutations,j.asMutable=A.asMutable,j.asImmutable=A.asImmutable,j.wasAltered=A.wasAltered,Ht.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&x;if(n>=this.array.length)return new Ht([],t);var i=0==n;if(0<e){var o,u=this.array[n];if((o=u&&u.removeBefore(t,e-O,r))===u&&i)return this}if(i&&!o)return this;var s=Ft(this,t);if(!i)for(var a=0;a<n;a++)s.array[a]=void 0;return o&&(s.array[n]=o),s},Ht.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n=r-1>>>e&x;if(n>=this.array.length)return this;if(0<e){var i,o=this.array[n];if((i=o&&o.removeAfter(t,e-O,r))===o&&n==this.array.length-1)return this}e=Ft(this,t);return e.array.splice(1+n),i&&(e.array[n]=i),e};var Or,xr,kr,Ar,jr,Rr={},R=(t(z,S),z.of=function(){return this(arguments)},z.prototype.toString=function(){return this.__toString("OrderedMap {","}")},z.prototype.get=function(t,e){t=this._map.get(t);return void 0!==t?this._list.get(t)[1]:e},z.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ne()},z.prototype.set=function(t,e){return ie(this,t,e)},z.prototype.remove=function(t){return ie(this,t,k)},z.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},z.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},z.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},z.prototype.__ensureOwner=function(t){var e,r;return t===this.__ownerID?this:(e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t),t?re(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this))},z.isOrderedMap=ee,z.prototype[er]=!0,z.prototype[E]=z.prototype.remove,t(u,v),u.prototype.get=function(t,e){return this._iter.get(t,e)},u.prototype.has=function(t){return this._iter.has(t)},u.prototype.valueSeq=function(){return this._iter.valueSeq()},u.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},u.prototype.map=function(t,e){var r=this,n=he(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},u.prototype.__iterate=function(r,e){var n,i=this;return this._iter.__iterate(this._useKeys?function(t,e){return r(t,e,i)}:(n=e?we(this):0,function(t){return r(t,e?--n:n++,i)}),e)},u.prototype.__iterator=function(e,r){var n,i;return this._useKeys?this._iter.__iterator(e,r):(n=this._iter.__iterator(ur,r),i=r?we(this):0,new _(function(){var t=n.next();return t.done?t:p(e,r?--i:i++,t.value,t)}))},u.prototype[er]=!0,t(oe,y),oe.prototype.includes=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r)},t)},oe.prototype.__iterator=function(e,t){var r=this._iter.__iterator(ur,t),n=0;return new _(function(){var t=r.next();return t.done?t:p(e,n++,t.value,t)})},t(ue,tt),ue.prototype.has=function(t){return this._iter.includes(t)},ue.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},ue.prototype.__iterator=function(e,t){var r=this._iter.__iterator(ur,t);return new _(function(){var t=r.next();return t.done?t:p(e,t.value,t.value,t)})},t(se,v),se.prototype.entrySeq=function(){return this._iter.toSeq()},se.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t){var e;if(t)return ge(t),e=c(t),r(e?t.get(1):t[1],e?t.get(0):t[0],n)},t)},se.prototype.__iterator=function(n,t){var i=this._iter.__iterator(ur,t);return new _(function(){for(;;){var t=i.next();if(t.done)return t;var e,r=t.value;if(r)return ge(r),e=c(r),p(n,e?r.get(0):r[0],e?r.get(1):r[1],t)}})},oe.prototype.cacheResult=u.prototype.cacheResult=ue.prototype.cacheResult=se.prototype.cacheResult=Ie,t(b,mt),b.prototype.toString=function(){return this.__toString(Me(this)+" {","}")},b.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},b.prototype.get=function(t,e){var r;return this.has(t)?(r=this._defaultValues[t],this._map?this._map.get(t,r):r):e},b.prototype.clear=function(){var t;return this.__ownerID?(this._map&&this._map.clear(),this):(t=this.constructor)._empty||(t._empty=De(this,jt()))},b.prototype.set=function(t,e){if(!this.has(t))throw Error('Cannot set unknown key "'+t+'" on '+Me(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;t=this._map&&this._map.set(t,e);return this.__ownerID||t===this._map?this:De(this,t)},b.prototype.remove=function(t){return!this.has(t)||(t=this._map&&this._map.remove(t),this.__ownerID)||t===this._map?this:De(this,t)},b.prototype.wasAltered=function(){return this._map.wasAltered()},b.prototype.__iterator=function(t,e){var r=this;return s(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},b.prototype.__iterate=function(t,e){var r=this;return s(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},b.prototype.__ensureOwner=function(t){var e;return t===this.__ownerID?this:(e=this._map&&this._map.__ensureOwner(t),t?De(this,e,t):(this.__ownerID=t,this._map=e,this))},b.prototype),Ur=(R[E]=R.remove,R.deleteIn=R.removeIn=A.removeIn,R.merge=A.merge,R.mergeWith=A.mergeWith,R.mergeIn=A.mergeIn,R.mergeDeep=A.mergeDeep,R.mergeDeepWith=A.mergeDeepWith,R.mergeDeepIn=A.mergeDeepIn,R.setIn=A.setIn,R.update=A.update,R.updateIn=A.updateIn,R.withMutations=A.withMutations,R.asMutable=A.asMutable,R.asImmutable=A.asImmutable,t(q,wt),q.of=function(){return this(arguments)},q.fromKeys=function(t){return this(s(t).keySeq())},q.prototype.toString=function(){return this.__toString("Set {","}")},q.prototype.has=function(t){return this._map.has(t)},q.prototype.add=function(t){return Oe(this,this._map.set(t,!0))},q.prototype.remove=function(t){return Oe(this,this._map.remove(t))},q.prototype.clear=function(){return Oe(this,this._map.clear())},q.prototype.union=function(){var r=M.call(arguments,0);return 0===(r=r.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){for(var t=0;r.length>t;t++)n(r[t]).forEach(function(t){return e.add(t)})}):this.constructor(r[0])},q.prototype.intersect=function(){var r,e;return 0===(r=M.call(arguments,0)).length?this:(r=r.map(n),(e=this).withMutations(function(t){e.forEach(function(e){r.every(function(t){return t.includes(e)})||t.remove(e)})}))},q.prototype.subtract=function(){var r,e;return 0===(r=M.call(arguments,0)).length?this:(r=r.map(n),(e=this).withMutations(function(t){e.forEach(function(e){r.some(function(t){return t.includes(e)})&&t.remove(e)})}))},q.prototype.merge=function(){return this.union.apply(this,arguments)},q.prototype.mergeWith=function(t){var e=M.call(arguments,1);return this.union.apply(this,e)},q.prototype.sort=function(t){return Ae(ve(this,t))},q.prototype.sortBy=function(t,e){return Ae(ve(this,e,t))},q.prototype.wasAltered=function(){return this._map.wasAltered()},q.prototype.__iterate=function(r,t){var n=this;return this._map.__iterate(function(t,e){return r(e,e,n)},t)},q.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},q.prototype.__ensureOwner=function(t){var e;return t===this.__ownerID?this:(e=this._map.__ensureOwner(t),t?this.__make(e,t):(this.__ownerID=t,this._map=e,this))},q.isSet=Ee,"@@__IMMUTABLE_SET__@@"),U=q.prototype,Kr=(U[Ur]=!0,U[E]=U.remove,U.mergeDeep=U.merge,U.mergeDeepWith=U.mergeWith,U.withMutations=A.withMutations,U.asMutable=A.asMutable,U.asImmutable=A.asImmutable,U.__empty=ke,U.__make=xe,t(Ae,q),Ae.of=function(){return this(arguments)},Ae.fromKeys=function(t){return this(s(t).keySeq())},Ae.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ae.isOrderedSet=je,Ae.prototype),Lr=(Kr[er]=!0,Kr.__empty=Ue,Kr.__make=Re,t(D,gt),D.of=function(){return this(arguments)},D.prototype.toString=function(){return this.__toString("Stack [","]")},D.prototype.get=function(t,e){var r=this._head;for(t=N(this,t);r&&t--;)r=r.next;return r?r.value:e},D.prototype.peek=function(){return this._head&&this._head.value},D.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;0<=r;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Le(t,e)},D.prototype.pushAll=function(t){if(0===(t=K(t)).size)return this;g(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Le(e,r)},D.prototype.pop=function(){return this.slice(1)},D.prototype.unshift=function(){return this.push.apply(this,arguments)},D.prototype.unshiftAll=function(t){return this.pushAll(t)},D.prototype.shift=function(){return this.pop.apply(this,arguments)},D.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Te()},D.prototype.slice=function(t,e){if(H(t,e,this.size))return this;var r=V(t,this.size);if(Y(e,this.size)!==this.size)return gt.prototype.slice.call(this,t,e);for(var t=this.size-r,n=this._head;r--;)n=n.next;return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Le(t,n)},D.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Le(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},D.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},D.prototype.__iterator=function(e,t){var r,n;return t?this.reverse().__iterator(e):(r=0,n=this._head,new _(function(){var t;return n?(t=n.value,n=n.next,p(e,r++,t)):l()}))},D.isStack=Ke,"@@__IMMUTABLE_STACK__@@"),Tr=D.prototype,E=(Tr[Lr]=!0,Tr.withMutations=A.withMutations,Tr.asMutable=A.asMutable,Tr.asImmutable=A.asImmutable,Tr.wasAltered=A.wasAltered,a.Iterator=_,Be(a,{toArray:function(){g(this.size);var r=Array(this.size||0);return this.valueSeq().__iterate(function(t,e){r[e]=t}),r},toIndexedSeq:function(){return new oe(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new u(this,!0)},toMap:function(){return S(this.toKeyedSeq())},toObject:function(){g(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r},toOrderedMap:function(){return z(this.toKeyedSeq())},toOrderedSet:function(){return Ae(h(this)?this.valueSeq():this)},toSet:function(){return q(h(this)?this.valueSeq():this)},toSetSeq:function(){return new ue(this)},toSeq:function(){return f(this)?this.toIndexedSeq():h(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return D(h(this)?this.valueSeq():this)},toList:function(){return r(h(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return I(this,((t,e)=>{var r=h(t);if(0===(e=[t].concat(e).map(function(t){return c(t)?r&&(t=s(t)):t=r?st(t):at(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size})).length)return t;if(1===e.length){var n=e[0];if(n===t||r&&h(n)||f(t)&&f(n))return n}return n=new et(e),r?n=n.toKeyedSeq():f(t)||(n=n.toSetSeq()),(n=n.flatten(!0)).size=e.reduce(function(t,e){if(void 0!==t){e=e.size;if(void 0!==e)return t+e}},0),n})(this,M.call(arguments,0)))},includes:function(e){return this.some(function(t){return m(t,e)})},entries:function(){return this.__iterator(sr)},every:function(n,i){g(this.size);var o=!0;return this.__iterate(function(t,e,r){return n.call(i,t,e,r)?void 0:o=!1}),o},filter:function(t,e){return I(this,fe(this,t,e,!0))},find:function(t,e,r){t=this.findEntry(t,e);return t?t[1]:r},forEach:function(t,e){return g(this.size),this.__iterate(e?t.bind(e):t)},join:function(e){g(this.size),e=void 0!==e?""+e:",";var r="",n=!0;return this.__iterate(function(t){n?n=!1:r+=e,r+=null!=t?""+t:""}),r},keys:function(){return this.__iterator(or)},map:function(t,e){return I(this,he(this,t,e))},reduce:function(n,t,i){var o,u;return g(this.size),arguments.length<2?u=!0:o=t,this.__iterate(function(t,e,r){o=u?(u=!1,t):n.call(i,o,t,e,r)}),o},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return I(this,ce(this,!0))},slice:function(t,e){return I(this,_e(this,t,e,!0))},some:function(t,e){return!this.every(Je(t),e)},sort:function(t){return I(this,ve(this,t))},values:function(){return this.__iterator(ur)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return J(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return r=this,n=t,i=e,o=S().asMutable(),r.__iterate(function(t,e){o.update(n.call(i,t,e,r),0,function(t){return t+1})}),o.asImmutable();var r,n,i,o},equals:function(t){return vt(this,t)},entrySeq:function(){var t,e=this;return e._cache?new et(e._cache):((t=e.toSeq().map(Ce).toIndexedSeq()).fromEntrySeq=function(){return e.toSeq()},t)},filterNot:function(t,e){return this.filter(Je(t),e)},findEntry:function(n,i,t){var o=t;return this.__iterate(function(t,e,r){return n.call(i,t,e,r)?!(o=[e,t]):void 0}),o},findKey:function(t,e){t=this.findEntry(t,e);return t&&t[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(P)},flatMap:function(t,e){return I(this,(n=t,i=e,o=Se(r=this),r.toSeq().map(function(t,e){return o(n.call(i,t,e,r))}).flatten(!0)));var r,n,i,o},flatten:function(t){return I(this,le(this,t,!0))},fromEntrySeq:function(){return new se(this)},get:function(r,t){return this.find(function(t,e){return m(e,r)},void 0,t)},getIn:function(t,e){for(var r,n=this,i=qe(t);!(r=i.next()).done;)if((n=n&&n.get?n.get(r.value,k):k)===k)return e;return n},groupBy:function(t,e){return i=t,o=e,u=h(n=this),s=(T(n)?z:S)().asMutable(),n.__iterate(function(e,r){s.update(i.call(o,e,r,n),function(t){return(t=t||[]).push(u?[r,e]:e),t})}),r=Se(n),s.map(function(t){return I(n,r(t))});var n,i,o,u,s,r},has:function(t){return this.get(t,k)!==k},hasIn:function(t){return this.getIn(t,k)!==k},isSubset:function(e){return e="function"==typeof e.includes?e:a(e),this.every(function(t){return e.includes(t)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:a(t)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return m(t,e)})},keySeq:function(){return this.toSeq().map(We).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ye(this,t)},maxBy:function(t,e){return ye(this,e,t)},min:function(t){return ye(this,t?Ne(t):Ve)},minBy:function(t,e){return ye(this,e?Ne(e):Ve,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return I(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return I(this,pe(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Je(t),e)},sortBy:function(t,e){return I(this,ve(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return I(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return I(this,(s=t,a=e,(t=ze(r=this)).__iterateUncached=function(n,t){var i,o=this;return t?this.cacheResult().__iterate(n,t):(i=0,r.__iterate(function(t,e,r){return s.call(a,t,e,r)&&++i&&n(t,e,o)}),i)},t.__iteratorUncached=function(n,t){var i,o,u=this;return t?this.cacheResult().__iterator(n,t):(i=r.__iterator(sr,t),o=!0,new _(function(){var t,e,r;return o?(t=i.next()).done?t:(e=(r=t.value)[0],s.call(a,r=r[1],e,u)?n===sr?t:p(n,e,r,t):(o=!1,l())):l()}))},t));var r,s,a},takeUntil:function(t,e){return this.takeWhile(Je(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ye(this))}}),a.prototype),Br=(E[Ze]=!0,E[cr]=E.values,E.__toJS=E.toArray,E.__toStringMapper=Pe,E.inspect=E.toSource=function(){return""+this},E.chain=E.flatMap,E.contains=E.includes,Be(s,{flip:function(){return I(this,ae(this))},mapEntries:function(r,n){var i=this,o=0;return I(this,this.toSeq().map(function(t,e){return r.call(n,[e,t],o++,i)}).fromEntrySeq())},mapKeys:function(r,n){var i=this;return I(this,this.toSeq().flip().map(function(t,e){return r.call(n,t,e,i)}).flip())}}),s.prototype);return Br[$e]=!0,Br[cr]=E.entries,Br.__toJS=E.toObject,Br.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Pe(t)},Be(K,{toKeyedSeq:function(){return new u(this,!1)},filter:function(t,e){return I(this,fe(this,t,e,!1))},findIndex:function(t,e){t=this.findEntry(t,e);return t?t[0]:-1},indexOf:function(t){t=this.keyOf(t);return void 0===t?-1:t},lastIndexOf:function(t){t=this.lastKeyOf(t);return void 0===t?-1:t},reverse:function(){return I(this,ce(this,!1))},slice:function(t,e){return I(this,_e(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=V(t,t<0?this.count():this.size);var n=this.slice(0,t);return I(this,1===r?n:n.concat(C(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){t=this.findLastEntry(t,e);return t?t[0]:-1},first:function(){return this.get(0)},flatten:function(t){return I(this,le(this,t,!1))},get:function(r,t){return(r=N(this,r))<0||this.size===1/0||void 0!==this.size&&r>this.size?t:this.find(function(t,e){return e===r},void 0,t)},has:function(t){return 0<=(t=N(this,t))&&(void 0!==this.size?this.size===1/0||this.size>t:-1!==this.indexOf(t))},interpose:function(t){return I(this,(u=t,(t=ze(o=this)).size=o.size&&2*o.size-1,t.__iterateUncached=function(r,t){var n=this,i=0;return o.__iterate(function(t,e){return(!i||!1!==r(u,i++,n))&&!1!==r(t,i++,n)},t),i},t.__iteratorUncached=function(t,e){var r,n=o.__iterator(ur,e),i=0;return new _(function(){return(!r||i%2)&&(r=n.next()).done?r:i%2?p(t,i++,u):p(t,i++,r.value,r)})},t));var o,u},interleave:function(){var t=[this].concat(C(arguments)),e=me(this.toSeq(),y.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),I(this,r)},keySeq:function(){return o(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return I(this,pe(this,t,e,!1))},zip:function(){var t=[this].concat(C(arguments));return I(this,me(this,He,t))},zipWith:function(t){var e=C(arguments);return I(e[0]=this,me(this,t,e))}}),K.prototype[tr]=!0,K.prototype[er]=!0,Be(n,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),n.prototype.has=E.includes,n.prototype.contains=n.prototype.includes,Be(v,s.prototype),Be(y,K.prototype),Be(tt,n.prototype),Be(mt,s.prototype),Be(gt,K.prototype),Be(wt,n.prototype),{Iterable:a,Seq:e,Collection:dt,Map:S,OrderedMap:z,List:r,Stack:D,Set:q,OrderedSet:Ae,Record:b,Range:o,Repeat:i,is:m,fromJS:_t}});
((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Redux=e.Redux||{})})(this,function(e){function p(e){{if(null==e)return void 0===e?y:s;if(b&&b in Object(e)){var t=e,n=u.call(t,d),r=t[d];try{var o=!(t[d]=void 0)}catch(t){}var i=f.call(t);return o&&(n?t[d]=r:delete t[d]),i}return l.call(e)}}function c(e,t){return function(){return t(e.apply(void 0,arguments))}}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var t,n,r,o="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,o=(o||i||Function("return this")()).Symbol,i=Object.prototype,u=i.hasOwnProperty,f=i.toString,d=o?o.toStringTag:void 0,l=Object.prototype.toString,s="[object Null]",y="[object Undefined]",b=o?o.toStringTag:void 0,h=(n=Object.getPrototypeOf,r=Object,function(e){return n(r(e))}),v="[object Object]",g=Function.prototype.toString,j=Object.prototype.hasOwnProperty,w=g.call(Object),m=("function"==typeof(i=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol)?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t),O="@@redux/INIT",x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.createStore=function e(t,n,r){function o(){l===d&&(l=d.slice())}function i(){return f}function u(t){if("function"!=typeof t)throw Error("Expected listener to be a function.");var n=!0;return o(),l.push(t),function(){var e;n&&(n=!1,o(),e=l.indexOf(t),l.splice(e,1))}}function c(e){if(!(e=>{var t;return null!=(t=e)&&"object"==typeof t&&p(e)==v&&(null===(t=h(e))||"function"==typeof(e=j.call(t,"constructor")&&t.constructor)&&e instanceof e&&g.call(e)==w)})(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw Error("Reducers may not dispatch actions.");try{s=!0,f=a(f,e)}finally{s=!1}for(var t=d=l,n=0;t.length>n;n++)(0,t[n])();return e}if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var a=t,f=n,d=[],l=d,s=!1;return c({type:O}),(r={dispatch:c,subscribe:u,getState:i,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");a=e,c({type:O})}})[m]=function(){var n=u,e={subscribe:function(e){function t(){e.next&&e.next(f)}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return t(),{unsubscribe:n(t)}}};return e[m]=function(){return this},e},r},e.combineReducers=function(e){for(var t=Object.keys(e),d={},n=0;t.length>n;n++){var r=t[n];"function"==typeof e[r]&&(d[r]=e[r])}var o,l=Object.keys(d),s=void 0;try{o=d,Object.keys(o).forEach(function(e){var t=o[e];if(void 0===t(void 0,{type:O}))throw Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+O+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){s=e}return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var n,r=!1,o={},i=0;l.length>i;i++){var u,c=l[i],a=d[c],f=e[c],a=a(f,t);if(void 0===a)throw n=c,u="Given action "+((u=(u=t)&&u.type)&&'"'+u+'"'||"an action")+', reducer "'+n+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.',Error(u);o[c]=a,r=r||a!==f}return r?o:e}},e.bindActionCreators=function(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;n.length>o;o++){var i=n[o],u=e[i];"function"==typeof u&&(r[i]=c(u,t))}return r},e.applyMiddleware=function(){for(var e=arguments.length,u=Array(e),t=0;t<e;t++)u[t]=arguments[t];return function(i){return function(e,t,n){var e=i(e,t,n),r=e.dispatch,o={getState:e.getState,dispatch:function(e){return r(e)}},t=u.map(function(e){return e(o)}),r=a.apply(void 0,t)(e.dispatch);return x({},e,{dispatch:r})}}},e.compose=a,Object.defineProperty(e,"__esModule",{value:!0})});
((t,e)=>{"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ReduxThunk=e():t.ReduxThunk=e()})(this,function(){return o=[function(t,e,n){t.exports=n(1)},function(t,e){function n(r){return function(t){var n=t.dispatch,o=t.getState;return function(e){return function(t){return"function"==typeof t?t(n,o,r):e(t)}}}}e.__esModule=!0;var o=n();o.withExtraArgument=n,e.default=o}],r={},n.m=o,n.c=r,n.p="",n(0);function n(t){var e;return(r[t]||(e=r[t]={exports:{},id:t,loaded:!1},o[t].call(e.exports,e,e.exports,n),e.loaded=!0,e)).exports}var o,r});
((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()})(this,function(){function l(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this}var c="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,F="undefined"==typeof window?{document:c,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window;function E(e,t){var a=[],i=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){var s,n,r=e.trim();if(0<=r.indexOf("<")&&0<=r.indexOf(">")){var o="div";for(0===r.indexOf("<li")&&(o="ul"),0===r.indexOf("<tr")&&(o="tbody"),0!==r.indexOf("<td")&&0!==r.indexOf("<th")||(o="tr"),0===r.indexOf("<tbody")&&(o="table"),0===r.indexOf("<option")&&(o="select"),(n=c.createElement(o)).innerHTML=r,i=0;i<n.childNodes.length;i+=1)a.push(n.childNodes[i])}else for(s=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||c).querySelectorAll(e.trim()):[c.getElementById(e.trim().split("#")[1])],i=0;i<s.length;i+=1)s[i]&&a.push(s[i])}else if(e.nodeType||e===F||e===c)a.push(e);else if(0<e.length&&e[0].nodeType)for(i=0;i<e.length;i+=1)a.push(e[i]);return new l(a)}function n(e){for(var t=[],a=0;a<e.length;a+=1)-1===t.indexOf(e[a])&&t.push(e[a]);return t}E.fn=l.prototype,E.Class=l,E.Dom7=l;var D={addClass:function(e){if(void 0!==e)for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[a]);return this},removeClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[a]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[a]);return this},attr:function(e,t){var a=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i+=1)if(2===a.length)this[i].setAttribute(e,t);else for(var s in e)this[i][s]=e[s],this[i].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var a;if(void 0!==t){for(var i=0;i<this.length;i+=1)(a=this[i]).dom7ElementDataStorage||(a.dom7ElementDataStorage={}),a.dom7ElementDataStorage[e]=t;return this}if(a=this[0])return a.dom7ElementDataStorage&&e in a.dom7ElementDataStorage?a.dom7ElementDataStorage[e]:a.getAttribute("data-"+e)||void 0},transform:function(e){for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransform=e,a.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransitionDuration=e,a.transitionDuration=e}return this},on:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a=e[0],n=e[1],r=e[2],i=e[3];function s(e){var t=e.target;if(t){var a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),E(t).is(n))r.apply(t,a);else for(var i=E(t).parents(),s=0;s<i.length;s+=1)E(i[s]).is(n)&&r.apply(i[s],a)}}function o(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&(a=e[0],r=e[1],i=e[2],n=void 0);for(var l,i=i||!1,d=a.split(" "),p=0;p<this.length;p+=1){var c=this[p];if(n)for(l=0;l<d.length;l+=1){var u=d[l];c.dom7LiveListeners||(c.dom7LiveListeners={}),c.dom7LiveListeners[u]||(c.dom7LiveListeners[u]=[]),c.dom7LiveListeners[u].push({listener:r,proxyListener:s}),c.addEventListener(u,s,i)}else for(l=0;l<d.length;l+=1){var h=d[l];c.dom7Listeners||(c.dom7Listeners={}),c.dom7Listeners[h]||(c.dom7Listeners[h]=[]),c.dom7Listeners[h].push({listener:r,proxyListener:o}),c.addEventListener(h,o,i)}}return this},off:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a=e[0],i=e[1],s=e[2],n=e[3];"function"==typeof e[1]&&(a=e[0],s=e[1],n=e[2],i=void 0);for(var n=n||!1,r=a.split(" "),o=0;o<r.length;o+=1)for(var l=r[o],d=0;d<this.length;d+=1){var p=this[d],c=void 0;if(!i&&p.dom7Listeners?c=p.dom7Listeners[l]:i&&p.dom7LiveListeners&&(c=p.dom7LiveListeners[l]),c&&c.length)for(var u=c.length-1;0<=u;--u){var h=c[u];(s&&h.listener===s||s&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===s||!s)&&(p.removeEventListener(l,h.proxyListener,n),c.splice(u,1))}}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=e[0].split(" "),i=e[1],s=0;s<a.length;s+=1)for(var n=a[s],r=0;r<this.length;r+=1){var o=this[r],l=void 0;try{l=new F.CustomEvent(n,{detail:i,bubbles:!0,cancelable:!0})}catch(e){(l=c.createEvent("Event")).initEvent(n,!0,!0),l.detail=i}o.dom7EventData=e.filter(function(e,t){return 0<t}),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(t){var a,i=["webkitTransitionEnd","transitionend"],s=this;function n(e){if(e.target===this)for(t.call(this,e),a=0;a<i.length;a+=1)s.off(i[a],n)}if(t)for(a=0;a<i.length;a+=1)s.on(i[a],n);return this},outerWidth:function(e){return 0<this.length?e?(e=this.styles(),this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))):this[0].offsetWidth:null},outerHeight:function(e){return 0<this.length?e?(e=this.styles(),this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))):this[0].offsetHeight:null},offset:function(){var e,t,a,i,s;return 0<this.length?(e=(s=this[0]).getBoundingClientRect(),a=c.body,t=s.clientTop||a.clientTop||0,a=s.clientLeft||a.clientLeft||0,i=s===F?F.scrollY:s.scrollTop,s=s===F?F.scrollX:s.scrollLeft,{top:e.top+i-t,left:e.left+s-a}):null},css:function(e,t){var a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(var i in e)this[a].style[i]=e[i];return this}if(this[0])return F.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e)for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this},each:function(e){if(e)for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,a,i=this[0];if(i&&void 0!==e)if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=E(e),a=0;a<t.length;a+=1)if(t[a]===i)return!0}else{if(e===c)return i===c;if(e===F)return i===F;if(e.nodeType||e instanceof l)for(t=e.nodeType?[e]:e,a=0;a<t.length;a+=1)if(t[a]===i)return!0}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){var t;return void 0===e?this:(t=this.length,new l(t-1<e?[]:e<0?(t=t+e)<0?[]:[this[t]]:[this[e]]))},append:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=0;a<e.length;a+=1)for(var i=e[a],s=0;s<this.length;s+=1)if("string"==typeof i){var n=c.createElement("div");for(n.innerHTML=i;n.firstChild;)this[s].appendChild(n.firstChild)}else if(i instanceof l)for(var r=0;r<i.length;r+=1)this[s].appendChild(i[r]);else this[s].appendChild(i);return this},prepend:function(e){for(var t,a=0;a<this.length;a+=1)if("string"==typeof e){var i=c.createElement("div");for(i.innerHTML=e,t=i.childNodes.length-1;0<=t;--t)this[a].insertBefore(i.childNodes[t],this[a].childNodes[0])}else if(e instanceof l)for(t=0;t<e.length;t+=1)this[a].insertBefore(e[t],this[a].childNodes[0]);else this[a].insertBefore(e,this[a].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&E(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;e&&!E(i).is(e)||t.push(i),a=i}return new l(t)},prev:function(e){var t;return 0<this.length?(t=this[0],e?t.previousElementSibling&&E(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])):new l([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;e&&!E(i).is(e)||t.push(i),a=i}return new l(t)},parent:function(e){for(var t=[],a=0;a<this.length;a+=1)null===this[a].parentNode||e&&!E(this[a].parentNode).is(e)||t.push(this[a].parentNode);return E(n(t))},parents:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].parentNode;i;)e&&!E(i).is(e)||t.push(i),i=i.parentNode;return E(n(t))},closest:function(e){var t=this;return void 0===e?new l([]):t=t.is(e)?t:t.parents(e).eq(0)},find:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].querySelectorAll(e),s=0;s<i.length;s+=1)t.push(i[s]);return new l(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].childNodes,s=0;s<i.length;s+=1)e?1===i[s].nodeType&&E(i[s]).is(e)&&t.push(i[s]):1===i[s].nodeType&&t.push(i[s]);return new l(n(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];for(e=0;e<t.length;e+=1)for(var i=E(t[e]),s=0;s<i.length;s+=1)this[this.length]=i[s],this.length+=1;return this},styles:function(){return this[0]?F.getComputedStyle(this[0],null):{}}};Object.keys(D).forEach(function(e){E.fn[e]=D[e]});function e(e){var t=this;t.params=e=void 0===e?{}:e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})}var i,R={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){void 0===t&&(t="x");var a,i,s,e=F.getComputedStyle(e,null);return F.WebKitCSSMatrix?(6<(i=e.transform||e.webkitTransform).split(",").length&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),s=new F.WebKitCSSMatrix("none"===i?"":i)):a=(s=e.MozTransform||e.OTransform||e.MsTransform||e.msTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=F.WebKitCSSMatrix?s.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),(i="y"===t?F.WebKitCSSMatrix?s.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5]):i)||0},parseUrlQuery:function(e){var t,a,i,s,n={},e=e||F.location.href;if("string"==typeof e&&e.length)for(s=(a=(e=-1<e.indexOf("?")?e.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<s;t+=1)i=a[t].replace(/#\S+/g,"").split("="),n[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i[1])||"";return n},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=Object(e[0]),i=1;i<e.length;i+=1){var s=e[i];if(null!=s)for(var n=Object.keys(Object(s)),r=0,o=n.length;r<o;r+=1){var l=n[r],d=Object.getOwnPropertyDescriptor(s,l);void 0!==d&&d.enumerable&&(R.isObject(a[l])&&R.isObject(s[l])?R.extend(a[l],s[l]):!R.isObject(a[l])&&R.isObject(s[l])?(a[l]={},R.extend(a[l],s[l])):a[l]=s[l])}}return a}},q=(i=c.createElement("div"),{touch:F.Modernizr&&!0===F.Modernizr.touch||!!(0<F.navigator.maxTouchPoints||"ontouchstart"in F||F.DocumentTouch&&c instanceof F.DocumentTouch),pointerEvents:!!(F.navigator.pointerEnabled||F.PointerEvent||"maxTouchPoints"in F.navigator&&0<F.navigator.maxTouchPoints),prefixedPointerEvents:!!F.navigator.msPointerEnabled,transition:"transition"in(t=i.style)||"webkitTransition"in t||"MozTransition"in t,transforms3d:F.Modernizr&&!0===F.Modernizr.csstransforms3d||"webkitPerspective"in(t=i.style)||"MozPerspective"in t||"OPerspective"in t||"MsPerspective"in t||"perspective"in t,flexbox:(()=>{for(var e=i.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),a=0;a<t.length;a+=1)if(t[a]in e)return!0;return!1})(),observer:"MutationObserver"in F||"WebkitMutationObserver"in F,passiveListener:(()=>{var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});F.addEventListener("testPassiveListener",null,t)}catch(e){}return e})(),gestures:"ongesturestart"in F}),S={isIE:!!F.navigator.userAgent.match(/Trident/g)||!!F.navigator.userAgent.match(/MSIE/g),isEdge:!!F.navigator.userAgent.match(/Edge/g),isSafari:0<=(t=F.navigator.userAgent.toLowerCase()).indexOf("safari")&&t.indexOf("chrome")<0&&t.indexOf("android")<0,isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(F.navigator.userAgent)},t={components:{configurable:!0}},t=(e.prototype.on=function(e,t,a){var i,s=this;return"function"==typeof t&&(i=a?"unshift":"push",e.split(" ").forEach(function(e){s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][i](t)})),s},e.prototype.once=function(a,i,e){var s=this;return"function"!=typeof i?s:(n.f7proxy=i,s.on(a,n,e));function n(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];i.apply(s,e),s.off(a,n),n.f7proxy&&delete n.f7proxy}},e.prototype.off=function(e,i){var s=this;return s.eventsListeners&&e.split(" ").forEach(function(a){void 0===i?s.eventsListeners[a]=[]:s.eventsListeners[a]&&s.eventsListeners[a].length&&s.eventsListeners[a].forEach(function(e,t){(e===i||e.f7proxy&&e.f7proxy===i)&&s.eventsListeners[a].splice(t,1)})}),s},e.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i,s,n=this;return n.eventsListeners&&(s="string"==typeof e[0]||Array.isArray(e[0])?(a=e[0],i=e.slice(1,e.length),n):(a=e[0].events,i=e[0].data,e[0].context||n),(Array.isArray(a)?a:a.split(" ")).forEach(function(e){var t;n.eventsListeners&&n.eventsListeners[e]&&(t=[],n.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(s,i)}))})),n},e.prototype.useModulesParams=function(t){var a=this;a.modules&&Object.keys(a.modules).forEach(function(e){e=a.modules[e];e.params&&R.extend(t,e.params)})},e.prototype.useModules=function(t){void 0===t&&(t={});var i=this;i.modules&&Object.keys(i.modules).forEach(function(e){var a=i.modules[e],e=t[e]||{};a.instance&&Object.keys(a.instance).forEach(function(e){var t=a.instance[e];i[e]="function"==typeof t?t.bind(i):t}),a.on&&i.on&&Object.keys(a.on).forEach(function(e){i.on(e,a.on[e])}),a.create&&a.create.bind(i)(e)})},t.components.set=function(e){this.use&&this.use(e)},e.installModule=function(t){for(var e=[],a=arguments.length-1;0<a--;)e[a]=arguments[a+1];var i=this,s=(i.prototype.modules||(i.prototype.modules={}),t.name||Object.keys(i.prototype.modules).length+"_"+R.now());return(i.prototype.modules[s]=t).proto&&Object.keys(t.proto).forEach(function(e){i.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){i[e]=t.static[e]}),t.install&&t.install.apply(i,e),i},e.use=function(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];var i=this;return Array.isArray(e)?(e.forEach(function(e){return i.installModule(e)}),i):i.installModule.apply(i,[e].concat(t))},Object.defineProperties(e,t),{updateSize:function(){var e=this,t=e.$el,a=void 0!==e.params.width?e.params.width:t[0].clientWidth,i=void 0!==e.params.height?e.params.height:t[0].clientHeight;0===a&&e.isHorizontal()||0===i&&e.isVertical()||(a=a-parseInt(t.css("padding-left"),10)-parseInt(t.css("padding-right"),10),i=i-parseInt(t.css("padding-top"),10)-parseInt(t.css("padding-bottom"),10),R.extend(e,{width:a,height:i,size:e.isHorizontal()?a:i}))},updateSlides:function(){var e,t=this,a=t.params,i=t.$wrapperEl,s=t.size,n=t.rtlTranslate,H=t.wrongRTL,r=t.virtual&&a.virtual.enabled,G=(r?t.virtual:t).slides.length,o=i.children("."+t.params.slideClass),l=(r?t.virtual.slides:o).length,d=[],p=[],c=[],r=a.slidesOffsetBefore,u=("function"==typeof r&&(r=a.slidesOffsetBefore.call(t)),a.slidesOffsetAfter),N=("function"==typeof u&&(u=a.slidesOffsetAfter.call(t)),t.snapGrid.length),B=t.snapGrid.length,h=a.spaceBetween,m=-r,v=0,f=0;if(void 0!==s){"string"==typeof h&&0<=h.indexOf("%")&&(h=parseFloat(h.replace("%",""))/100*s),t.virtualSize=-h,n?o.css({marginLeft:"",marginTop:""}):o.css({marginRight:"",marginBottom:""}),1<a.slidesPerColumn&&(e=Math.floor(l/a.slidesPerColumn)===l/t.params.slidesPerColumn?l:Math.ceil(l/a.slidesPerColumn)*a.slidesPerColumn,"auto"!==a.slidesPerView)&&"row"===a.slidesPerColumnFill&&(e=Math.max(e,a.slidesPerView*a.slidesPerColumn));for(var g,b,w=a.slidesPerColumn,V=e/w,X=Math.floor(l/a.slidesPerColumn),y=0;y<l;y+=1){S=0;var x,T,E,S,C,M,z,k,P,$,I=o.eq(y);1<a.slidesPerColumn&&(E=T=x=void 0,"column"===a.slidesPerColumnFill?(E=y-(T=Math.floor(y/w))*w,(X<T||T===X&&E===w-1)&&w<=(E+=1)&&(E=0,T+=1),I.css({"-webkit-box-ordinal-group":x=T+E*e/w,"-moz-box-ordinal-group":x,"-ms-flex-order":x,"-webkit-order":x,order:x})):T=y-(E=Math.floor(y/V))*V,I.css("margin-"+(t.isHorizontal()?"top":"left"),0!==E&&a.spaceBetween&&a.spaceBetween+"px").attr("data-swiper-column",T).attr("data-swiper-row",E)),"none"!==I.css("display")&&("auto"===a.slidesPerView?(x=F.getComputedStyle(I[0],null),T=I[0].style.transform,E=I[0].style.webkitTransform,T&&(I[0].style.transform="none"),E&&(I[0].style.webkitTransform="none"),S=a.roundLengths?t.isHorizontal()?I.outerWidth(!0):I.outerHeight(!0):t.isHorizontal()?(M=parseFloat(x.getPropertyValue("width")),z=parseFloat(x.getPropertyValue("padding-left")),k=parseFloat(x.getPropertyValue("padding-right")),P=parseFloat(x.getPropertyValue("margin-left")),$=parseFloat(x.getPropertyValue("margin-right")),(C=x.getPropertyValue("box-sizing"))&&"border-box"===C?M+P+$:M+z+k+P+$):(C=parseFloat(x.getPropertyValue("height")),M=parseFloat(x.getPropertyValue("padding-top")),z=parseFloat(x.getPropertyValue("padding-bottom")),k=parseFloat(x.getPropertyValue("margin-top")),P=parseFloat(x.getPropertyValue("margin-bottom")),($=x.getPropertyValue("box-sizing"))&&"border-box"===$?C+k+P:C+M+z+k+P),T&&(I[0].style.transform=T),E&&(I[0].style.webkitTransform=E),a.roundLengths&&(S=Math.floor(S))):(S=(s-(a.slidesPerView-1)*h)/a.slidesPerView,a.roundLengths&&(S=Math.floor(S)),o[y]&&(t.isHorizontal()?o[y].style.width=S+"px":o[y].style.height=S+"px")),o[y]&&(o[y].swiperSlideSize=S),c.push(S),a.centeredSlides?(m=m+S/2+v/2+h,0===v&&0!==y&&(m=m-s/2-h),0===y&&(m=m-s/2-h),Math.abs(m)<.001&&(m=0),a.roundLengths&&(m=Math.floor(m)),f%a.slidesPerGroup==0&&d.push(m),p.push(m)):(a.roundLengths&&(m=Math.floor(m)),f%a.slidesPerGroup==0&&d.push(m),p.push(m),m=m+S+h),t.virtualSize+=S+h,v=S,f+=1)}if(t.virtualSize=Math.max(t.virtualSize,s)+u,n&&H&&("slide"===a.effect||"coverflow"===a.effect)&&i.css({width:t.virtualSize+a.spaceBetween+"px"}),q.flexbox&&!a.setWrapperSize||(t.isHorizontal()?i.css({width:t.virtualSize+a.spaceBetween+"px"}):i.css({height:t.virtualSize+a.spaceBetween+"px"})),1<a.slidesPerColumn&&(t.virtualSize=(S+a.spaceBetween)*e,t.virtualSize=Math.ceil(t.virtualSize/a.slidesPerColumn)-a.spaceBetween,t.isHorizontal()?i.css({width:t.virtualSize+a.spaceBetween+"px"}):i.css({height:t.virtualSize+a.spaceBetween+"px"}),a.centeredSlides)){for(var L=[],D=0;D<d.length;D+=1){var O=d[D];a.roundLengths&&(O=Math.floor(O)),d[D]<t.virtualSize+d[0]&&L.push(O)}d=L}if(!a.centeredSlides){L=[];for(var A=0;A<d.length;A+=1){var Y=d[A];a.roundLengths&&(Y=Math.floor(Y)),d[A]<=t.virtualSize-s&&L.push(Y)}d=L,1<Math.floor(t.virtualSize-s)-Math.floor(d[d.length-1])&&d.push(t.virtualSize-s)}0===d.length&&(d=[0]),0!==a.spaceBetween&&(t.isHorizontal()?n?o.css({marginLeft:h+"px"}):o.css({marginRight:h+"px"}):o.css({marginBottom:h+"px"})),a.centerInsufficientSlides&&(g=0,c.forEach(function(e){g+=e+(a.spaceBetween||0)}),(g-=a.spaceBetween)<s)&&(b=(s-g)/2,d.forEach(function(e,t){d[t]=e-b}),p.forEach(function(e,t){p[t]=e+b})),R.extend(t,{slides:o,snapGrid:d,slidesGrid:p,slidesSizesGrid:c}),l!==G&&t.emit("slidesLengthChange"),d.length!==N&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==B&&t.emit("slidesGridLengthChange"),(a.watchSlidesProgress||a.watchSlidesVisibility)&&t.updateSlidesOffset()}},updateAutoHeight:function(e){var t,a,i=this,s=[],n=0;if("number"==typeof e?i.setTransition(e):!0===e&&i.setTransition(i.params.speed),"auto"!==i.params.slidesPerView&&1<i.params.slidesPerView)for(t=0;t<Math.ceil(i.params.slidesPerView);t+=1){var r=i.activeIndex+t;if(r>i.slides.length)break;s.push(i.slides.eq(r)[0])}else s.push(i.slides.eq(i.activeIndex)[0]);for(t=0;t<s.length;t+=1)void 0!==s[t]&&(n=n<(a=s[t].offsetHeight)?a:n);n&&i.$wrapperEl.css("height",n+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.slides,s=t.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();var n=s?e:-e;i.removeClass(a.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var r=0;r<i.length;r+=1){var o,l,d=i[r],p=(n+(a.centeredSlides?t.minTranslate():0)-d.swiperSlideOffset)/(d.swiperSlideSize+a.spaceBetween);a.watchSlidesVisibility&&(l=(o=-(n-d.swiperSlideOffset))+t.slidesSizesGrid[r],0<=o&&o<t.size||0<l&&l<=t.size||o<=0&&l>=t.size)&&(t.visibleSlides.push(d),t.visibleSlidesIndexes.push(r),i.eq(r).addClass(a.slideVisibleClass)),d.progress=s?-p:p}t.visibleSlides=E(t.visibleSlides)}},updateProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.maxTranslate()-t.minTranslate(),s=t.progress,n=t.isBeginning,r=n,o=l=t.isEnd,l=0==i?n=!(s=0):(n=(s=(e-t.minTranslate())/i)<=0,1<=s);R.extend(t,{progress:s,isBeginning:n,isEnd:l}),(a.watchSlidesProgress||a.watchSlidesVisibility)&&t.updateSlidesProgress(e),n&&!r&&t.emit("reachBeginning toEdge"),l&&!o&&t.emit("reachEnd toEdge"),(r&&!n||o&&!l)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e=this,t=e.slides,a=e.params,i=e.$wrapperEl,s=e.activeIndex,n=e.realIndex,r=e.virtual&&a.virtual.enabled,e=(t.removeClass(a.slideActiveClass+" "+a.slideNextClass+" "+a.slidePrevClass+" "+a.slideDuplicateActiveClass+" "+a.slideDuplicateNextClass+" "+a.slideDuplicatePrevClass),(r=r?e.$wrapperEl.find("."+a.slideClass+'[data-swiper-slide-index="'+s+'"]'):t.eq(s)).addClass(a.slideActiveClass),a.loop&&(r.hasClass(a.slideDuplicateClass)?i.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]'):i.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]')).addClass(a.slideDuplicateActiveClass),r.nextAll("."+a.slideClass).eq(0).addClass(a.slideNextClass)),s=(a.loop&&0===e.length&&(e=t.eq(0)).addClass(a.slideNextClass),r.prevAll("."+a.slideClass).eq(0).addClass(a.slidePrevClass));a.loop&&0===s.length&&(s=t.eq(-1)).addClass(a.slidePrevClass),a.loop&&((e.hasClass(a.slideDuplicateClass)?i.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+e.attr("data-swiper-slide-index")+'"]'):i.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+e.attr("data-swiper-slide-index")+'"]')).addClass(a.slideDuplicateNextClass),(s.hasClass(a.slideDuplicateClass)?i.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]'):i.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]')).addClass(a.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t=this,a=t.rtlTranslate?t.translate:-t.translate,i=t.slidesGrid,s=t.snapGrid,n=t.params,r=t.activeIndex,o=t.realIndex,l=t.snapIndex,d=e;if(void 0===d){for(var p=0;p<i.length;p+=1)void 0!==i[p+1]?a>=i[p]&&a<i[p+1]-(i[p+1]-i[p])/2?d=p:a>=i[p]&&a<i[p+1]&&(d=p+1):a>=i[p]&&(d=p);n.normalizeSlideIndex&&(d<0||void 0===d)&&(d=0)}(e=0<=s.indexOf(a)?s.indexOf(a):Math.floor(d/n.slidesPerGroup))>=s.length&&(e=s.length-1),d!==r?(n=parseInt(t.slides.eq(d).attr("data-swiper-slide-index")||d,10),R.extend(t,{snapIndex:e,realIndex:n,previousIndex:r,activeIndex:d}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==n&&t.emit("realIndexChange"),t.emit("slideChange")):e!==l&&(t.snapIndex=e,t.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,a=t.params,i=E(e.target).closest("."+a.slideClass)[0],s=!1;if(i)for(var n=0;n<t.slides.length;n+=1)t.slides[n]===i&&(s=!0);i&&s?(t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(E(i).attr("data-swiper-slide-index"),10):t.clickedIndex=E(i).index(),a.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()):(t.clickedSlide=void 0,t.clickedIndex=void 0)}}),a={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,a=this.rtlTranslate,i=this.translate,s=this.$wrapperEl;return t.virtualTranslate?a?-i:i:(t=R.getTranslate(s[0],e),(t=a?-t:t)||0)},setTranslate:function(e,t){var a=this,i=a.rtlTranslate,s=a.params,n=a.$wrapperEl,r=a.progress,o=0,l=0,i=(a.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.virtualTranslate||(q.transforms3d?n.transform("translate3d("+o+"px, "+l+"px, 0px)"):n.transform("translate("+o+"px, "+l+"px)")),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?o:l,a.maxTranslate()-a.minTranslate());(0==i?0:(e-a.minTranslate())/i)!==r&&a.updateProgress(e),a.emit("setTranslate",a.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}},s={slideTo:function(e,t,a,i){void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=this,n=e=void 0===e?0:e,e=(n<0&&(n=0),s.params),r=s.snapGrid,o=s.slidesGrid,l=s.previousIndex,d=s.activeIndex,p=s.rtlTranslate;if(s.animating&&e.preventInteractionOnTransition)return!1;var c=Math.floor(n/e.slidesPerGroup);c>=r.length&&(c=r.length-1),(d||e.initialSlide||0)===(l||0)&&a&&s.emit("beforeSlideChangeStart");var u,h=-r[c];if(s.updateProgress(h),e.normalizeSlideIndex)for(var m=0;m<o.length;m+=1)-Math.floor(100*h)>=Math.floor(100*o[m])&&(n=m);if(s.initialized&&n!==d){if(!s.allowSlideNext&&h<s.translate&&h<s.minTranslate())return!1;if(!s.allowSlidePrev&&h>s.translate&&h>s.maxTranslate()&&(d||0)!==n)return!1}return u=d<n?"next":n<d?"prev":"reset",p&&-h===s.translate||!p&&h===s.translate?(s.updateActiveIndex(n),e.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==e.effect&&s.setTranslate(h),"reset"!=u&&(s.transitionStart(a,u),s.transitionEnd(a,u)),!1):(0!==t&&q.transition?(s.setTransition(t),s.setTranslate(h),s.updateActiveIndex(n),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,u),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(a,u))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))):(s.setTransition(0),s.setTranslate(h),s.updateActiveIndex(n),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,u),s.transitionEnd(a,u)),!0)},slideToLoop:function(e,t,a,i){void 0===t&&(t=this.params.speed);e=void 0===e?0:e;return this.params.loop&&(e+=this.loopedSlides),this.slideTo(e,t,a=void 0===a?!0:a,i)},slideNext:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params;return s.loop?!i.animating&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)):i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)},slidePrev:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,n=i.snapGrid,r=i.slidesGrid,o=i.rtlTranslate;if(s.loop){if(i.animating)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var d,s=l(o?i.translate:-i.translate),o=n.map(l),n=(r.map(l),n[o.indexOf(s)],n[o.indexOf(s)-1]);return void 0!==n&&(d=r.indexOf(n))<0&&(d=i.activeIndex-1),i.slideTo(d,e,t,a)},slideReset:function(e,t,a){return void 0===e&&(e=this.params.speed),this.slideTo(this.activeIndex,e,t=void 0===t?!0:t,a)},slideToClosest:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i,s,n=this,r=n.activeIndex,o=Math.floor(r/n.params.slidesPerGroup);return o<n.snapGrid.length-1&&(i=n.rtlTranslate?n.translate:-n.translate,s=n.snapGrid[o],(n.snapGrid[o+1]-s)/2<i-s)&&(r=n.params.slidesPerGroup),n.slideTo(r,e,t,a)},slideToClickedSlide:function(){var e,t=this,a=t.params,i=t.$wrapperEl,s="auto"===a.slidesPerView?t.slidesPerViewDynamic():a.slidesPerView,n=t.clickedIndex;a.loop?t.animating||(e=parseInt(E(t.clickedSlide).attr("data-swiper-slide-index"),10),a.centeredSlides?n<t.loopedSlides-s/2||n>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),n=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),R.nextTick(function(){t.slideTo(n)})):t.slideTo(n):n>t.slides.length-s?(t.loopFix(),n=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),R.nextTick(function(){t.slideTo(n)})):t.slideTo(n)):t.slideTo(n)}},r={loopCreate:function(){var i=this,e=i.params,t=i.$wrapperEl,s=(t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove(),t.children("."+e.slideClass));if(e.loopFillGroupWithBlank){var a=e.slidesPerGroup-s.length%e.slidesPerGroup;if(a!==e.slidesPerGroup){for(var n=0;n<a;n+=1){var r=E(c.createElement("div")).addClass(e.slideClass+" "+e.slideBlankClass);t.append(r)}s=t.children("."+e.slideClass)}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=s.length),i.loopedSlides=parseInt(e.loopedSlides||e.slidesPerView,10),i.loopedSlides+=e.loopAdditionalSlides,i.loopedSlides>s.length&&(i.loopedSlides=s.length);var o=[],l=[];s.each(function(e,t){var a=E(t);e<i.loopedSlides&&l.push(t),e<s.length&&e>=s.length-i.loopedSlides&&o.push(t),a.attr("data-swiper-slide-index",e)});for(var d=0;d<l.length;d+=1)t.append(E(l[d].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var p=o.length-1;0<=p;--p)t.prepend(E(o[p].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var e,t=this,a=t.params,i=t.activeIndex,s=t.slides,n=t.loopedSlides,r=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,d=t.rtlTranslate,l=(t.allowSlidePrev=!0,t.allowSlideNext=!0,-l[i]-t.getTranslate());i<n?(e=s.length-3*n+i,t.slideTo(e+=n,0,!1,!0)&&0!=l&&t.setTranslate((d?-t.translate:t.translate)-l)):("auto"===a.slidesPerView&&2*n<=i||i>=s.length-n)&&(e=-s.length+i+n,t.slideTo(e+=n,0,!1,!0))&&0!=l&&t.setTranslate((d?-t.translate:t.translate)-l),t.allowSlidePrev=r,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,a=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}},O={setGrabCursor:function(e){var t;q.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||((t=this.el).style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab")},unsetGrabCursor:function(){q.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}},A={appendSlide:function(e){var t=this,a=t.$wrapperEl,i=t.params;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&a.append(e[s]);else a.append(e);i.loop&&t.loopCreate(),i.observer&&q.observer||t.update()},prependSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex,n=(a.loop&&t.loopDestroy(),s+1);if("object"==typeof e&&"length"in e){for(var r=0;r<e.length;r+=1)e[r]&&i.prepend(e[r]);n=s+e.length}else i.prepend(e);a.loop&&t.loopCreate(),a.observer&&q.observer||t.update(),t.slideTo(n,0,!1)},addSlide:function(e,t){var a=this,i=a.$wrapperEl,s=a.params,n=a.activeIndex,r=(s.loop&&(n-=a.loopedSlides,a.loopDestroy(),a.slides=i.children("."+s.slideClass)),a.slides.length);if(e<=0)a.prependSlide(t);else if(r<=e)a.appendSlide(t);else{for(var o=e<n?n+1:n,l=[],d=r-1;e<=d;--d){var p=a.slides.eq(d);p.remove(),l.unshift(p)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&i.append(t[c]);o=e<n?n+t.length:n}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&a.loopCreate(),s.observer&&q.observer||a.update(),s.loop?a.slideTo(o+a.loopedSlides,0,!1):a.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+a.slideClass));var n,r=s;if("object"==typeof e&&"length"in e)for(var o=0;o<e.length;o+=1)t.slides[n=e[o]]&&t.slides.eq(n).remove(),n<r&&--r;else t.slides[n=e]&&t.slides.eq(n).remove(),n<r&&--r;r=Math.max(r,0),a.loop&&t.loopCreate(),a.observer&&q.observer||t.update(),a.loop?t.slideTo(r+t.loopedSlides,0,!1):t.slideTo(r,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},o=(m=F.navigator.userAgent,x={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:F.cordova||F.phonegap,phonegap:F.cordova||F.phonegap},g=m.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),w=m.match(/(Android);?[\s\/]+([\d.]+)?/),p=m.match(/(iPad).*OS\s([\d_]+)/),v=m.match(/(iPod)(.*OS\s([\d_]+))?/),f=!p&&m.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g&&(x.os="windows",x.osVersion=g[2],x.windows=!0),w&&!g&&(x.os="android",x.osVersion=w[2],x.android=!0,x.androidChrome=0<=m.toLowerCase().indexOf("chrome")),(p||f||v)&&(x.os="ios",x.ios=!0),f&&!v&&(x.osVersion=f[2].replace(/_/g,"."),x.iphone=!0),p&&(x.osVersion=p[2].replace(/_/g,"."),x.ipad=!0),v&&(x.osVersion=v[3]?v[3].replace(/_/g,"."):null,x.iphone=!0),x.ios&&x.osVersion&&0<=m.indexOf("Version/")&&"10"===x.osVersion.split(".")[0]&&(x.osVersion=m.toLowerCase().split("version/")[1].split(" ")[0]),x.desktop=!(x.os||x.android||x.webView),x.webView=(f||p||v)&&m.match(/.*AppleWebKit(?!.*Safari)/i),x.os&&"ios"===x.os&&(g=x.osVersion.split("."),w=c.querySelector('meta[name="viewport"]'),x.minimalUi=!x.webView&&(v||f)&&(7==+g[0]?1<=+g[1]:7<+g[0])&&w&&0<=w.getAttribute("content").indexOf("minimal-ui")),x.pixelRatio=F.devicePixelRatio||1,x);function H(){var e,t,a,i=this,s=i.params,n=i.el;n&&0===n.offsetWidth||(s.breakpoints&&i.setBreakpoint(),n=i.allowSlideNext,e=i.allowSlidePrev,t=i.snapGrid,i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),s.freeMode?(a=Math.min(Math.max(i.translate,i.maxTranslate()),i.minTranslate()),i.setTranslate(a),i.updateActiveIndex(),i.updateSlidesClasses(),s.autoHeight&&i.updateAutoHeight()):(i.updateSlidesClasses(),("auto"===s.slidesPerView||1<s.slidesPerView)&&i.isEnd&&!i.params.centeredSlides?i.slideTo(i.slides.length-1,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0)),i.allowSlidePrev=e,i.allowSlideNext=n,i.params.watchOverflow&&t!==i.snapGrid&&i.checkOverflow())}var d,p,G={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},u={update:t,translate:a,transition:{setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.previousIndex;a.params.autoHeight&&a.updateAutoHeight();t=(t=t)||(s<i?"next":i<s?"prev":"reset");a.emit("transitionStart"),e&&i!==s&&("reset"===t?a.emit("slideResetTransitionStart"):(a.emit("slideChangeTransitionStart"),"next"===t?a.emit("slideNextTransitionStart"):a.emit("slidePrevTransitionStart")))},transitionEnd:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.previousIndex;a.animating=!1,a.setTransition(0);t=(t=t)||(s<i?"next":i<s?"prev":"reset");a.emit("transitionEnd"),e&&i!==s&&("reset"===t?a.emit("slideResetTransitionEnd"):(a.emit("slideChangeTransitionEnd"),"next"===t?a.emit("slideNextTransitionEnd"):a.emit("slidePrevTransitionEnd")))}},slide:s,loop:r,grabCursor:O,manipulation:A,events:{attachEvents:function(){var e,t=this,a=t.params,i=t.touchEvents,s=t.el,n=t.wrapperEl,s=(t.onTouchStart=function(e){var t,a,i,s,n=this,r=n.touchEventsData,o=n.params,l=n.touches;n.animating&&o.preventInteractionOnTransition||((e=e).originalEvent&&(e=e.originalEvent),r.isTouchEvent="touchstart"===e.type,!r.isTouchEvent&&"which"in e&&3===e.which)||!r.isTouchEvent&&"button"in e&&0<e.button||r.isTouched&&r.isMoved||(o.noSwiping&&E(e.target).closest(o.noSwipingSelector||"."+o.noSwipingClass)[0]?n.allowClick=!0:o.swipeHandler&&!E(e).closest(o.swipeHandler)[0]||(l.currentX=("touchstart"===e.type?e.targetTouches[0]:e).pageX,l.currentY=("touchstart"===e.type?e.targetTouches[0]:e).pageY,t=l.currentX,a=l.currentY,i=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,s=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold,i&&(t<=s||t>=F.screen.width-s))||(R.extend(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=t,l.startY=a,r.touchStartTime=R.now(),n.allowClick=!0,n.updateSize(),n.swipeDirection=void 0,0<o.threshold&&(r.allowThresholdMove=!1),"touchstart"!==e.type&&(i=!0,E(e.target).is(r.formElements)&&(i=!1),c.activeElement&&E(c.activeElement).is(r.formElements)&&c.activeElement!==e.target&&c.activeElement.blur(),s=i&&n.allowTouchMove&&o.touchStartPreventDefault,o.touchStartForcePreventDefault||s)&&e.preventDefault(),n.emit("touchStart",e)))}.bind(t),t.onTouchMove=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,n=t.rtlTranslate;if(e.originalEvent&&(e=e.originalEvent),a.isTouched){if(!a.isTouchEvent||"mousemove"!==e.type){var r=("touchmove"===e.type?e.targetTouches[0]:e).pageX,o=("touchmove"===e.type?e.targetTouches[0]:e).pageY;if(e.preventedByNestedSwiper)s.startX=r,s.startY=o;else if(t.allowTouchMove){if(a.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(o<s.startY&&t.translate<=t.maxTranslate()||o>s.startY&&t.translate>=t.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(r<s.startX&&t.translate<=t.maxTranslate()||r>s.startX&&t.translate>=t.minTranslate())return;if(a.isTouchEvent&&c.activeElement&&e.target===c.activeElement&&E(e.target).is(a.formElements))a.isMoved=!0,t.allowClick=!1;else if(a.allowTouchCallbacks&&t.emit("touchMove",e),!(e.targetTouches&&1<e.targetTouches.length)){s.currentX=r,s.currentY=o;var l=s.currentX-s.startX,d=s.currentY-s.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(l,2)+Math.pow(d,2))<t.params.threshold))if(void 0===a.isScrolling&&(t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?a.isScrolling=!1:25<=l*l+d*d&&(p=180*Math.atan2(Math.abs(d),Math.abs(l))/Math.PI,a.isScrolling=t.isHorizontal()?p>i.touchAngle:90-p>i.touchAngle)),a.isScrolling&&t.emit("touchMoveOpposite",e),void 0!==a.startMoving||s.currentX===s.startX&&s.currentY===s.startY||(a.startMoving=!0),a.isScrolling)a.isTouched=!1;else if(a.startMoving){t.allowClick=!1,e.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&e.stopPropagation(),a.isMoved||(i.loop&&t.loopFix(),a.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!i.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",e)),t.emit("sliderMove",e),a.isMoved=!0;var p=t.isHorizontal()?l:d,l=(s.diff=p,p*=i.touchRatio,t.swipeDirection=0<(p=n?-p:p)?"prev":"next",a.currentTranslate=p+a.startTranslate,!0),d=i.resistanceRatio;if(i.touchReleaseOnEdges&&(d=0),0<p&&a.currentTranslate>t.minTranslate()?(l=!1,i.resistance&&(a.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+a.startTranslate+p,d))):p<0&&a.currentTranslate<t.maxTranslate()&&(l=!1,i.resistance)&&(a.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-a.startTranslate-p,d)),l&&(e.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),0<i.threshold){if(!(Math.abs(p)>i.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,a.currentTranslate=a.startTranslate,void(s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&(0===a.velocities.length&&a.velocities.push({position:s[t.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:s[t.isHorizontal()?"currentX":"currentY"],time:R.now()})),t.updateProgress(a.currentTranslate),t.setTranslate(a.currentTranslate))}}}else t.allowClick=!1,a.isTouched&&(R.extend(s,{startX:r,startY:o,currentX:r,currentY:o}),a.touchStartTime=R.now())}}else a.startMoving&&a.isScrolling&&t.emit("touchMoveOpposite",e)}.bind(t),t.onTouchEnd=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,n=t.rtlTranslate,r=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),a.allowTouchCallbacks&&t.emit("touchEnd",d),a.allowTouchCallbacks=!1,a.isTouched){i.grabCursor&&a.isMoved&&a.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,e=R.now(),c=e-a.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap",d),c<300&&300<e-a.lastClickTime&&(a.clickTimeout&&clearTimeout(a.clickTimeout),a.clickTimeout=R.nextTick(function(){t&&!t.destroyed&&t.emit("click",d)},300)),c<300)&&e-a.lastClickTime<300&&(a.clickTimeout&&clearTimeout(a.clickTimeout),t.emit("doubleTap",d)),a.lastClickTime=R.now(),R.nextTick(function(){t.destroyed||(t.allowClick=!0)}),a.isTouched&&a.isMoved&&t.swipeDirection&&0!==s.diff&&a.currentTranslate!==a.startTranslate)if(a.isTouched=!1,a.isMoved=!1,a.startMoving=!1,p=i.followFinger?n?t.translate:-t.translate:-a.currentTranslate,i.freeMode)if(p<-t.minTranslate())t.slideTo(t.activeIndex);else if(p>-t.maxTranslate())t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1);else{if(i.freeModeMomentum){(!(1<a.velocities.length)||(e=a.velocities.pop(),s=a.velocities.pop(),u=e.position-s.position,s=e.time-s.time,t.velocity=u/s,t.velocity/=2,Math.abs(t.velocity)<i.freeModeMinimumVelocity&&(t.velocity=0),150<s)||300<R.now()-e.time)&&(t.velocity=0),t.velocity*=i.freeModeMomentumVelocityRatio,a.velocities.length=0;var u=1e3*i.freeModeMomentumRatio,s=t.velocity*u,h=t.translate+s;n&&(h=-h);var m,v,e=!1,s=20*Math.abs(t.velocity)*i.freeModeMomentumBounceRatio;if(h<t.maxTranslate())i.freeModeMomentumBounce?(h+t.maxTranslate()<-s&&(h=t.maxTranslate()-s),m=t.maxTranslate(),a.allowMomentumBounce=e=!0):h=t.maxTranslate(),i.loop&&i.centeredSlides&&(v=!0);else if(h>t.minTranslate())i.freeModeMomentumBounce?(h-t.minTranslate()>s&&(h=t.minTranslate()+s),m=t.minTranslate(),a.allowMomentumBounce=e=!0):h=t.minTranslate(),i.loop&&i.centeredSlides&&(v=!0);else if(i.freeModeSticky){for(var f,g=0;g<l.length;g+=1)if(l[g]>-h){f=g;break}h=-(Math.abs(l[f]-h)<Math.abs(l[f-1]-h)||"next"===t.swipeDirection?l[f]:l[f-1])}if(v&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)u=n?Math.abs((-h-t.translate)/t.velocity):Math.abs((h-t.translate)/t.velocity);else if(i.freeModeSticky)return void t.slideToClosest();i.freeModeMomentumBounce&&e?(t.updateProgress(m),t.setTransition(u),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating=!0,r.transitionEnd(function(){t&&!t.destroyed&&a.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(i.speed),t.setTranslate(m),r.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(h),t.setTransition(u),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,r.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(h),t.updateActiveIndex(),t.updateSlidesClasses()}else if(i.freeModeSticky)return void t.slideToClosest();(!i.freeModeMomentum||c>=i.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var b=0,w=t.slidesSizesGrid[0],y=0;y<o.length;y+=i.slidesPerGroup)void 0!==o[y+i.slidesPerGroup]?p>=o[y]&&p<o[y+i.slidesPerGroup]&&(w=o[(b=y)+i.slidesPerGroup]-o[y]):p>=o[y]&&(b=y,w=o[o.length-1]-o[o.length-2]);s=(p-o[b])/w;c>i.longSwipesMs?i.longSwipes?("next"===t.swipeDirection&&(s>=i.longSwipesRatio?t.slideTo(b+i.slidesPerGroup):t.slideTo(b)),"prev"===t.swipeDirection&&(s>1-i.longSwipesRatio?t.slideTo(b+i.slidesPerGroup):t.slideTo(b))):t.slideTo(t.activeIndex):i.shortSwipes?("next"===t.swipeDirection&&t.slideTo(b+i.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(b)):t.slideTo(t.activeIndex)}else a.isTouched=!1,a.isMoved=!1,a.startMoving=!1}else a.isMoved&&i.grabCursor&&t.setGrabCursor(!1),a.isMoved=!1,a.startMoving=!1}.bind(t),t.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(t),"container"===a.touchEventsTarget?s:n),n=!!a.nested;q.touch||!q.pointerEvents&&!q.prefixedPointerEvents?(q.touch&&(e=!("touchstart"!==i.start||!q.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1},s.addEventListener(i.start,t.onTouchStart,e),s.addEventListener(i.move,t.onTouchMove,q.passiveListener?{passive:!1,capture:n}:n),s.addEventListener(i.end,t.onTouchEnd,e)),(a.simulateTouch&&!o.ios&&!o.android||a.simulateTouch&&!q.touch&&o.ios)&&(s.addEventListener("mousedown",t.onTouchStart,!1),c.addEventListener("mousemove",t.onTouchMove,n),c.addEventListener("mouseup",t.onTouchEnd,!1))):(s.addEventListener(i.start,t.onTouchStart,!1),c.addEventListener(i.move,t.onTouchMove,n),c.addEventListener(i.end,t.onTouchEnd,!1)),(a.preventClicks||a.preventClicksPropagation)&&s.addEventListener("click",t.onClick,!0),t.on(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",H,!0)},detachEvents:function(){var e,t=this,a=t.params,i=t.touchEvents,s="container"===a.touchEventsTarget?t.el:t.wrapperEl,n=!!a.nested;q.touch||!q.pointerEvents&&!q.prefixedPointerEvents?(q.touch&&(e=!("onTouchStart"!==i.start||!q.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1},s.removeEventListener(i.start,t.onTouchStart,e),s.removeEventListener(i.move,t.onTouchMove,n),s.removeEventListener(i.end,t.onTouchEnd,e)),(a.simulateTouch&&!o.ios&&!o.android||a.simulateTouch&&!q.touch&&o.ios)&&(s.removeEventListener("mousedown",t.onTouchStart,!1),c.removeEventListener("mousemove",t.onTouchMove,n),c.removeEventListener("mouseup",t.onTouchEnd,!1))):(s.removeEventListener(i.start,t.onTouchStart,!1),c.removeEventListener(i.move,t.onTouchMove,n),c.removeEventListener(i.end,t.onTouchEnd,!1)),(a.preventClicks||a.preventClicksPropagation)&&s.removeEventListener("click",t.onClick,!0),t.off(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",H)}},breakpoints:{setBreakpoint:function(){var e,a,t,i=this,s=i.activeIndex,n=i.initialized,r=i.loopedSlides,o=(void 0===r&&(r=0),i.params),l=o.breakpoints;l&&0!==Object.keys(l).length&&(e=i.getBreakpoint(l))&&i.currentBreakpoint!==e&&((a=e in l?l[e]:void 0)&&["slidesPerView","spaceBetween","slidesPerGroup"].forEach(function(e){var t=a[e];void 0!==t&&(a[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}),t=(l=a||i.originalParams).direction&&l.direction!==o.direction,o=o.loop&&(l.slidesPerView!==o.slidesPerView||t),t&&n&&i.changeDirection(),R.extend(i.params,l),R.extend(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),i.currentBreakpoint=e,o&&n&&(i.loopDestroy(),i.loopCreate(),i.updateSlides(),i.slideTo(s-r+i.loopedSlides,0,!1)),i.emit("breakpoint",l))},getBreakpoint:function(e){if(e){var t=!1,a=[];Object.keys(e).forEach(function(e){a.push(e)}),a.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var i=0;i<a.length;i+=1){var s=a[i];this.params.breakpointsInverse?s<=F.innerWidth&&(t=s):s>=F.innerWidth&&!t&&(t=s)}return t||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,a=this.params,e=this.rtl,i=this.$el,s=[];s.push("initialized"),s.push(a.direction),a.freeMode&&s.push("free-mode"),q.flexbox||s.push("no-flexbox"),a.autoHeight&&s.push("autoheight"),e&&s.push("rtl"),1<a.slidesPerColumn&&s.push("multirow"),o.android&&s.push("android"),o.ios&&s.push("ios"),(S.isIE||S.isEdge)&&(q.pointerEvents||q.prefixedPointerEvents)&&s.push("wp8-"+a.direction),s.forEach(function(e){t.push(a.containerModifierClass+e)}),i.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,a,i,s,n){function r(){n&&n()}(!e.complete||!s)&&t?((e=new F.Image).onload=r,e.onerror=r,i&&(e.sizes=i),a&&(e.srcset=a),t&&(e.src=t)):r()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length)&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady"))}e.imagesToLoad=e.$el.find("img");for(var a=0;a<e.imagesToLoad.length;a+=1){var i=e.imagesToLoad[a];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},N={},h=((d=e)&&(T.__proto__=d),p={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}},((T.prototype=Object.create(d&&d.prototype)).constructor=T).prototype.slidesPerViewDynamic=function(){var e=this,t=e.params,a=e.slides,i=e.slidesGrid,s=e.size,n=e.activeIndex,r=1;if(t.centeredSlides){for(var o,l=a[n].swiperSlideSize,d=n+1;d<a.length;d+=1)a[d]&&!o&&(r+=1,s<(l+=a[d].swiperSlideSize))&&(o=!0);for(var p=n-1;0<=p;--p)a[p]&&!o&&(r+=1,s<(l+=a[p].swiperSlideSize))&&(o=!0)}else for(var c=n+1;c<a.length;c+=1)i[c]-i[n]<s&&(r+=1);return r},T.prototype.update=function(){var e,t,a=this;function i(){var e=a.rtlTranslate?-1*a.translate:a.translate,e=Math.min(Math.max(e,a.maxTranslate()),a.minTranslate());a.setTranslate(e),a.updateActiveIndex(),a.updateSlidesClasses()}a&&!a.destroyed&&(e=a.snapGrid,(t=a.params).breakpoints&&a.setBreakpoint(),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.params.freeMode?(i(),a.params.autoHeight&&a.updateAutoHeight()):(("auto"===a.params.slidesPerView||1<a.params.slidesPerView)&&a.isEnd&&!a.params.centeredSlides?a.slideTo(a.slides.length-1,0,!1,!0):a.slideTo(a.activeIndex,0,!1,!0))||i(),t.watchOverflow&&e!==a.snapGrid&&a.checkOverflow(),a.emit("update"))},T.prototype.changeDirection=function(a,e){void 0===e&&(e=!0);var t=this,i=t.params.direction;return(a=a||("horizontal"===i?"vertical":"horizontal"))===i||"horizontal"!==a&&"vertical"!==a||("vertical"===i&&(t.$el.removeClass(t.params.containerModifierClass+"vertical wp8-vertical").addClass(""+t.params.containerModifierClass+a),S.isIE||S.isEdge)&&(q.pointerEvents||q.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a),"horizontal"===i&&(t.$el.removeClass(t.params.containerModifierClass+"horizontal wp8-horizontal").addClass(""+t.params.containerModifierClass+a),S.isIE||S.isEdge)&&(q.pointerEvents||q.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a),t.params.direction=a,t.slides.each(function(e,t){"vertical"===a?t.style.width="":t.style.height=""}),t.emit("changeDirection"),e&&t.update()),t},T.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},T.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a=this,i=a.params,s=a.$el,n=a.$wrapperEl,r=a.slides;return void 0===a.params||a.destroyed||(a.emit("beforeDestroy"),a.initialized=!1,a.detachEvents(),i.loop&&a.loopDestroy(),t&&(a.removeClasses(),s.removeAttr("style"),n.removeAttr("style"),r)&&r.length&&r.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),a.emit("destroy"),Object.keys(a.eventsListeners).forEach(function(e){a.off(e)}),!1!==e&&(a.$el[0].swiper=null,a.$el.data("swiper",null),R.deleteProps(a)),a.destroyed=!0),null},T.extendDefaults=function(e){R.extend(N,e)},p.extendedDefaults.get=function(){return N},p.defaults.get=function(){return G},p.Class.get=function(){return d},p.$.get=function(){return E},Object.defineProperties(T,p),T),m={name:"device",proto:{device:o},static:{device:o}},v={name:"support",proto:{support:q},static:{support:q}},f={name:"browser",proto:{browser:S},static:{browser:S}},g={name:"resize",create:function(){var e=this;R.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){F.addEventListener("resize",this.resize.resizeHandler),F.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){F.removeEventListener("resize",this.resize.resizeHandler),F.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},b={func:F.MutationObserver||F.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var a=this,i=new b.func(function(e){var t;1!==e.length?(t=function(){a.emit("observerUpdate",e[0])},F.requestAnimationFrame?F.requestAnimationFrame(t):F.setTimeout(t,0)):a.emit("observerUpdate",e[0])});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.observer.observers.push(i)},init:function(){var e=this;if(q.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),a=0;a<t.length;a+=1)e.observer.attach(t[a]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},w={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){R.extend(this,{observer:{init:b.init.bind(this),attach:b.attach.bind(this),destroy:b.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},y={update:function(e){var t=this,a=t.params,i=a.slidesPerView,s=a.slidesPerGroup,a=a.centeredSlides,n=t.params.virtual,r=n.addSlidesBefore,n=n.addSlidesAfter,o=t.virtual,l=o.from,d=o.to,p=o.slides,c=o.slidesGrid,u=o.renderSlide,o=o.offset;t.updateActiveIndex();var h,m=t.activeIndex||0,v=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",a=a?(h=Math.floor(i/2)+s+r,Math.floor(i/2)+s+n):(h=i+(s-1)+r,s+n),f=Math.max((m||0)-a,0),g=Math.min((m||0)+h,p.length-1),i=(t.slidesGrid[f]||0)-(t.slidesGrid[0]||0);function b(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(R.extend(t.virtual,{from:f,to:g,offset:i,slidesGrid:t.slidesGrid}),l!==f||d!==g||e){if(t.params.virtual.renderExternal)t.params.virtual.renderExternal.call(t,{offset:i,from:f,to:g,slides:(()=>{for(var e=[],t=f;t<=g;t+=1)e.push(p[t]);return e})()});else{var w=[],y=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var x=l;x<=d;x+=1)(x<f||g<x)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+x+'"]').remove();for(var T=0;T<p.length;T+=1)f<=T&&T<=g&&(void 0===d||e?y.push(T):(d<T&&y.push(T),T<l&&w.push(T)));y.forEach(function(e){t.$wrapperEl.append(u(p[e],e))}),w.sort(function(e,t){return t-e}).forEach(function(e){t.$wrapperEl.prepend(u(p[e],e))}),t.$wrapperEl.children(".swiper-slide").css(v,i+"px")}b()}else t.slidesGrid!==c&&i!==o&&t.slides.css(v,i+"px"),t.updateProgress()},renderSlide:function(e,t){var a=this,i=a.params.virtual;return i.cache&&a.virtual.cache[t]?a.virtual.cache[t]:((e=E(i.renderSlide?i.renderSlide.call(a,e,t):'<div class="'+a.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>")).attr("data-swiper-slide-index")||e.attr("data-swiper-slide-index",t),i.cache&&(a.virtual.cache[t]=e),e)},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t,a,i=this,s=i.activeIndex,n=s+1,r=1;if(Array.isArray(e)){for(var o=0;o<e.length;o+=1)e[o]&&i.virtual.slides.unshift(e[o]);n=s+e.length,r=e.length}else i.virtual.slides.unshift(e);i.params.virtual.cache&&(t=i.virtual.cache,a={},Object.keys(t).forEach(function(e){a[parseInt(e,10)+r]=t[e]}),i.virtual.cache=a),i.virtual.update(!0),i.slideTo(n,0)},removeSlide:function(e){var t=this;if(null!=e){var a=t.activeIndex;if(Array.isArray(e))for(var i=e.length-1;0<=i;--i)t.virtual.slides.splice(e[i],1),t.params.virtual.cache&&delete t.virtual.cache[e[i]],e[i]<a&&--a,a=Math.max(a,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<a&&--a,a=Math.max(a,0);t.virtual.update(!0),t.slideTo(a,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},x={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var e=this;R.extend(e,{virtual:{update:y.update.bind(e),appendSlide:y.appendSlide.bind(e),prependSlide:y.prependSlide.bind(e),removeSlide:y.removeSlide.bind(e),removeAllSlides:y.removeAllSlides.bind(e),renderSlide:y.renderSlide.bind(e),slides:e.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var e,t=this;t.params.virtual.enabled&&(t.classNames.push(t.params.containerModifierClass+"virtual"),R.extend(t.params,e={watchSlidesProgress:!0}),R.extend(t.originalParams,e),t.params.initialSlide||t.virtual.update())},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},B={handle:function(e){var t=this,a=t.rtlTranslate,i=(e=e.originalEvent?e.originalEvent:e).keyCode||e.charCode;if(!t.allowSlideNext&&(t.isHorizontal()&&39===i||t.isVertical()&&40===i))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&37===i||t.isVertical()&&38===i))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||c.activeElement&&c.activeElement.nodeName&&("input"===c.activeElement.nodeName.toLowerCase()||"textarea"===c.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(37===i||39===i||38===i||40===i)){var s=!1;if(0<t.$el.parents("."+t.params.slideClass).length&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var n=F.innerWidth,r=F.innerHeight,o=t.$el.offset();a&&(o.left-=t.$el[0].scrollLeft);for(var l=[[o.left,o.top],[o.left+t.width,o.top],[o.left,o.top+t.height],[o.left+t.width,o.top+t.height]],d=0;d<l.length;d+=1){var p=l[d];0<=p[0]&&p[0]<=n&&0<=p[1]&&p[1]<=r&&(s=!0)}if(!s)return}t.isHorizontal()?(37!==i&&39!==i||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===i&&!a||37===i&&a)&&t.slideNext(),(37===i&&!a||39===i&&a)&&t.slidePrev()):(38!==i&&40!==i||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===i&&t.slideNext(),38===i&&t.slidePrev()),t.emit("keyPress",i)}},enable:function(){this.keyboard.enabled||(E(c).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(E(c).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},t={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){R.extend(this,{keyboard:{enabled:!1,enable:B.enable.bind(this),disable:B.disable.bind(this),handle:B.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};function T(){for(var a,e=[],t=arguments.length;t--;)e[t]=arguments[t];a=(a=1===e.length&&e[0].constructor&&e[0].constructor===Object?e[0]:(r=e[0],e[1]))||{},a=R.extend({},a),r&&!a.el&&(a.el=r),d.call(this,a),Object.keys(u).forEach(function(t){Object.keys(u[t]).forEach(function(e){T.prototype[e]||(T.prototype[e]=u[t][e])})});var i,s=this,n=(void 0===s.modules&&(s.modules={}),Object.keys(s.modules).forEach(function(e){var t,e=s.modules[e];e.params&&(t=Object.keys(e.params)[0],"object"==typeof(e=e.params[t]))&&null!==e&&t in a&&"enabled"in e&&(!0===a[t]&&(a[t]={enabled:!0}),"object"!=typeof a[t]||"enabled"in a[t]||(a[t].enabled=!0),a[t]||(a[t]={enabled:!1}))}),R.extend({},G)),n=(s.useModulesParams(n),s.params=R.extend({},n,N,a),s.originalParams=R.extend({},s.params),s.passedParams=R.extend({},a),(s.$=E)(s.params.el));if(r=n[0]){if(1<n.length)return i=[],n.each(function(e,t){t=R.extend({},a,{el:t});i.push(new T(t))}),i;r.swiper=s,n.data("swiper",s);var r,o=n.children("."+s.params.wrapperClass);return R.extend(s,{$el:n,el:r,$wrapperEl:o,wrapperEl:o[0],classNames:[],slides:E(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===s.params.direction},isVertical:function(){return"vertical"===s.params.direction},rtl:"rtl"===r.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===s.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===o.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:(r=["mousedown","mousemove","mouseup"],q.pointerEvents?r=["pointerdown","pointermove","pointerup"]:q.prefixedPointerEvents&&(r=["MSPointerDown","MSPointerMove","MSPointerUp"]),s.touchEventsTouch={start:(n=["touchstart","touchmove","touchend"])[0],move:n[1],end:n[2]},s.touchEventsDesktop={start:r[0],move:r[1],end:r[2]},q.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:R.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.useModules(),s.params.init&&s.init(),s}}var C={lastScrollTime:R.now(),event:-1<F.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":((s=(a="onwheel")in c)||((r=c.createElement("div")).setAttribute(a,"return;"),s="function"==typeof r[a]),(s=!s&&c.implementation&&c.implementation.hasFeature&&!0!==c.implementation.hasFeature("","")?c.implementation.hasFeature("Events.wheel","3.0"):s)?"wheel":"mousewheel"),normalize:function(e){var t=0,a=0,i=0,s=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,s=10*a,"deltaY"in e&&(s=e.deltaY),((i="deltaX"in e?e.deltaX:i)||s)&&e.deltaMode&&(1===e.deltaMode?(i*=40,s*=40):(i*=800,s*=800)),{spinX:t=i&&!t?i<1?-1:1:t,spinY:a=s&&!a?s<1?-1:1:a,pixelX:i,pixelY:s}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=this,a=t.params.mousewheel;if(!t.mouseEntered&&!a.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var i=0,s=t.rtlTranslate?-1:1,n=C.normalize(e);if(a.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(n.pixelX)>Math.abs(n.pixelY)))return!0;i=n.pixelX*s}else{if(!(Math.abs(n.pixelY)>Math.abs(n.pixelX)))return!0;i=n.pixelY}else i=Math.abs(n.pixelX)>Math.abs(n.pixelY)?-n.pixelX*s:-n.pixelY;if(0===i)return!0;if(a.invert&&(i=-i),t.params.freeMode){t.params.loop&&t.loopFix();var s=t.getTranslate()+i*a.sensitivity,n=t.isBeginning,r=t.isEnd;if((s=s>=t.minTranslate()?t.minTranslate():s)<=t.maxTranslate()&&(s=t.maxTranslate()),t.setTransition(0),t.setTranslate(s),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!n&&t.isBeginning||!r&&t.isEnd)&&t.updateSlidesClasses(),t.params.freeModeSticky&&(clearTimeout(t.mousewheel.timeout),t.mousewheel.timeout=R.nextTick(function(){t.slideToClosest()},300)),t.emit("scroll",e),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),s===t.minTranslate()||s===t.maxTranslate())return!0}else{if(60<R.now()-t.mousewheel.lastScrollTime)if(i<0)if(t.isEnd&&!t.params.loop||t.animating){if(a.releaseOnEdges)return!0}else t.slideNext(),t.emit("scroll",e);else if(t.isBeginning&&!t.params.loop||t.animating){if(a.releaseOnEdges)return!0}else t.slidePrev(),t.emit("scroll",e);t.mousewheel.lastScrollTime=(new F.Date).getTime()}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},enable:function(){var e,t=this;return!!C.event&&!t.mousewheel.enabled&&(e=t.$el,(e="container"!==t.params.mousewheel.eventsTarged?E(t.params.mousewheel.eventsTarged):e).on("mouseenter",t.mousewheel.handleMouseEnter),e.on("mouseleave",t.mousewheel.handleMouseLeave),e.on(C.event,t.mousewheel.handle),t.mousewheel.enabled=!0)},disable:function(){var e,t=this;return!!C.event&&!(!t.mousewheel.enabled||(e=t.$el,(e="container"!==t.params.mousewheel.eventsTarged?E(t.params.mousewheel.eventsTarged):e).off(C.event,t.mousewheel.handle),t.mousewheel.enabled=!1))}},M={update:function(){var e,t,a=this,i=a.params.navigation;a.params.loop||(e=(t=a.navigation).$nextEl,(t=t.$prevEl)&&0<t.length&&(a.isBeginning?t.addClass(i.disabledClass):t.removeClass(i.disabledClass),t[a.params.watchOverflow&&a.isLocked?"addClass":"removeClass"](i.lockClass)),e&&0<e.length&&(a.isEnd?e.addClass(i.disabledClass):e.removeClass(i.disabledClass),e[a.params.watchOverflow&&a.isLocked?"addClass":"removeClass"](i.lockClass)))},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,a=this,i=a.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=E(i.nextEl),a.params.uniqueNavElements)&&"string"==typeof i.nextEl&&1<e.length&&1===a.$el.find(i.nextEl).length&&(e=a.$el.find(i.nextEl)),i.prevEl&&(t=E(i.prevEl),a.params.uniqueNavElements)&&"string"==typeof i.prevEl&&1<t.length&&1===a.$el.find(i.prevEl).length&&(t=a.$el.find(i.prevEl)),e&&0<e.length&&e.on("click",a.navigation.onNextClick),t&&0<t.length&&t.on("click",a.navigation.onPrevClick),R.extend(a.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,a=t.$nextEl,t=t.$prevEl;a&&a.length&&(a.off("click",e.navigation.onNextClick),a.removeClass(e.params.navigation.disabledClass)),t&&t.length&&(t.off("click",e.navigation.onPrevClick),t.removeClass(e.params.navigation.disabledClass))}},z={update:function(){var e=this,t=e.rtl,i=e.params.pagination;if(i.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var s,a=(e.virtual&&e.params.virtual.enabled?e.virtual:e).slides.length,n=e.pagination.$el,r=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((s=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(s-=a-2*e.loopedSlides),r-1<s&&(s-=r),s<0&&"bullets"!==e.params.paginationType&&(s=r+s)):s=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===i.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var o,l,d,p=e.pagination.bullets;if(i.dynamicBullets&&(e.pagination.bulletSize=p.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),n.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),1<i.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=s-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),o=s-e.pagination.dynamicBulletIndex,d=((l=o+(Math.min(p.length,i.dynamicMainBullets)-1))+o)/2),p.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),1<n.length)p.each(function(e,t){var t=E(t),a=t.index();a===s&&t.addClass(i.bulletActiveClass),i.dynamicBullets&&(o<=a&&a<=l&&t.addClass(i.bulletActiveClass+"-main"),a===o&&t.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),a===l)&&t.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")});else if(p.eq(s).addClass(i.bulletActiveClass),i.dynamicBullets){for(var a=p.eq(o),c=p.eq(l),u=o;u<=l;u+=1)p.eq(u).addClass(i.bulletActiveClass+"-main");a.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),c.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}i.dynamicBullets&&(a=Math.min(p.length,i.dynamicMainBullets+4),c=(e.pagination.bulletSize*a-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,a=t?"right":"left",p.css(e.isHorizontal()?a:"top",c+"px"))}"fraction"===i.type&&(n.find("."+i.currentClass).text(i.formatFractionCurrent(s+1)),n.find("."+i.totalClass).text(i.formatFractionTotal(r))),"progressbar"===i.type&&(d=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical",t=(s+1)/r,c=a=1,"horizontal"==d?a=t:c=t,n.find("."+i.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+a+") scaleY("+c+")").transition(e.params.speed)),"custom"===i.type&&i.renderCustom?(n.html(i.renderCustom(e,s+1,r)),e.emit("paginationRender",e,n[0])):e.emit("paginationUpdate",e,n[0]),n[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=(e.virtual&&e.params.virtual.enabled?e.virtual:e).slides.length,i=e.pagination.$el,s="";if("bullets"===t.type){for(var n=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,r=0;r<n;r+=1)t.renderBullet?s+=t.renderBullet.call(e,r,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(s),e.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(s=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(s)),"progressbar"===t.type&&(s=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(s)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e,t=this,a=t.params.pagination;a.el&&0!==(e=E(a.el)).length&&(t.params.uniqueNavElements&&"string"==typeof a.el&&1<e.length&&1===t.$el.find(a.el).length&&(e=t.$el.find(a.el)),"bullets"===a.type&&a.clickable&&e.addClass(a.clickableClass),e.addClass(a.modifierClass+a.type),"bullets"===a.type&&a.dynamicBullets&&(e.addClass(""+a.modifierClass+a.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,a.dynamicMainBullets<1)&&(a.dynamicMainBullets=1),"progressbar"===a.type&&a.progressbarOpposite&&e.addClass(a.progressbarOppositeClass),a.clickable&&e.on("click","."+a.bulletClass,function(e){e.preventDefault();e=E(this).index()*t.params.slidesPerGroup;t.params.loop&&(e+=t.loopedSlides),t.slideTo(e)}),R.extend(t.pagination,{$el:e,el:e[0]}))},destroy:function(){var e,t=this,a=t.params.pagination;a.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length&&((e=t.pagination.$el).removeClass(a.hiddenClass),e.removeClass(a.modifierClass+a.type),t.pagination.bullets&&t.pagination.bullets.removeClass(a.bulletActiveClass),a.clickable)&&e.off("click","."+a.bulletClass)}},k={setTranslate:function(){var e,t,a,i,s,n,r,o,l=this;l.params.scrollbar.el&&l.scrollbar.el&&(a=l.scrollbar,e=l.rtlTranslate,o=l.progress,t=a.dragSize,i=a.$dragEl,s=a.$el,n=l.params.scrollbar,o=((a=a.trackSize)-(r=t))*o,e?0<(o=-o)?(r=t-o,o=0):a<-o+t&&(r=a+o):o<0?(r=t+o,o=0):a<o+t&&(r=a-o),l.isHorizontal()?(q.transforms3d?i.transform("translate3d("+o+"px, 0, 0)"):i.transform("translateX("+o+"px)"),i[0].style.width=r+"px"):(q.transforms3d?i.transform("translate3d(0px, "+o+"px, 0)"):i.transform("translateY("+o+"px)"),i[0].style.height=r+"px"),n.hide)&&(clearTimeout(l.scrollbar.timeout),s[0].style.opacity=1,l.scrollbar.timeout=setTimeout(function(){s[0].style.opacity=0,s.transition(400)},1e3))},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e,t,a,i,s,n,r,o=this;o.params.scrollbar.el&&o.scrollbar.el&&(t=(e=o.scrollbar).$dragEl,a=e.$el,t[0].style.width="",t[0].style.height="",i=o.isHorizontal()?a[0].offsetWidth:a[0].offsetHeight,n=(s=o.size/o.virtualSize)*(i/o.size),r="auto"===o.params.scrollbar.dragSize?i*s:parseInt(o.params.scrollbar.dragSize,10),o.isHorizontal()?t[0].style.width=r+"px":t[0].style.height=r+"px",a[0].style.display=1<=s?"none":"",o.params.scrollbar.hide&&(a[0].style.opacity=0),R.extend(e,{trackSize:i,divider:s,moveDivider:n,dragSize:r}),e.$el[o.params.watchOverflow&&o.isLocked?"addClass":"removeClass"](o.params.scrollbar.lockClass))},setDragPosition:function(e){var t=this,a=t.scrollbar,i=t.rtlTranslate,s=a.$el,n=a.dragSize,a=a.trackSize,e=((t.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-s.offset()[t.isHorizontal()?"left":"top"]-n/2)/(a-n),s=(e=Math.max(Math.min(e,1),0),i&&(e=1-e),t.minTranslate()+(t.maxTranslate()-t.minTranslate())*e);t.updateProgress(s),t.setTranslate(s),t.updateActiveIndex(),t.updateSlidesClasses()},onDragStart:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,s=t.$wrapperEl,n=i.$el,r=i.$dragEl;t.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),n.transition(0),a.hide&&n.css("opacity",1),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,a=this.$wrapperEl,i=t.$el,s=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),a.transition(0),i.transition(0),s.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,a.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=R.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),a.snapOnRelease)&&t.slideToClosest()},enableDraggable:function(){var e,t,a,i,s,n=this;n.params.scrollbar.el&&(a=n.scrollbar,e=n.touchEventsTouch,t=n.touchEventsDesktop,s=n.params,a=a.$el[0],i=!(!q.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},s=!(!q.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1},q.touch?(a.addEventListener(e.start,n.scrollbar.onDragStart,i),a.addEventListener(e.move,n.scrollbar.onDragMove,i),a.addEventListener(e.end,n.scrollbar.onDragEnd,s)):(a.addEventListener(t.start,n.scrollbar.onDragStart,i),c.addEventListener(t.move,n.scrollbar.onDragMove,i),c.addEventListener(t.end,n.scrollbar.onDragEnd,s)))},disableDraggable:function(){var e,t,a,i,s,n=this;n.params.scrollbar.el&&(a=n.scrollbar,e=n.touchEventsTouch,t=n.touchEventsDesktop,s=n.params,a=a.$el[0],i=!(!q.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},s=!(!q.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1},q.touch?(a.removeEventListener(e.start,n.scrollbar.onDragStart,i),a.removeEventListener(e.move,n.scrollbar.onDragMove,i),a.removeEventListener(e.end,n.scrollbar.onDragEnd,s)):(a.removeEventListener(t.start,n.scrollbar.onDragStart,i),c.removeEventListener(t.move,n.scrollbar.onDragMove,i),c.removeEventListener(t.end,n.scrollbar.onDragEnd,s)))},init:function(){var e,t,a,i,s=this;s.params.scrollbar.el&&(e=s.scrollbar,i=s.$el,a=E((t=s.params.scrollbar).el),0===(i=(a=s.params.uniqueNavElements&&"string"==typeof t.el&&1<a.length&&1===i.find(t.el).length?i.find(t.el):a).find("."+s.params.scrollbar.dragClass)).length&&(i=E('<div class="'+s.params.scrollbar.dragClass+'"></div>'),a.append(i)),R.extend(e,{$el:a,el:a[0],$dragEl:i,dragEl:i[0]}),t.draggable)&&e.enableDraggable()},destroy:function(){this.scrollbar.disableDraggable()}},V={setTransform:function(e,t){var a=this.rtl,e=E(e),a=a?-1:1,i=e.attr("data-swiper-parallax")||"0",s=e.attr("data-swiper-parallax-x"),n=e.attr("data-swiper-parallax-y"),r=e.attr("data-swiper-parallax-scale"),o=e.attr("data-swiper-parallax-opacity");s||n?(s=s||"0",n=n||"0"):this.isHorizontal()?(s=i,n="0"):(n=i,s="0"),s=0<=s.indexOf("%")?parseInt(s,10)*t*a+"%":s*t*a+"px",n=0<=n.indexOf("%")?parseInt(n,10)*t+"%":n*t+"px",null!=o&&(i=o-(o-1)*(1-Math.abs(t)),e[0].style.opacity=i),null==r?e.transform("translate3d("+s+", "+n+", 0px)"):(a=r-(r-1)*(1-Math.abs(t)),e.transform("translate3d("+s+", "+n+", 0px) scale("+a+")"))},setTranslate:function(){var i=this,e=i.$el,t=i.slides,s=i.progress,n=i.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,s)}),t.each(function(e,t){var a=t.progress;1<i.params.slidesPerGroup&&"auto"!==i.params.slidesPerView&&(a+=Math.ceil(e/2)-s*(n.length-1)),a=Math.min(Math.max(a,-1),1),E(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,a)})})},setTransition:function(i){void 0===i&&(i=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){var t=E(t),a=parseInt(t.attr("data-swiper-parallax-duration"),10)||i;0===i&&(a=0),t.transition(a)})}},X={getDistanceBetweenTouches:function(e){var t,a,i;return e.targetTouches.length<2?1:(t=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,i=e.targetTouches[1].pageX,e=e.targetTouches[1].pageY,Math.sqrt(Math.pow(i-t,2)+Math.pow(e-a,2)))},onGestureStart:function(e){var t=this,a=t.params.zoom,i=t.zoom,s=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!q.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,s.scaleStart=X.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=E(e.target).closest(".swiper-slide"),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas"),s.$imageWrapEl=s.$imageEl.parent("."+a.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||a.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!q.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,i.scaleMove=X.getDistanceBetweenTouches(e)}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=q.gestures?e.scale*a.currentScale:i.scaleMove/i.scaleStart*a.currentScale,a.scale>i.maxRatio&&(a.scale=i.maxRatio-1+Math.pow(a.scale-i.maxRatio+1,.5)),a.scale<t.minRatio&&(a.scale=t.minRatio+1-Math.pow(t.minRatio-a.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!q.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!o.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,i.maxRatio),t.minRatio),i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale)&&(i.$slideEl=void 0)},onTouchStart:function(e){var t=this.zoom,a=t.gesture,t=t.image;a.$imageEl&&0!==a.$imageEl.length&&!t.isTouched&&(o.android&&e.preventDefault(),t.isTouched=!0,t.touchesStart.x=("touchstart"===e.type?e.targetTouches[0]:e).pageX,t.touchesStart.y=("touchstart"===e.type?e.targetTouches[0]:e).pageY)},onTouchMove:function(e){var t=this,a=t.zoom,i=a.gesture,s=a.image,n=a.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(t.allowClick=!1,s.isTouched)&&i.$slideEl){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=R.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=R.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),t.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var r=s.width*a.scale,o=s.height*a.scale;if(!(r<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x=("touchmove"===e.type?e.targetTouches[0]:e).pageX,s.touchesCurrent.y=("touchmove"===e.type?e.targetTouches[0]:e).pageY,!s.isMoved&&!a.isScaling){if(t.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),n.prevPositionX||(n.prevPositionX=s.touchesCurrent.x),n.prevPositionY||(n.prevPositionY=s.touchesCurrent.y),n.prevTime||(n.prevTime=Date.now()),n.x=(s.touchesCurrent.x-n.prevPositionX)/(Date.now()-n.prevTime)/2,n.y=(s.touchesCurrent.y-n.prevPositionY)/(Date.now()-n.prevTime)/2,Math.abs(s.touchesCurrent.x-n.prevPositionX)<2&&(n.x=0),Math.abs(s.touchesCurrent.y-n.prevPositionY)<2&&(n.y=0),n.prevPositionX=s.touchesCurrent.x,n.prevPositionY=s.touchesCurrent.y,n.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e,t,a,i,s=this.zoom,n=s.gesture,r=s.image,o=s.velocity;n.$imageEl&&0!==n.$imageEl.length&&(r.isTouched&&r.isMoved?(r.isTouched=!1,r.isMoved=!1,e=o.x*(a=300),e=r.currentX+e,t=o.y*(i=300),t=r.currentY+t,0!==o.x&&(a=Math.abs((e-r.currentX)/o.x)),0!==o.y&&(i=Math.abs((t-r.currentY)/o.y)),o=Math.max(a,i),r.currentX=e,r.currentY=t,a=r.width*s.scale,i=r.height*s.scale,r.minX=Math.min(n.slideWidth/2-a/2,0),r.maxX=-r.minX,r.minY=Math.min(n.slideHeight/2-i/2,0),r.maxY=-r.minY,r.currentX=Math.max(Math.min(r.currentX,r.maxX),r.minX),r.currentY=Math.max(Math.min(r.currentY,r.maxY),r.minY),n.$imageWrapEl.transition(o).transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")):(r.isTouched=!1,r.isMoved=!1))},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,a,i,s,n=this,r=n.zoom,o=n.params.zoom,l=r.gesture,d=r.image;l.$slideEl||(l.$slideEl=n.clickedSlide?E(n.clickedSlide):n.slides.eq(n.activeIndex),l.$imageEl=l.$slideEl.find("img, svg, canvas"),l.$imageWrapEl=l.$imageEl.parent("."+o.containerClass)),l.$imageEl&&0!==l.$imageEl.length&&(l.$slideEl.addClass(""+o.zoomedSlideClass),n=void 0===d.touchesStart.x&&e?(t=("touchend"===e.type?e.changedTouches[0]:e).pageX,("touchend"===e.type?e.changedTouches[0]:e).pageY):(t=d.touchesStart.x,d.touchesStart.y),r.scale=l.$imageWrapEl.attr("data-swiper-zoom")||o.maxRatio,r.currentScale=l.$imageWrapEl.attr("data-swiper-zoom")||o.maxRatio,e?(d=l.$slideEl[0].offsetWidth,o=l.$slideEl[0].offsetHeight,e=l.$slideEl.offset().left+d/2-t,t=l.$slideEl.offset().top+o/2-n,n=l.$imageEl[0].offsetWidth,s=l.$imageEl[0].offsetHeight,n=n*r.scale,s=s*r.scale,n=-(d=Math.min(d/2-n/2,0)),s=-(o=Math.min(o/2-s/2,0)),n<(a=(a=e*r.scale)<d?d:a)&&(a=n),s<(i=(i=t*r.scale)<o?o:i)&&(i=s)):i=a=0,l.$imageWrapEl.transition(300).transform("translate3d("+a+"px, "+i+"px,0)"),l.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+r.scale+")"))},out:function(){var e=this,t=e.zoom,a=e.params.zoom,i=t.gesture;i.$slideEl||(i.$slideEl=e.clickedSlide?E(e.clickedSlide):e.slides.eq(e.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+a.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+a.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e,t=this,a=t.zoom;a.enabled||(a.enabled=!0,e=!("touchstart"!==t.touchEvents.start||!q.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},q.gestures?(t.$wrapperEl.on("gesturestart",".swiper-slide",a.onGestureStart,e),t.$wrapperEl.on("gesturechange",".swiper-slide",a.onGestureChange,e),t.$wrapperEl.on("gestureend",".swiper-slide",a.onGestureEnd,e)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,".swiper-slide",a.onGestureStart,e),t.$wrapperEl.on(t.touchEvents.move,".swiper-slide",a.onGestureChange,e),t.$wrapperEl.on(t.touchEvents.end,".swiper-slide",a.onGestureEnd,e)),t.$wrapperEl.on(t.touchEvents.move,"."+t.params.zoom.containerClass,a.onTouchMove))},disable:function(){var e,t=this,a=t.zoom;a.enabled&&(t.zoom.enabled=!1,e=!("touchstart"!==t.touchEvents.start||!q.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},q.gestures?(t.$wrapperEl.off("gesturestart",".swiper-slide",a.onGestureStart,e),t.$wrapperEl.off("gesturechange",".swiper-slide",a.onGestureChange,e),t.$wrapperEl.off("gestureend",".swiper-slide",a.onGestureEnd,e)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,".swiper-slide",a.onGestureStart,e),t.$wrapperEl.off(t.touchEvents.move,".swiper-slide",a.onGestureChange,e),t.$wrapperEl.off(t.touchEvents.end,".swiper-slide",a.onGestureEnd,e)),t.$wrapperEl.off(t.touchEvents.move,"."+t.params.zoom.containerClass,a.onTouchMove))}},Y={loadInSlide:function(e,o){void 0===o&&(o=!0);var l,d=this,p=d.params.lazy;void 0!==e&&0!==d.slides.length&&(e=(l=d.virtual&&d.params.virtual.enabled?d.$wrapperEl.children("."+d.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):d.slides.eq(e)).find("."+p.elementClass+":not(."+p.loadedClass+"):not(."+p.loadingClass+")"),0!==(e=!l.hasClass(p.elementClass)||l.hasClass(p.loadedClass)||l.hasClass(p.loadingClass)?e:e.add(l[0])).length)&&e.each(function(e,t){var a=E(t),i=(a.addClass(p.loadingClass),a.attr("data-background")),s=a.attr("data-src"),n=a.attr("data-srcset"),r=a.attr("data-sizes");d.loadImage(a[0],s||i,n,r,!1,function(){var e,t;null==d||!d||d&&!d.params||d.destroyed||(i?(a.css("background-image",'url("'+i+'")'),a.removeAttr("data-background")):(n&&(a.attr("srcset",n),a.removeAttr("data-srcset")),r&&(a.attr("sizes",r),a.removeAttr("data-sizes")),s&&(a.attr("src",s),a.removeAttr("data-src"))),a.addClass(p.loadedClass).removeClass(p.loadingClass),l.find("."+p.preloaderClass).remove(),d.params.loop&&o&&(e=l.attr("data-swiper-slide-index"),l.hasClass(d.params.slideDuplicateClass)?(t=d.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+d.params.slideDuplicateClass+")"),d.lazy.loadInSlide(t.index(),!1)):(t=d.$wrapperEl.children("."+d.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]'),d.lazy.loadInSlide(t.index(),!1))),d.emit("lazyImageReady",l[0],a[0]))}),d.emit("lazyImageLoad",l[0],a[0])})},load:function(){var a=this,t=a.$wrapperEl,i=a.params,s=a.slides,e=a.activeIndex,n=a.virtual&&i.virtual.enabled,r=i.lazy,o=i.slidesPerView;function l(e){if(n){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return 1}else if(s[e])return 1}function d(e){return n?E(e).attr("data-swiper-slide-index"):E(e).index()}if("auto"===o&&(o=0),a.lazy.initialImageLoaded||(a.lazy.initialImageLoaded=!0),a.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each(function(e,t){t=n?E(t).attr("data-swiper-slide-index"):E(t).index();a.lazy.loadInSlide(t)});else if(1<o)for(var p=e;p<e+o;p+=1)l(p)&&a.lazy.loadInSlide(p);else a.lazy.loadInSlide(e);if(r.loadPrevNext)if(1<o||r.loadPrevNextAmount&&1<r.loadPrevNextAmount){for(var r=r.loadPrevNextAmount,c=o,u=Math.min(e+c+Math.max(r,c),s.length),c=Math.max(e-Math.max(c,r),0),h=e+o;h<u;h+=1)l(h)&&a.lazy.loadInSlide(h);for(var m=c;m<e;m+=1)l(m)&&a.lazy.loadInSlide(m)}else{r=t.children("."+i.slideNextClass),c=(0<r.length&&a.lazy.loadInSlide(d(r)),t.children("."+i.slidePrevClass));0<c.length&&a.lazy.loadInSlide(d(c))}}},P={LinearSpline:function(e,t){var a,i,s,n,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=((e,t)=>{for(i=-1,a=e.length;1<a-i;)e[s=a+i>>1]<=t?i=s:a=s;return a})(this.x,e),n=r-1,(e-this.x[n])*(this.y[r]-this.y[n])/(this.x[r]-this.x[n])+this.y[n]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new P.LinearSpline(t.slidesGrid,e.slidesGrid):new P.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var a,i,s=this,n=s.controller.control;function r(e){var t=s.rtlTranslate?-s.translate:s.translate;"slide"===s.params.controller.by&&(s.controller.getInterpolateFunction(e),i=-s.controller.spline.interpolate(-t)),i&&"container"!==s.params.controller.by||(a=(e.maxTranslate()-e.minTranslate())/(s.maxTranslate()-s.minTranslate()),i=(t-s.minTranslate())*a+e.minTranslate()),s.params.controller.inverse&&(i=e.maxTranslate()-i),e.updateProgress(i),e.setTranslate(i,s),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(n))for(var o=0;o<n.length;o+=1)n[o]!==t&&n[o]instanceof h&&r(n[o]);else n instanceof h&&t!==n&&r(n)},setTransition:function(t,e){var a,i=this,s=i.controller.control;function n(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&R.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){s&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())}))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==e&&s[a]instanceof h&&n(s[a]);else s instanceof h&&e!==s&&n(s)}},W={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,a=t.params.a11y;13===e.keyCode&&(e=E(e.target),t.navigation&&t.navigation.$nextEl&&e.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(a.lastSlideMessage):t.a11y.notify(a.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&e.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(a.firstSlideMessage):t.a11y.notify(a.prevSlideMessage)),t.pagination)&&e.is("."+t.params.pagination.bulletClass)&&e[0].click()},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e,t,a=this;a.params.loop||(e=(t=a.navigation).$nextEl,(t=t.$prevEl)&&0<t.length&&(a.isBeginning?a.a11y.disableEl(t):a.a11y.enableEl(t)),e&&0<e.length&&(a.isEnd?a.a11y.disableEl(e):a.a11y.enableEl(e)))},updatePagination:function(){var a=this,i=a.params.a11y;a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.bullets.each(function(e,t){t=E(t);a.a11y.makeElFocusable(t),a.a11y.addElRole(t,"button"),a.a11y.addElLabel(t,i.paginationBulletMessage.replace(/{{index}}/,t.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,a,i=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(a=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,i.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),a&&(e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,i.prevSlideMessage),a.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,a=this;a.a11y.liveRegion&&0<a.a11y.liveRegion.length&&a.a11y.liveRegion.remove(),a.navigation&&a.navigation.$nextEl&&(e=a.navigation.$nextEl),a.navigation&&a.navigation.$prevEl&&(t=a.navigation.$prevEl),e&&e.off("keydown",a.a11y.onEnterKey),t&&t.off("keydown",a.a11y.onEnterKey),a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.$el.off("keydown","."+a.params.pagination.bulletClass,a.a11y.onEnterKey)}},$={init:function(){var e,t=this;t.params.history&&(F.history&&F.history.pushState?((e=t.history).initialized=!0,e.paths=$.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,t.params.runCallbacksOnInit),t.params.history.replaceState||F.addEventListener("popstate",t.history.setHistoryPopState))):(t.params.history.enabled=!1,t.params.hashNavigation.enabled=!0))},destroy:function(){this.params.history.replaceState||F.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=$.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=F.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){this.history.initialized&&this.params.history.enabled&&(t=this.slides.eq(t),t=$.slugify(t.attr("data-history")),F.location.pathname.includes(e)||(t=e+"/"+t),(e=F.history.state)&&e.value===t||(this.params.history.replaceState?F.history.replaceState({value:t},null,t):F.history.pushState({value:t},null,t)))},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,a){var i=this;if(t)for(var s=0,n=i.slides.length;s<n;s+=1){var r=i.slides.eq(s);$.slugify(r.attr("data-history"))!==t||r.hasClass(i.params.slideDuplicateClass)||(r=r.index(),i.slideTo(r,e,a))}else i.slideTo(0,e,a)}},I={onHashCange:function(){var e=this,t=c.location.hash.replace("#","");t!==e.slides.eq(e.activeIndex).attr("data-hash")&&void 0!==(t=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+t+'"]').index())&&e.slideTo(t)},setHash:function(){var e=this;e.hashNavigation.initialized&&e.params.hashNavigation.enabled&&(e.params.hashNavigation.replaceState&&F.history&&F.history.replaceState?F.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||""):(e=(e=e.slides.eq(e.activeIndex)).attr("data-hash")||e.attr("data-history"),c.location.hash=e||""))},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var t=c.location.hash.replace("#","");if(t)for(var a=0,i=e.slides.length;a<i;a+=1){var s=e.slides.eq(a);(s.attr("data-hash")||s.attr("data-history"))!==t||s.hasClass(e.params.slideDuplicateClass)||(s=s.index(),e.slideTo(s,0,e.params.runCallbacksOnInit,!0))}e.params.hashNavigation.watchState&&E(F).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&E(F).off("hashchange",this.hashNavigation.onHashCange)}},L={run:function(){var e=this,t=e.slides.eq(e.activeIndex),a=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(a=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=R.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},a)},start:function(){var e=this;return void 0===e.autoplay.timeout&&!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0)},stop:function(){var e=this;return!!e.autoplay.running&&void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&!t.autoplay.paused&&(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run()))}},j={setTranslate:function(){for(var e=this,t=e.slides,a=0;a<t.length;a+=1){var i=e.slides.eq(a),s=-i[0].swiperSlideOffset,n=(e.params.virtualTranslate||(s-=e.translate),0),r=(e.isHorizontal()||(n=s,s=0),e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0));i.css({opacity:r}).transform("translate3d("+s+"px, "+n+"px, 0px)")}},setTransition:function(e){var a,i=this,t=i.slides,s=i.$wrapperEl;t.transition(e),i.params.virtualTranslate&&0!==e&&(a=!1,t.transitionEnd(function(){if(!a&&i&&!i.destroyed){a=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)s.trigger(e[t])}}))}},U={setTranslate:function(){var e,t=this,a=t.$el,i=t.$wrapperEl,s=t.slides,n=t.width,r=t.height,o=t.rtlTranslate,l=t.size,d=t.params.cubeEffect,p=t.isHorizontal(),c=t.virtual&&t.params.virtual.enabled,u=0;d.shadow&&(p?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=E('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:n+"px"})):0===(e=a.find(".swiper-cube-shadow")).length&&(e=E('<div class="swiper-cube-shadow"></div>'),a.append(e)));for(var h,m=0;m<s.length;m+=1){var v=s.eq(m),f=m,g=90*(f=c?parseInt(v.attr("data-swiper-slide-index"),10):f),b=Math.floor(g/360),w=(o&&(g=-g,b=Math.floor(-g/360)),Math.max(Math.min(v[0].progress,1),-1)),y=0,x=0,T=0,b=(f%4==0?(y=4*-b*l,T=0):(f-1)%4==0?(y=0,T=4*-b*l):(f-2)%4==0?(y=l+4*b*l,T=l):(f-3)%4==0&&(y=-l,T=3*l+4*l*b),o&&(y=-y),p||(x=y,y=0),"rotateX("+(p?0:-g)+"deg) rotateY("+(p?g:0)+"deg) translate3d("+y+"px, "+x+"px, "+T+"px)");w<=1&&-1<w&&(u=90*f+90*w,o)&&(u=90*-f-90*w),v.transform(b),d.slideShadows&&(g=p?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),y=p?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom"),0===g.length&&(g=E('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),v.append(g)),0===y.length&&(y=E('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),v.append(y)),g.length&&(g[0].style.opacity=Math.max(-w,0)),y.length)&&(y[0].style.opacity=Math.max(w,0))}i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow&&(p?e.transform("translate3d(0px, "+(n/2+d.shadowOffset)+"px, "+-n/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")"):(a=Math.abs(u)-90*Math.floor(Math.abs(u)/90),n=1.5-(Math.sin(2*a*Math.PI/360)/2+Math.cos(2*a*Math.PI/360)/2),a=d.shadowScale,n=d.shadowScale/n,h=d.shadowOffset,e.transform("scale3d("+a+", 1, "+n+") translate3d(0px, "+(r/2+h)+"px, "+-r/2/n+"px) rotateX(-90deg)"))),i.transform("translate3d(0px,0,"+(S.isSafari||S.isUiWebView?-l/2:0)+"px) rotateX("+(t.isHorizontal()?0:u)+"deg) rotateY("+(t.isHorizontal()?-u:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},K={setTranslate:function(){for(var e=this,t=e.slides,a=e.rtlTranslate,i=0;i<t.length;i+=1){var s,n,r=t.eq(i),o=r[0].progress,l=-180*(o=e.params.flipEffect.limitRotation?Math.max(Math.min(r[0].progress,1),-1):o),d=0,p=-r[0].swiperSlideOffset,c=0;e.isHorizontal()?a&&(l=-l):(c=p,d=-l,l=p=0),r[0].style.zIndex=-Math.abs(Math.round(o))+t.length,e.params.flipEffect.slideShadows&&(s=e.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),n=e.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom"),0===s.length&&(s=E('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),r.append(s)),0===n.length&&(n=E('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),r.append(n)),s.length&&(s[0].style.opacity=Math.max(-o,0)),n.length)&&(n[0].style.opacity=Math.max(o,0)),r.transform("translate3d("+p+"px, "+c+"px, 0px) rotateX("+d+"deg) rotateY("+l+"deg)")}},setTransition:function(e){var a,i=this,t=i.slides,s=i.activeIndex,n=i.$wrapperEl;t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),i.params.virtualTranslate&&0!==e&&(a=!1,t.eq(s).transitionEnd(function(){if(!a&&i&&!i.destroyed){a=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)n.trigger(e[t])}}))}},_={setTranslate:function(){for(var e=this,t=e.width,a=e.height,i=e.slides,s=e.$wrapperEl,n=e.slidesSizesGrid,r=e.params.coverflowEffect,o=e.isHorizontal(),e=e.translate,l=o?t/2-e:a/2-e,d=o?r.rotate:-r.rotate,p=r.depth,c=0,u=i.length;c<u;c+=1){var h=i.eq(c),m=n[c],m=(l-h[0].swiperSlideOffset-m/2)/m*r.modifier,v=o?d*m:0,f=o?0:d*m,g=-p*Math.abs(m),b=o?0:r.stretch*m,w=o?r.stretch*m:0,w=(Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),"translate3d("+w+"px,"+b+"px,"+g+"px)  rotateX("+(f=Math.abs(f)<.001?0:f)+"deg) rotateY("+v+"deg)");h.transform(w),h[0].style.zIndex=1-Math.abs(Math.round(m)),r.slideShadows&&(b=o?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),g=o?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom"),0===b.length&&(b=E('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),h.append(b)),0===g.length&&(g=E('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),h.append(g)),b.length&&(b[0].style.opacity=0<m?m:0),g.length)&&(g[0].style.opacity=0<-m?-m:0)}(q.pointerEvents||q.prefixedPointerEvents)&&(s[0].style.perspectiveOrigin=l+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},Z={init:function(){var e=this,t=e.params.thumbs,a=e.constructor;t.swiper instanceof a?(e.thumbs.swiper=t.swiper,R.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),R.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):R.isObject(t.swiper)&&(e.thumbs.swiper=new a(R.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e,t,a,i=this,s=i.thumbs.swiper;s&&(e=s.clickedIndex,(a=s.clickedSlide)&&E(a).hasClass(i.params.thumbs.slideThumbActiveClass)||null==e||(a=s.params.loop?parseInt(E(s.clickedSlide).attr("data-swiper-slide-index"),10):e,i.params.loop&&(s=i.activeIndex,i.slides.eq(s).hasClass(i.params.slideDuplicateClass)&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,s=i.activeIndex),e=i.slides.eq(s).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),t=i.slides.eq(s).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),a=void 0===e||void 0!==t&&t-s<s-e?t:e),i.slideTo(a)))},update:function(e){var t=this,a=t.thumbs.swiper;if(a){var i,s,n,r="auto"===a.params.slidesPerView?a.slidesPerViewDynamic():a.params.slidesPerView,o=(t.realIndex!==a.realIndex&&(i=a.activeIndex,n=a.params.loop?(a.slides.eq(i).hasClass(a.params.slideDuplicateClass)&&(a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft,i=a.activeIndex),s=a.slides.eq(i).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),n=a.slides.eq(i).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),void 0===s?n:void 0===n?s:n-i==i-s?i:n-i<i-s?n:s):t.realIndex,a.visibleSlidesIndexes.indexOf(n)<0)&&(a.params.centeredSlides?n=i<n?n-Math.floor(r/2)+1:n+Math.floor(r/2)-1:i<n&&(n=n-r+1),a.slideTo(n,e?0:void 0)),1),l=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(o=t.params.slidesPerView),a.slides.removeClass(l),a.params.loop)for(var d=0;d<o;d+=1)a.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+d)+'"]').addClass(l);else for(var p=0;p<o;p+=1)a.slides.eq(t.realIndex+p).addClass(l)}}},O=[m,v,f,g,w,x,t,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var e=this;R.extend(e,{mousewheel:{enabled:!1,enable:C.enable.bind(e),disable:C.disable.bind(e),handle:C.handle.bind(e),handleMouseEnter:C.handleMouseEnter.bind(e),handleMouseLeave:C.handleMouseLeave.bind(e),lastScrollTime:R.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;R.extend(e,{navigation:{init:M.init.bind(e),update:M.update.bind(e),destroy:M.destroy.bind(e),onNextClick:M.onNextClick.bind(e),onPrevClick:M.onPrevClick.bind(e)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,a=this,i=a.navigation,s=i.$nextEl,i=i.$prevEl;!a.params.navigation.hideOnClick||E(e.target).is(i)||E(e.target).is(s)||(s?t=s.hasClass(a.params.navigation.hiddenClass):i&&(t=i.hasClass(a.params.navigation.hiddenClass)),!0===t?a.emit("navigationShow",a):a.emit("navigationHide",a),s&&s.toggleClass(a.params.navigation.hiddenClass),i&&i.toggleClass(a.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;R.extend(e,{pagination:{init:z.init.bind(e),render:z.render.bind(e),update:z.update.bind(e),destroy:z.destroy.bind(e),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){!this.params.loop&&void 0!==this.snapIndex||this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var t=this;t.params.pagination.el&&t.params.pagination.hideOnClick&&0<t.pagination.$el.length&&!E(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;R.extend(e,{scrollbar:{init:k.init.bind(e),destroy:k.destroy.bind(e),updateSize:k.updateSize.bind(e),setTranslate:k.setTranslate.bind(e),setTransition:k.setTransition.bind(e),enableDraggable:k.enableDraggable.bind(e),disableDraggable:k.disableDraggable.bind(e),setDragPosition:k.setDragPosition.bind(e),onDragStart:k.onDragStart.bind(e),onDragMove:k.onDragMove.bind(e),onDragEnd:k.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){R.extend(this,{parallax:{setTransform:V.setTransform.bind(this),setTranslate:V.setTranslate.bind(this),setTransition:V.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var i=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},s=("onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(e){t[e]=X[e].bind(i)}),R.extend(i,{zoom:t}),1);Object.defineProperty(i.zoom,"scale",{get:function(){return s},set:function(e){var t,a;s!==e&&(t=i.zoom.gesture.$imageEl?i.zoom.gesture.$imageEl[0]:void 0,a=i.zoom.gesture.$slideEl?i.zoom.gesture.$slideEl[0]:void 0,i.emit("zoomChange",e,t,a)),s=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){R.extend(this,{lazy:{initialImageLoaded:!1,load:Y.load.bind(this),loadInSlide:Y.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var e=this;e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var e=this;R.extend(e,{controller:{control:e.params.controller.control,getInterpolateFunction:P.getInterpolateFunction.bind(e),setTranslate:P.setTranslate.bind(e),setTransition:P.setTransition.bind(e)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;R.extend(t,{a11y:{liveRegion:E('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(W).forEach(function(e){t.a11y[e]=W[e].bind(t)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var e=this;R.extend(e,{history:{init:$.init.bind(e),setHistory:$.setHistory.bind(e),setHistoryPopState:$.setHistoryPopState.bind(e),scrollToSlide:$.scrollToSlide.bind(e),destroy:$.destroy.bind(e)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var e=this;R.extend(e,{hashNavigation:{initialized:!1,init:I.init.bind(e),destroy:I.destroy.bind(e),setHash:I.setHash.bind(e),onHashCange:I.onHashCange.bind(e)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;R.extend(t,{autoplay:{running:!1,paused:!1,run:L.run.bind(t),start:L.start.bind(t),stop:L.stop.bind(t),pause:L.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){R.extend(this,{fadeEffect:{setTranslate:j.setTranslate.bind(this),setTransition:j.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"fade"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"fade"),R.extend(t.params,e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0}),R.extend(t.originalParams,e))},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){R.extend(this,{cubeEffect:{setTranslate:U.setTranslate.bind(this),setTransition:U.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"cube"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d"),R.extend(t.params,e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0}),R.extend(t.originalParams,e))},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){R.extend(this,{flipEffect:{setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"flip"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d"),R.extend(t.params,e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0}),R.extend(t.originalParams,e))},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){R.extend(this,{coverflowEffect:{setTranslate:_.setTranslate.bind(this),setTransition:_.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){R.extend(this,{thumbs:{swiper:null,init:Z.init.bind(this),update:Z.update.bind(this),onThumbClick:Z.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===h.use&&(h.use=h.Class.use,h.installModule=h.Class.installModule),h.use(O),h});
//# sourceMappingURL=maps/backend.min.js.map
